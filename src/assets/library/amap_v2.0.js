(function(config){!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).AMap=factory()}(this,function(){"use strict";var shared,worker,AMap;function define(_,chunk){if(shared)if(worker){var workerBundleString='var sharedChunk = {key:"'+config[0]+'",movingDraw:'+Boolean(window.movingDraw)+"}; ("+shared+")(sharedChunk); ("+worker+")(sharedChunk);",sharedChunk={key:config[0],movingDraw:window.movingDraw};shared(sharedChunk);var factory=chunk(sharedChunk),workerUrl="undefined"!=typeof URL?window.URL.createObjectURL(new Blob([workerBundleString],{type:"text/javascript"})):"";(AMap=factory(config)).getConfig().workerUrl=workerUrl}else worker=chunk;else shared=chunk}define(["exports"],function(exports){var Status,a;a=Status=Status||{},a.loading="loading",a.loaded="loaded";var Queue=(b.prototype.add=function(t,e){for(var r=t.length,i=0,n=function(){(i+=1)===r&&e&&e()},a=0,o=t;a<o.length;a++){var s=o[a];this._add(s,n)}},b.prototype.has=function(t){var e=this.tT[t];return e&&e.status===Status.loaded},b.prototype.finish=function(t){var e=this.tT[t];e.status=Status.loaded;for(var r=0,i=e.pI;r<i.length;r++){var n=i[r];n&&n()}},b.prototype._add=function(t,e){var r=this.tT[t];r?r.status===Status.loading?r.pI.push(e):e():this.tT[t]={pI:[e],status:Status.loading}},b);function b(){this.tT={}}var M={nS:function(clsName,clsText){try{eval(clsText)}catch(t){throw t}},eS:{iS:"1589530944447"}},Module=M,extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function r(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function __spreadArrays(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var i=Array(t),n=0;for(e=0;e<r;e++)for(var a=arguments[e],o=0,s=a.length;o<s;o++,n++)i[n]=a[o];return i}function isBrowser(){return"undefined"!=typeof window&&"undefined"!=typeof document}function isWorkerEnv(){try{return document,!1}catch(t){return!0}}exports.Ln=function(){return exports.Ln=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},exports.Ln.apply(this,arguments)};var isRetina=!1,isMobile=!1,android=!1,webkit=!1,mac=!1,touch=!1,Browser={touch:touch,mac:mac,Ue:isRetina,webkit:webkit,$e:isMobile,scale:1,android:android,DW:isWorkerEnv()};if(isBrowser()){var ua_1=navigator.userAgent.toLowerCase(),win_1=window,doc=document,docE=doc.documentElement,uaHas=function(t){return-1!==ua_1.indexOf(t)},numberRegex_1=/([a-z0-9]*\d+[a-z0-9]*)/,getGraphicCardShortStr_1=function(t){if(!t)return null;var e=null,r=(t=t.toLowerCase()).match(/angle \((.*)\)/);if(r&&(t=(t=r[1]).replace(/\s*direct3d.*$/,"")),0<=(t=t.replace(/\s*\([^\)]*wddm[^\)]*\)/,"")).indexOf("intel"))return e=["Intel"],0<=t.indexOf("mobile")&&e.push("Mobile"),(0<=t.indexOf("gma")||0<=t.indexOf("graphics media accelerator"))&&e.push("GMA"),0<=t.indexOf("haswell")?e.push("Haswell"):0<=t.indexOf("ivy")?e.push("HD 4000"):0<=t.indexOf("sandy")?e.push("HD 3000"):0<=t.indexOf("ironlake")?e.push("HD"):(0<=t.indexOf("hd")&&e.push("HD"),(i=t.match(numberRegex_1))&&e.push(i[1].toUpperCase())),e.join(" ");if(0<=t.indexOf("nvidia")||0<=t.indexOf("quadro")||0<=t.indexOf("geforce")||0<=t.indexOf("nvs"))return e=["nVidia"],0<=t.indexOf("geforce")&&e.push("geForce"),0<=t.indexOf("quadro")&&e.push("Quadro"),0<=t.indexOf("nvs")&&e.push("NVS"),t.match(/\bion\b/)&&e.push("ION"),t.match(/gtx\b/)?e.push("GTX"):t.match(/gts\b/)?e.push("GTS"):t.match(/gt\b/)?e.push("GT"):t.match(/gs\b/)?e.push("GS"):t.match(/ge\b/)?e.push("GE"):t.match(/fx\b/)&&e.push("FX"),(i=t.match(numberRegex_1))&&e.push(i[1].toUpperCase().replace("GS","")),0<=t.indexOf("titan")?e.push("TITAN"):0<=t.indexOf("ti")&&e.push("Ti"),e.join(" ");if(0<=t.indexOf("amd")||0<=t.indexOf("ati")||0<=t.indexOf("radeon")||0<=t.indexOf("firegl")||0<=t.indexOf("firepro")){e=["AMD"],0<=t.indexOf("mobil")&&e.push("Mobility");var i,n=t.indexOf("radeon");return 0<=n&&e.push("Radeon"),0<=t.indexOf("firepro")?e.push("FirePro"):0<=t.indexOf("firegl")&&e.push("FireGL"),0<=t.indexOf("hd")&&e.push("HD"),0<=n&&(t=t.substring(n)),(i=t.match(numberRegex_1))&&e.push(i[1].toUpperCase().replace("HD","")),e.join(" ")}return t.substring(0,100)},blackGraphicCard_1="microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";"),ie="ActiveXObject"in win_1,retina=0!=window.detectRetina&&("devicePixelRatio"in win_1&&1<win_1.devicePixelRatio||ie&&"matchMedia"in win_1&&win_1.matchMedia("(min-resolution:144dpi)")&&win_1.matchMedia("(min-resolution:144dpi)").matches),windows=uaHas("windows nt"),windowslt7=-1!==ua_1.search(/windows nt [1-5]\./),windowsXP=-1!==ua_1.search(/windows nt 5\.[12]/),windows10=uaHas("windows nt 10"),winPhone=uaHas("windows phone"),mac_1=uaHas("macintosh"),mb2345Browser=uaHas("Mb2345Browser"),iPad=uaHas("ipad;")||uaHas("ipad "),iTouch=uaHas("ipod touch;"),iPhone=uaHas("iphone;")||uaHas("iphone "),ios=iPhone||iPad||iTouch,ioslt7=ios&&-1!==ua_1.search(/ os [456]_/),ioslt9=ios&&-1!==ua_1.search(/ os [4-8]_/),ios78=ios&&-1!==ua_1.search(/ os [78]_/),ios8=ios&&uaHas("os 8_"),ios10=ios&&uaHas("os 10_"),android_1=uaHas("android"),androidVersion=0;android_1&&(androidVersion=parseInt(ua_1.split("android")[1])||0);var android23=android_1&&androidVersion<4,android5plus=android_1&&5<=androidVersion,android44plus=android5plus||-1!==ua_1.search(/android 4.4/),plat_1=android_1?"android":ios?"ios":windows?"windows":mac_1?"mac":"other",ie6=ie&&!win_1.XMLHttpRequest,ie7=ie&&!doc.querySelector,ielt9=ie&&!doc.addEventListener,ie9=ie&&uaHas("msie 9"),ie10=ie&&uaHas("msie 10"),ie11=ie&&uaHas("rv:11"),ielt10=ielt9||ie9,edge=uaHas("edge"),QtWeb=uaHas("qtweb"),uc=uaHas("ucbrowser"),gaodeCoords=uaHas("alipay")||android_1&&uc,xiaomi=uaHas("miuibrowser"),wechat=uaHas("micromessenger"),dingding=uaHas("dingtalk"),qq=uaHas("mqqbrowser"),baidu=uaHas("baidubrowser"),crios=uaHas("crios/"),chrome=uaHas("chrome/"),chromium=(chrome||crios)&&uaHas("chromium"),chrome30plus=!chromium&&(chrome&&30<parseInt(ua_1.split("chrome/")[1])||crios&&30<parseInt(ua_1.split("crios/")[1])),firefox=uaHas("firefox"),firefox27plus=firefox&&27<parseInt(ua_1.split("firefox/")[1]),safari_1=(mac_1||ios)&&uaHas("safari")&&uaHas("version/"),safari7plus=safari_1&&7<parseInt(ua_1.split("version/")[1]),aliApp=ios&&uaHas("aliapp"),mobile_1=android_1||ios||winPhone||uaHas("mobile"),touchDev="ontouchstart"in doc,msPointer=win_1.navigator&&win_1.navigator.msPointerEnabled&&!!win_1.navigator.msMaxTouchPoints,pointer=win_1.navigator&&!!win_1.navigator.maxTouchPoints,pointerDev=!touchDev&&(pointer||msPointer),touch_1=touchDev||pointerDev,getScale=function(){if(!mobile_1)return win_1.devicePixelRatio||1;var t=document.getElementsByTagName("meta");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;t=window.parent.document.getElementsByTagName("meta")}catch(t){return 1}for(var e=t.length-1;0<=e;--e)if("viewport"===t[e].name){var n,a,r=t[e].content,i=void 0;return-1!==r.indexOf("initial-scale")&&(i=parseFloat(r.split("initial-scale=")[1])),n=-1!==r.indexOf("minimum-scale")?parseFloat(r.split("minimum-scale=")[1]):0,a=-1!==r.indexOf("maximum-scale")?parseFloat(r.split("maximum-scale=")[1]):1/0,i?n<=a?a<i?a:i<n?n:i:(console&&console.log&&console.log("viewport参数不合法"),null):n<=a?1<=n?1:Math.min(a,1):(console&&console.log&&console.log("viewport参数不合法"),null)}},viewportScale=getScale(),needFitRetina_1=retina&&(!mobile_1||!!viewportScale&&1<=viewportScale),ie3d=ie&&"transition"in docE.style,isSvg=!!doc.createElementNS&&!!doc.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,canvas_1=doc.createElement("canvas"),isCanvas_1=!(!canvas_1||!canvas_1.getContext),UrlLib=window.URL||window.webkitURL,DataUrl2Blob=!1,isWorker_1=!0!==window.disableWorker&&!ie&&!(uc&&android_1&&!chrome30plus)&&window.Worker&&UrlLib&&UrlLib.createObjectURL&&window.Blob,webglContextName_1="",graphicCard_1="",maxRenderSize_1=0,needAntialias=0!=window.higtQualityRender||!retina,movingDraw=window.movingDraw,webglParams_1=window.forceWebGL?{alpha:!0,antialias:needAntialias,depth:!0}:{alpha:!0,antialias:needAntialias,depth:!0,preserveDrawingBuffer:!0,stencil:!0},checkWebgl=function(){if(!isCanvas_1||!isWorker_1)return!1;for(var t=["webgl","experimental-webgl","moz-webgl"],e=null,r=0;r<t.length;r+=1){try{var i=webglParams_1;e=canvas_1.getContext(t[r],i)}catch(t){}if(e){if(e.drawingBufferWidth!==canvas_1.width||e.drawingBufferHeight!==canvas_1.height)return!1;if(!e.getShaderPrecisionFormat||!e.getParameter||!e.getExtension)return!1;maxRenderSize_1=e.getParameter(e.MAX_RENDERBUFFER_SIZE);var n=e.getParameter(e.MAX_VIEWPORT_DIMS);if(!n)return!1;maxRenderSize_1=Math.min(maxRenderSize_1,n[0],n[1]),safari_1&&"mac"===plat_1&&(maxRenderSize_1=Math.min(maxRenderSize_1,4096));var a=Math.max(screen.width,screen.height);if(needFitRetina_1&&(a*=Math.min(2,window.devicePixelRatio||1)),maxRenderSize_1<a)return!1;if(e.getShaderPrecisionFormat(35632,36338).precision<23||e.getShaderPrecisionFormat(35633,36338).precision<23)return!1;graphicCard_1=e.getExtension("WEBGL_debug_renderer_info")?e.getParameter(37446):null;var o=getGraphicCardShortStr_1(graphicCard_1);return(!o||-1===blackGraphicCard_1.indexOf(o))&&(webglContextName_1=t[r],!0)}}return!1},canWebGL=checkWebgl(),enableVector=void 0===config[8]||config[8],byWebgl=window.Uint8Array&&enableVector&&!window.forbidenWebGL&&canWebGL&&(chrome30plus||firefox27plus||safari7plus||edge||wechat||dingding)&&"other"!==plat_1,baseRender=byWebgl?"w":"d",webkit_1=uaHas("webkit"),webkit3d="WebKitCSSMatrix"in win_1&&"m11"in new window.WebKitCSSMatrix,gecko3d="MozPerspective"in docE.style,opera3d="OTransition"in docE.style,any3d=ie3d||webkit3d||gecko3d||opera3d,enableLabelImage=!1,vdataVersion=void 0!==config[12]?config[12]:null,localStore=!0;try{if(void 0===win_1.localStorage)localStore=!1;else{var tmpData=(new Date).getTime()+"";win_1.localStorage.setItem("_test",tmpData),win_1.localStorage.getItem("_test")!==tmpData&&(localStore=!1),win_1.localStorage.removeItem("_test")}}catch(t){localStore=!1}var getContext=function(t,e){return t.getContext(webglContextName_1,webglParams_1)},chromeversion=parseInt(ua_1.split("chrome/")[1]);Browser={iPad:iPad,iPhone:iPhone,size:iPhone?100:android_1?200:500,mac:mac_1,windows:windows,ios:ios,uT:ios10,android:android_1,android23:android23,cT:gaodeCoords,plat:plat_1,baidu:baidu,qq:qq,safari:safari_1,wechat:wechat,ie:ie,ie6:ie6,ie7:ie7,ie9:ie9,ie10:ie10,ielt9:ielt9,fT:ielt10,ie11:ie11,edge:edge,hT:ie&&!ie11,lT:mb2345Browser,RL:localStore,vT:vdataVersion,geolocation:mobile_1||ie&&!ielt9||edge,SL:uc,uc:uc&&!chrome,chrome:chrome,gT:!0,firefox:firefox,$e:mobile_1,mobileWebkit:mobile_1&&webkit_1,mobileWebkit3d:mobile_1&&webkit3d,mobileOpera:mobile_1&&win_1.opera,Ue:retina,bT:viewportScale,Mr:needFitRetina_1,touch:touch_1,msPointer:msPointer,pointer:pointer,yT:pointerDev,pT:chrome&&57<=chromeversion,mT:!mobile_1&&chrome&&64<=chromeversion,webkit:webkit_1,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,opera3d:opera3d,any3d:any3d,isSvg:isSvg,isCanvas:isCanvas_1,isWorker:isWorker_1,TT:enableLabelImage,isWebGL:byWebgl,AT:webglContextName_1,xT:webglParams_1,ST:graphicCard_1,wT:maxRenderSize_1,MT:DataUrl2Blob,movingDraw:movingDraw,baseRender:enableVector?baseRender:"d",scale:retina?2:1,getContext:getContext}}var Support=Browser,projections={},Projection=(sa.prototype.moveWithPixel=function(t,e,r){var i=this.getResolution(r),n=e[0]*i,a=e[1]*i,o=this.project(t[0],t[1]);return this.unproject(o[0]+n,o[1]+a)},sa.prototype.moveWithPos=function(t,e){var r=this.project(t[0],t[1]),i=[r[0]+e[0],r[1]+e[1]];return this.unproject(i[0],i[1])},sa);function sa(t,e,r,i){this.project=e,this.unproject=r,this.getResolution=i,projections[t]=this}var ProjectionManager={getProjection:function(t){return projections[t]}},LngLat=new Projection("EPSG:4326",function(t,e){return[t,e]},function(t,e){return[t,e]},function(t){return.703125/Math.pow(2,t)}),SphericalMercator=(Ra=Math.PI/180,Sa=180/Math.PI,Ta=6378137,new Projection("EPSG:3857",function(t,e){var r=85.0511287798;e=Math.max(Math.min(r,e),-r);var i=t*Ra,n=e*Ra;return n=Math.log(Math.tan(Math.PI/4+n/2)),[i*Ta,n*Ta]},function(t,e){return[t/Ta*Sa,(2*Math.atan(Math.exp(e/Ta))-Math.PI/2)*Sa]},function(t){return 156543.03392804097/Math.pow(2,t)})),Ra,Sa,Ta,E4326=ProjectionManager.getProjection("EPSG:4326"),E3857=ProjectionManager.getProjection("EPSG:3857"),HALF_WORLD_SIZE=20037508.342789244,LngLat$1={Ro:[-180,-90,180,90],project:function(t,e,r){var i=E4326.project(t,e);return this.transform(i[0],i[1],r)},unproject:function(t,e,r){var i=this.Xs(t,e,r);return E4326.unproject(i[0],i[1])},transform:function(t,e,r){var i,n=2*(i=void 0===r?180:256<<r),a=this.Ro[2]-this.Ro[0],o=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/a*n,e=i-(e-this.Ro[1])/o*i]},Xs:function(t,e,r){var i;return[t=360*(t/(2*(i=void 0===r?180:256<<r))-.5),e=180*-(e/i-.5)]},nt:function(t,e,r){return this.Xs(t,e,r)},wu:function(t,e,r){return this.Xs(t,e,r)},yo:function(t,e,r){var i;i=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3]));var n;n=0<e/this.Ro[3]?Math.abs(Math.floor(e/this.Ro[3])):Math.abs(Math.ceil(e/this.Ro[3]));var a=t%this.Ro[3],o=e%this.Ro[3],s=this.transform(a,o,r);t=this.wu(t,t,r)[0]*i+s[0],e=this.wu(e,e,r)[1]*n+s[1];var u=this.transform(0,0,r);return[t-u[0],e-u[1]]},Bb:function(t,e,r){return r.X(t,e)},qb:function(t,e,r){return r.H(t,e)},Gd:function(t,e,r,i){var n=i.X(t[0],t[1]),a=i.X(t[0]+e,t[1]+r);return[a[0]-n[0],a[1]-n[1]]}},SphericalMercator$1={Ro:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],project:function(t,e,r){var i=E3857.project(t,e);return this.transform(i[0],i[1],r)},unproject:function(t,e,r){var i=this.Xs(t,e,r);return E3857.unproject(i[0],i[1])},transform:function(t,e,r){var i;t=Math.min(20037508.342789244,Math.max(t,-20037508.342789244)),e=Math.min(20037508.342789244,Math.max(e,-20037508.342789244)),i=void 0===r?40075016.68557849:256*Math.pow(2,r);var n=this.Ro[2]-this.Ro[0],a=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/n*i,e=i-(e-this.Ro[1])/a*i]},Xs:function(t,e,r){var i;return[t=(t/(i=void 0===r?40075016.68557849:256*Math.pow(2,r))-.5)*this.Ro[2]*2,e=-(e/i-.5)*this.Ro[2]*2]},nt:function(t,e,r,i){return[t=this.Xs(t,e,r)[0]-this.Ro[0],e=this.Ro[2]-this.Xs(t,e,r)[1]]},wu:function(t,e,r,i){var n,a=i.center,o=i.size,s=(i.rotation||0)/180*Math.PI,u=this.transform(t,e,r),f=u[0],c=u[1],h=this.transform(a[0],a[1],r),l=f-h[0],d=c-h[1],v=Math.sqrt(Math.pow(l,2)+Math.pow(d,2)),g=0==d?Math.PI/2:Math.atan(Math.abs(l/d));n=l*d<=0?g+s:g-s;var p=0<l?n:-n,b=0<d?1:-1;return[o[0]/2+v*Math.sin(p),o[1]/2+v*Math.cos(n)*b]},yo:function(t,e,r,i){var n;n=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3]));var a;a=0<e/this.Ro[3]?Math.abs(Math.floor(e/this.Ro[3])):Math.abs(Math.ceil(e/this.Ro[3]));var o=t%this.Ro[3],s=e%this.Ro[3],u=this.transform(o,s,r),f=this.transform(0,0,r),c=f[0],h=f[1];return[(t=c*n+u[0])-c,(e=h*a+u[1])-h]},Bb:function(t,e,r){return r.X(t,e)},qb:function(t,e,r){return r.H(t,e)},Gd:function(t,e,r,i){var n=i.X(t[0],t[1]),a=i.X(t[0]+e,t[1]+r);return[a[0]-n[0],a[1]-n[1]]}},transform={"EPSG:4326":LngLat$1,"EPSG:3857":SphericalMercator$1};Module.transform=transform;var isSupportFloat32Array="undefined"!=typeof Float32Array;isSupportFloat32Array||(window.Float32Array=void 0,setMatrixArrayType(Array));var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;function setMatrixArrayType(t){ARRAY_TYPE=t}function fromValues(t,e,r,i){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n}function create(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function invert(t,e){var r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],u=e[6],f=e[7],c=e[8],h=e[9],l=e[10],d=e[11],v=e[12],g=e[13],p=e[14],b=e[15],y=r*s-i*o,m=r*u-n*o,T=r*f-a*o,M=i*u-n*s,A=i*f-a*s,w=n*f-a*u,x=c*g-h*v,S=c*p-l*v,P=c*b-d*v,k=h*p-l*g,$=h*b-d*g,_=l*b-d*p,L=y*_-m*$+T*k+M*P-A*S+w*x;return L?(L=1/L,t[0]=(s*_-u*$+f*k)*L,t[1]=(n*$-i*_-a*k)*L,t[2]=(g*w-p*A+b*M)*L,t[3]=(l*A-h*w-d*M)*L,t[4]=(u*P-o*_-f*S)*L,t[5]=(r*_-n*P+a*S)*L,t[6]=(p*T-v*w-b*m)*L,t[7]=(c*w-l*T+d*m)*L,t[8]=(o*$-s*P+f*x)*L,t[9]=(i*P-r*$-a*x)*L,t[10]=(v*A-g*T+b*y)*L,t[11]=(h*T-c*A-d*y)*L,t[12]=(s*S-o*k-u*x)*L,t[13]=(r*k-i*S+n*x)*L,t[14]=(g*m-v*M-p*y)*L,t[15]=(c*M-h*m+l*y)*L,t):null}function multiply(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],u=e[5],f=e[6],c=e[7],h=e[8],l=e[9],d=e[10],v=e[11],g=e[12],p=e[13],b=e[14],y=e[15],m=r[0],T=r[1],M=r[2],A=r[3];return t[0]=m*i+T*s+M*h+A*g,t[1]=m*n+T*u+M*l+A*p,t[2]=m*a+T*f+M*d+A*b,t[3]=m*o+T*c+M*v+A*y,m=r[4],T=r[5],M=r[6],A=r[7],t[4]=m*i+T*s+M*h+A*g,t[5]=m*n+T*u+M*l+A*p,t[6]=m*a+T*f+M*d+A*b,t[7]=m*o+T*c+M*v+A*y,m=r[8],T=r[9],M=r[10],A=r[11],t[8]=m*i+T*s+M*h+A*g,t[9]=m*n+T*u+M*l+A*p,t[10]=m*a+T*f+M*d+A*b,t[11]=m*o+T*c+M*v+A*y,m=r[12],T=r[13],M=r[14],A=r[15],t[12]=m*i+T*s+M*h+A*g,t[13]=m*n+T*u+M*l+A*p,t[14]=m*a+T*f+M*d+A*b,t[15]=m*o+T*c+M*v+A*y,t}function getTranslation(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function perspective(t,e,r,i,n){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(a=1/(i-n),t[10]=(n+i)*a,t[14]=2*n*i*a):(t[10]=-1,t[14]=-2*i),t}function ortho(t,e,r,i,n,a,o){var s=1/(e-r),u=1/(i-n),f=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*u,t[14]=(o+a)*f,t[15]=1,t}function lookAt(t,e,r,i){var n,a,o,s,u,f,c,h,l,d,v=e[0],g=e[1],p=e[2],b=i[0],y=i[1],m=i[2],T=r[0],M=r[1],A=r[2];return Math.abs(v-T)<EPSILON&&Math.abs(g-M)<EPSILON&&Math.abs(p-A)<EPSILON?identity(t):(c=v-T,h=g-M,l=p-A,n=y*(l*=d=1/Math.hypot(c,h,l))-m*(h*=d),a=m*(c*=d)-b*l,o=b*h-y*c,(d=Math.hypot(n,a,o))?(n*=d=1/d,a*=d,o*=d):o=a=n=0,s=h*o-l*a,u=l*n-c*o,f=c*a-h*n,(d=Math.hypot(s,u,f))?(s*=d=1/d,u*=d,f*=d):f=u=s=0,t[0]=n,t[1]=s,t[2]=c,t[3]=0,t[4]=a,t[5]=u,t[6]=h,t[7]=0,t[8]=o,t[9]=f,t[10]=l,t[11]=0,t[12]=-(n*v+a*g+o*p),t[13]=-(s*v+u*g+f*p),t[14]=-(c*v+h*g+l*p),t[15]=1,t)}function equals(t,e){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],u=t[6],f=t[7],c=t[8],h=t[9],l=t[10],d=t[11],v=t[12],g=t[13],p=t[14],b=t[15],y=e[0],m=e[1],T=e[2],M=e[3],A=e[4],w=e[5],x=e[6],S=e[7],P=e[8],k=e[9],$=e[10],_=e[11],L=e[12],N=e[13],O=e[14],I=e[15];return Math.abs(r-y)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-m)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(n-T)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(a-M)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-A)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(s-w)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(u-x)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(f-S)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(c-P)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(h-k)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(l-$)<=EPSILON*Math.max(1,Math.abs(l),Math.abs($))&&Math.abs(d-_)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(v-L)<=EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(g-N)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(p-O)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(b-I)<=EPSILON*Math.max(1,Math.abs(b),Math.abs(I))}function create$1(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function fromValues$1(t,e,r){var i=new ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=r,i}function copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function set(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}function subtract(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function cross(t,e,r){var i=e[0],n=e[1],a=e[2],o=r[0],s=r[1],u=r[2];return t[0]=n*u-a*s,t[1]=a*o-i*u,t[2]=i*s-n*o,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var sub=subtract,forEach=(vg=create$1(),function(t,e,r,i,n,a){var o,s;for(e=e||3,r=r||0,s=i?Math.min(i*e+r,t.length):t.length,o=r;o<s;o+=e)vg[0]=t[o],vg[1]=t[o+1],vg[2]=t[o+2],n(vg,vg,a),t[o]=vg[0],t[o+1]=vg[1],t[o+2]=vg[2];return t}),vg;function create$2(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function fromValues$2(t,e,r,i){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n}function scale(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function transformMat4(t,e,r){var i=e[0],n=e[1],a=e[2],o=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*a+r[12]*o,t[1]=r[1]*i+r[5]*n+r[9]*a+r[13]*o,t[2]=r[2]*i+r[6]*n+r[10]*a+r[14]*o,t[3]=r[3]*i+r[7]*n+r[11]*a+r[15]*o,t}var forEach$1=(Ug=create$2(),function(t,e,r,i,n,a){var o,s;for(e=e||4,r=r||0,s=i?Math.min(i*e+r,t.length):t.length,o=r;o<s;o+=e)Ug[0]=t[o],Ug[1]=t[o+1],Ug[2]=t[o+2],Ug[3]=t[o+3],n(Ug,Ug,a),t[o]=Ug[0],t[o+1]=Ug[1],t[o+2]=Ug[2],t[o+3]=Ug[3];return t}),Ug;function create$3(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function clone(t){var e=new ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function fromValues$3(t,e){var r=new ARRAY_TYPE(2);return r[0]=t,r[1]=e,r}function copy$1(t,e){return t[0]=e[0],t[1]=e[1],t}function set$1(t,e,r){return t[0]=e,t[1]=r,t}function add(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function subtract$1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function scale$1(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function distance(t,e){var r=e[0]-t[0],i=e[1]-t[1];return Math.hypot(r,i)}function negate(t,e){return t[0]=-e[0],t[1]=-e[1],t}function normalize(t,e){var r=e[0],i=e[1],n=r*r+i*i;return 0<n&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}function dot(t,e){return t[0]*e[0]+t[1]*e[1]}function cross$1(t,e,r){var i=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=i,t}function transformMat2(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[2]*n,t[1]=r[1]*i+r[3]*n,t}function rotate(t,e,r,i){var n=e[0]-r[0],a=e[1]-r[1],o=Math.sin(i),s=Math.cos(i);return t[0]=n*s-a*o+r[0],t[1]=n*o+a*s+r[1],t}function angle(t,e){var r=t[0],i=t[1],n=e[0],a=e[1],o=r*r+i*i;0<o&&(o=1/Math.sqrt(o));var s=n*n+a*a;0<s&&(s=1/Math.sqrt(s));var u=(r*n+i*a)*o*s;return 1<u?0:u<-1?Math.PI:Math.acos(u)}function equals$1(t,e){var r=t[0],i=t[1],n=e[0],a=e[1];return Math.abs(r-n)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))}var sub$1=subtract$1,dist=distance,forEach$2=(mi=create$3(),function(t,e,r,i,n,a){var o,s;for(e=e||2,r=r||0,s=i?Math.min(i*e+r,t.length):t.length,o=r;o<s;o+=e)mi[0]=t[o],mi[1]=t[o+1],n(mi,mi,a),t[o]=mi[0],t[o+1]=mi[1];return t}),mi;function isLngLat(t){return t&&"AMap.LngLat"===t.className}function isPixel(t){return t&&"AMap.Pixel"===t.className}function isSize(t){return t&&"AMap.Size"===t.className}function isLayer(t){return Boolean(t&&t.el&&"AMap.Layer"===t.el)}function isVectorLayer(t){return t&&"AMap.VectorLayer"===t.CLASS_NAME}function isOverlay(t){return t&&t.className&&Util.startsWith(t.className,"Overlay")}function isOverlayGroup(t){return t&&("Overlay.OverlayGroup"===t.className||"Overlay.GeoJSON"===t.className)}function isCircleMarker(t){return t&&t.className&&"Overlay.CircleMarker"===t.className}function isBounds(t){return t&&"AMap.Bounds"===t.className}function isNumber(t){var e=+t;return"number"==typeof+e&&!isNaN(e)}function isNumberArray(t){return Array.isArray(t)&&isNumber(t[0])}function isNumberArrayArray(t){return Array.isArray(t)&&isNumberArray(t[0])}function isNumberArrayArrayArray(t){return Array.isArray(t)&&isNumberArrayArray(t[0])}function isNumberArrayArrayArrayArray(t){return Array.isArray(t)&&isNumberArrayArrayArray(t[0])}function isLnglatLike(t){return isLngLat(t)||isNumberArray(t)}function isLnglatLikeArray(t){return Array.isArray(t)&&isLnglatLike(t[0])}function isLnglatLikeArrayArray(t){return Array.isArray(t)&&isLnglatLikeArray(t[0])}function isLnglatLikeArrayArrayArray(t){return Array.isArray(t)&&isLnglatLikeArrayArray(t[0])}function isNebulaLabelsLayer(t){return t&&"AMap.Nebula.LabelsLayer"===t.CLASS_NAME}var Coordinate={lr:function(t,e){for(var r=1/0,i=0,n=1,a=e.length;n<a;i=n,n+=1)r=Math.min(r,this.ur(t,[e[i],e[n]]));return Math.sqrt(r)},ur:function(t,e){return this.cr(t,this.closestOnSegment(t,e))},cr:function(t,e){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i},pr:function(t,e,r,i){if(i=i||1e-6,r[0]===e[0]){var n=Math.min(e[1],r[1]),a=Math.max(e[1],r[1]);return Math.abs(t[0]-r[0])<i&&t[1]>=n&&t[1]<=a}var o=Math.min(e[0],r[0]),s=Math.max(e[0],r[0]),u=(r[1]-e[1])/(r[0]-e[0])*(t[0]-e[0])+e[1];return Math.abs(u-t[1])<i&&t[0]>=o&&t[0]<=s},closestOnSegment:function(t,e){var r,i,n=t[0],a=t[1],o=e[0],s=e[1],u=o[0],f=o[1],c=s[0],h=s[1],l=c-u,d=h-f,v=0==l&&0==d?0:(l*(n-u)+d*(a-f))/(l*l+d*d||0);return i=v<=0?(r=u,f):1<=v?(r=c,h):(r=u+v*l,f+v*d),[r,i]},isClockwise:function(t){for(var e,r,i,n=t.length,a=0,o=t[n-1],s=o[0],u=o[1],f=0;f<n;f+=1)a+=((e=(i=t[f])[0])-s)*((r=i[1])+u),s=e,u=r;return 0<a},ss:function(t,e,r){for(var i,n,a,o,s=t[0],u=t[1],f=!1,c=e.length,h=0,l=c-1;h<c;l=h,h+=1){var d=!1;if(i=e[h][0],n=e[h][1],a=e[l][0],o=e[l][1],i===s&&n===u||a===s&&o===u)return!!r;if(n<u==u<=o){var v=(a-i)*(u-n)/(o-n)+i;if(s===v)return!!r;d=s<v}d&&(f=!f)}return f},dr:function(t,e){function r(t,e,r){return(r[0]-e[0])*(t[1]-e[1])>(r[1]-e[1])*(t[0]-e[0])}function i(t,e,r,i){var n=[t[0]-e[0],t[1]-e[1]],a=[r[0]-i[0],r[1]-i[1]],o=t[0]*e[1]-t[1]*e[0],s=r[0]*i[1]-r[1]*i[0],u=1/(n[0]*a[1]-n[1]*a[0]);return[(o*a[0]-s*n[0])*u,(o*a[1]-s*n[1])*u]}var n,a,o,s,u=t;n=e[e.length-2];for(var f=0,c=e.length-1;f<c;f++){a=e[f];var h=u;u=[],o=h[h.length-1];for(var l=0,d=h.length;l<d;l++)r(s=h[l],n,a)?(r(o,n,a)||u.push(i(n,a,o,s)),u.push(s)):r(o,n,a)&&u.push(i(n,a,o,s)),o=s;n=a}return u.length<3?[]:(u.push(u[0]),u)}},freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty.call(t,symToStringTag),r=t[symToStringTag];try{var i=!(t[symToStringTag]=void 0)}catch(t){}var n=nativeObjectToString.call(t);return i&&(e?t[symToStringTag]=r:delete t[symToStringTag]),n}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(t){return nativeObjectToString$1.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol?Symbol.toStringTag:void 0;function baseGetTag(t){return null==t?void 0===t?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(t)?getRawTag:objectToString)(t)}function isObjectLike(t){return null!=t&&"object"==typeof t}var symbolTag="[object Symbol]";function isSymbol(t){return"symbol"==typeof t||isObjectLike(t)&&baseGetTag(t)==symbolTag}function arrayMap(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}var isArray=Array.isArray,INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(t){if("string"==typeof t)return t;if(isArray(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var e=t+"";return"0"==e&&1/t==-INFINITY?"-0":e}function isObject(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if("number"==typeof t)return t;if(isSymbol(t))return NAN;if(isObject(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=isObject(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(reTrim,"");var r=reIsBinary.test(t);return r||reIsOctal.test(t)?freeParseInt(t.slice(2),r?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){return t?(t=toNumber(t))!==INFINITY$1&&t!==-INFINITY$1?t==t?t:0:(t<0?-1:1)*MAX_INTEGER:0===t?t:0}function toInteger(t){var e=toFinite(t),r=e%1;return e==e?r?e-r:e:0}function identity$1(t){return t}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){if(!isObject(t))return!1;var e=baseGetTag(t);return e==funcTag||e==genTag||e==asyncTag||e==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=(Yk=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.Xb||""),Yk?"Symbol(src)_1."+Yk:""),Yk;function isMasked(t){return maskSrcKey&&maskSrcKey in t}var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){return isObject(t)&&!isMasked(t)&&(isFunction(t)?reIsNative:reIsHostCtor).test(toSource(t))}function getValue(t,e){return null==t?void 0:t[e]}function getNative(t,e){var r=getValue(t,e);return baseIsNative(r)?r:void 0}var WeakMap=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(t){if(!isObject(t))return{};if(objectCreate)return objectCreate(t);il.prototype=t;var e=new il;return il.prototype=void 0,e};function il(){}function apply(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function copyArray(t,e){var r=-1,i=t.length;for(e=e||Array(i);++r<i;)e[r]=t[r];return e}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(r){var i=0,n=0;return function(){var t=nativeNow(),e=HOT_SPAN-(t-n);if(n=t,0<e){if(++i>=HOT_COUNT)return arguments[0]}else i=0;return r.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),baseSetToString=defineProperty?function(t,e){return defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:constant(e),writable:!0})}:identity$1,setToString=shortOut(baseSetToString);function arrayEach(t,e){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==e(t[r],r,t););return t}function baseFindIndex(t,e,r,i){for(var n=t.length,a=r+(i?1:-1);i?a--:++a<n;)if(e(t[a],a,t))return a;return-1}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,e){var r=typeof t;return!!(e=null==e?MAX_SAFE_INTEGER:e)&&("number"==r||"symbol"!=r&&reIsUint.test(t))&&-1<t&&t%1==0&&t<e}function baseAssignValue(t,e,r){"__proto__"==e&&defineProperty?defineProperty(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function eq(t,e){return t===e||t!=t&&e!=e}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(t,e,r){var i=t[e];hasOwnProperty$2.call(t,e)&&eq(i,r)&&(void 0!==r||e in t)||baseAssignValue(t,e,r)}function copyObject(t,e,r,i){var n=!r;r=r||{};for(var a=-1,o=e.length;++a<o;){var s=e[a],u=i?i(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),(n?baseAssignValue:assignValue)(r,s,u)}return r}var nativeMax=Math.max;function overRest(a,o,s){return o=nativeMax(void 0===o?a.length-1:o,0),function(){for(var t=arguments,e=-1,r=nativeMax(t.length-o,0),i=Array(r);++e<r;)i[e]=t[o+e];e=-1;for(var n=Array(o+1);++e<o;)n[e]=t[e];return n[o]=s(i),apply(a,this,n)}}function baseRest(t,e){return setToString(overRest(t,e,identity$1),t+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=MAX_SAFE_INTEGER$1}function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}function isIterateeCall(t,e,r){if(isObject(r)){var i=typeof e;return("number"==i?isArrayLike(r)&&isIndex(e,r.length):"string"==i&&e in r)&&eq(r[e],t)}}function createAssigner(s){return baseRest(function(t,e){var r=-1,i=e.length,n=1<i?e[i-1]:void 0,a=2<i?e[2]:void 0;for(n=3<s.length&&"function"==typeof n?(i--,n):void 0,a&&isIterateeCall(e[0],e[1],a)&&(n=i<3?void 0:n,i=1),t=Object(t);++r<i;){var o=e[r];o&&s(t,o,r,n)}return t})}var objectProto$4=Object.prototype;function isPrototype(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||objectProto$4)}function baseTimes(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var argsTag="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$3.call(t,"callee")&&!propertyIsEnumerable.call(t,"callee")};function stubFalse(){return!1}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.Jb===freeExports,Buffer=moduleExports?root.Zb:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(e){return function(t){return e(t)}}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.Jb===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.Qb&&freeModule$1.Qb("util").types;return t||freeProcess&&freeProcess.tg&&freeProcess.tg("util")}catch(t){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.rg,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(t,e){var r=isArray(t),i=!r&&isArguments(t),n=!r&&!i&&isBuffer(t),a=!r&&!i&&!n&&isTypedArray(t),o=r||i||n||a,s=o?baseTimes(t.length,String):[],u=s.length;for(var f in t)!e&&!hasOwnProperty$4.call(t,f)||o&&("length"==f||n&&("offset"==f||"parent"==f)||a&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||isIndex(f,u))||s.push(f);return s}function overArg(e,r){return function(t){return e(r(t))}}var nativeKeys=overArg(Object.keys,Object),objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var e=[];for(var r in Object(t))hasOwnProperty$5.call(t,r)&&"constructor"!=r&&e.push(r);return e}function keys(t){return(isArrayLike(t)?arrayLikeKeys:baseKeys)(t)}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,assign=createAssigner(function(t,e){if(isPrototype(e)||isArrayLike(e))copyObject(e,keys(e),t);else for(var r in e)hasOwnProperty$6.call(e,r)&&assignValue(t,r,e[r])});function nativeKeysIn(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function baseKeysIn(t){if(!isObject(t))return nativeKeysIn(t);var e=isPrototype(t),r=[];for(var i in t)("constructor"!=i||!e&&hasOwnProperty$7.call(t,i))&&r.push(i);return r}function keysIn$1(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,e){if(!isArray(t)){var r=typeof t;return"number"==r||"symbol"==r||"boolean"==r||null==t||isSymbol(t)||reIsPlainProp.test(t)||!reIsDeepProp.test(t)||null!=e&&t in Object(e)}}var nativeCreate=getNative(Object,"create");function hashClear(){this.ng=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(t){var e=this.has(t)&&delete this.ng[t];return this.size-=e?1:0,e}var HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashGet(t){var e=this.ng;if(nativeCreate){var r=e[t];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$8.call(e,t)?e[t]:void 0}var objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashHas(t){var e=this.ng;return nativeCreate?void 0!==e[t]:hasOwnProperty$9.call(e,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,e){var r=this.ng;return this.size+=this.has(t)?0:1,r[t]=nativeCreate&&void 0===e?HASH_UNDEFINED$1:e,this}function Hash(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function listCacheClear(){this.ng=[],this.size=0}function assocIndexOf(t,e){for(var r=t.length;r--;)if(eq(t[r][0],e))return r;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var e=this.ng,r=assocIndexOf(e,t);return!(r<0||(r==e.length-1?e.pop():splice.call(e,r,1),--this.size,0))}function listCacheGet(t){var e=this.ng,r=assocIndexOf(e,t);return r<0?void 0:e[r][1]}function listCacheHas(t){return-1<assocIndexOf(this.ng,t)}function listCacheSet(t,e){var r=this.ng,i=assocIndexOf(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}function ListCache(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.ng={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function getMapData(t,e){var r=t.ng;return isKeyable(e)?r["string"==typeof e?"string":"hash"]:r.map}function mapCacheDelete(t){var e=getMapData(this,t).delete(t);return this.size-=e?1:0,e}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){var r=getMapData(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}function MapCache(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(n,a){if("function"!=typeof n||null!=a&&"function"!=typeof a)throw new TypeError(FUNC_ERROR_TEXT);var o=function(){var t=arguments,e=a?a.apply(this,t):t[0],r=o.qn;if(r.has(e))return r.get(e);var i=n.apply(this,t);return o.qn=r.set(e,i)||r,i};return o.qn=new(memoize.Cache||MapCache),o}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var e=memoize(t,function(t){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),t}),r=e.qn;return e}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(rePropName,function(t,e,r,i){n.push(r?i.replace(reEscapeChar,"$1"):e||t)}),n});function toString(t){return null==t?"":baseToString(t)}function castPath(t,e){return isArray(t)?t:isKey(t,e)?[t]:stringToPath(toString(t))}var INFINITY$2=1/0;function toKey(t){if("string"==typeof t||isSymbol(t))return t;var e=t+"";return"0"==e&&1/t==-INFINITY$2?"-0":e}function baseGet(t,e){for(var r=0,i=(e=castPath(e,t)).length;null!=t&&r<i;)t=t[toKey(e[r++])];return r&&r==i?t:void 0}function get(t,e,r){var i=null==t?void 0:baseGet(t,e);return void 0===i?r:i}function arrayPush(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$1="[object Object]",funcProto$2=Function.prototype,objectProto$c=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$a=objectProto$c.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(t){if(isObjectLike(t)&&baseGetTag(t)==objectTag$1){var e=getPrototype(t);if(null===e)return 1;var r=hasOwnProperty$a.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}}function stackClear(){this.ng=new ListCache,this.size=0}function stackDelete(t){var e=this.ng,r=e.delete(t);return this.size=e.size,r}function stackGet(t){return this.ng.get(t)}function stackHas(t){return this.ng.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,e){var r=this.ng;if(r instanceof ListCache){var i=r.ng;if(!Map$1||i.length<LARGE_ARRAY_SIZE-1)return i.push([t,e]),this.size=++r.size,this;r=this.ng=new MapCache(i)}return r.set(t,e),this.size=r.size,this}function Stack(t){var e=this.ng=new ListCache(t);this.size=e.size}function baseAssign(t,e){return t&&copyObject(e,keys(e),t)}function baseAssignIn(t,e){return t&&copyObject(e,keysIn$1(e),t)}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.Jb===freeExports$2,Buffer$1=moduleExports$2?root.Zb:void 0,allocUnsafe=Buffer$1?Buffer$1.ig:void 0;function cloneBuffer(t,e){if(e)return t.slice();var r=t.length,i=allocUnsafe?allocUnsafe(r):new t.constructor(r);return t.eg(i),i}function arrayFilter(t,e){for(var r=-1,i=null==t?0:t.length,n=0,a=[];++r<i;){var o=t[r];e(o,r,t)&&(a[n++]=o)}return a}function stubArray(){return[]}var objectProto$d=Object.prototype,propertyIsEnumerable$1=objectProto$d.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols(e),function(t){return propertyIsEnumerable$1.call(e,t)}))}:stubArray;function copySymbols(t,e){return copyObject(t,getSymbols(t),e)}var nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(t){for(var e=[];t;)arrayPush(e,getSymbols(t)),t=getPrototype(t);return e}:stubArray;function copySymbolsIn(t,e){return copyObject(t,getSymbolsIn(t),e)}function baseGetAllKeys(t,e,r){var i=e(t);return isArray(t)?i:arrayPush(i,r(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn$1,getSymbolsIn)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1)&&(getTag=function(t){var e=baseGetTag(t),r=e==objectTag$2?t.constructor:void 0,i=r?toSource(r):"";if(i)switch(i){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return e});var getTag$1=getTag,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty;function initCloneArray(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&hasOwnProperty$b.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(t){var e=new t.constructor(t.byteLength);return new Uint8Array$1(e).set(new Uint8Array$1(t)),e}function cloneDataView(t,e){var r=e?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var e=new t.constructor(t.source,reFlags.exec(t));return e.lastIndex=t.lastIndex,e}var symbolProto$1=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf?Object(symbolValueOf.call(t)):{}}function cloneTypedArray(t,e){var r=e?cloneArrayBuffer(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,e,r){var i=t.constructor;switch(e){case arrayBufferTag$1:return cloneArrayBuffer(t);case boolTag$1:case dateTag$1:return new i(+t);case dataViewTag$2:return cloneDataView(t,r);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,r);case mapTag$2:return new i;case numberTag$1:case stringTag$1:return new i(t);case regexpTag$1:return cloneRegExp(t);case setTag$2:return new i;case symbolTag$1:return cloneSymbol(t)}}function initCloneObject(t){return"function"!=typeof t.constructor||isPrototype(t)?{}:baseCreate(getPrototype(t))}var mapTag$3="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$3}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$3="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$3}var nodeIsSet=nodeUtil&&nodeUtil.og,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$3="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(r,i,n,t,e,a){var o,s=i&CLONE_DEEP_FLAG,u=i&CLONE_FLAT_FLAG,f=i&CLONE_SYMBOLS_FLAG;if(n&&(o=e?n(r,t,e,a):n(r)),void 0!==o)return o;if(!isObject(r))return r;var c=isArray(r);if(c){if(o=initCloneArray(r),!s)return copyArray(r,o)}else{var h=getTag$1(r),l=h==funcTag$2||h==genTag$1;if(isBuffer(r))return cloneBuffer(r,s);if(h==objectTag$3||h==argsTag$2||l&&!e){if(o=u||l?{}:initCloneObject(r),!s)return u?copySymbolsIn(r,baseAssignIn(o,r)):copySymbols(r,baseAssign(o,r))}else{if(!cloneableTags[h])return e?r:{};o=initCloneByTag(r,h,s)}}var d=(a=a||new Stack).get(r);if(d)return d;a.set(r,o),isSet(r)?r.forEach(function(t){o.add(baseClone(t,i,n,t,r,a))}):isMap(r)&&r.forEach(function(t,e){o.set(e,baseClone(t,i,n,e,r,a))});var v=f?u?getAllKeysIn:getAllKeys:u?keysIn:keys,g=c?void 0:v(r);return arrayEach(g||r,function(t,e){g&&(t=r[e=t]),assignValue(o,e,baseClone(t,i,n,e,r,a))}),o}cloneableTags[argsTag$2]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$3]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$4]=cloneableTags[numberTag$2]=cloneableTags[objectTag$3]=cloneableTags[regexpTag$2]=cloneableTags[setTag$4]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var CLONE_SYMBOLS_FLAG$1=4;function clone$1(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$2=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$2)}var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(t){return this.ng.set(t,HASH_UNDEFINED$2),this}function setCacheHas(t){return this.ng.has(t)}function SetCache(t){var e=-1,r=null==t?0:t.length;for(this.ng=new MapCache;++e<r;)this.add(t[e])}function arraySome(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}function cacheHas(t,e){return t.has(e)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(t,e,r,i,n,a){var o=r&COMPARE_PARTIAL_FLAG,s=t.length,u=e.length;if(s!=u&&!(o&&s<u))return!1;var f=a.get(t);if(f&&a.get(e))return f==e;var c=-1,h=!0,l=r&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(a.set(t,e),a.set(e,t);++c<s;){var d=t[c],v=e[c];if(i)var g=o?i(v,d,c,e,t,a):i(d,v,c,t,e,a);if(void 0!==g){if(g)continue;h=!1;break}if(l){if(!arraySome(e,function(t,e){if(!cacheHas(l,e)&&(d===t||n(d,t,r,i,a)))return l.push(e)})){h=!1;break}}else if(d!==v&&!n(d,v,r,i,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function mapToArray(t){var r=-1,i=Array(t.size);return t.forEach(function(t,e){i[++r]=[e,t]}),i}function setToArray(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",mapTag$5="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",symbolProto$2=Symbol?Symbol.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function equalByTag(t,e,r,i,n,a,o){switch(r){case dataViewTag$4:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case arrayBufferTag$3:return!(t.byteLength!=e.byteLength||!a(new Uint8Array$1(t),new Uint8Array$1(e)));case boolTag$3:case dateTag$3:case numberTag$3:return eq(+t,+e);case errorTag$2:return t.name==e.name&&t.message==e.message;case regexpTag$3:case stringTag$3:return t==e+"";case mapTag$5:var s=mapToArray;case setTag$5:var u=i&COMPARE_PARTIAL_FLAG$1;if(s=s||setToArray,t.size!=e.size&&!u)return!1;var f=o.get(t);if(f)return f==e;i|=COMPARE_UNORDERED_FLAG$1,o.set(t,e);var c=equalArrays(s(t),s(e),i,n,a,o);return o.delete(t),c;case symbolTag$3:if(symbolValueOf$1)return symbolValueOf$1.call(t)==symbolValueOf$1.call(e)}return!1}var COMPARE_PARTIAL_FLAG$2=1,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty;function equalObjects(t,e,r,i,n,a){var o=r&COMPARE_PARTIAL_FLAG$2,s=getAllKeys(t),u=s.length;if(u!=getAllKeys(e).length&&!o)return!1;for(var f=u;f--;){var c=s[f];if(!(o?c in e:hasOwnProperty$c.call(e,c)))return!1}var h=a.get(t);if(h&&a.get(e))return h==e;var l=!0;a.set(t,e),a.set(e,t);for(var d=o;++f<u;){var v=t[c=s[f]],g=e[c];if(i)var p=o?i(g,v,c,e,t,a):i(v,g,c,t,e,a);if(!(void 0===p?v===g||n(v,g,r,i,a):p)){l=!1;break}d=d||"constructor"==c}if(l&&!d){var b=t.constructor,y=e.constructor;b!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y)&&(l=!1)}return a.delete(t),a.delete(e),l}var COMPARE_PARTIAL_FLAG$3=1,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",objectTag$4="[object Object]",objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty;function baseIsEqualDeep(t,e,r,i,n,a){var o=isArray(t),s=isArray(e),u=o?arrayTag$2:getTag$1(t),f=s?arrayTag$2:getTag$1(e),c=(u=u==argsTag$3?objectTag$4:u)==objectTag$4,h=(f=f==argsTag$3?objectTag$4:f)==objectTag$4,l=u==f;if(l&&isBuffer(t)){if(!isBuffer(e))return!1;c=!(o=!0)}if(l&&!c)return a=a||new Stack,o||isTypedArray(t)?equalArrays(t,e,r,i,n,a):equalByTag(t,e,u,r,i,n,a);if(!(r&COMPARE_PARTIAL_FLAG$3)){var d=c&&hasOwnProperty$d.call(t,"__wrapped__"),v=h&&hasOwnProperty$d.call(e,"__wrapped__");if(d||v)return n(d?t.value():t,v?e.value():e,r,i,a=a||new Stack)}return l&&equalObjects(t,e,r,i,n,a=a||new Stack)}function baseIsEqual(t,e,r,i,n){return t===e||(null==t||null==e||!isObjectLike(t)&&!isObjectLike(e)?t!=t&&e!=e:baseIsEqualDeep(t,e,r,i,baseIsEqual,n))}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(t,e,r,i){var n=r.length,a=n,o=!i;if(null==t)return!a;for(t=Object(t);n--;){var s=r[n];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<a;){var u=(s=r[n])[0],f=t[u],c=s[1];if(o&&s[2]){if(void 0===f&&!(u in t))return!1}else{var h=new Stack;if(i)var l=i(f,c,u,t,e,h);if(!(void 0===l?baseIsEqual(c,f,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,i,h):l))return!1}}return!0}function isStrictComparable(t){return t==t&&!isObject(t)}function getMatchData(t){for(var e=keys(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,isStrictComparable(n)]}return e}function matchesStrictComparable(e,r){return function(t){return null!=t&&t[e]===r&&(void 0!==r||e in Object(t))}}function baseMatches(e){var r=getMatchData(e);return 1==r.length&&r[0][2]?matchesStrictComparable(r[0][0],r[0][1]):function(t){return t===e||baseIsMatch(t,e,r)}}function baseHasIn(t,e){return null!=t&&e in Object(t)}function hasPath(t,e,r){for(var i=-1,n=(e=castPath(e,t)).length,a=!1;++i<n;){var o=toKey(e[i]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++i!=n?a:!!(n=null==t?0:t.length)&&isLength(n)&&isIndex(o,n)&&(isArray(t)||isArguments(t))}function hasIn(t,e){return null!=t&&hasPath(t,e,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(r,i){return isKey(r)&&isStrictComparable(i)?matchesStrictComparable(toKey(r),i):function(t){var e=get(t,r);return void 0===e&&e===i?hasIn(t,r):baseIsEqual(i,e,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return"function"==typeof t?t:null==t?identity$1:"object"==typeof t?isArray(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(u){return function(t,e,r){for(var i=-1,n=Object(t),a=r(t),o=a.length;o--;){var s=a[u?o:++i];if(!1===e(n[s],s,n))break}return t}}var baseFor=createBaseFor();function baseForOwn(t,e){return t&&baseFor(t,e,keys)}function createBaseEach(a,o){return function(t,e){if(null==t)return t;if(!isArrayLike(t))return a(t,e);for(var r=t.length,i=o?r:-1,n=Object(t);(o?i--:++i<r)&&!1!==e(n[i],i,n););return t}}var baseEach=createBaseEach(baseForOwn);function assignMergeValue(t,e,r){(void 0===r||eq(t[e],r))&&(void 0!==r||e in t)||baseAssignValue(t,e,r)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function safeGet(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function toPlainObject(t){return copyObject(t,keysIn$1(t))}function baseMergeDeep(t,e,r,i,n,a,o){var s=safeGet(t,r),u=safeGet(e,r),f=o.get(u);if(f)assignMergeValue(t,r,f);else{var c=a?a(s,u,r+"",t,e,o):void 0,h=void 0===c;if(h){var l=isArray(u),d=!l&&isBuffer(u),v=!l&&!d&&isTypedArray(u);c=u,l||d||v?c=isArray(s)?s:isArrayLikeObject(s)?copyArray(s):d?cloneBuffer(u,!(h=!1)):v?cloneTypedArray(u,!(h=!1)):[]:isPlainObject(u)||isArguments(u)?isArguments(c=s)?c=toPlainObject(s):isObject(s)&&!isFunction(s)||(c=initCloneObject(u)):h=!1}h&&(o.set(u,c),n(c,u,i,a,o),o.delete(u)),assignMergeValue(t,r,c)}}function baseMerge(i,n,a,o,s){i!==n&&baseFor(n,function(t,e){if(s=s||new Stack,isObject(t))baseMergeDeep(i,n,e,a,baseMerge,o,s);else{var r=o?o(safeGet(i,e),t,e+"",i,n,s):void 0;void 0===r&&(r=t),assignMergeValue(i,e,r)}},keysIn$1)}function customDefaultsMerge(t,e,r,i,n,a){return isObject(t)&&isObject(e)&&(a.set(e,t),baseMerge(t,e,void 0,customDefaultsMerge,a),a.delete(e)),t}var mergeWith=createAssigner(function(t,e,r,i){baseMerge(t,e,r,i)}),defaultsDeep=baseRest(function(t){return t.push(void 0,customDefaultsMerge),apply(mergeWith,void 0,t)});function castFunction(t){return"function"==typeof t?t:identity$1}function forEach$3(t,e){return(isArray(t)?arrayEach:baseEach)(t,castFunction(e))}function arrayEvery(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(!e(t[r],r,t))return!1;return!0}function baseEvery(t,i){var n=!0;return baseEach(t,function(t,e,r){return n=!!i(t,e,r)}),n}function every(t,e,r){var i=isArray(t)?arrayEvery:baseEvery;return r&&isIterateeCall(t,e,r)&&(e=void 0),i(t,baseIteratee(e))}function baseFilter(t,i){var n=[];return baseEach(t,function(t,e,r){i(t,e,r)&&n.push(t)}),n}function filter(t,e){return(isArray(t)?arrayFilter:baseFilter)(t,baseIteratee(e))}function createFind(o){return function(t,e,r){var i=Object(t);if(!isArrayLike(t)){var n=baseIteratee(e);t=keys(t),e=function(t){return n(i[t],t,i)}}var a=o(t,e,r);return-1<a?i[n?t[a]:a]:void 0}}var nativeMax$1=Math.max;function findIndex(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=null==r?0:toInteger(r);return n<0&&(n=nativeMax$1(i+n,0)),baseFindIndex(t,baseIteratee(e),n)}var find=createFind(findIndex);function baseMap(t,i){var n=-1,a=isArrayLike(t)?Array(t.length):[];return baseEach(t,function(t,e,r){a[++n]=i(t,e,r)}),a}function map(t,e){return(isArray(t)?arrayMap:baseMap)(t,baseIteratee(e))}function forIn(t,e){return null==t?t:baseFor(t,castFunction(e),keysIn$1)}var mapTag$6="[object Map]",setTag$6="[object Set]",objectProto$h=Object.prototype,hasOwnProperty$e=objectProto$h.hasOwnProperty;function isEmpty(t){if(null==t)return!0;if(isArrayLike(t)&&(isArray(t)||"string"==typeof t||"function"==typeof t.splice||isBuffer(t)||isTypedArray(t)||isArguments(t)))return!t.length;var e=getTag$1(t);if(e==mapTag$6||e==setTag$6)return!t.size;if(isPrototype(t))return!baseKeys(t).length;for(var r in t)if(hasOwnProperty$e.call(t,r))return!1;return!0}function isEqual(t,e){return baseIsEqual(t,e)}function isUndefined(t){return void 0===t}function baseSome(t,i){var n;return baseEach(t,function(t,e,r){return!(n=i(t,e,r))}),!!n}function some(t,e,r){var i=isArray(t)?arraySome:baseSome;return r&&isIterateeCall(t,e,r)&&(e=void 0),i(t,baseIteratee(e))}var Pixel=(Hv.prototype.getX=function(){return this.x},Hv.prototype.round=function(){return new Hv(Math.round(this.x),Math.round(this.y))},Hv.prototype.getY=function(){return this.y},Hv.prototype.toString=function(){return this.x+","+this.y},Hv.prototype.equals=function(t){return t instanceof Hv&&Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))<=1e-9},Hv.prototype.toArray=function(){return[this.x,this.y]},Hv.prototype.subtract=function(t,e){return new Hv(this.x-t.x,this.y-t.y,e)},Hv.prototype.multiplyBy=function(t,e){return new Hv(this.x*t,this.y*t,e)},Hv.prototype.direction=function(){var t=this.x,e=this.y;if(0===t&&0===e)return null;if(0===t)return 0<e?90:270;var r=180*Math.atan(e/t)/Math.PI;return t<0&&0<e||t<0&&e<0?180+r:0<t&&e<0?360+r:r},Hv.prototype.toJSON=function(){return[this.x,this.y]},Hv);function Hv(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.Pixel",isNaN(t)||isNaN(e))throw new Error("Invalid Object: Pixel("+t+", "+e+")");this.x=r?Math.round(t):Number(t),this.y=r?Math.round(e):Number(e)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(t){return t&&t.gP&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,e){return t(e={Jb:{}},e.Jb),e.Jb}var dist$1=createCommonjsModule(function(t,e){!function(t){function i(t,e){return e<t?1:t<e?-1:0}var p=function(e,r){void 0===e&&(e=i),void 0===r&&(r=!1),this.bP=e,this.yP=null,this._size=0,this.mP=!!r},e={size:{configurable:!0}};p.prototype.TP=function(e){var r=e.right;r&&(e.right=r.left,r.left&&(r.left.parent=e),r.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=r:e.parent.right=r:this.yP=r,r&&(r.left=e),e.parent=r},p.prototype.wP=function(e){var r=e.left;r&&(e.left=r.right,r.right&&(r.right.parent=e),r.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=r:e.parent.right=r:this.yP=r,r&&(r.right=e),e.parent=r},p.prototype.AP=function(e){for(;e.parent;){var r=e.parent;r.parent?r.left===e&&r.parent.left===r?(this.wP(r.parent),this.wP(r)):r.right===e&&r.parent.right===r?(this.TP(r.parent),this.TP(r)):r.left===e&&r.parent.right===r?(this.wP(r),this.TP(r)):(this.TP(r),this.wP(r)):r.left===e?this.wP(r):this.TP(r)}},p.prototype.xP=function(e){for(var r,i,n,a,o;e.parent;)(i=(r=e.parent).parent)&&i.parent?((n=i.parent).left===i?n.left=e:n.right=e,e.parent=n):(e.parent=null,this.yP=e),a=e.left,o=e.right,e===r.left?(i&&(i.left===r?(r.right?(i.left=r.right,i.left.parent=i):i.left=null,(r.right=i).parent=r):(a?(i.right=a).parent=i:i.right=null,(e.left=i).parent=e)),o?(r.left=o).parent=r:r.left=null,(e.right=r).parent=e):(i&&(i.right===r?(r.left?(i.right=r.left,i.right.parent=i):i.right=null,(r.left=i).parent=r):(o?(i.left=o).parent=i:i.left=null,(e.right=i).parent=e)),a?(r.right=a).parent=r:r.right=null,(e.left=r).parent=e)},p.prototype.replace=function(e,r){e.parent?e===e.parent.left?e.parent.left=r:e.parent.right=r:this.yP=r,r&&(r.parent=e.parent)},p.prototype.MP=function(e){if(void 0===e&&(e=this.yP),e)for(;e.left;)e=e.left;return e},p.prototype.SP=function(e){if(void 0===e&&(e=this.yP),e)for(;e.right;)e=e.right;return e},p.prototype.Xc=function(e,r){var i=this.yP,n=null,a=this.bP;if(this.mP)for(;i;){if(0===a((n=i).key,e))return;i=a(i.key,e)<0?i.right:i.left}else for(;i;)i=a((n=i).key,e)<0?i.right:i.left;return i={key:e,data:r,left:null,right:null,parent:n},n?a(n.key,i.key)<0?n.right=i:n.left=i:this.yP=i,this.xP(i),this._size++,i},p.prototype.find=function(e){for(var r=this.yP,i=this.bP;r;){var n=i(r.key,e);if(n<0)r=r.right;else{if(!(0<n))return r;r=r.left}}return null},p.prototype.contains=function(e){for(var r=this.yP,i=this.bP;r;){var n=i(e,r.key);if(0===n)return!0;r=n<0?r.left:r.right}return!1},p.prototype.remove=function(e){var r=this.find(e);if(!r)return!1;if(this.xP(r),r.left)if(r.right){var i=this.MP(r.right);i.parent!==r&&(this.replace(i,i.right),i.right=r.right,i.right.parent=i),this.replace(r,i),i.left=r.left,i.left.parent=i}else this.replace(r,r.left);else this.replace(r,r.right);return this._size--,!0},p.prototype.removeNode=function(e){if(!e)return!1;if(this.xP(e),e.left)if(e.right){var r=this.MP(e.right);r.parent!==e&&(this.replace(r,r.right),r.right=e.right,r.right.parent=r),this.replace(e,r),r.left=e.left,r.left.parent=r}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},p.prototype.$P=function(e){var r=this.find(e);if(r){this.xP(r);var i=r.left,n=r.right,a=null;i&&(i.parent=null,a=this.SP(i),this.xP(a),this.yP=a),n&&(i?a.right=n:this.yP=n,n.parent=a),this._size--}},p.prototype.pop=function(){var e=this.yP,r=null;if(e){for(;e.left;)e=e.left;r={key:e.key,data:e.data},this.remove(e.key)}return r},p.prototype.next=function(e){var r=e;if(r)if(r.right)for(r=r.right;r&&r.left;)r=r.left;else for(r=e.parent;r&&r.right===e;)r=(e=r).parent;return r},p.prototype.NM=function(e){var r=e;if(r)if(r.left)for(r=r.left;r&&r.right;)r=r.right;else for(r=e.parent;r&&r.left===e;)r=(e=r).parent;return r},p.prototype.forEach=function(e){for(var r=this.yP,i=[],n=!1,a=0;!n;)r?(i.push(r),r=r.left):0<i.length?(e(r=i.pop(),a++),r=r.right):n=!0;return this},p.prototype.range=function(e,r,i,n){for(var a=[],o=this.bP,s=this.yP;0!==a.length||s;)if(s)a.push(s),s=s.left;else{if(0<o((s=a.pop()).key,r))break;if(0<=o(s.key,e)&&i.call(n,s))return this;s=s.right}return this},p.prototype.keys=function(){for(var e=this.yP,r=[],i=[],n=!1;!n;)e?(r.push(e),e=e.left):0<r.length?(e=r.pop(),i.push(e.key),e=e.right):n=!0;return i},p.prototype.values=function(){for(var e=this.yP,r=[],i=[],n=!1;!n;)e?(r.push(e),e=e.left):0<r.length?(e=r.pop(),i.push(e.data),e=e.right):n=!0;return i},p.prototype.at=function(e){for(var r=this.yP,i=[],n=!1,a=0;!n;)if(r)i.push(r),r=r.left;else if(0<i.length){if(r=i.pop(),a===e)return r;a++,r=r.right}else n=!0;return null},p.prototype.load=function(e,r,i){if(void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===i&&(i=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=e.length;return i&&function f(t,e,r,i,n){if(!(i<=r)){for(var a=t[r+i>>1],o=r-1,s=i+1;;){for(;n(t[++o],a)<0;);for(;0<n(t[--s],a););if(s<=o)break;var u=t[o];t[o]=t[s],t[s]=u,u=e[o],e[o]=e[s],e[s]=u}f(t,e,r,s,n),f(t,e,s+1,i,n)}}(e,r,0,n-1,this.bP),this.yP=function c(t,e,r,i,n){var a=n-i;if(0<a){var o=i+Math.floor(a/2),f={key:e[o],data:r[o],parent:t};return f.left=c(f,e,r,i,o),f.right=c(f,e,r,o+1,n),f}return null}(null,e,r,0,n),this._size=n,this},p.prototype.min=function(){var e=this.MP(this.yP);return e?e.key:null},p.prototype.max=function(){var e=this.SP(this.yP);return e?e.key:null},p.prototype.isEmpty=function(){return null===this.yP},e.size.get=function(){return this._size},p.LP=function(e,r,i,n,a){return new p(i,a).load(e,r,n)},Object.defineProperties(p.prototype,e);var o=0,u=1,h=2,l=3,b=0,s=1,y=2,d=3;function m(t,e,r){null===e?(t.PP=!1,t.OP=!0):(t._P===e._P?(t.PP=!e.PP,t.OP=e.OP):(t.PP=!e.OP,t.OP=e.NP()?!e.PP:e.PP),e&&(t.CP=!n(e,r)||e.NP()?e.CP:e));var i=n(t,r);t.hN=i?function(t,e){var n,r=!t.PP,i=!t.OP;switch(e){case b:n=r&&i;break;case s:n=r||i;break;case d:n=r^i;break;case y:n=t._P?r&&!i:i&&!r}return n?1:-1}(t,r):0}function n(t,e){switch(t.type){case o:switch(e){case b:return!t.OP;case s:return t.OP;case y:return t._P&&t.OP||!t._P&&!t.OP;case d:return!0}break;case h:return e===b||e===s;case l:return e===y;case u:return!1}return!1}var v=function(e,r,i,n,a){this.left=r,this.kP=e,this.IP=i,this._P=n,this.type=a||o,this.PP=!1,this.OP=!1,this.CP=null,this.hN=0,this.lN=-1,this.dN=-1,this.DP=!0},r={EP:{configurable:!0}};function g(t,e){return t[0]===e[0]&&t[1]===e[1]}v.prototype.FP=function(e){var r=this.kP,i=this.IP.kP;return this.left?0<(r[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(r[1]-e[1]):0<(i[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(i[1]-e[1])},v.prototype.RP=function(e){return!this.FP(e)},v.prototype.NP=function(){return this.kP[0]===this.IP.kP[0]},r.EP.get=function(){return 0!==this.hN},v.prototype.clone=function(){var e=new v(this.kP,this.left,this.IP,this._P,this.type);return e.UP=this.UP,e.hN=this.hN,e.CP=this.CP,e.DP=this.DP,e.PP=this.PP,e.OP=this.OP,e},Object.defineProperties(v.prototype,r);var T=11102230246251565e-32,j=134217729,C=(3+8*T)*T;function E(t,e,r,i,n){var a,o,s,u,f=e[0],c=i[0],h=0,l=0;f<c==-f<c?(a=f,f=e[++h]):(a=c,c=i[++l]);var d=0;if(h<t&&l<r)for(f<c==-f<c?(s=a-((o=f+a)-f),f=e[++h]):(s=a-((o=c+a)-c),c=i[++l]),a=o,0!==s&&(n[d++]=s);h<t&&l<r;)f<c==-f<c?(s=a-((o=a+f)-(u=o-a))+(f-u),f=e[++h]):(s=a-((o=a+c)-(u=o-a))+(c-u),c=i[++l]),a=o,0!==s&&(n[d++]=s);for(;h<t;)s=a-((o=a+f)-(u=o-a))+(f-u),f=e[++h],a=o,0!==s&&(n[d++]=s);for(;l<r;)s=a-((o=a+c)-(u=o-a))+(c-u),c=i[++l],a=o,0!==s&&(n[d++]=s);return 0===a&&0!==d||(n[d++]=a),d}function M(t){return new(commonjsGlobal.Float64Array?Float64Array:Array)(t)}var A=(3+16*T)*T,R=(2+12*T)*T,U=(9+64*T)*T*T,F=M(4),G=M(8),V=M(12),B=M(16),z=M(4);function x(t,e,r,i,n,a){var o=(e-a)*(r-n),s=(t-n)*(i-a),u=o-s;if(0==o||0==s||0<o!=0<s)return u;var f=Math.abs(o+s);return Math.abs(u)>=A*f?u:-function(t,e,r,i,n,a,o){var s,u,f,c,h,l,d,v,g,p,b,y,m,T,M,A,w,x,S=t-n,P=r-n,k=e-a,$=i-a;h=(M=(v=S-(d=(l=j*S)-(l-S)))*(p=$-(g=(l=j*$)-(l-$)))-((T=S*$)-d*g-v*g-d*p))-(b=M-(w=(v=k-(d=(l=j*k)-(l-k)))*(p=P-(g=(l=j*P)-(l-P)))-((A=k*P)-d*g-v*g-d*p))),F[0]=M-(b+h)+(h-w),h=(m=T-((y=T+b)-(h=y-T))+(b-h))-(b=m-A),F[1]=m-(b+h)+(h-A),h=(x=y+b)-y,F[2]=y-(x-h)+(b-h),F[3]=x;var _=function(t,e){for(var r=e[0],i=1;i<t;i++)r+=e[i];return r}(4,F),L=R*o;if(L<=_||L<=-_)return _;if(s=t-(S+(h=t-S))+(h-n),f=r-(P+(h=r-P))+(h-n),u=e-(k+(h=e-k))+(h-a),c=i-($+(h=i-$))+(h-a),0==s&&0==u&&0==f&&0==c)return _;if((L=U*o+C*Math.abs(_))<=(_+=S*c+$*s-(k*f+P*u))||L<=-_)return _;h=(M=(v=s-(d=(l=j*s)-(l-s)))*(p=$-(g=(l=j*$)-(l-$)))-((T=s*$)-d*g-v*g-d*p))-(b=M-(w=(v=u-(d=(l=j*u)-(l-u)))*(p=P-(g=(l=j*P)-(l-P)))-((A=u*P)-d*g-v*g-d*p))),z[0]=M-(b+h)+(h-w),h=(m=T-((y=T+b)-(h=y-T))+(b-h))-(b=m-A),z[1]=m-(b+h)+(h-A),h=(x=y+b)-y,z[2]=y-(x-h)+(b-h),z[3]=x;var N=E(4,F,4,z,G);h=(M=(v=S-(d=(l=j*S)-(l-S)))*(p=c-(g=(l=j*c)-(l-c)))-((T=S*c)-d*g-v*g-d*p))-(b=M-(w=(v=k-(d=(l=j*k)-(l-k)))*(p=f-(g=(l=j*f)-(l-f)))-((A=k*f)-d*g-v*g-d*p))),z[0]=M-(b+h)+(h-w),h=(m=T-((y=T+b)-(h=y-T))+(b-h))-(b=m-A),z[1]=m-(b+h)+(h-A),h=(x=y+b)-y,z[2]=y-(x-h)+(b-h),z[3]=x;var O=E(N,G,4,z,V);h=(M=(v=s-(d=(l=j*s)-(l-s)))*(p=c-(g=(l=j*c)-(l-c)))-((T=s*c)-d*g-v*g-d*p))-(b=M-(w=(v=u-(d=(l=j*u)-(l-u)))*(p=f-(g=(l=j*f)-(l-f)))-((A=u*f)-d*g-v*g-d*p))),z[0]=M-(b+h)+(h-w),h=(m=T-((y=T+b)-(h=y-T))+(b-h))-(b=m-A),z[1]=m-(b+h)+(h-A),h=(x=y+b)-y,z[2]=y-(x-h)+(b-h),z[3]=x;var I=E(O,V,4,z,B);return B[I-1]}(t,e,r,i,n,a,f)}function S(t,e,r){var i=x(t[0],t[1],e[0],e[1],r[0],r[1]);return 0<i?-1:i<0?1:0}function P(t,e){var r=t.kP,i=e.kP;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:function(t,e,r){return t.left===e.left?0===S(r,t.IP.kP,e.IP.kP)?!t._P&&e._P?1:-1:t.FP(e.IP.kP)?-1:1:t.left?1:-1}(t,e,r)}function $(t,e,r){var i=new v(e,!1,t,t._P),n=new v(e,!0,t.IP,t._P);return g(t.kP,t.IP.kP)&&console.warn("what is that, a collapsed segment?",t),i.UP=n.UP=t.UP,0<P(n,t.IP)&&(t.IP.left=!0,n.left=!1),t.IP.IP=n,t.IP=i,r.push(n),r.push(i),r}function _(t,e){return t[0]*e[1]-t[1]*e[0]}function L(t,e){return t[0]*e[0]+t[1]*e[1]}function O(t,e,r){var i=function(t,e,r,i,n){var a=[e[0]-t[0],e[1]-t[1]],o=[i[0]-r[0],i[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var u=[r[0]-t[0],r[1]-t[1]],f=_(a,o),c=f*f,h=L(a,a);if(0<c){var l=_(u,o)/f;if(l<0||1<l)return null;var d=_(u,a)/f;return d<0||1<d?null:0==l||1==l?n?null:[s(t,l,a)]:0==d||1==d?n?null:[s(r,d,o)]:[s(t,l,a)]}if(0<(c=(f=_(u,a))*f))return null;var v=L(a,u)/h,g=v+L(a,o)/h,p=Math.min(v,g),b=Math.max(v,g);return p<=1&&0<=b?1===p?n?null:[s(t,0<p?p:0,a)]:0===b?n?null:[s(t,b<1?b:1,a)]:n&&0===p&&1===b?null:[s(t,0<p?p:0,a),s(t,b<1?b:1,a)]:null}(t.kP,t.IP.kP,e.kP,e.IP.kP),n=i?i.length:0;if(0===n)return 0;if(1===n&&(g(t.kP,e.kP)||g(t.IP.kP,e.IP.kP)))return 0;if(2===n&&t._P===e._P)return 0;if(1===n)return g(t.kP,i[0])||g(t.IP.kP,i[0])||$(t,i[0],r),g(e.kP,i[0])||g(e.IP.kP,i[0])||$(e,i[0],r),1;var a=[],o=!1,s=!1;return g(t.kP,e.kP)?o=!0:1===P(t,e)?a.push(e,t):a.push(t,e),g(t.IP.kP,e.IP.kP)?s=!0:1===P(t.IP,e.IP)?a.push(e.IP,t.IP):a.push(t.IP,e.IP),o&&s||o?(e.type=u,t.type=e.PP===t.PP?h:l,o&&!s&&$(a[1].IP,a[0].kP,r),2):(s?$(a[0],a[1].kP,r):a[0]!==a[3].IP?($(a[0],a[1].kP,r),$(a[1],a[2].kP,r)):($(a[0],a[1].kP,r),$(a[3].IP,a[2].kP,r)),3)}function I(t,e){if(t===e)return 0;if(0!==S(t.kP,t.IP.kP,e.kP)||0!==S(t.kP,t.IP.kP,e.IP.kP))return g(t.kP,e.kP)?t.FP(e.IP.kP)?-1:1:t.kP[0]===e.kP[0]?t.kP[1]<e.kP[1]?-1:1:1===P(t,e)?e.RP(t.kP)?-1:1:t.FP(e.kP)?-1:1;if(t._P!==e._P)return t._P?-1:1;var r=t.kP,i=e.kP;return r[0]===i[0]&&r[1]===i[1]?(r=t.IP.kP,i=e.IP.kP,r[0]===i[0]&&r[1]===i[1]?0:t.UP>e.UP?1:-1):1===P(t,e)?1:-1}var W=function(){this.points=[],this.vN=[],this.gN=null,this.depth=null};function q(t,e,r,i){var o,n=t+1,a=e[t].kP,s=e.length;for(n<s&&(o=e[n].kP);n<s&&o[0]===a[0]&&o[1]===a[1];){if(!r[n])return n;o=e[++n].kP}for(n=t-1;r[n]&&i<n;)n--;return n}function X(t){var o,e,s=function(t){var e,r,i,n,a=[];for(r=0,i=t.length;r<i;r++)((e=t[r]).left&&e.EP||!e.left&&e.IP.EP)&&a.push(e);for(var o=!1;!o;)for(o=!0,r=0,i=a.length;r<i;r++)r+1<i&&1===P(a[r],a[r+1])&&(n=a[r],a[r]=a[r+1],a[r+1]=n,o=!1);for(r=0,i=a.length;r<i;r++)(e=a[r]).lN=r;for(r=0,i=a.length;r<i;r++)(e=a[r]).left||(n=e.lN,e.lN=e.IP.lN,e.IP.lN=n);return a}(t),u={},f=[],r=function(){if(!u[o]){var e=f.length,t=function(t,e,r){var i=new W;if(null!=t.CP){var n=t.CP,a=n.dN;if(0<n.hN){var s=e[a];if(null!=s.gN){var u=s.gN;e[u].vN.push(r),i.gN=u,i.depth=e[a].depth}else e[a].vN.push(r),i.gN=a,i.depth=e[a].depth+1}else i.gN=null,i.depth=e[a].depth}else i.gN=null,i.depth=0;return i}(s[o],f,e),r=function(t){u[t]=!0,s[t].dN=e},i=o,n=o,a=s[o].kP;for(t.points.push(a);r(i),r(i=s[i].lN),t.points.push(s[i].kP),(i=q(i,s,u,n))!=n;);f.push(t)}};for(o=0,e=s.length;o<e;o++)r();return f}W.prototype.pN=function(){return null==this.gN};var K=J,Q=J;function J(t,e){if(!(this instanceof J))return new J(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||tt,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this.zP(r)}function tt(t,e){return t<e?-1:e<t?1:0}J.prototype={push:function(t){this.data.push(t),this.length++,this.El(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this.zP(0)),this.data.pop(),t}},GP:function(){return this.data[0]},El:function(t){for(var e=this.data,r=this.compare,i=e[t];0<t;){var n=t-1>>1,a=e[n];if(0<=r(i,a))break;e[t]=a,t=n}e[t]=i},zP:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var a=1+(t<<1),o=a+1,s=e[a];if(o<this.length&&r(e[o],s)<0&&(s=e[a=o]),0<=r(s,n))break;e[t]=s,t=a}e[t]=n}},K.default=Q;var et=Math.max,rt=Math.min,it=0;function nt(t,e,r,i,n,a){var o,s,u,f,c,h;for(o=0,s=t.length-1;o<s;o++)if(u=t[o],f=t[o+1],c=new v(u,!1,void 0,e),h=new v(f,!1,c,e),c.IP=h,u[0]!==f[0]||u[1]!==f[1]){c.UP=h.UP=r,a||(c.DP=!1,h.DP=!1),0<P(c,h)?h.left=!0:c.left=!0;var l=u[0],d=u[1];n[0]=rt(n[0],l),n[1]=rt(n[1],d),n[2]=et(n[2],l),n[3]=et(n[3],d),i.push(c),i.push(h)}}var ot=[];function st(t,e,r){var i=null;return t.length*e.length==0&&(r===b?i=ot:r===y?i=t:r!==s&&r!==d||(i=0===t.length?e:t)),i}function ut(t,e,r,i,n){var a=null;return(r[0]>i[2]||i[0]>r[2]||r[1]>i[3]||i[1]>r[3])&&(n===b?a=ot:n===y?a=t:n!==s&&n!==d||(a=t.concat(e))),a}function ft(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var i=st(t,e,r);if(i)return i===ot?null:i;var n=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=function(t,e,r,i,n){var o,s,u,f,c,h,a=new K(null,P);for(u=0,f=t.length;u<f;u++)for(c=0,h=(o=t[u]).length;c<h;c++)(s=0===c)&&it++,nt(o[c],!0,it,a,r,s);for(u=0,f=e.length;u<f;u++)for(c=0,h=(o=e[u]).length;c<h;c++)s=0===c,n===y&&(s=!1),s&&it++,nt(o[c],!1,it,a,i,s);return a}(t,e,n,a,r);if(i=ut(t,e,n,a,r))return i===ot?null:i;for(var u=X(function(t,i,n,a){for(var f,c,h,o=new p(I),s=[],u=Math.min(i[2],n[2]);0!==t.length;){var l=t.pop();if(s.push(l),a===b&&l.kP[0]>u||a===y&&l.kP[0]>i[2])break;if(l.left){c=f=o.Xc(l),f=f!==(h=o.MP())?o.NM(f):null,c=o.next(c);var d=f?f.key:null;if(m(l,d,a),c&&2===O(l,c.key,t)&&(m(l,d,a),m(l,c.key,a)),f&&2===O(f.key,l,t)){var g=f;m(d,(g=g!==h?o.NM(g):null)?g.key:null,a),m(l,d,a)}}else l=l.IP,c=f=o.find(l),f&&c&&(f=f!==h?o.NM(f):null,c=o.next(c),o.remove(l),c&&f&&O(f.key,c.key,t))}return s}(o,n,a,r)),f=[],c=0;c<u.length;c++){var h=u[c];if(h.pN()){for(var l=[h.points],d=0;d<h.vN.length;d++){var v=h.vN[d];l.push(u[v].points)}f.push(l)}}return f}var vt={VP:s,BP:y,HP:b,WP:d};t.ZP=function(t,e){return ft(t,e,y)},t.qP=function(t,e){return ft(t,e,b)},t.YP=vt,t.union=function(t,e){return ft(t,e,s)},t.xor=function(t,e){return ft(t,e,d)},Object.defineProperty(t,"gP",{value:!0})}(e)}),martinez=unwrapExports(dist$1),Const={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function getSphericalCrs(t,e){var r=function(t){switch(t){case"EPSG3857":return ProjectionManager.getProjection("EPSG:3857");case"EPSG4326":return ProjectionManager.getProjection("EPSG:4326")}return ProjectionManager.getProjection("EPSG3857")}(t);return{project:function(t){return Util.isArray(t)&&(t=new LngLat$2(t[0],t[1])),r.project(t.lng,t.lat)},unproject:function(t){return Util.isArray(t)&&(t=new Pixel(t[0],t[1])),r.unproject(t.x,t.y)},normalizePoint:function(t){return Util.parseLngLatData(t)},distance:function(t,e){if(e=this.normalizePoint(e),Util.isArray(e))return this.distanceToLine(t,e);t=this.normalizePoint(t);var r=Const.vr,i=Math.cos,n=t.lat*r,a=t.lng*r,o=e.lat*r,s=e.lng*r,u=2*Const.yr,f=s-a,c=(1-i(o-n)+(1-i(f))*i(n)*i(o))/2;return u*Math.asin(Math.sqrt(c))},ringArea:function(t){t=this.normalizeLine(t);var e=Const.yr*Const.vr,r=0,i=t,n=i.length;if(n<3)return 0;for(var a=0;a<n-1;a+=1){var o=i[a],s=i[a+1],u=o.lng*e*Math.cos(o.lat*Const.vr),f=o.lat*e,c=s.lng*e*Math.cos(s.lat*Const.vr);r+=u*(s.lat*e)-c*f}var h=i[a],l=i[0],d=h.lng*e*Math.cos(h.lat*Const.vr),v=h.lat*e,g=l.lng*e*Math.cos(l.lat*Const.vr);return r+=d*(l.lat*e)-g*v,.5*Math.abs(r)},sphericalCalotteArea:function(t){var e=Const.yr,r=t/e,i=e-e*Math.cos(r);return 2*Math.PI*e*i}}}function getPlanarCrs(){return{normalizePoint:function(t){return t&&t.x&&t.y?[t.x,t.y]:t},distance:function(t,e){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)},project:function(t){return t},unproject:function(t){return t},ringArea:function(t){for(var e=[0,0],r=[0,0],i=0,n=t[0],a=t.length,o=2;o<a;o++){var s=t[o-1],u=t[o];e[0]=n[0]-u[0],e[1]=n[1]-u[1],r[0]=n[0]-s[0],r[1]=n[1]-s[1],i+=e[0]*r[1]-e[1]*r[0]}return i/2}}}function isClockwise(t){for(var e=0,r=t.length,i=0;i<r-1;i++){var n=t[i];e+=((a=t[i+1])[0]-n[0])*(a[1]+n[1])}var a;t[r-1][0]===t[0][0]&&t[r-1][1]===t[0][1]||(n=t[r-1],e+=((a=t[0])[0]-n[0])*(a[1]+n[1]));return 0<e}var GeometryUtilCls=(hG.prototype.clone=function(t){return new hG(assign({},this._opts,t))},hG.prototype.isPoint=function(t){return t&&(t instanceof LngLat$2||Util.isArray(t)&&!isNaN(t[0]))},hG.prototype.normalizePoint=function(t){return t},hG.prototype.normalizeLine=function(t){for(var e=[],r=0,i=t.length;r<i;r++)e.push(this.normalizePoint(t[r]));return e},hG.prototype.normalizeMultiLines=function(t){Util.isArray(t)&&this.isPoint(t[0])&&(t=[t]);for(var e=[],r=0,i=t.length;r<i;r++)e.push(this.normalizeLine(t[r]));return e},hG.prototype.setCrs=function(t){var e;e=t&&t.project&&t.unproject?t:"plane"===t?getPlanarCrs():getSphericalCrs(t,this._opts.maxZoom),assign(this,e)},hG.prototype.distance=function(t,e){throw new Error("distance Not implemented!")},hG.prototype.xr=function(t,e){t=this.normalizeLine(t),this.isPoint(t[0])||(t=t[0]);for(var r=[],i=0,n=t.length;i<n;i++)r.push(this.project(t[i]));return!0===e?r=this.makesureClockwise(r):!1===e&&(r=this.makesureClockwise(r)).reverse(),r},hG.prototype.br=function(t){for(var e=[],r=0,i=t.length;r<i;r++)e.push(this.unproject(t[r]));return e},hG.prototype.closestOnSegment=function(t,e,r){var i=Coordinate.closestOnSegment(this.project(t),this.xr([e,r]));return this.unproject(i)},hG.prototype.closestOnLine=function(t,e){for(var r,i=1/0,n=0,a=(e=this.normalizeLine(e)).length;n<a-1;n++){var o=this.closestOnSegment(t,e[n],e[n+1]),s=this.distance(t,o);s<i&&(i=s,r=o)}return r},hG.prototype.distanceToSegment=function(t,e,r){return this.distanceToLine(t,[e,r])},hG.prototype.distanceToLine=function(t,e){e=this.normalizeLine(e),this.isPoint(e[0])||(e=e[0]);for(var r=1/0,i=0,n=e.length;i<n-1;i++){var a=this.closestOnSegment(t,e[i],e[i+1]);r=Math.min(r,this.distance(t,a))}return r},hG.prototype.distanceToPolygon=function(t,e){return this.isPointInRing(t,e)?0:this.distanceToLine(t,e)},hG.prototype.isPointOnSegment=function(t,e,r,i){return(!i&&0!==i||i<0)&&(i=this._opts.onSegmentTolerance),this.distanceToSegment(t,e,r)<=i},hG.prototype.isPointOnLine=function(t,e,r){for(var i=0,n=(e=this.normalizeLine(e)).length;i<n-1;i++)if(this.isPointOnSegment(t,e[i],e[i+1],r))return!0;return!1},hG.prototype.isPointOnRing=function(t,e,r){for(var i=0,n=(e=this.normalizeLine(e)).length;i<n;i++)if(this.isPointOnSegment(t,e[i],e[i===n-1?0:i+1],r))return!0;return!1},hG.prototype.isPointOnPolygon=function(t,e,r){for(var i=0,n=(e=this.normalizeMultiLines(e)).length;i<n;i++)if(this.isPointOnRing(t,e[i],r))return!0;return!1},hG.prototype.makesureClockwise=function(t){return isClockwise(t)||(t=[].concat(t)).reverse(),t},hG.prototype.makesureAntiClockwise=function(t){return isClockwise(t)&&(t=[].concat(t)).reverse(),t},hG.prototype.pointInRing=function(t,e,r){for(var i=!1,n=0;n<e.length&&!i;n++)if(s(t,e[n][0],r)){for(var a=!1,o=1;o<e[n].length&&!a;)s(t,e[n][o],!r)&&(a=!0),o++;a||(i=!0)}function s(t,e,r){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var n=0,a=e.length-1;n<e.length;a=n++){var o=e[n][0],s=e[n][1],u=e[a][0],f=e[a][1];if(t[1]*(o-u)+s*(u-t[0])+f*(t[0]-o)==0&&(o-t[0])*(u-t[0])<=0&&(s-t[1])*(f-t[1])<=0)return!r;s>t[1]!=f>t[1]&&t[0]<(u-o)*(t[1]-s)/(f-s)+o&&(i=!i)}return i}return i},hG.prototype.isPointInRing=function(t,e){e=this.normalizeLine(e);var r=this.xr(e,!0);return Coordinate.ss(this.project(t),r,!1)},hG.prototype.isRingInRing=function(t,e){for(var r=0,i=t.length;r<i;r++)if(!this.isPointInRing(t[r],e))return!1;return!0},hG.prototype.isPointInPolygon=function(t,e){for(var r,i=0,n=(e=this.normalizeMultiLines(e)).length;i<n&&(r=this.isPointInRing(t,e[i]),0<i&&(r=!r),r);i+=1);return Boolean(r)},hG.prototype.doesSegmentsIntersect=function(t,e,r,i){var n=this.xr([t,e,r,i]);t=n[0],e=n[1],r=n[2];var a=!1,o=((i=n[3])[0]-r[0])*(t[1]-r[1])-(i[1]-r[1])*(t[0]-r[0]),s=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]),u=(i[1]-r[1])*(e[0]-t[0])-(i[0]-r[0])*(e[1]-t[1]);if(0!=u){var f=o/u,c=s/u;0<=f&&f<=1&&0<=c&&c<=1&&(a=!0)}return a},hG.prototype.doesSegmentLineIntersect=function(t,e,r){for(var i=0,n=(r=this.normalizeLine(r)).length;i<n-1;i++)if(this.doesSegmentsIntersect(t,e,r[i],r[i+1]))return!0;return!1},hG.prototype.doesSegmentRingIntersect=function(t,e,r){for(var i=0,n=(r=this.normalizeLine(r)).length;i<n;i++)if(this.doesSegmentsIntersect(t,e,r[i],r[i===n-1?0:i+1]))return!0;return!1},hG.prototype.doesSegmentPolygonIntersect=function(t,e,r){for(var i=0,n=(r=this.normalizeMultiLines(r)).length;i<n;i++)if(this.doesSegmentRingIntersect(t,e,r[i]))return!0;return!1},hG.prototype.doesLineLineIntersect=function(t,e){for(var r=0,i=(t=this.normalizeLine(t)).length;r<i-1;r++)if(this.doesSegmentLineIntersect(t[r],t[r+1],e))return!0;return!1},hG.prototype.doesLineRingIntersect=function(t,e){for(var r=0,i=(t=this.normalizeLine(t)).length;r<i-1;r++)if(this.doesSegmentRingIntersect(t[r],t[r+1],e))return!0;return!1},hG.prototype.doesPolygonPolygonIntersect=function(t,e){return!!(this.doesRingRingIntersect(e,t)||this.isRingInRing(t,e)||this.isRingInRing(e,t))},hG.prototype.doesRingRingIntersect=function(t,e){for(var r=0,i=(t=this.normalizeLine(t)).length;r<i;r++)if(this.doesSegmentRingIntersect(t[r],t[r===i-1?0:r+1],e))return!0;return!1},hG.prototype.along=function(t,e){for(var r=0,i=0;i<t.length-1;i+=1){var n=this.distance(t[i],t[i+1]);if(!(n+r<e)){var a=(e-r)/n;return[t[i][0]+a*(t[i+1][0]-t[i][0]),t[i][1]+a*(t[i+1][1]-t[i][1]),i]}r+=n}return null},hG.prototype.gr=function(t,e){var a,o,s,u;function r(t){return(o[0]-a[0])*(t[1]-a[1])>(o[1]-a[1])*(t[0]-a[0])}function i(){var t=[a[0]-o[0],a[1]-o[1]],e=[s[0]-u[0],s[1]-u[1]],r=a[0]*o[1]-a[1]*o[0],i=s[0]*u[1]-s[1]*u[0],n=1/(t[0]*e[1]-t[1]*e[0]);return[(r*e[0]-i*t[0])*n,(r*e[1]-i*t[1])*n]}t=this.makesureAntiClockwise(t),e=this.makesureClockwise(e);var n=t;a=e[e.length-1];for(var f=0,c=e.length;f<c;f++){o=e[f];var h=n;n=[],s=h[h.length-1];for(var l=0,d=h.length;l<d;l++)r(u=h[l])?(r(s)||n.push(i()),n.push(u)):r(s)&&n.push(i()),s=u;a=o}return n},hG.prototype.ringRingClip=function(t,e){t=this.xr(t),e=this.xr(e),isEqual(t[0],t[t.length-1])||t.push(t[0].slice()),isEqual(e[0],e[e.length-1])||e.push(e[0].slice());var r=martinez.qP([t],[e]);return r[0]&&r[0][0]?this.br(r[0][0]):[]},hG.prototype.ringArea=function(t){throw new Error("distance Not implemented!")},hG.prototype.distanceOfLine=function(t){for(var e=0,r=0,i=(t=this.normalizeLine(t)).length;r<i-1;r++)e+=this.distance(t[r],t[r+1]);return e},hG.prototype.isClockwise=function(t){return isClockwise(t=this.xr(t))},hG.prototype.typePolygon=function(t){return isArray(t)&&isArray(t[0])?2===t[0][0].length||t[0][0]instanceof LngLat$2?"Polygon":2<t[0][0].length&&(2===t[0][0][0].length||t[0][0][0]instanceof LngLat$2)?"MultiPolygon":"never":"never"},hG);function hG(t){this.CLASS_NAME="AMap.GeometryUtil",this._opts=assign({onSegmentTolerance:5,crs:"EPSG3857",maxZoom:20},t),this.setCrs(this._opts.crs)}var GeometryUtilInstance=new GeometryUtilCls({}),PlaneGeometryUtilInstance=new GeometryUtilCls({});PlaneGeometryUtilInstance.setCrs("plane");var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)};function calcTileMectorBounds(t,e,r){var i=ProjectionManager.getProjection("EPSG:3857"),n=Math.pow(2,t),a=360/n,o=180/n,s=a*e-180,u=s+a,f=o*(n-r-1)-90,c=f+o,h=i.project(s,f),l=h[0],d=h[1],v=i.project(u,c);return[l,d,v[0],v[1]]}function parseLngLatData(t){if(Array.isArray(t)){if(!Array.isArray(t[0])){var e=typeof t[0];return"string"==e||"number"==e?new LngLat$2(t[0],t[1]):t}for(var r=0;r<t.length;r+=1)t[r]=parseLngLatData(t[r])}return t}function jsonLngLatData(t){if(isLngLat(t))return[t.getLng(),t.getLat()];if(Array.isArray(t)){for(var e=t.slice(0),r=0;r<e.length;r+=1)e[r]=jsonLngLatData(e[r]);return e}return t}function multiPolygonJson(t){var e=jsonLngLatData(t);if(isNumberArrayArray(e))e=[[e]];else if(isNumberArrayArrayArray(e))e=[e];else{if(!isNumberArrayArrayArrayArray(e))return;e=e}return e}function pointInRing(t,e,r){return Coordinate.ss(t,e,r)}function pointInPolygon(t,e){if(!pointInRing(t,e[0]))return!1;for(var r=1,i=e.length;r<i;r++)if(pointInRing(t,e[r],!0))return!1;return!0}function pointInMultiPolygon(t,e){for(var r=0,i=e;r<i.length;r++)if(pointInPolygon(t,i[r]))return!0;return!1}function moveRingWithPos(t,e,r){for(var i=[],n=0,a=t;n<a.length;n++){var o=a[n];i.push(r.moveWithPos(o,e))}return i}function movePolygonWithPos(t,e,r){for(var i=[],n=0,a=t;n<a.length;n++){var o=moveRingWithPos(a[n],e,r);i.push(o)}return i}function moveMultiPolygonWithPos(t,e,r){for(var i=[],n=0,a=t;n<a.length;n++){var o=movePolygonWithPos(a[n],e,r);i.push(o)}return i}function moveRingWithPixel(t,e,r,i){for(var n=[],a=0,o=t;a<o.length;a++){var s=o[a];n.push(i.moveWithPixel(s,e,r))}return n}function movePolygonWithPixel(t,e,r,i){for(var n=[],a=0,o=t;a<o.length;a++){var s=moveRingWithPixel(o[a],e,r,i);n.push(s)}return n}function moveMultiPolygonWithPixel(t,e,r,i){for(var n=[],a=0,o=t;a<o.length;a++){var s=movePolygonWithPixel(o[a],e,r,i);n.push(s)}return n}function getRingArea(t){return GeometryUtil.ringArea(t)}function getPolygonArea(t){for(var e=getRingArea(t[0]),r=1;r<t.length;r++)e-=getRingArea(t[r]);return e}function getMultiPolygonArea(t){for(var e=0,r=0,i=t;r<i.length;r++)e+=getPolygonArea(i[r]);return e}function distanceBetweenPos(t,e){var r=Math.abs(t[0]-e[0]),i=Math.abs(t[1]-e[1]);return Math.sqrt(r*r+i*i)}function multiPolylineJson(t){var e=jsonLngLatData(t);return isNumberArrayArray(e)&&(e=[e]),e}function distanceOfPolyline(t){return GeometryUtil.distanceOfLine(t)}function distanceOfMultiPolyline(t){for(var e=0,r=0,i=t;r<i.length;r++)e+=distanceOfPolyline(i[r]);return e}function generateGeodesicPath(t){if(t.length<2)return t;var e=[];e.push(t[0]);for(var r=1,i=t.length;r<i;r++){var n=t[r-1],a=t[r];Array.prototype.push.apply(e,getGeodesicPoints(LngLat$2.from(n),LngLat$2.from(a))),e.push(a)}return e}var d2r=Math.PI/180,r2d=180/Math.PI;function getGeodesicPoints(t,e){var r=Math.round(Math.abs(t.KL-e.KL));if(!r||Math.abs(t.KL-e.KL)<.001)return[];var i,n,a,o,s,u,f,c,h=[],l=Math.PI,d=Math.asin,v=Math.sqrt,g=Math.sin,p=Math.pow,b=Math.cos,y=Math.atan2,m=t.kT*d2r,T=t.KL*d2r,M=e.kT*d2r,A=e.KL*d2r,w=2*d(v(p(g((m-M)/2),2)+b(m)*b(M)*p(g((T-A)/2),2)));for(i=1;i<r;i+=1)a=g((1-(n=1/r*i))*w)/g(w),o=g(n*w)/g(w),s=a*b(m)*b(T)+o*b(M)*b(A),u=a*b(m)*g(T)+o*b(M)*g(A),f=y(a*g(m)+o*g(M),v(p(s,2)+p(u,2))),c=y(u,s),T<A?(c<T&&(c+=2*l),A<c&&(c-=2*l)):(T<c&&(c-=2*l),c<A&&(c+=2*l)),h.push([c*r2d,f*r2d]);return h}var LngLat$2=(bM.from=function(t){return isLngLat(t)?new bM(t.KL,t.kT):new bM(t[0],t[1])},bM.prototype.setLng=function(t){return this.KL=t,this.lng=Math.round(1e6*t)/1e6,this},bM.prototype.setLat=function(t){return this.kT=t,this.lat=Math.round(1e6*t)/1e6,this},bM.prototype.getLng=function(){return this.lng},bM.prototype.getLat=function(){return this.lat},bM.prototype.equals=function(t){return(t=parseLngLatData(t))instanceof bM&&Math.max(Math.abs(this.kT-t.kT),Math.abs(this.KL-t.KL))<=1e-9},bM.prototype.add=function(t,e){return new bM(this.KL+t.KL,this.kT+t.kT,e)},bM.prototype.subtract=function(t,e){return new bM(this.KL-t.KL,this.kT-t.kT,e)},bM.prototype.divideBy=function(t,e){return new bM(this.KL/t,this.kT/t,e)},bM.prototype.multiplyBy=function(t,e){return new bM(this.KL*t,this.kT*t,e)},bM.prototype.offset=function(t,e){if(isNaN(t)||isNaN(e))throw Error("valid offset args, require number");var r=2*Math.asin(Math.sin(Math.round(t)/12756274)/Math.cos(this.kT*Math.PI/180)),i=this.KL+180*r/Math.PI,n=2*Math.asin(Math.round(e)/12756274);return new bM(i,this.kT+180*n/Math.PI)},bM.prototype.toString=function(){return this.lng+","+this.lat},bM.prototype.toArray=function(){return[this.lng,this.lat]},bM.prototype.toJSON=function(){return[this.lng,this.lat]},bM.prototype.distanceTo=function(t){return GeometryUtil.distance(this,t)},bM.prototype.distance=function(t){return GeometryUtil.distance(this,t)},bM);function bM(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.LngLat",isNumberArray(t)?(t=parseFloat(t[0]),e=parseFloat(t[1])):(e=parseFloat(e),t=parseFloat(t)),isNaN(t)||isNaN(e))throw Error("Invalid Object: LngLat("+t+", "+e+")");!0!==r&&(e=Math.max(Math.min(e,90),-90),t=(t+180)%360+(t<-180||180===t?180:-180)),this.kT=e,this.KL=t,this.lng=Math.round(1e6*t)/1e6,this.lat=Math.round(1e6*e)/1e6,this.pos=ProjectionManager.getProjection("EPSG:3857").project(t,e)}var Size=(AM.prototype.getWidth=function(){return this.width},AM.prototype.getHeight=function(){return this.height},AM.prototype.toString=function(){return this.width+","+this.height},AM.prototype.toArray=function(){return[this.width,this.height]},AM);function AM(t,e,r){if(void 0===r&&(r=!1),this.className="AMap.Size",isNaN(t)||isNaN(e))throw new Error("Invalid Object: Pixel("+t+", "+e+")");this.width=r?Math.round(t):Number(t),this.height=r?Math.round(e):Number(e)}var easing=(EM={},FM=4,HM=1e-7,IM=10,LM="function"==typeof Float32Array,function(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var t=arguments.toString();if(EM[t])return EM[t];if(a===e&&o===r)return TM;for(var s=new(LM?Float32Array:Array)(11),i=0;i<11;++i)s[i]=PM(.1*i,a,o);return EM[t]=function(t){return 0===t?0:1===t?1:PM(function(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var i=e+(t-s[--r])/(s[r+1]-s[r])*.1,n=QM(i,a,o);return.001<=n?function(t,e,r,i){for(var n=0;n<FM;++n){var a=QM(e,r,i);if(0===a)return e;e-=(PM(e,r,i)-t)/a}return e}(t,i,a,o):0===n?i:function(t,e,r,i,n){for(var a,o,s=0;0<(a=PM(o=e+(r-e)/2,i,n)-t)?r=o:e=o,Math.abs(a)>HM&&++s<IM;);return o}(t,e,e+.1,a,o)}(t),e,r)}}),EM,FM,HM,IM,LM;function MM(t,e){return 1-3*e+3*t}function NM(t,e){return 3*e-6*t}function OM(t){return 3*t}function PM(t,e,r){return((MM(e,r)*t+NM(e,r))*t+OM(e))*t}function QM(t,e,r){return 3*MM(e,r)*t*t+2*NM(e,r)*t+OM(e)}function TM(t){return t}function getQuadBezierValue(t,e,r,i){if(1<=t)return i;var n=1-t;return n*n*e+2*n*t*r+t*t*i}function cubic(t,e,r,i,n){if(1<=t)return n;var a=3*(r.pos[0]-e.pos[0]),o=3*(i.pos[0]-r.pos[0])-a,s=n.pos[0]-e.pos[0]-a-o,u=3*(r.pos[1]-e.pos[1]),f=3*(i.pos[1]-r.pos[1])-u,c=n.pos[1]-e.pos[1]-u-f,h=s*Math.pow(t,3)+o*Math.pow(t,2)+a*t+e.pos[0],l=c*Math.pow(t,3)+f*Math.pow(t,2)+u*t+e.pos[1];return ProjectionManager.getProjection("EPSG:3857").unproject(h,l)}function quad(t,e,r,i){return ProjectionManager.getProjection("EPSG:3857").unproject(getQuadBezierValue(t,e.pos[0],r.pos[0],i.pos[0]),getQuadBezierValue(t,e.pos[1],r.pos[1],i.pos[1]))}function p20CoordsToLngLat(t,e){return Array.isArray(e)&&(e=new Pixel(e[0],e[1])),t.containerTolnglat(e,20)}function getSplitNum(t,e){var r=4,i=[3,300];r=Math.max(2,r);for(var n=0,a=0,o=0,s=t.length;o<s-1;o++){var u=t[o],f=t[o+1];n+=Math.abs(f.pos[0]-u.pos[0]),a+=Math.abs(f.pos[1]-u.pos[1])}return Math.min(i[1],Math.max(i[0],Math.round(Math.max(n,a)/e/r)))}function interpolateCoords(t,e){var r=null;switch(e.length){case 3:r=quad;break;case 4:r=cubic;break;default:return null}for(var i=[],n=[0].concat(e),a=1;a<t-2;a++)n[0]=a/t,i.push(r.apply(null,n));return i.push(e[e.length-1]),i}function getCoordsWithControlPoints(t,e,r,i){var n=null;if(t&&r&&r.length){var a=[t];a.push.apply(a,r),a.push(e),a.length,n=interpolateCoords(getSplitNum(a,i),a)}return n||[e]}var BezierUtil={ag:quad,ug:cubic,sg:easing,xb:function(t,e){var r,i,n=[];for(r=0,i=t.length;r<i;r+=1)n.push.apply(n,getCoordsWithControlPoints(t[r-1],t[r],t[r].controlPoints,e));return n},fg:function(t,e,r,i){for(var n=this.xb(t,e,r,i),a=[],o=0,s=n.length;o<s;o++)a.push(p20CoordsToLngLat(e,n[o]));return a}},LCS=(SO.prototype.getSize=function(){return[this.lg,this.dg]},SO.prototype.getNum=function(){return[this.cg,this.vg]},SO.prototype.getLocalByLnglat=function(t){var e,r=(e=ProjectionManager.getProjection("EPSG:3857")).project.apply(e,t);return this.getLocalByCoord(r)},SO.prototype.getLocalByCoord=function(t){var e=Math.floor(t[0]/this.lg),r=Math.floor(t[1]/this.dg),i=this.getLocalCenterByXY(e,r);return exports.Ln(exports.Ln({},i),{Sa:[t[0]-i.center[0],t[1]-i.center[1]]})},SO.prototype.getLocalCenterByXY=function(t,e){var r={x:t,y:e,center:[0,0],Ro:[0,0,0,0]};return r.center=[(t+.5)*this.lg,(e+.5)*this.dg],r.Ro=[t*this.lg,e*this.dg,(t+1)*this.lg,(e+1)*this.dg],r},SO.prototype.getDeltaCoord=function(t){var e=this.getLocalByCoord(t);return[t[0]-e.center[0],t[1]-e.center[1]]},SO);function SO(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],this.cg=128,this.vg=128,this.lg=(this.hg[2]-this.hg[0])/this.cg,this.dg=(this.hg[3]-this.hg[1])/this.vg}var lcs=new LCS,LocalZoom=13,LocalTileZoom=12,AMapStyleSource="",AdaptorMap=(Object.defineProperty(dP.prototype,"size",{get:function(){return keys(this.VL).length},enumerable:!0,configurable:!0}),dP.prototype.clear=function(){this.VL={}},dP.prototype.set=function(t,e){this.VL[t]=e},dP.prototype.get=function(t){return this.VL[t]},dP.prototype.delete=function(t){delete this.VL[t]},dP.prototype.has=function(t){return void 0!==this.VL[t]},dP);function dP(){this.VL={}}var NEWER="newer",OLDER="older",LRUMap=(jP.prototype.Uo=function(t){this.Bo=t},jP.prototype.keys=function(){return new KeyIterator(this.Wo)},jP.prototype.values=function(){return new ValueIterator(this.Wo)},jP.prototype.entries=function(){return this},jP.prototype.forEach=function(t,e){"object"!=typeof e&&(e=this);for(var r=this.Wo;r;)t.call(e,r.value,r.key,this),r=r[NEWER]},jP.prototype.toJSON=function(){for(var t=new Array(this.size),e=0,r=this.Wo;r;)t[e++]={key:r.key,value:r.value},r=r[NEWER];return t},jP.prototype.toString=function(){for(var t="",e=this.Wo;e;)t+=String(e.key)+":"+e.value,(e=e[NEWER])&&(t+=" < ");return t},jP.prototype.Go=function(t){t!==this.Zo&&(t[NEWER]&&(t===this.Wo&&(this.Wo=t[NEWER]),t[NEWER][OLDER]=t[OLDER]),t[OLDER]&&(t[OLDER][NEWER]=t[NEWER]),t[NEWER]=void 0,t[OLDER]=this.Zo,this.Zo&&(this.Zo[NEWER]=t),this.Zo=t)},jP.prototype.assign=function(t){var e,r=this.Bo||Number.MAX_VALUE;this.qo.clear();for(var i=t,n=i.next();!n.done;n=i.next()){var a=new Entry(n.value[0],n.value[1]);if(this.qo.set(a.key,a),e?(e[NEWER]=a)[OLDER]=e:this.Wo=a,e=a,0==r--)throw new Error("overflow")}this.Zo=e,this.size=this.qo.size},jP.prototype.get=function(t,e){var r=this.qo.get(t);if(r)return e&&this.Go(r),r.value},jP.prototype.set=function(t,e){var r=this.qo.get(t);return r?(r.value=e,this.Go(r)):(this.qo.set(t,r=new Entry(t,e)),this.Zo?(this.Zo[NEWER]=r)[OLDER]=this.Zo:this.Wo=r,this.Zo=r,++this.size,this.size>this.Bo&&this.MN()),this},jP.prototype.shift=function(){var t=this.Wo;if(t)return this.Wo[NEWER]?(this.Wo=this.Wo[NEWER],this.Wo[OLDER]=void 0):(this.Wo=void 0,this.Zo=void 0),t[NEWER]=t[OLDER]=void 0,t.value.destroy(),this.qo.delete(t.key),--this.size,[t.key,t.value]},jP.prototype.find=function(t){var e=this.qo.get(t);return e?e.value:void 0},jP.prototype.has=function(t){return this.qo.has(t)},jP.prototype.delete=function(t){var e=this.qo.get(t);if(e)return this.qo.delete(e.key),e[NEWER]&&e[OLDER]?(e[OLDER][NEWER]=e[NEWER],e[NEWER][OLDER]=e[OLDER]):e[NEWER]?(e[NEWER][OLDER]=void 0,this.Wo=e[NEWER]):e[OLDER]?(e[OLDER][NEWER]=void 0,this.Zo=e[OLDER]):this.Wo=this.Zo=void 0,this.size--,e.value},jP.prototype.clear=function(){this.Wo=this.Zo=void 0,this.size=0,this.qo.clear()},jP.prototype.AN=function(t){if("loaded"!==t.value.status)return!0;var e=t.value.stamp;return e&&this.wN&&e===this.wN},jP.prototype.QF=function(t){this.wN=t},jP.prototype.MN=function(){for(var t=this.Wo,e=this.Zo.key;t&&e&&t.key!==e;){if(this.AN(t))this.Go(t);else if(this.shift(),this.size<=this.Bo)return;t=this.Wo}},jP);function jP(t,e){this.entries=e,"number"!=typeof(this.Bo=t)&&(e=t,t=0),this.size=0,this.Bo=t,this.Wo=this.Zo=void 0,this.qo=new("undefined"!=typeof Map?Map:AdaptorMap),e&&(this.assign(e),t<1&&(this.Bo=this.size))}var Entry=function(t,e){this.key=t,this.value=e,this[NEWER]=void 0,this[OLDER]=void 0},KeyIterator=(WP.prototype.next=function(){var t=this.Yo;return t?(this.Yo=t[NEWER],{done:!1,value:t.key}):{done:!0,value:void 0}},WP);function WP(t){this.Vo=t}var ValueIterator=(ZP.prototype.next=function(){var t=this.Yo;return t?(this.Yo=t[NEWER],{done:!1,value:t.value}):{done:!0,value:void 0}},ZP);function ZP(t){this.Vo=t}var TileCache=(aQ.prototype.QF=function(t){this.Ho.QF(t)},aQ.prototype.Xo=function(t){this.Ho.Uo(t)},aQ.prototype.Jo=function(t){var e=this.ia(t.zo);this.keys[e]=1,this.Ho.set(e,t)},aQ.prototype.Qo=function(t){var e=this.ia(t.zo);this.Ho.set(e,t)},aQ.prototype.ta=function(t,e){return void 0===e&&(e=!0),this.Ko(t)?this.Ho.get(this.ia(t),e):null},aQ.prototype.xf=function(t,e){return void 0===e&&(e=!1),this.Ho.has(t)?this.Ho.get(t,e):null},aQ.prototype.ea=function(t){var e=this.ia(t.zo);return!!this.Ko(t.zo)&&(this.Ho.delete(e),delete this.keys[e],!0)},aQ.prototype.Ko=function(t){var e=this.ia(t);return!!this.Ho.has(e)},aQ.prototype.destroy=function(){this.Ho.clear()},aQ.prototype.forEach=function(t){this.Ho.forEach(t)},aQ.prototype.ia=function(t){if(t.key)return t.key;var e=t.z+","+t.x+","+t.y;return t.key=e},aQ);function aQ(t){void 0===t&&(t=500),this.keys={},this.na=t,this.Ho=new LRUMap(this.na)}var NebulaTagType={tN:"lite",rj:"left",eN:"all"},NebulaTileCache=(tQ=TileCache,__extends(uQ,tQ),uQ.prototype.MD=function(t,e){void 0===e&&(e=NebulaTagType.eN);var r="";if(t){var i=t.tag;e!==i&&(r="all"===i?"":e===NebulaTagType.eN?i?i===NebulaTagType.tN?NebulaTagType.rj:NebulaTagType.tN:NebulaTagType.eN:e)}else r=NebulaTagType.eN;return r},uQ.prototype.ea=function(t){return t.rN(),tQ.prototype.ea.call(this,t)},uQ),tQ;function uQ(t){return void 0===t&&(t=500),tQ.call(this,t)||this}var TagMap={2:"all",3:"all",4:"all",5:"all",6:"lite",7:"all",8:"lite",9:"all",10:"lite",11:"lite",12:"all",13:"all",14:"all",15:"lite",16:"lite",17:"all",18:"all",19:"all",20:"all"},colorNameDist={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Util=function(){var i,o,e,r,n,a={CLASS_NAME:"AMap.Util",WorldAxesCenter:{x:0,y:0},Single:{},stamp:(e=!0===Support.DW,r=1e5,n="_amap_id",function(t){return t[n]=e?++r:--r,t[n]}),singlton:function(t){var e=l.Single[t];return e||new t},getOptimalZoom:function(t){return t<Math.floor(t)+.8?Math.floor(t):Math.ceil(t)},join:function(t,e){if(t.join)return t.join(e);var r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i+"="+(t[i]||""));return r.join(e)},getGuid:function(t,e){return void 0===e&&(e=10),(t||"")+Math.round(Math.random()*Math.pow(10,e))+"_"+(new Date).getTime()},sx:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),function(t,e){void 0===t&&(t=0),void 0===e&&(e=62);var r,i=o,n=[];if(e=e||i.length,t)for(r=0;r<t;r++)n[r]=i[0|Math.random()*e];else{var a=void 0;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",r=0;r<36;r++)n[r]||(a=0|16*Math.random(),n[r]=i[19===r?3&a|8:a])}return n.join("")}),endsWith:function(t,e){return t.endsWith?t.endsWith(e):!(t.length<e.length)&&t.substr(t.length-e.length)===e},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(e){e.startTime=new Date,e.jg=[];var r=(new Date).getTime(),i=function(){var t=(new Date).getTime();e.jg.push(t-r),r=t,e.id=l.requestAnimFrame(i)};e.id=l.requestAnimFrame(i)},cancel:function(t){t.id&&l.cancelAnimFrame(t.id)},stop:function(t){t.Ag=Date.now()-t.startTime,this.cancel(t),t.Mg=Math.round(1e3/(t.Ag/(t.jg.length+1)))}},kg:function(t,e,r,i,n){if(void 0===i&&(i="linear"),void 0===n&&(n=!1),t===e)return e;switch(i){case"ease":r=BezierUtil.sg(.25,.1,.25,1)(r);break;case"ease-in":r=BezierUtil.sg(.42,0,1,1)(r);break;case"ease-out":r=BezierUtil.sg(0,0,.58,1)(r);break;case"ease-in-out":r=BezierUtil.sg(.42,0,.58,1)(r)}var a=t+(e-t)*r;return n&&(a>>=0),a},createObjectURL:function(t,e){void 0===e&&(e="text/javascript; charset=utf-8");var r=null;try{r=(window.URL||window.webkitURL).createObjectURL(new Blob([t],{type:e}))}catch(t){r=null}return r},revokeObjectURL:function(t){try{(window.URL||window.webkitURL).revokeObjectURL(t)}catch(t){}},Og:function(t){for(var e={},r=0,i=t.length;r<i;r++)e[t[r]]=r;return e},xg:function(t){var e={};if(l.is(t,"object"))for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e},Ig:function(t,e){if(e.length<5e4)t.push.apply(t,e);else for(var r=0,i=e.length;r<i;r+=1)t.push(e[r])},clone:function(t){if("object"!=typeof t||null===t)return t;if(t.Tg||this.is(t,"Float32Array")||this.is(t,"Uint16Array"))return t;var e=this.isArray(t)?[]:{};for(var r in t)t.hasOwnProperty(r)&&(e[r]=l.clone(t[r]));return e},isInteger:function(t){return(0|t)===t},setPrototypeOf:"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:function(t,e){for(var r in e)t[r]=e[r]},isFunction:function(t){return"function"==typeof t},_g:function(t,e){if(void 0===e&&(e="webgl"),!t)return t;for(var r=[],i=0,n=t.length;i<n;i+=2){var a=parseInt(t.substr(i,2),16);("webgl"===e||"rgba"===e&&0===i)&&(a=this.format(a/255,3)),r.push(a)}return r.push(r.shift()),r},Sg:function(){},keys:"function"==typeof Object.keys?Object.keys:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e},map:function(i,n,a){void 0===a&&(a=null);var o=[];return i&&i.length?(l.Cg(i,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[1];o[r]=n.apply(a||i,t)}),o):i},forEach:function(t,e){if(t&&t.length){var r=t.length;if(0<r&&(e(t[0],0),1<r)){e(t[1],1);for(var i=2;i<r;i++)e(t[i],i)}}},Cg:function(t,e,r){if(void 0===r&&(r=null),t&&t.length)for(var i=0,n=t.length;i<n&&!1!==e.call(r,t[i],i,t);i++);},find:function(t,e,r){void 0===r&&(r=null);for(var i=0,n=t.length;i<n;i++)if("function"==typeof e){if(e.call(r,t[i],i,t))return t[i]}else if(t[i]===e)return t[i];return null},isDOM:function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},Eg:function(t,e){var r,i,n,a,o,s,u,f="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";for(i="v5"<(e=e||"v5")?(r=f.length,512):(r=27,f=f.substr(0,27),333),a=[],o=NaN,s=0,u=t.length;s<u;s++)n=t[s],n=f.indexOf(n),o=isNaN(o)?n*r:(a.push(o+n-i),NaN);return a},Ng:function(t,e){var r;r=512<e.length?Math.round(Math.pow(e.length,.5)):e.length;for(var i=Math.ceil(e.length/r),n=0;n<i;n+=1){var a=r*n,o=a+r;o>e.length&&(o=e.length);for(var s=a;s<o;s+=1)t(e[s])}},Lg:function(t){if(/^rgba\(/.test(t))return this.Dg(t);var e=this.colorNameToHex(t),r=e;return"#"===e[0]&&(3===(e=e.substring(1)).length&&(e=e.replace(/./g,function(t){return t+t})),r=this.argbHex2Rgba(8===e.length?e:"ff"+e)),this.Dg(r)},colorNameToHex:function(t){return void 0===t&&(t=""),"string"==typeof(t=t.toLowerCase())&&colorNameDist[t.toLowerCase()]?colorNameDist[t.toLowerCase()]:t},Rg:function(t,e,r){var i,n,a,o;return[r,t&(i=(1<<(o=Math.floor(r/2)))-1<<(a=r-o))|e&(n=(1<<a)-1),e&i|t&n]},Pg:function(t){return t?encodeURIComponent(t):""},getStyle:function(t,e,r,i){var n,a,o;if(void 0===(o=t[e].i[r]))return null;if(a=t[e].s,"number"==typeof o)return a[o];for(;void 0===o[i.toString()]&&!(--i<3););return"number"==typeof(n=o[i.toString()])?a[n]:null},Dg:function(t){var e=t.split(",");return e[0]=parseFloat(e[0].split("rgba(")[1])/255,e[1]=parseFloat(e[1])/255,e[2]=parseFloat(e[2])/255,e[3]=parseFloat(e[3]),e},Ug:function(t){var e=t.split(",");return e[0]=parseFloat(e[0].split("rgb(")[1])/255,e[1]=parseFloat(e[1])/255,e[2]=parseFloat(e[2])/255,e},Bg:function(t){return"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},color2Rgba:function(t){return this.Bg(this.color2RgbaArray(t))},color2RgbaArray:function(t){if(t instanceof Array)return 3==t.length&&t.push(1),t;var e=this.colorNameToHex(t);if(0==e.indexOf("rgb(")){var r=this.Ug(e);return r.push(1),r}if(0==e.indexOf("rgba("))return this.Dg(e);if(0==e.indexOf("#")){if(4===e.length){var i=e.substr(1).replace(/./g,function(t){return t+t});return this.zg(i)}if(7==e.length)return this.zg(e.substr(1));if(9==e.length){var n=e.substr(1);return this.qg(n)}}else{if(3===e.length)return i=e.replace(/./g,function(t){return t+t}),this.zg(i);if(6==e.length)return this.zg(e);if(8==e.length)return this.qg(e)}},rgbHex2Rgba:function(t){return t.startsWith("#")&&(t=t.slice(1)),l.argbHex2Rgba("ff"+t)},argbHex2Rgba:function(t){t.startsWith("#")&&(t=t.slice(1));for(var e=[],r=0,i=t.length;r<i;r+=2)e.push(parseInt(t.substr(r,2),16));return e.push((e.shift()/255).toFixed(2)),"rgba("+e.join(",")+")"},Opacity2Rgba:function(t,e){var r=e;return e&&e[3]&&t&&(e[3]=Math.floor(255*t)),r},Hex2Rgba:function(t){if("string"!=typeof t)return!1;for(var e=[],r=0,i=t.length;r<i;r+=2)e.push(parseInt(t.substr(r,2),16));return e.push(parseInt(e.shift())),e},zg:function(t){return l.qg("ff"+t)},qg:function(t){for(var e=[],r=0,i=t.length;r<i;r+=2)e.push(parseInt(t.substr(r,2),16)/255);return e.push(e.shift()),e},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},Wg:function(t,e){return 0<=e&&t.splice(e,1),t},startsWith:function(t,e){return t.startsWith?t.startsWith(e):t.substr(0,e.length)===e},deleteItemFromArray:function(t,e){var r=l.indexOf(t,e);return l.Wg(t,r)},deleteItemFromArrayByIndex:function(t,e){return l.Wg(t,e)},filter:function(t,r,i){var n=[];return l.Cg(t,function(t,e){r.call(i,t,e)&&n.push(t)}),n},indexOf:function(t,e){if(!t||!t.length)return-1;if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},Gg:function(t,e){return t.endsWith?t.endsWith(e):!(t.length<e.length)&&t.substr(t.length-e.length)==e},bind:(i=!1,Boolean(Function.prototype.bind)&&(i=!0),function(t,e){var r=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return i?r?(r.unshift(e),t.bind.apply(t,r)):t.bind(e):function(){return t.apply(e,r||arguments)}}),setOptions:function(t,e){return e=e||{},t.opts=assign({},t.opts,e),t.opts},yn:function(t,e,r){return"function"==typeof e?this.Hg(t,!0,this.Vg(e,r,1)):this.Hg(t,!0)},Hg:function(r,i,n,t,e,a,o){var s;if(n&&(s=e?n(r,t,e):n(r)),void 0!==s)return s;if(!this.$g(r))return r;var u=this.isArray(r);if(u){if(s=this.Yg(r),!i)return this.Kg(r,s)}else{var f=Object.prototype.toString.call(r),c="[object Function]"==f;if("[object Object]"!=f&&"[object Arguments]"!=f&&(!c||e))return e?r:{};if(s=this.Xg(c?{}:r),!i)return this.Jg(s,r)}o=o||[];for(var h=(a=a||[]).length;h--;)if(a[h]==r)return o[h];return a.push(r),o.push(s),(u?this.Zg:this.Qg)(r,function(t,e){s[e]=l.Hg(t,i,n,e,r,a,o)}),s},Jg:function(t,e){return null==e?t:this.tM(e,Object.keys(e),t)},$g:function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)},rM:function(t){return!!t&&"object"==typeof t},nM:function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},Yg:function(t){var e=t.length,r=new Array(e);return e&&"string"==typeof t[0]&&Object.hasOwnProperty.call(t,"index")&&(r.index=t.index,r.input=t.input),r},Kg:function(t,e){var r=-1,i=t.length;for(e=e||Array(i);++r<i;)e[r]=t[r];return e},Xg:function(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e},Vg:function(a,o,t){if("function"!=typeof a)return this.identity;if(void 0===o)return a;switch(t){case 1:return function(t){return a.call(o,t)};case 3:return function(t,e,r){return a.call(o,t,e,r)};case 4:return function(t,e,r,i){return a.call(o,t,e,r,i)};case 5:return function(t,e,r,i,n){return a.call(o,t,e,r,i,n)}}return function(){return a.apply(o,arguments)}},Zg:function(t,e){for(var r=-1,i=t.length;++r<i&&!1!==e(t[r],r,t););return t},identity:function(t){return t},iM:function(u){return function(t,e,r){for(var i=l.eM(t),n=r(t),a=n.length,o=u?a:-1;u?o--:++o<a;){var s=n[o];if(!1===e(i[s],s,i))break}return t}},Qg:function(t,e){return l.iM()(t,e,Object.keys)},eM:function(t){return l.$g(t)?t:Object(t)},tM:function(t,e,r){r=r||{};for(var i=-1,n=e.length;++i<n;){var a=e[i];r[a]=t[a]}return r},oM:function(){return!1},aM:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",uM:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},sM:function(t,e,r,i){var n;if(i){var a,o=0,s=this.uM;n=function(){if((a=s())-o<e)return!1;o=a,t.apply(r,arguments)}}else{var u,f,c;c=function(){u=!1,f&&(n.apply(r,f),f=!1)},n=function(){u?f=arguments:(u=!0,t.apply(r,arguments),setTimeout(c,e))}}return n},format:function(t,e){return t===t<<0?t:+parseFloat(t+"").toFixed(e||0)},isArray:Array.isArray?Array.isArray:function(t){return this.is(t,"array")},is:function(t,e){return Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase()===e.toLowerCase()},includes:"function"==typeof Array.prototype.includes?function(t,e){return t.includes(e)}:function(t,e){return-1!==this.indexOf(t,e)},fM:function(t){var e=0;if(0===t.length)return e;for(var r=0,i=t.length;r<i;r+=1)e=(e<<5)-e+t.charCodeAt(r),e&=e;return e},hM:function(t,e){e=e?Math.ceil(parseInt(e.substr(6))/24):1;for(var r="",i=0,n=t.length;i<n;i++)r+=String.fromCharCode((t.charCodeAt(i)-256-e+65535)%65535);return r},cM:function(t,e){var r=(t+"").slice(-2),i=(e+"").slice(-2);t=t.slice(0,-2),e=e.slice(0,-2);var n=parseInt((i+r).slice(1)),a=Math.ceil(n/250)%2?1:-1,o=1<n/500?1:-1;return t-=parseInt("1"+r)/3e3*a,e-=parseInt("1"+i)/3e3*o,new LngLat$2(parseFloat(t).toFixed(5),parseFloat(e).toFixed(5))},vM:function(t){return"undefined"!=typeof JSON&&JSON.stringify?l.fM(JSON.stringify(t)):null},lM:function(t,e){var r="_amap_hash";if(e||!t.hasOwnProperty(r)){var i=l.vM(t);i&&(t[r]=i)}return t[r]},parseLngLatData:function(t){if(l.isArray(t)){if(!l.isArray(t[0])){var e=typeof t[0];return"string"==e||"number"==e?new LngLat$2(t[0],t[1]):t}for(var r=0;r<t.length;r+=1)t[r]=l.parseLngLatData(t[r])}return t},dM:function(t){for(var e=[],r=0,i=t.length;r<i;r+=1)e[r]=[t[r].x,t[r].y];return e},bM:function(t){return l.isArray(t)?new Size(t[0],t[1]):t},hp:function(t,e){var r=[0,0],i=l.getOptimalZoom(e.$n.zoom);if(t&&LocalZoom<=i){var n=lcs.getSize(),a=e.$n.centerCoord,o=lcs.getLocalByCoord([a[0],a[1]]),s=t.x-o.x,u=t.y-o.y;0!==s&&(s*=n[0],r[0]=s),0!==u&&(u*=n[1],r[1]=u)}else t&&(r[0]+=t.center[0],r[1]+=t.center[1]);return r},dS:function(t,e){return t>=e[0]&&t<=e[1]},kD:function(t,e,r){void 0===t&&(t=""),void 0===r&&(r=!1);var i=t.split(",")[0]||"";return!r&&i&&e&&TagMap[e]||"all"},VF:function(t,e,r){return void 0===r&&(r=!1),!r&&t&&e&&TagMap[e]||"all"},LD:function(t,e){if(!t||!e)return!1;var r=this.iN(t);return this.iN(e)<=r},SD:function(t){var e;switch(void 0===t&&(t="all"),t){case"lite":e=0;break;case"left":e=1;break;case"all":default:e=2}return e},pW:function(t){var e;switch(void 0===t&&(t=2),t){case 0:e=NebulaTagType.tN;break;case 1:e=NebulaTagType.rj;break;case 2:default:e=NebulaTagType.eN}return e},iN:function(t){var e=0;switch(t){case"lite":e=0;break;case"left":e=1;break;case"all":e=2}return e}};!function(){if(!Support.DW){var i=0,n=window.requestAnimationFrame||t("RequestAnimationFrame")||function(t){var e=+new Date,r=Math.max(0,(Support.android?50:20)-(e-i));return i=e+r,window.setTimeout(t,r)},e=window.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};a.requestAnimFrame=function(t,e,r,i){if(!r)return n(function(){e?l.bind(t,e).call(e,i):t()});e?l.bind(t,e).call(e,i):t()},a.cancelAnimFrame=function(t){t&&e.call(window,t)}}function t(t){var e,r,i=["webkit","moz","o","ms"];for(e=0;e<i.length&&!r;e+=1)r=window[i[e]+t];return r}}(),Support.DW||(a.requestIdleCallback=window.requestIdleCallback?function(t,e){return window.requestIdleCallback(t,e)}:function(t,e){void 0===e&&(e={});var r=l.uM();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,70-(l.uM()-r))}})},e.timeout||0)},a.cancelIdleCallback=window.cancelIdleCallback?function(t){return window.cancelIdleCallback(t)}:function(t){clearTimeout(t)});var l=a;return l}(),URLObject="undefined"!=typeof window?window.URL||window.webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}}:URL||webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}},Color=(wX.Wb=function(t,e){return{rgba:t.rgba}},wX.Gb=function(t){return new wX(t.rgba)},wX.Hb=function(t,e){void 0===e&&(e=[]);for(var r=0,i=t.length;r<i;r+=2)e[r/2]=parseInt(t.substr(r,2),16);return e},wX.Yx=function(t){return t.startsWith("#")&&(t=t.substr(1)),colorNames[t]?wX.Hb(colorNames[t].substr(1)):1===t.length?wX.Hb(t+t+t+t+t+t):3===t.length?wX.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):6===t.length?wX.Hb(t):[0,0,0]},wX.normalize=function(t){for(var e=[],r=0,i=t.length;r<i;r++)e[r]=t[r]/255;return e},wX.create=function(t){return t?new wX(t):null},wX.prototype.normalize=function(){return[this.rgba[0]/255,this.rgba[1]/255,this.rgba[2]/255,this.rgba[3]/255]},wX.prototype.Vb=function(t){if("string"==typeof t){if(colorNames[t])return void this.Hb(colorNames[t].substr(1));if(0===t.length)return;if(t.startsWith("#")&&(t=t.substr(1)),1===t.length)return void this.Hb(t+t+t+t+t+t);if(3===t.length)return void this.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);if(6===t.length)return void this.Hb(t);if(8===t.length)return void this.$b(t);if(t.startsWith("rgba("))return void this.Yb(colorNames[t].substr(1));if(t.startsWith("rgb("))return void this.Kb(colorNames[t].substr(1))}else t instanceof Array&&(this.rgba[0]=t[0],this.rgba[1]=t[1],this.rgba[2]=t[2],this.rgba[3]=t[3]||255)},wX.prototype.Hb=function(t){this.$b(t+"FF")},wX.prototype.$b=function(t){for(var e=0,r=t.length;e<r;e+=2)this.rgba[e/2]=parseInt(t.substr(e,2),16)},wX.prototype.Kb=function(t){var e=t.split(",");this.rgba[0]=parseInt(e[0].substr(4),10),this.rgba[1]=parseInt(e[1],10),this.rgba[2]=parseInt(e[2],10),this.rgba[3]=255},wX.prototype.Yb=function(t){var e=t.split(",");this.rgba[0]=parseInt(e[0].substr(5),10),this.rgba[1]=parseInt(e[1],10),this.rgba[2]=parseInt(e[2],10),this.rgba[3]=255*parseFloat(e[3])<<0},wX);function wX(t){this.type="AMap.Color",this.rgba=[],this.Vb(t)}var colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},SmartArrayBuffer=(UX.prototype.update=function(t){if(0!==t.length){var e="ARRAY_BUFFER"===this.type,r=this.AM.gl,i=e?this.AM.de.Ii:this.AM.me.Ii;e?this.AM.de.set(this.buffer):this.AM.me.set(this.buffer),this.uf<t.byteLength?(r.bufferData(r[this.type],t,r.STATIC_DRAW),this.byteLength=t.byteLength,this.uf=t.byteLength):(r.bufferSubData(r[this.type],0,t),this.byteLength=t.byteLength),e?this.AM.de.set(i):this.AM.me.set(i)}},UX.prototype.destroy=function(){this.buffer&&this.AM.deleteBuffer(this.buffer)},UX);function UX(t,e,r,i){void 0===i&&(i="ARRAY_BUFFER"),this.AM=t,this.kM=r,this.type=i,this.buffer="ARRAY_BUFFER"===i?t.fe(e,r,"DYNAMIC_DRAW"):t.ve(e),this.uf=e.byteLength,this.byteLength=e.byteLength}var TextCombineTexture=(bY.prototype.Pm=function(t){this.Ek.push(t)},bY.prototype.update=function(t){var o=this;if(this.z_){var e=this.Ek,s=t.context;this.ov(s);for(var u=this.av,f=s.gl,c=t.Hn(),r=function(t){for(var a=t.data,e=function(n){h.z_.loadImage(n.lc,{cb:function(t){o.buffer.update(a),o.Nk.update(t.img),o.Nk.bind(f.CLAMP_TO_EDGE,f.LINEAR,f.LINEAR);var e=o.Nk.size,r=[o.maxWidth,o.maxHeight];u.Wi.set(o.qi.qi),s.bindFramebuffer.set(u.Ui);var i=s.be.Ii;s.be.set([0,0,o.maxWidth,o.maxHeight]),c.Ce({u_sourceTexture:o.Nk,u_sourceTextureSize:e,u_targetTextureSize:r},{a_sourceTexturePos:{type:"vec2",buffer:o.buffer.buffer,Re:8,offset:0},a_targetTexturePos:{type:"vec2",buffer:o.buffer.buffer,Re:8,offset:4}},6*n.length,o.Pc,"TRIANGLES",void 0,void 0,void 0,void 0,6*n.start),c.Ni(),u.Wi.set(null),s.bindFramebuffer.set(null),s.bindTexture.set(null),s.be.set(i),o.clear(),URLObject.revokeObjectURL(n.lc)},type:"text"})},r=0,i=t.Dm;r<i.length;r++)e(i[r]);h.qi.bind(s.gl.CLAMP_TO_EDGE,s.gl.LINEAR,s.gl.LINEAR)},h=this,i=0,n=e;i<n.length;i++)r(n[i]);this.Ek=[],this.clear()}},bY.prototype.ov=function(t){var e=t.gl;if(this.buffer||(this.buffer=new SmartArrayBuffer(t,new Uint16Array(0),8)),this.qi||(this.qi=t.createTexture({height:this.maxHeight,width:this.maxWidth,data:null}),this.qi.bind(e.CLAMP_TO_EDGE,e.LINEAR,e.LINEAR)),this.Nk||(this.Nk=t.createTexture({height:this.maxHeight,width:this.maxWidth,data:null}),this.Nk.bind(e.CLAMP_TO_EDGE,e.LINEAR,e.LINEAR)),this.Es||(this.Es={}),this.Pc||(this.Pc=t.ve(this.Lk())),!this.av){var r=t.createFramebuffer(4096,4096),i=t.createTexture({width:4096,height:4096,data:null});i.bind(t.gl.CLAMP_TO_EDGE,t.gl.LINEAR,t.gl.LINEAR),r.Wi.set(i.qi),this.av=r}},bY.prototype.Dk=function(t,e){var r=Object.keys(t),i={start:this.pv,length:r.length,lc:e},n=this.Rk(r.length),a=this.Pk;if(this.Uk+r.length>this.uf)return console.error("TEXTURE FULL"),n;for(var o=0,s=r.length;o<s;o++){var u=t[r[o]],f=this.cv(),c=4*(this.pv+o)*4;a[c]=u[5],a[1+c]=u[6],a[2+c]=f[0],a[3+c]=f[1],a[4+c]=u[5],a[5+c]=u[6]+this.Bk,a[6+c]=f[0],a[7+c]=f[1]+this.Bk,a[8+c]=u[5]+this.Bk,a[9+c]=u[6]+this.Bk,a[10+c]=f[0]+this.Bk,a[11+c]=f[1]+this.Bk,a[12+c]=u[5]+this.Bk,a[13+c]=u[6],a[14+c]=f[0]+this.Bk,a[15+c]=f[1]}return this.pv+=r.length,this.zk.push(i),n},bY.prototype.qk=function(t){var e=Object.keys(t);return this.Uk+e.length<this.uf},bY.prototype.Wk=function(){this.buffer.update(this.Gk())},bY.prototype.Gk=function(){var t=4*this.pv*4;return this.Pk.slice(0,t)},bY.prototype.getSize=function(){return[this.maxWidth,this.Uk/this.Hk*this.Bk]},bY.prototype.clear=function(){this.pv=0,this.zk=[]},bY.prototype.destroy=function(){this.buffer&&(this.buffer.destroy(),delete this.buffer),this.qi&&(this.qi.destroy(),delete this.qi),this.Nk&&(this.Nk.destroy(),delete this.Nk),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.av&&(this.av.destroy(),delete this.av)},bY.prototype.Rk=function(t){var e=this.Vk,r=this.$k,i=t*this.Bk;return e+i<=this.maxWidth?(this.Vk+=i,{startX:e,startY:r}):(this.Yk(),r+=32,e=0,this.Vk=i,{startX:e,startY:this.$k=r})},bY.prototype.cv=function(){var t=this.Uk,e=t%this.Hk*this.Bk,r=Math.floor(t/this.Hk)*this.Bk;return this.Uk+=1,[e,r]},bY.prototype.Yk=function(){var t=Math.ceil(this.Uk/this.Hk);this.Uk=t*this.Hk},bY.prototype.Lk=function(){for(var t=new Uint16Array(6*this.uf),e=0,r=this.uf;e<r;e++){var i=6*e,n=4*e;t[i]=n,t[1+i]=1+n,t[2+i]=2+n,t[3+i]=n,t[4+i]=2+n,t[5+i]=3+n}return t},bY);function bY(t){this.z_=t,this.Uk=0,this.Bk=32,this.Hk=128,this.maxWidth=this.Bk*this.Hk,this.maxHeight=128*this.Bk,this.uf=this.maxWidth/this.Bk*(this.maxHeight/this.Bk),this.Pk=new Uint16Array(4*this.uf*4),this.Kk=0,this.pv=0,this.zk=[],this.Ek=[],this.Vk=0,this.$k=0,this.Es={}}var MockTextureManager=(eZ.prototype.Xk=function(){return this.Jk[this.currentIndex]},eZ.prototype.Qk=function(t,e){if(e&&this.Xk().ov(e),this.Xk().qk(t))return{index:this.currentIndex,tO:this.Xk()}},eZ.prototype.destroy=function(){for(var t=0,e=this.Jk;t<e.length;t++)e[t].destroy();this.Jk=[]},eZ);function eZ(){this.currentIndex=0,this.Jk=[new TextCombineTexture]}var Event=(kZ.addListener=function(t,e,r){t.on(e,r)},kZ.trigger=function(t,e,r){t.emit(e,r)},kZ.clearListeners=function(t,e){t.clearEvents(e)},kZ.addDomListener=function(t,e,r){t.addEventListener(e,r)},kZ.prototype.on=function(t,e,r,i){void 0===r&&(r=this),void 0===i&&(i=!1);for(var n=0,a=Array.isArray(t)?t:[t];n<a.length;n++){var o=a[n];this._on(o,e,r,i)}return this},kZ.prototype.off=function(t,e,r){void 0===r&&(r=this);var i=this.vI;if(t in i)for(var n=0;n<i[t].length;n+=1)if(i[t][n].fn===e&&i[t][n].context===r)return i[t].splice(n,1),this;return this},kZ.prototype.hasEvents=function(t,e,r){void 0===r&&(r=this);var i=this.vI;if(t&&e&&t in i)for(var n=0;n<i[t].length;n+=1)if(i[t][n].fn===e&&i[t][n].context===r)return!0;return!1},kZ.prototype.clearEvents=function(t){return t?this.vI[t]&&delete this.vI[t]:this.vI={},this},kZ.prototype.emit=function(t,e){if(void 0===e&&(e={}),!(t in this.vI))return this;for(var r=exports.Ln(exports.Ln({},e),{type:t}),i=this.vI[t],n=0,a=i.length;n<a;n+=1){var o=i[n];o.fn&&(o.fn.call(o.context,r),o.once&&(this.vI[t].splice(n,1),--n,--a))}return this},kZ.prototype._on=function(t,e,r,i){if(void 0===r&&(r=this),void 0===i&&(i=!1),this.hasEvents(t,e,r))return this;var n=this.vI;return n[t]=n[t]||[],n[t].push({fn:e,context:r||this,once:i}),this},kZ);function kZ(){this.vI={}}var isSupportFloat64Array="undefined"!=typeof Float64Array,isSupportFloat32Array$1="undefined"!=typeof Float32Array;isSupportFloat64Array?setMatrixArrayType(Float64Array):isSupportFloat32Array$1?setMatrixArrayType(Float32Array):(window.Float32Array=null,setMatrixArrayType(Array));var RESIZE_MULTIPLIER=5,DEFAULT_CAPACITY=128,StructArray=(_Z.Wb=function(t,e){return t.trim(),e&&(t.pM=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},_Z.Gb=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.yM=t.arrayBuffer.byteLength/this.Rb,e.mM(),e},_Z.prototype.trim=function(){this.length!==this.yM&&(this.yM=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.constructor.Rb),this.mM())},_Z.prototype.resize=function(t){this.gM(t),this.length=t},_Z.prototype.gM=function(t){if(t>this.yM){this.yM=Math.max(t,Math.floor(this.yM*RESIZE_MULTIPLIER),DEFAULT_CAPACITY);var e=this.wM;this.arrayBuffer=new ArrayBuffer(this.yM*this.constructor.Rb),this.mM(),e&&this.wM.set(e)}},_Z);function _Z(){this.pM=!1,this.yM=-1,this.length=0}var FillArray=(h$=StructArray,__extends(i$,h$),i$.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},i$.prototype.MM=function(t,e,r){var i=2*t;this.Mb[i]=e,this.Mb[1+i]=r},i$.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},i$.Rb=8,i$),h$;function i$(){var t=h$.call(this)||this;return t.pM=!1,t.resize(0),t}var FillExtrusionArray=(r$=StructArray,__extends(s$,r$),s$.prototype.kb=function(t,e,r,i,n){var a=this.length;this.resize(a+1),this.MM(a,t,e,r,i,n)},s$.prototype.MM=function(t,e,r,i,n,a){var o=7*t;this.Mb[o]=e,this.Mb[1+o]=r,this.Mb[2+o]=i,this.Mb[3+o]=n,this.Mb[4+o]=a[0],this.Mb[5+o]=a[1],this.Mb[6+o]=a[2]},s$.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},s$.Rb=28,s$),r$;function s$(){var t=r$.call(this)||this;return t.pM=!1,t.resize(0),t}var LinesIndexArray=(H$=StructArray,__extends(I$,H$),I$.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},I$.prototype.MM=function(t,e,r){var i=2*t;this.jM[i]=e,this.jM[1+i]=r},I$.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},I$.Rb=4,I$),H$;function I$(){var t=H$.call(this)||this;return t.length=0,t.resize(0),t}var LinesIndexArrayUint=(R$=StructArray,__extends(S$,R$),S$.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},S$.prototype.MM=function(t,e,r){var i=2*t;this.UI[i]=e,this.UI[1+i]=r},S$.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.UI=new Uint32Array(this.arrayBuffer)},S$.Rb=8,S$),R$;function S$(){var t=R$.call(this)||this;return t.length=0,t.resize(0),t}var LineArrayBuffer=(_$=StructArray,__extends(a_,_$),a_.prototype.kb=function(t,e,r,i){var n=this.length;this.resize(n+1),this.MM(n,t,e,r,i)},a_.prototype.MM=function(t,e,r,i,n){var a=t*(this.constructor.Rb/4);this.Mb[a]=e[0],this.Mb[1+a]=e[1],this.Mb[2+a]=r[0],this.Mb[3+a]=r[1],this.Mb[4+a]=i,this.Mb[5+a]=n[0],this.Mb[6+a]=n[1]},a_.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},a_.Rb=28,a_),_$;function a_(){var t=_$.call(this)||this;return t.resize(0),t}var TriangleIndexArray=(p_=StructArray,__extends(q_,p_),q_.prototype.kb=function(t,e,r){var i=this.length;this.resize(i+1),this.MM(i,t,e,r)},q_.prototype.MM=function(t,e,r,i){var n=3*t;this.jM[n]=e,this.jM[1+n]=r,this.jM[2+n]=i},q_.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},q_.Rb=6,q_),p_;function q_(){var t=p_.call(this)||this;return t.resize(0),t}var TriangleIndexArrayUint=(B_=StructArray,__extends(C_,B_),C_.prototype.kb=function(t,e,r){var i=this.length;this.resize(i+1),this.MM(i,t,e,r)},C_.prototype.MM=function(t,e,r,i){var n=3*t;this.UI[n]=e,this.UI[1+n]=r,this.UI[2+n]=i},C_.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.UI=new Uint32Array(this.arrayBuffer)},C_.Rb=12,C_),B_;function C_(){var t=B_.call(this)||this;return t.resize(0),t}var SymbolArray=(N_=StructArray,__extends(O_,N_),O_.prototype.kb=function(t,e){var r=this.length;this.resize(this.length+1),this.MM(r,t,e)},O_.prototype.MM=function(t,e,r){var i=2*t;this.Mb[i]=e,this.Mb[1+i]=r},O_.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},O_.Rb=4,O_),N_;function O_(){var t=N_.call(this)||this;return t.pM=!1,t.resize(0),t}var COS_HALF_SHARP_CORNER=Math.cos(Math.PI/180*75),prepMatClockwise=fromValues(0,-1,1,0),perpMatCounterClockwise=fromValues(0,1,-1,0);function perpCounterClockwise(t,e){transformMat2(t,e,perpMatCounterClockwise)}function perpClockwise(t,e){transformMat2(t,e,prepMatClockwise)}var minRoundAngle=Math.PI/9,emptyVec2=create$3(),emptyVec3=create$1(),prevPos=create$3(),currentPos=create$3(),tmpPos=create$3(),currentNormal=create$3(),nextNormal=create$3(),distance$1=0,nextDir=create$3(),currentDir=create$3(),negateCurrentNormal=create$3(),lineJoin,lineCap,currentNormal_addLineVertex=create$3(),leftNormal=create$3(),rightNormal=create$3(),offsetLeft=create$3(),offsetRight=create$3(),joinNormal_addMiter=create$3(),tmp_addTiangleVertex=create$1(),currentNormal_addTiangleVertex=create$3(),nextNormal_addTiangleVertex=create$3(),normal_addTiangleVertex=create$3(),tmp_addRoundVertex=create$1(),currentNormal_addRoundVertex=create$3(),nextNormal_addRoundVertex=create$3(),tmpNormal_addRoundVertex=create$3(),roundCenter_addRoundVertex=create$3(),CoreLineBucket=(__.OM=function(t,e,r){sub$1(t,e,r),normalize(t,t),perpCounterClockwise(t,t)},__.xM=function(t,e,r){add(t,e,r),0===t[0]&&0===t[1]||normalize(t,t)},__.prototype.hb=function(t,e){if(void 0===e&&(e={X_:1,lineJoin:"miter",lineCap:"butt"}),t.length<2)return{Iw:0,distance:0};distance$1=0,"auto"===e.lineJoin&&(e.lineJoin="miter"),lineJoin=e.lineJoin,lineCap=e.lineCap||"butt";for(var r=this.Qx.length,i=0,n=t.length;i<n;i++)if(0===i){currentPos=t[i];var a=t[i+1];__.OM(nextNormal,a,currentPos),copy$1(currentNormal,nextNormal),sub$1(nextDir,a,currentPos),normalize(nextDir,nextDir),"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,e.X_,"bevel"):("round"===lineCap&&(copy$1(negateCurrentNormal,currentNormal),negate(negateCurrentNormal,currentNormal),this.DI(currentPos,negateCurrentNormal,currentNormal,distance$1)),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,"bevel")),copy$1(currentDir,nextDir),prevPos=currentPos}else if(i===n-1){currentPos=t[i];var o=dist(currentPos,prevPos);distance$1+=o,"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,-1*e.X_,"miter"):"round"===lineCap?(this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,0,"miter"),copy$1(negateCurrentNormal,nextNormal),negate(negateCurrentNormal,nextNormal),this.DI(currentPos,nextNormal,negateCurrentNormal,distance$1)):this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,"miter")}else{if(currentPos=t[i],a=t[i+1],__.OM(nextNormal,a,currentPos),0===nextNormal[0]&&0===nextNormal[1])continue;var s=dist(currentPos,prevPos);distance$1+=s,sub$1(nextDir,a,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),prevPos=currentPos,copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir)}return{Iw:3*(this.Qx.length-r),distance:distance$1}},__.prototype.eD=function(t,e,r){if(void 0===e&&(e={X_:1,lineJoin:"miter",lineCap:"butt"}),void 0===r&&(r=3e3),t.length<2)return{Iw:0,distance:0};distance$1=0,"auto"===e.lineJoin&&(e.lineJoin="miter"),lineJoin=e.lineJoin,lineCap=e.lineCap||"butt";for(var i=this.Qx.length,n=0,a=t.length;n<a;n++)if(0===n){currentPos=t[n];var o=t[n+1];__.OM(nextNormal,o,currentPos),copy$1(currentNormal,nextNormal),sub$1(nextDir,o,currentPos),normalize(nextDir,nextDir),"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,e.X_,"bevel"):("round"===lineCap&&(copy$1(negateCurrentNormal,currentNormal),negate(negateCurrentNormal,currentNormal),this.DI(currentPos,negateCurrentNormal,currentNormal,distance$1)),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,"bevel")),copy$1(currentDir,nextDir),prevPos=currentPos}else if(n===a-1){copy$1(tmpPos,t[n]);var s=dist(tmpPos,prevPos);copy$1(tmpPos,prevPos);for(var u=0;r<s-u;)tmpPos[0]=tmpPos[0]+currentDir[0]*r,tmpPos[1]=tmpPos[1]+currentDir[1]*r,u+=r,this.IM(tmpPos,currentNormal,nextNormal,distance$1+u,currentDir,!1,0,"miter"),this.IM(tmpPos,currentNormal,nextNormal,distance$1+u,currentDir,!0,0,"miter");copy$1(currentPos,t[n]),distance$1+=s,"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,-1*e.X_,"miter"):"round"===lineCap?(this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,0,"miter"),copy$1(negateCurrentNormal,nextNormal),negate(negateCurrentNormal,nextNormal),this.DI(currentPos,nextNormal,negateCurrentNormal,distance$1)):this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,"miter")}else{if(currentPos=t[n],o=t[n+1],__.OM(nextNormal,o,currentPos),0===nextNormal[0]&&0===nextNormal[1])continue;var f=dist(currentPos,prevPos);for(copy$1(tmpPos,prevPos),u=0;r<f-u;)tmpPos[0]=tmpPos[0]+currentDir[0]*r,tmpPos[1]=tmpPos[1]+currentDir[1]*r,u+=r,this.IM(tmpPos,currentNormal,currentNormal,distance$1+u,currentDir,!1,0,"miter"),this.IM(tmpPos,currentNormal,currentNormal,distance$1+u,currentDir,!0,0,"miter");copy$1(currentPos,t[n]),distance$1+=f,sub$1(nextDir,o,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),prevPos=currentPos,copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir)}return{Iw:3*(this.Qx.length-i),distance:distance$1}},__.prototype.Nx=function(t,e){if(void 0===e&&(e={lineJoin:"miter"}),t.length<2)return{Iw:0,distance:0};for(var r=this.Qx.length,i=0,n=t.length;i<n;i++)if(0===i){currentPos=t[i];var a=t[i+1],o=t[n-2];__.OM(nextNormal,a,currentPos),__.OM(currentNormal,currentPos,o),sub$1(nextDir,a,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),copy$1(currentDir,nextDir),copy$1(currentNormal,nextNormal),prevPos=currentPos}else i===n-1?(currentPos=t[i],a=t[1],distance$1+=dist(currentPos,prevPos),__.OM(nextNormal,a,currentPos),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin)):(currentPos=t[i],a=t[i+1],distance$1+=dist(currentPos,prevPos),__.OM(nextNormal,a,currentPos),sub$1(nextDir,a,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,e.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,e.lineJoin),prevPos=currentPos,copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir));return{Iw:3*(this.Qx.length-r),distance:distance$1}},__.prototype.destroy=function(){this.Kx=!1,this.zs&&(this.zs.destroy(),delete this.zs),this.Pc&&(this.Pc.destroy(),delete this.Pc)},__.prototype.IM=function(t,e,r,i,n,a,o,s){copy$1(joinNormal_addMiter,emptyVec2),__.xM(joinNormal_addMiter,e,r);var u=dot(joinNormal_addMiter,e);scale$1(joinNormal_addMiter,joinNormal_addMiter,1/u);var f=0,c=0;o&&(c=f=o),"bevel"===s||"miter"===s&&u<COS_HALF_SHARP_CORNER?a?this.SM(t,r,i,f,c,n):(this.SM(t,e,i,f,c,n),this._M=this._b.length-2,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M),this.TM=this.FM,this.FM=this._M,this._M=this._M+1,this.Qx.kb(this.TM,this.FM,this._M),this.CM(t,e,r,i)):"round"===s?a?this.SM(t,r,i,f,c,n):(this.SM(t,e,i,f,c,n),this._M=this._b.length-2,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M),this.TM=this.FM,this.FM=this._M,this._M=this._M+1,this.Qx.kb(this.TM,this.FM,this._M),this.DI(t,e,r,i)):(this.SM(t,joinNormal_addMiter,i,f,c,n),a||(this._M=this._b.length-2,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M),this.TM=this.FM,this.FM=this._M,this._M=this._M+1,this.Qx.kb(this.TM,this.FM,this._M)))},__.prototype.SM=function(t,e,r,i,n,a){copy$1(currentNormal_addLineVertex,e),copy$1(leftNormal,currentNormal_addLineVertex),copy$1(rightNormal,currentNormal_addLineVertex),copy$1(offsetLeft,emptyVec2),copy$1(offsetRight,emptyVec2),scale$1(rightNormal,currentNormal_addLineVertex,-1),i&&(perpCounterClockwise(offsetLeft,leftNormal),scale$1(offsetLeft,offsetLeft,i),add(leftNormal,offsetLeft,leftNormal)),n&&(perpClockwise(offsetRight,rightNormal),scale$1(offsetRight,offsetRight,n),add(rightNormal,offsetRight,rightNormal)),this._b.kb(t,leftNormal,r,a),this._b.kb(t,rightNormal,r,a)},__.prototype.CM=function(t,e,r,i){void 0===i&&(i=0),copy(tmp_addTiangleVertex,emptyVec3),copy$1(currentNormal_addTiangleVertex,e),copy$1(nextNormal_addTiangleVertex,r),copy$1(normal_addTiangleVertex,emptyVec2),cross$1(tmp_addTiangleVertex,currentNormal_addTiangleVertex,nextNormal_addTiangleVertex);var n=0<tmp_addTiangleVertex[2];this._b.kb(t,normal_addTiangleVertex,i,normal_addTiangleVertex),n&&(negate(currentNormal_addTiangleVertex,currentNormal_addTiangleVertex),negate(nextNormal_addTiangleVertex,nextNormal_addTiangleVertex)),this._b.kb(t,currentNormal_addTiangleVertex,i,normal_addTiangleVertex),this._b.kb(t,nextNormal_addTiangleVertex,i,normal_addTiangleVertex),this._M=this._b.length-1,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M)},__.prototype.DI=function(t,e,r,i){void 0===i&&(i=0),copy(tmp_addRoundVertex,emptyVec3),copy$1(currentNormal_addRoundVertex,e),copy$1(nextNormal_addRoundVertex,r);var n=angle(currentNormal_addRoundVertex,nextNormal_addRoundVertex);cross$1(tmp_addRoundVertex,currentNormal_addRoundVertex,nextNormal_addRoundVertex);var a=0<tmp_addRoundVertex[2],o=[];o.push(currentNormal_addRoundVertex);for(var s=minRoundAngle;s<n;s+=minRoundAngle){var u=create$3();rotate(u,currentNormal_addRoundVertex,fromValues$3(0,0),a?s:-1*s),o.push(u)}o.push(nextNormal_addRoundVertex),a&&forEach$3(o,function(t){negate(t,t)}),copy$1(roundCenter_addRoundVertex,emptyVec2),this._b.kb(t,roundCenter_addRoundVertex,i,roundCenter_addRoundVertex);var f=this._b.length-1;this._b.kb(t,o[0],i,roundCenter_addRoundVertex),this._M=this._b.length-1,this.FM=this._M-1;for(var c=1,h=o.length;c<h;c++)this._b.kb(t,o[c],i,roundCenter_addRoundVertex),this._M=this._b.length-1,this.FM=this._M-1,this.Qx.kb(f,this.FM,this._M)},__);function __(){this._b=new LineArrayBuffer,this.TM=this.FM=this._M=-1,this.Kx=!1}var PolylineBucket=(n1=CoreLineBucket,__extends(o1,n1),o1.prototype.upload=function(t,e){void 0===e&&(e=!1),this.Kx||(this.Kx=!0,this.zs?this.zs.update(this._b.Mb):this.zs=new SmartArrayBuffer(t,this._b.Mb,LineArrayBuffer.Rb),this.Pc?this.Pc.update(this.Qx.UI):this.Pc=new SmartArrayBuffer(t,this.Qx.UI,32,"ELEMENT_ARRAY_BUFFER"),e&&(delete this.Qx,delete this._b))},o1.prototype.reset=function(){this.Kx=!1,this._b=new LineArrayBuffer,this.Qx=new TriangleIndexArrayUint,this.TM=this.FM=this._M=-1,this.Kx=!1},o1),n1;function o1(){var t=n1.call(this)||this;return t.Qx=new TriangleIndexArrayUint,t}var earcut_1=earcut,default_1=earcut;function earcut(t,e,r){r=r||2;var i,n,a,o,s,u,f,c=e&&e.length,h=c?e[0]*r:t.length,l=linkedList(t,0,h,r,!0),d=[];if(!l||l.next===l.NM)return d;if(c&&(l=eliminateHoles(t,e,l,r)),t.length>80*r){i=a=t[0],n=o=t[1];for(var v=r;v<h;v+=r)(s=t[v])<i&&(i=s),(u=t[v+1])<n&&(n=u),a<s&&(a=s),o<u&&(o=u);f=0!==(f=Math.max(a-i,o-n))?1/f:0}return earcutLinked(l,d,r,i,n,f),d}function linkedList(t,e,r,i,n){var a,o;if(n===0<signedArea(t,e,r,i))for(a=e;a<r;a+=i)o=insertNode(a,t[a],t[a+1],o);else for(a=r-i;e<=a;a-=i)o=insertNode(a,t[a],t[a+1],o);return o&&equals$2(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.LM||!equals$2(i,i.next)&&0!==area(i.NM,i,i.next))i=i.next;else{if(removeNode(i),(i=e=i.NM)===i.next)break;r=!0}}while(r||i!==e);return e}function earcutLinked(t,e,r,i,n,a,o){if(t){!o&&a&&indexCurve(t,i,n,a);for(var s,u,f=t;t.NM!==t.next;)if(s=t.NM,u=t.next,a?isEarHashed(t,i,n,a):isEar(t))e.push(s.i/r),e.push(t.i/r),e.push(u.i/r),removeNode(t),t=u.next,f=u.next;else if((t=u)===f){o?1===o?earcutLinked(t=cureLocalIntersections(filterPoints(t),e,r),e,r,i,n,a,2):2===o&&splitEarcut(t,e,r,i,n,a):earcutLinked(filterPoints(t),e,r,i,n,a,1);break}}}function isEar(t){var e=t.NM,r=t,i=t.next;if(!(0<=area(e,r,i))){for(var n=t.next.next;n!==t.NM;){if(pointInTriangle(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=area(n.NM,n,n.next))return;n=n.next}return 1}}function isEarHashed(t,e,r,i){var n=t.NM,a=t,o=t.next;if(!(0<=area(n,a,o))){for(var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,u=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,f=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,c=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,h=zOrder(s,u,e,r,i),l=zOrder(f,c,e,r,i),d=t.DM,v=t.RM;d&&d.z>=h&&v&&v.z<=l;){if(d!==t.NM&&d!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=area(d.NM,d,d.next))return;if(d=d.DM,v!==t.NM&&v!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&0<=area(v.NM,v,v.next))return;v=v.RM}for(;d&&d.z>=h;){if(d!==t.NM&&d!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=area(d.NM,d,d.next))return;d=d.DM}for(;v&&v.z<=l;){if(v!==t.NM&&v!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&0<=area(v.NM,v,v.next))return;v=v.RM}return 1}}function cureLocalIntersections(t,e,r){var i=t;do{var n=i.NM,a=i.next.next;!equals$2(n,a)&&intersects(n,i,i.next,a)&&locallyInside(n,a)&&locallyInside(a,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(a.i/r),removeNode(i),removeNode(i.next),i=t=a),i=i.next}while(i!==t);return filterPoints(i)}function splitEarcut(t,e,r,i,n,a){var o=t;do{for(var s=o.next.next;s!==o.NM;){if(o.i!==s.i&&isValidDiagonal(o,s)){var u=splitPolygon(o,s);return o=filterPoints(o,o.next),u=filterPoints(u,u.next),earcutLinked(o,e,r,i,n,a),void earcutLinked(u,e,r,i,n,a)}s=s.next}o=o.next}while(o!==t)}function eliminateHoles(t,e,r,i){var n,a,o,s=[];for(n=0,a=e.length;n<a;n++)(o=linkedList(t,e[n]*i,n<a-1?e[n+1]*i:t.length,i,!1))===o.next&&(o.LM=!0),s.push(getLeftmost(o));for(s.sort(compareX),n=0;n<s.length;n++)eliminateHole(s[n],r),r=filterPoints(r,r.next);return r}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){if(e=findHoleBridge(t,e)){var r=splitPolygon(e,t);filterPoints(e,e.next),filterPoints(r,r.next)}}function findHoleBridge(t,e){var r,i=e,n=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&o<s){if((o=s)===n){if(a===i.y)return i;if(a===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===o)return r;var u,f=r,c=r.x,h=r.y,l=1/0;for(i=r;n>=i.x&&i.x>=c&&n!==i.x&&pointInTriangle(a<h?n:o,a,c,h,a<h?o:n,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(n-i.x),locallyInside(i,t)&&(u<l||u===l&&(i.x>r.x||i.x===r.x&&sectorContainsSector(r,i)))&&(r=i,l=u)),(i=i.next)!==f;);return r}function sectorContainsSector(t,e){return area(t.NM,t,e.NM)<0&&area(e.next,t,t.next)<0}function indexCurve(t,e,r,i){for(var n=t;null===n.z&&(n.z=zOrder(n.x,n.y,e,r,i)),n.DM=n.NM,n.RM=n.next,(n=n.next)!==t;);n.DM.RM=null,n.DM=null,sortLinked(n)}function sortLinked(t){var e,r,i,n,a,o,s,u,f=1;do{for(r=t,a=t=null,o=0;r;){for(o++,i=r,e=s=0;e<f&&(s++,i=i.RM);e++);for(u=f;0<s||0<u&&i;)0!==s&&(0===u||!i||r.z<=i.z)?(r=(n=r).RM,s--):(i=(n=i).RM,u--),a?a.RM=n:t=n,n.DM=a,a=n;r=i}a.RM=null,f*=2}while(1<o);return t}function zOrder(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function getLeftmost(t){for(var e=t,r=t;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),(e=e.next)!==t;);return r}function pointInTriangle(t,e,r,i,n,a,o,s){return 0<=(n-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(i-s)-(r-o)*(e-s)&&0<=(r-o)*(a-s)-(n-o)*(i-s)}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.NM.i!==e.i&&!intersectsPolygon(t,e)&&(locallyInside(t,e)&&locallyInside(e,t)&&middleInside(t,e)&&(area(t.NM,t,e.NM)||area(t,e.NM,e))||equals$2(t,e)&&0<area(t.NM,t,t.next)&&0<area(e.NM,e,e.next))}function area(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function equals$2(t,e){return t.x===e.x&&t.y===e.y}function intersects(t,e,r,i){var n=sign(area(t,e,r)),a=sign(area(t,e,i)),o=sign(area(r,i,t)),s=sign(area(r,i,e));return n!==a&&o!==s||0===n&&onSegment(t,r,e)||0===a&&onSegment(t,i,e)||0===o&&onSegment(r,t,i)||0===s&&onSegment(r,e,i)}function onSegment(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function sign(t){return 0<t?1:t<0?-1:0}function intersectsPolygon(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&intersects(r,r.next,t,e))return 1;r=r.next}while(r!==t)}function locallyInside(t,e){return area(t.NM,t,t.next)<0?0<=area(t,e,t.next)&&0<=area(t,t.NM,e):area(t,e,t.NM)<0||area(t,t.next,e)<0}function middleInside(t,e){for(var r=t,i=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),(r=r.next)!==t;);return i}function splitPolygon(t,e){var r=new Node(t.i,t.x,t.y),i=new Node(e.i,e.x,e.y),n=t.next,a=e.NM;return(t.next=e).NM=t,(r.next=n).NM=r,(i.next=r).NM=i,(a.next=i).NM=a,i}function insertNode(t,e,r,i){var n=new Node(t,e,r);return i?(n.next=i.next,(n.NM=i).next.NM=n,i.next=n):(n.NM=n).next=n,n}function removeNode(t){t.next.NM=t.NM,t.NM.next=t.next,t.DM&&(t.DM.RM=t.RM),t.RM&&(t.RM.DM=t.DM)}function Node(t,e,r){this.i=t,this.x=e,this.y=r,this.NM=null,this.next=null,this.z=null,this.DM=null,this.RM=null,this.LM=!1}function signedArea(t,e,r,i){for(var n=0,a=e,o=r-i;a<r;a+=i)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}earcut.PM=function(t,e,r,i){var n=e&&e.length,a=n?e[0]*r:t.length,o=Math.abs(signedArea(t,0,a,r));if(n)for(var s=0,u=e.length;s<u;s++){var f=e[s]*r,c=s<u-1?e[s+1]*r:t.length;o-=Math.abs(signedArea(t,f,c,r))}var h=0;for(s=0;s<i.length;s+=3){var l=i[s]*r,d=i[s+1]*r,v=i[s+2]*r;h+=Math.abs((t[l]-t[v])*(t[1+d]-t[1+l])-(t[l]-t[d])*(t[1+v]-t[1+l]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},earcut.UM=function(t){for(var e=t[0][0].length,r={rp:[],BM:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var o=0;o<e;o++)r.rp.push(t[n][a][o]);0<n&&(i+=t[n-1].length,r.BM.push(i))}return r},earcut_1.default=default_1;var CoreFillBucket=(i5.prototype.Nx=function(t,e){if(t.length<6)return 0;for(var r=this.Qx.length,i=this._b.length,n=(this.zM.length,earcut_1(t,e)),a=0,o=n.length;a<o;a+=3)this.Qx.kb(i+n[a],i+n[a+1],i+n[a+2]);for(a=0,o=t.length;a<o;a+=2)this._b.kb(t[a],t[a+1]);var s=3*(this.Qx.length-r);return 0<s&&(this.Kx=!1),s},i5.prototype.Ew=function(t){if(t.length<2)return 0;for(var e=this.qM.length,r=this.zM.length,i=0,n=t.length;i<n;i+=2)this.zM.kb(t[i][0],t[i][1]),this.zM.kb(t[i+1][0],t[i+1][1]),this.qM.kb(r+i,r+i+1);var a=2*(this.qM.length-e);return 0<a&&(this.Kx=!1),a},i5.prototype.destroy=function(){this.Kx=!1,this.zs&&(this.zs.context.deleteBuffer(this.zs),delete this.zs),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.Ec&&(this.Ec.context.deleteBuffer(this.Ec),delete this.Ec),this.Nc&&(this.Nc.context.deleteBuffer(this.Nc),delete this.Nc)},i5);function i5(){this._b=new FillArray,this.zM=new FillArray,this.Kx=!1}var PolygonBucket=(y5=CoreFillBucket,__extends(z5,y5),z5.prototype.upload=function(t,e){void 0===e&&(e=!1),this.Kx||(this.destroy(),this.Kx=!0,this.zs=t.fe(this._b.Mb,FillArray.Rb),this.Pc=t.ve(this.Qx.UI),this.Ec=t.fe(this.zM.Mb,LinesIndexArray.Rb),this.Nc=t.ve(this.qM.UI),e&&(delete this.Qx,delete this._b,delete this.zM,delete this.qM))},z5.prototype.reset=function(){this._b=new FillArray,this.zM=new FillArray,this.Qx=new TriangleIndexArrayUint,this.qM=new LinesIndexArrayUint,this.Kx=!1},z5),y5;function z5(){var t=y5.call(this)||this;return t.Qx=new TriangleIndexArrayUint,t.qM=new LinesIndexArrayUint,t}var FillExtrusionBucket=(D5.prototype.tz=function(t,e,r){void 0===e&&(e=100);for(var i=[],n=[],a=t.length,o=0;o<a;o+=2)n[s=o/2*3]=t[o],n[s+1]=t[o+1],n[s+2]=0;for(o=0;o<a;o+=2){var s;i[s=o/2*3]=t[o],i[s+1]=t[o+1],i[s+2]=e}return this.Nx(i,e,r)+this.RI(n,i,r)},D5.prototype.RI=function(t,e,r){var i=e.length,n=e[2],a=this._b.length;t=t.concat(t.slice(0,3)),e=e.concat(e.slice(0,3));for(var o=0;o<i-3;o+=3){var s=this.zI(t.slice(o,o+3),t.slice(o+3,o+6),e.slice(o+3,o+6));this._b.kb(t[o],t[o+1],t[o+2],n,s),this._b.kb(t[o+3],t[o+4],t[o+5],n,s),this._b.kb(e[o+3],e[o+4],e[o+5],n,s),this._b.kb(t[o],t[o+1],t[o+2],n,s),this._b.kb(e[o+3],e[o+4],e[o+5],n,s),this._b.kb(e[o],e[o+1],e[o+2],n,s)}var u=this._b.length-a;return 0<u&&(this.Kx=!1),u},D5.prototype.Nx=function(t,e,r){if(t.length<9)return 0;for(var i=this._b.length,n=earcut_1(t,r,3),a=0,o=n.length;a<o;a++){var s=3*n[a];this._b.kb(t[s],t[1+s],t[2+s],e,fromValues$1(0,0,1))}var u=this._b.length-i;return 0<u&&(this.Kx=!1),u},D5.prototype.zI=function(t,e,r){var i=fromValues$1(t[0],t[1],t[2]),n=fromValues$1(e[0],e[1],e[2]),a=fromValues$1(r[0],r[1],r[2]),o=create$1(),s=create$1(),u=create$1();return sub(s,i,n),sub(u,a,n),cross(o,s,u),o},D5.prototype.upload=function(t,e){void 0===e&&(e=!1),this.Kx||(this.destroy(),this.Kx=!0,this.zs=t.fe(this._b.Mb,FillExtrusionArray.Rb),e&&delete this._b)},D5.prototype.destroy=function(){this.Kx=!1,this.zs&&(this.zs.context.deleteBuffer(this.zs),delete this.zs),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc)},D5.prototype.reset=function(){this._b=new FillExtrusionArray,this.Kx=!1},D5);function D5(){this._b=new FillExtrusionArray,this.Kx=!1}var NebulaSegements=(o6.prototype.add=function(t,e,r,i,n,a,o,s){this.WM.eT(t,e,n,i)&&a===this.WM.bz&&o+""==this.WM.roofColor+""&&s+""==this.WM.wallColor+""||(this.GM=t,this.HM=e,this.VM+=this.WM?this.WM.length:0,this.WM=new LineSegement(t,e,this.VM,i,n,a,o,s),this.jc.push(this.WM)),this.WM.add(r)},o6);function o6(){this.jc=[],this.GM=-1,this.HM=-1,this.VM=0,this.WM=new LineSegement(-1,-1,-1,-1,-1)}var LineSegement=(x6.prototype.add=function(t){this.length+=t},x6.prototype.eT=function(t,e,r,i){return this.mainkey===t&&this.subkey===e&&this.maxzoom===r&&this.minzoom===i},x6);function x6(t,e,r,i,n,a,o,s){this.mainkey=t,this.subkey=e,this.offset=r,this.minzoom=i,this.maxzoom=n,this.bz=a,this.roofColor=o,this.wallColor=s,this.length=0}var CONSTS={ID:"__id__",Rp:22,Mp:2,jp:.8,Pp:.2,YM:5,KM:{dom:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},Dp:{Op:180,Ad:70,Td:260,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:"top",QM:"right",tj:"bottom",rj:"left",nj:"middle",ij:"center",ej:"alphabetic"},oj:{CLICK:"click",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",aj:"touchstart",uj:"touchend"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:[3,20],icon:{type:"image",image:"://visuallocal.amap.com/public/poi-marker.png",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:"bottom-center",angel:0,retina:!0,zooms:[3,20]},text:{type:"billboard",direction:"top",offset:[0,0],zooms:[3,20],style:{fj:6,fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},hj:{cj:{opacity:.2},vj:"fadeIn",lj:"fadeOut",dj:{bj:"start",RUNNING:"running",pj:"complete"},yj:{mj:"opacity",gj:"size"}},_d:3,wj:"_AMap_sdf_com_words",Mj:128,pc:["://sdf.amap.com","://sdf01.amap.com","://sdf02.amap.com","://sdf03.amap.com","://sdf04.amap.com"],jj:4,Qu:4,sp:4,ec:24,Cd:.78125,Ld:205/256,Aj:{kj:"纹理加载失败，请重试",Oj:"资源加载失败，请重试"},xj:"bufferChanged",Ij:"frameBufferChanged",Tj:"combineFrameBufferChanged",Fj:6,_j:5,Sj:8,ic:1,ud:12,Cj:12,Ej:"__icon_combination",Nj:"__text_combination",Lj:{Dj:{0:"https://vdata.amap.com/style_icon/2.0/icon-normal-big.png",1:"https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"},size:[40,40],Rj:10},Kp:{buffer:3,Pj:"ios9",size:24},_n:{Uj:[0,0,0,1],Gp:[0,0,0,0]},yN:{version:"2",range:["32-23646","23648-28465","28478-34966","34972-38582"],urlPrefix:"/public/images/assets/"}},L6;L6=exports.uc||(exports.uc={}),L6.BLOB="blob",L6.TOLOAD="toload",L6.LOADING="loading",L6.LOADED="loaded",L6.UNLOADED="unloaded",L6.ERROR="error",L6.RELOADING="reloading",L6.UNCOMBINED="uncombined",L6.COMBINING="combining",L6.COMBINED="combined";var labelsUtil={Bj:function(t){void 0===t&&(t={});var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=1);return e},zj:function(t,e){t.gs=e,t.qj=e.options||{},t.Wj=e.Wj||{},t.Fs=e.Fs||{},t.Gj=e.Gj||{},t.Hj=e.Hj||{},t.Vj=e.Vj||{},t.$j=e.$j||0},Yj:function(t,e){void 0===t&&(t=[NaN,NaN,NaN,NaN]),void 0===e&&(e=[0,0,0,1]);for(var r=0;r<t.length;r++){var i=t[r];isNaN(i)&&(t[r]=e[r])}return t},Kj:function(t){return[((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255,1]},Xj:function(t,e){void 0===e&&(e={});for(var r=[],i=e.qw,n=e.Aw,a=e.complete,o=0,s=t;o<s.length;o++){var u=s[o],f=new Promise(u);r.push(f)}var c=0;Promise.all(r).then(function(){i&&i.apply(void 0,arguments),a&&!c&&(c=1,a.apply(void 0,arguments))}).catch(function(){n&&n.apply(void 0,arguments),a&&!c&&(c=1,a.apply(void 0,arguments))})},Jj:function(t,e){var r=t[0],i=void 0===r?0:r,n=t[1],a=void 0===n?0:n,o=e[0],s=void 0===o?0:o,u=e[1],f=void 0===u?0:u;return i<=s?s<=a?f<a?[s,f]:[s,a]:null:labelsUtil.Jj(e,t)},measureText:function(t,e,r,i){if(void 0===e&&(e=""),void 0===i&&(i="3D"),"3D"===i)return t.measureText(e,r)},lnglatToContainer:function(t,e){var r=e.zoom;if((void 0===r?20:r)<LocalZoom)return t;var i=lcs.getLocalByCoord(t);return vector.Ip(t,i.center)},Sd:function(t,e){var r=t[0],i=void 0===r?0:r,n=t[1],a=void 0===n?0:n,o=e[0],s=void 0===o?0:o,u=e[1],f=void 0===u?0:u,c=Math.abs(s-i),h=Math.abs(f-a);return Math.sqrt(Math.pow(c,2)+Math.pow(h,2))},getAngle:function(t,e){var r,i=t[0],n=void 0===i?0:i,a=t[1],o=void 0===a?0:a,s=e[0],u=void 0===s?0:s,f=e[1],c=u-n,h=(void 0===f?0:f)-o;return 0==c?h<0?3*Math.PI/2:Math.PI/2:0===(r=Math.atan(h/c))||0<r?0<=c?r:r+Math.PI:0<c?2*Math.PI+r:Math.PI+r},Fd:function(t,e,r){for(var i=t[0],n=void 0===i?0:i,a=t[1],o=void 0===a?0:a,s=e[0],u=void 0===s?0:s,f=e[1],c=u-n,h=(void 0===f?0:f)-o,l=[],d=0;d<r;){var v=[n+c/r*(d+1),o+h/r*(d+1)];l.push(v),d++}return l},Ed:function(t,e){void 0===t&&(t=[]);var r=t.length;if(!r)return!1;var i=t[0],n=t[4<=r?Math.floor(r/4*3):r-1],a=i[0],o=i[1],s=n[0],u=n[1],f=(u-o)/(s-a),c=[s-a,u-o];return(1<Math.abs(f)?vector.Zj(c,[0,1]):vector.Zj(c,[1,0]))<0},Nd:function(t,e){var r,i=t[0],n=t[1],a=e[0],o=e[1],s=(o-n)/(a-i),u=[a-i,o-n];return 1<Math.abs(s)?(r=0<vector.Zj(u,[0,-1])?vector.Qj(u,[0,-1]):vector.Qj(u,[0,1]),0<s&&(r=-r)):(r=0<vector.Zj(u,[1,0])?vector.Qj(u,[1,0]):vector.Qj(u,[-1,0]),s<0&&(r=-r)),r},Od:function(t,e,r){var i,n;return i=r*Math.sin(e),n=r*Math.cos(e),[t[0]+n,t[1]+i]},jd:function(t,e,r,i){var n=vector.Ip(t,e),a=vector.length(n),o=vector.Ip(r,e),s=vector.length(o),u=vector.Zj(n,o),f=Math.acos(u/(a*s)),c=Math.PI-f,h=a*Math.sin(c),l=a*Math.cos(c),d=Math.sqrt(Math.pow(i,2)-Math.pow(h,2))-l,v=0===o[0]?0<o[1]?Math.PI/2:-Math.PI/2:Math.atan(o[1]/o[0]),g=Math.abs(d*Math.sin(v)),p=d*Math.cos(v),b=[0<=vector.Zj(o,[1,0])?p:-p,0<=vector.Zj(o,[0,1])?g:-g];return vector.add(e,b)},rank:function(t){for(var e=[],r=0;r<t.length;r++){var i=parseInt(t[r],10);i<0&&(t.splice(r--,1),e.push(i+""))}return e.concat(t)},$p:function(t){var e=CONSTS.Mp,r=CONSTS.Rp;return 20<=t[1]&&(t[1]=r),t[0]<=3&&(t[0]=e),t},toString:function(t,e){void 0===e&&(e=4);var r="";if(!t)return r;for(var i=0,n=t;i<n.length;i++){var a=n[i];r+=(a+"").length<e?a:a.toFixed(e)}return r},xf:function(t,e){var r=[],i=e.ja,n=e.Fa,a=e.Oa,o=e.Ea;for(var s in t)if(t.hasOwnProperty(s)){if("shields"===s){r.push(t[s]);continue}if(i){var u=s.split("-"),f=parseInt(u[1],10),c=parseInt(u[2],10);i<=f&&f<=a&&n<=c&&c<=o&&r.push(t[s])}else r.push(t[s])}return r}},vector={add:function(t,e){for(var r=[],i=0;i<t.length;i++)r[i]=t[i]+e[i];return r},Ip:function(t,e){for(var r=[],i=0;i<t.length;i++)r.push(t[i]-e[i]);return r},multiply:function(t,e){for(var r=[],i=0,n=t;i<n.length;i++){var a=n[i];r.push(a*e)}return r},Up:function(t,e){for(var r=[],i=0;i<t.length;i++)r[i]=t[i]/e;return r},tA:function(t){return this.multiply(t,-1)},Zj:function(t,e){var r=t[0],i=void 0===r?0:r,n=t[1],a=void 0===n?0:n,o=e[0],s=void 0===o?0:o,u=e[1];return i*s+a*(void 0===u?0:u)},Qj:function(t,e){var r=vector.Zj(t,e),i=vector.length(t),n=vector.length(e);return Math.acos(r/(i*n))},length:function(t){var e=t[0],r=t[1];return Math.sqrt(Math.pow(e,2)+Math.pow(r,2))}},noop=function(t){},XHR={send:function(t,e){void 0===e&&(e={});var r=new XMLHttpRequest,i=e.qw,n=void 0===i?noop:i,a=e.Aw,o=void 0===a?noop:a,s=e.Me,u=e.method,f=e.content;r.responseType=s||"json",r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var t=r.response;try{n(t)}catch(t){o(t)}}else 404===r.status&&(r.abort(),o(null))},r.onerror=function(t){r.abort(),o(t)},r.open(u||"GET",t),r.send(f||void 0)}},LabelTileWorker=(Yaa.prototype.Ns=function(t,e){return this._opts=e,this.bt=e.zoom,this.WW=e.ZL,this.rA(t)},Yaa.prototype.rA=function(t){var e=t.data||{},r=e.poilabel||[],i={};for(var n in r)if(r.hasOwnProperty(n)){var a=this.nA(r[n],t.zo.z<10);i[n]=a}var o=e.roadName||[],s=this.iA(o);return i.eA=s,i},Yaa.prototype.nA=function(t,e){for(var r,i,n,a,o,s,u,f,c,h,l,d,v,g,p,b,y,m,T,M,A,w,x,S,P=CONSTS.Lj,k=P.Dj,$=P.size,_=CONSTS.Mp,L=CONSTS.Pp,N=CONSTS.jp,O=this._opts.scale,I=this.bt,j=[],C=0,E=t;C<E.length;C++){var D=E[C];if(r=D.cw,i=D.ew,n=D.pos,a=D.name,o=D.rank,s=D.minzoom||_,e||D.maxzoom,u=D.Fp,f=D.Ep,(10002!==u||28!==f)&&(c=this.oA(u,f,this.WW))&&(h=1<O||9<c.fontSize?c.fontSize:9,g=c.sn,p=c.Qe,b=c.forceShow,y=c.zIndex,m=c.zooms,T=labelsUtil.Jj([s,25],m))){for(var R=(T=labelsUtil.$p(T))[0],U=[],F={};R<=T[1];){var G=this.parent.vn.dn(u,f,R);if(G&&"0"!==G.He){var V=G.He;-1===U.indexOf(V)&&(U.push(V),F[V]=[]),F[V].push(R)}R++}(10002!==u||20!==f&&18!==f)&&16<h&&(h=15);var B=[T[0]-L,T[1]+N];10002===u&&(13===f||18===f)&&B[0]<=3&&(B[0]=2.5),M=g&&k[g],A={data:{id:r?r+f:"",position:n,name:a,txt:a,rank:o,extData:{Lp:u,Ap:f,id:r,type:"poi",bz:i}},opts:{type:"billboard",angle:0,forceShow:b,zIndex:y,visible:!0,zooms:B}},w=c.nn||0,x=c.an||0;for(var z=[],H=void 0,W=[0,0],Y=void 0,q=0;q<U.length;q++){V=U[q];var Z=g&&this.aA(parseInt(V,10)),X=this.mN(g,V),K=this.TN(g,V,$),Q=labelsUtil.$p(F[V]),J=1;!a||"152"!==V&&"153"!==V&&"154"!==V||(J=a.length<=2?1:a.length/2),Y=vector.Up(K,2),M&&z.push({type:"image",image:M,clipOrigin:vector.add(Z,X),clipSize:K,size:[Y[0]*J,Y[1]],anchor:[10-20*w/24,10-20*x/24],angle:0,retina:!0,zooms:[Q[0]-L,Q[Q.length-1]+N]})}a&&(W=z.length&&z[0].image?(V=U[0],"北京"===a?(H="top",[0,3]):"澳门"===a?(H="left",[0,-2]):"合肥"===a||"太原"===a||"西安"===a||"郑州"===a||"杭州"===a||"台北"===a?(H="bottom",[0,-3]):1===p||"152"!==V&&"153"!==V&&"154"!==V?(H="right",[0,-2]):(H="center",[0,-1])):(H="center",[w,x]));var tt=""+u+f,et=this.uA[tt];et?(l=et.faceColor,d=et.borderColor,v=et.Ke):(l=c.faceColor&&Color.normalize(c.faceColor.rgba),d=c.borderColor&&Color.normalize(c.borderColor.rgba),v=3===c.Qe?c.Ke&&Color.normalize(c.Ke.rgba):null,this.uA[tt]={faceColor:l,borderColor:d,Ke:v}),S=a?{direction:H,offset:W,style:{fontSize:h,fillColor:l,strokeColor:d,strokeWidth:2,padding:[0,1,0,1],backgroundColor:v,fold:5<=I}}:{},A.opts&&(A.opts.icon=z,A.opts.text=S),M&&(this.Fs[M]=1),a&&this.Ws(a),j.push(A),c=null}}return j},Yaa.prototype.iA=function(t){for(var e=CONSTS.Lj,r=e.Dj,i=e.size,n=CONSTS.Mp,a=CONSTS.Rp,o=CONSTS.Pp,s=CONSTS.jp,u=[],f=(this.bt,this._opts.scale),c=0,h=t;c<h.length;c++){var l=h[c],d=l.path,v=l.name,g=l.rank,p=l.minzoom,b=void 0===p?n:p,y=l.maxzoom,m=void 0===y?a:y,T=l.shield,M=l.dw;if(v&&this.Ws(v),T){var A=Math.floor(d.length/2);if(!(A<1)){var w=[d[A-1],d[A]],x=M,S=this.oA(40001,x,this.WW);if(S){var P=1<f||9<S.fontSize?S.fontSize:9,k=S.faceColor,$=(S.borderColor,S.He),_={data:{id:Util.stamp(this),position:w,positionType:"relative",name:v,txt:T,rank:g,extData:{type:"shield",Lp:40001,Ap:x}},opts:{type:"billboard",angle:0,zooms:[b-o,m+s],visible:!0}},L=this.aA(parseInt($,10)),N=1<T.length/4?T.length/4:1;N=1<f?N:9*N/7;var O={type:"image",image:r[0],clipOrigin:L,clipSize:i,size:[24*N,24],anchor:"center",angle:0,retina:!0},I=T?{direction:"center",offset:[0,0],style:{fontSize:P,fillColor:k&&Color.normalize(k.rgba),strokeWidth:0,padding:[0,1,0,1]}}:{};_.opts&&(_.opts.text=I,_.opts.icon=[O]),T&&this.Ws(T),u.push(_)}}}}return u},Yaa.prototype.Ws=function(t){void 0===t&&(t="");for(var e=this.Es,r=0;r<t.length;r++)e[t.substr(r,1).charCodeAt(0)]=1},Yaa.prototype.sA=function(e){var t=map(Object.keys(this.Es),function(t){return parseInt(t,10)});this.R_.oa(t,{cb:function(t){e(t)}})},Yaa.prototype.aA=function(t){var e=CONSTS.Lj,r=e.Rj,i=e.size,n=Math.floor(t/r);return t%10==0&&--n,[(t-r*n-1)*i[0],n*i[1]]},Yaa.prototype.oA=function(t,e,r,i){var n=[3,20],a=this.parent.vn.dn(t,e,r),o=this.parent.vn.mn(t,e);if(!a)for(var s=1;(n[0]<=r-s||r+s<=n[1])&&!(a=(a=this.parent.vn.dn(t,e,r-s))||this.parent.vn.dn(t,e,r+s));)s++;return a&&(a.zooms=o),a},Yaa.prototype.mN=function(t,e){var r=[0,0];if("0"===t)switch(e){case"3":r=[6,6];break;case"4":case"5":case"6":r=[9,9]}return r},Yaa.prototype.TN=function(t,e,r){void 0===r&&(r=[0,0]);var i=r;if("0"===t)switch(e){case"3":i=[30,30];break;case"4":case"5":case"6":i=[20,20]}return i},Yaa);function Yaa(t,e){this.parent=t,this.Fs={},this.Es={},this.Ts=[],this.bt=20,this.WW=20,this._opts={},this.uA={},this.z_=e.z_,this.R_=e.R_}var DynamicVertice=(Fda.prototype.upload=function(t){this.buffer||(this.buffer=t.fe(this.rp.rp,CONSTS.sp))},Fda.prototype.destroy=function(){this.buffer&&(this.buffer.context.deleteBuffer(this.buffer),delete this.buffer)},Fda);function Fda(t,e){this.zo=t,this.Nf=e.Nf,this.style=e.style,this.coords=e.coords,this.rp=e.rp,this.zp=e.zp}var VectorTileFeature=function(t,e,r,i,n){this.properties={},this.extent=r,this.type=0,this.fA=t,this.hA=-1,this.cA=i,this.vA=n,t.nw(readFeature,this,e)};function readFeature(t,e,r){1===t?e.id=r.ow():2===t?readTag(r,e):3===t?e.type=r.ow():4===t&&(e.hA=r.pos)}function readTag(t,e){for(var r=t.ow()+t.pos;t.pos<r;){var i=e.cA[t.ow()],n=e.vA[t.ow()];e.properties[i]=n}}function classifyRings(t){var e=t.length;if(e<=1)return[t];for(var r,i=[],n=[],a=0;a<e;a++){var o=signedArea$1(t[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[t[a]]):n.push(t[a]))}return n&&i.push(n),i}function signedArea$1(t){for(var e=0,r=0,i=t.length,n=i-1,a=void 0,o=void 0;r<i;n=r++)a=t[r],e+=((o=t[n]).x-a.x)*(a.y+o.y);return e}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.Dw=function(){var t=this.fA;t.pos=this.hA;for(var e=t.ow()+t.pos,r=1,i=0,n=0,a=0,o=[],s=[];t.pos<e;){if(i<=0){var u=t.ow();r=7&u,i=u>>3}if(i--,1===r||2===r)n+=t.lA(),a+=t.lA(),1===r&&(s&&o.push(s),s=[]),s.push([n,a]);else{if(7!==r)throw new Error("unknown command "+r);s&&s.push([s[0][0],s[0][1]])}}return s&&o.push(s),this.lines=o},VectorTileFeature.prototype.Ro=function(){var t=this.fA;t.pos=this.hA;for(var e=t.ow()+t.pos,r=1,i=0,n=0,a=0,o=1/0,s=-1/0,u=1/0,f=-1/0;t.pos<e;){if(i<=0){var c=t.ow();r=7&c,i=c>>3}if(i--,1===r||2===r)(n+=t.lA())<o&&(o=n),s<n&&(s=n),(a+=t.lA())<u&&(u=a),f<a&&(f=a);else if(7!==r)throw new Error("unknown command "+r)}return[o,u,s,f]},VectorTileFeature.prototype.dA=function(t,e,r){var i,n,a=this.extent*Math.pow(2,r),o=this.extent*t,s=this.extent*e,u=this.Dw(),f=VectorTileFeature.types[this.type];function c(t){for(var e=0;e<t.length;e++){var r=t[e],i=180-360*(r.y+s)/a;t[e]=[360*(r.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<u.length;i++)h[i]=u[i][0];c(u=h);break;case 2:for(i=0;i<u.length;i++)c(u[i]);break;case 3:for(u=classifyRings(u),i=0;i<u.length;i++)for(n=0;n<u[i].length;n++)c(u[i][n])}1===u.length?u=u[0]:f="Multi"+f;var l={type:"Feature",geometry:{type:f,coordinates:u},properties:this.properties};return"id"in this&&(l.id=this.id),l};var VectorTileLayer=function(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this.fA=t,this.cA=[],this.vA=[],this.Cw=[],t.nw(readLayer,this,e),this.length=this.Cw.length};function readLayer(t,e,r){15===t?e.version=r.ow():1===t?e.name=r.aw():5===t?e.extent=r.ow():2===t?e.Cw.push(r.pos):3===t?e.cA.push(r.aw()):4===t&&e.vA.push(readValueMessage(r))}function readValueMessage(t){for(var e=null,r=t.ow()+t.pos;t.pos<r;){var i=t.ow()>>3;e=1==i?t.aw():2==i?t.pA():3==i?t.yA():4==i?t.mA():5==i?t.ow():6==i?t.lA():7==i?t.vw():null}return e}VectorTileLayer.prototype.Gw=function(t){if(t<0||t>=this.Cw.length)throw new Error("feature index out of bounds");this.fA.pos=this.Cw[t];var e=this.fA.ow()+this.fA.pos;return new VectorTileFeature(this.fA,e,this.extent,this.cA,this.vA)};var VectorTile=function(t,e){this.layers=t.nw(readTile,{},e)};function readTile(t,e,r){if(3===t){var i=new VectorTileLayer(r,r.ow()+r.pos);i.length&&(e[i.name]=i)}}VectorTile.Wb=function(t){return t},VectorTile.Gb=function(t){return t};var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,Pbf=(kfa.prototype.destroy=function(){this.gA=new Uint8Array(0)},kfa.prototype.nw=function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.ow(),n=i>>3,a=this.pos;this.type=7&i,t(n,e,this),this.pos===a&&this.wA(i)}return e},kfa.prototype.MA=function(t,e){return this.nw(t,e,this.ow()+this.pos)},kfa.prototype.jA=function(){var t=readUInt32(this.gA,this.pos);return this.pos+=4,t},kfa.prototype.AA=function(){var t=readInt32(this.gA,this.pos);return this.pos+=4,t},kfa.prototype.kA=function(){var t=readUInt32(this.gA,this.pos)+readUInt32(this.gA,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},kfa.prototype.OA=function(){var t=readUInt32(this.gA,this.pos)+readInt32(this.gA,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},kfa.prototype.pA=function(){var t=this.xA(this.gA,this.pos,!0,23,4);return this.pos+=4,t},kfa.prototype.yA=function(){var t=this.xA(this.gA,this.pos,!0,52,8);return this.pos+=8,t},kfa.prototype.ow=function(t){var e,r,i=this.gA;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:readVarintRemainder(e|=(15&(r=i[this.pos]))<<28,t,this))))},kfa.prototype.mA=function(){return this.ow(!0)},kfa.prototype.lA=function(){var t=this.ow();return t%2==1?(t+1)/-2:t/2},kfa.prototype.vw=function(){return Boolean(this.ow())},kfa.prototype.aw=function(){var t=this.ow()+this.pos,e=readUtf8(this.gA,this.pos,t);return this.pos=t,e},kfa.prototype.mw=function(){var t=this.ow()+this.pos,e=this.gA.subarray(this.pos,t);return this.pos=t,e},kfa.prototype.tw=function(t,e){var r=readPackedEnd(this);for(t=t||[];this.pos<r;)t.push(this.ow(e));return t},kfa.prototype.IA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.lA());return t},kfa.prototype.TA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.vw());return t},kfa.prototype.FA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.pA());return t},kfa.prototype._A=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.yA());return t},kfa.prototype.SA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.jA());return t},kfa.prototype.CA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.AA());return t},kfa.prototype.EA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.kA());return t},kfa.prototype.NA=function(t){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.OA());return t},kfa.prototype.wA=function(t){var e=7&t;e===kfa.LA||(e===kfa.DA?this.pos=this.ow()+this.pos:e===kfa.RA?this.pos+=4:e===kfa.PA?this.pos+=8:console.log("Unimplemented type: "+e))},kfa.prototype.UA=function(t,e){this.BA(t<<3|e)},kfa.prototype.zA=function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.gA),this.gA=r,this.length=e}},kfa.prototype.finish=function(){return this.length=this.pos,this.pos=0,this.gA.subarray(0,this.length)},kfa.prototype.qA=function(t){this.zA(4),writeInt32(this.gA,t,this.pos),this.pos+=4},kfa.prototype.WA=function(t){this.zA(4),writeInt32(this.gA,t,this.pos),this.pos+=4},kfa.prototype.GA=function(t){this.zA(8),writeInt32(this.gA,-1&t,this.pos),writeInt32(this.gA,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},kfa.prototype.HA=function(t){this.zA(8),writeInt32(this.gA,-1&t,this.pos),writeInt32(this.gA,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},kfa.prototype.BA=function(t){268435455<(t=+t||0)||t<0?writeBigVarint(t,this):(this.zA(4),this.gA[this.pos++]=127&t|(127<t?128:0),t<=127||(this.gA[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.gA[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.gA[this.pos++]=t>>>7&127))))},kfa.prototype.VA=function(t){this.BA(t<0?2*-t-1:2*t)},kfa.prototype.$A=function(t){this.BA(Boolean(t))},kfa.prototype.YA=function(t){t=String(t),this.zA(4*t.length),this.pos++;var e=this.pos;this.pos=writeUtf8(this.gA,t,this.pos);var r=this.pos-e;128<=r&&makeRoomForExtraLength(e,r,this),this.pos=e-1,this.BA(r),this.pos+=r},kfa.prototype.KA=function(t){this.zA(4),this.XA(this.gA,t,this.pos,!0,23,4),this.pos+=4},kfa.prototype.JA=function(t){this.zA(8),this.XA(this.gA,t,this.pos,!0,52,8),this.pos+=8},kfa.prototype.ZA=function(t){var e=t.length;this.BA(e),this.zA(e);for(var r=0;r<e;r++)this.gA[this.pos++]=t[r]},kfa.prototype.QA=function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;128<=i&&makeRoomForExtraLength(r,i,this),this.pos=r-1,this.BA(i),this.pos+=i},kfa.prototype.fw=function(t,e,r){this.UA(t,kfa.DA),this.QA(e,r)},kfa.prototype.tk=function(t,e){this.fw(t,writePackedVarint,e)},kfa.prototype.rk=function(t,e){this.fw(t,writePackedSVarint,e)},kfa.prototype.nk=function(t,e){this.fw(t,writePackedBoolean,e)},kfa.prototype.ik=function(t,e){this.fw(t,writePackedFloat,e)},kfa.prototype.ek=function(t,e){this.fw(t,writePackedDouble,e)},kfa.prototype.ak=function(t,e){this.fw(t,writePackedFixed32,e)},kfa.prototype.uk=function(t,e){this.fw(t,writePackedSFixed32,e)},kfa.prototype.sk=function(t,e){this.fw(t,writePackedFixed64,e)},kfa.prototype.fk=function(t,e){this.fw(t,writePackedSFixed64,e)},kfa.prototype.ww=function(t,e){this.UA(t,kfa.DA),this.ZA(e)},kfa.prototype.hk=function(t,e){this.UA(t,kfa.RA),this.qA(e)},kfa.prototype.ck=function(t,e){this.UA(t,kfa.RA),this.WA(e)},kfa.prototype.vk=function(t,e){this.UA(t,kfa.PA),this.GA(e)},kfa.prototype.lk=function(t,e){this.UA(t,kfa.PA),this.HA(e)},kfa.prototype.rw=function(t,e){this.UA(t,kfa.LA),this.BA(e)},kfa.prototype.dk=function(t,e){this.UA(t,kfa.LA),this.VA(e)},kfa.prototype.uw=function(t,e){this.UA(t,kfa.DA),this.YA(e)},kfa.prototype.bk=function(t,e){this.UA(t,kfa.RA),this.KA(e)},kfa.prototype.pk=function(t,e){this.UA(t,kfa.PA),this.JA(e)},kfa.prototype.hw=function(t,e){this.rw(t,Boolean(e))},kfa.prototype.xA=function(t,e,r,i,n){var a,o,s=8*n-i-1,u=(1<<s)-1,f=u>>1,c=-7,h=r?n-1:0,l=r?-1:1,d=t[e+h];for(h+=l,a=d&(1<<-c)-1,d>>=-c,c+=s;0<c;a=256*a+t[e+h],h+=l,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;0<c;o=256*o+t[e+h],h+=l,c-=8);if(0===a)a=1-f;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),a-=f}return(d?-1:1)*o*Math.pow(2,a-i)},kfa.prototype.XA=function(t,e,r,i,n,a){var o,s,u,f=8*a-n-1,c=(1<<f)-1,h=c>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,v=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),2<=(e+=1<=o+h?l/u:l*Math.pow(2,1-h))*u&&(o++,u/=2),c<=o+h?(s=0,o=c):1<=o+h?(s=(e*u-1)*Math.pow(2,n),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),o=0));8<=n;t[r+d]=255&s,d+=v,s/=256,n-=8);for(o=o<<n|s,f+=n;0<f;t[r+d]=255&o,d+=v,o/=256,f-=8);t[r+d-v]|=128*g},kfa.LA=0,kfa.PA=1,kfa.DA=2,kfa.RA=5,kfa);function kfa(t){this.gA=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.gA.length}function readVarintRemainder(t,e,r){var i,n,a=r.gA;if(i=(112&(n=a[r.pos++]))>>4,n<128)return toNum(t,i,e);if(i|=(127&(n=a[r.pos++]))<<3,n<128)return toNum(t,i,e);if(i|=(127&(n=a[r.pos++]))<<10,n<128)return toNum(t,i,e);if(i|=(127&(n=a[r.pos++]))<<17,n<128)return toNum(t,i,e);if(i|=(127&(n=a[r.pos++]))<<24,n<128)return toNum(t,i,e);if(i|=(1&(n=a[r.pos++]))<<31,n<128)return toNum(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(t){return t.type===Pbf.DA?t.ow()+t.pos:t.pos+1}function toNum(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function writeBigVarint(t,e){var r,i;if(0<=t?(r=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:i=i+1|(r=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.zA(10),writeBigVarintLow(r,i,e),writeBigVarintHigh(i,e)}function writeBigVarintLow(t,e,r){r.gA[r.pos++]=127&t|128,t>>>=7,r.gA[r.pos++]=127&t|128,t>>>=7,r.gA[r.pos++]=127&t|128,t>>>=7,r.gA[r.pos++]=127&t|128,t>>>=7,r.gA[r.pos]=127&t}function writeBigVarintHigh(t,e){var r=(7&t)<<4;e.gA[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.gA[e.pos++]=127&t)))))}function makeRoomForExtraLength(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.zA(i);for(var n=r.pos-1;t<=n;n--)r.gA[n+i]=r.gA[n]}function writePackedVarint(t,e){for(var r=0;r<t.length;r++)e.BA(t[r])}function writePackedSVarint(t,e){for(var r=0;r<t.length;r++)e.VA(t[r])}function writePackedFloat(t,e){for(var r=0;r<t.length;r++)e.KA(t[r])}function writePackedDouble(t,e){for(var r=0;r<t.length;r++)e.JA(t[r])}function writePackedBoolean(t,e){for(var r=0;r<t.length;r++)e.$A(t[r])}function writePackedFixed32(t,e){for(var r=0;r<t.length;r++)e.qA(t[r])}function writePackedSFixed32(t,e){for(var r=0;r<t.length;r++)e.WA(t[r])}function writePackedFixed64(t,e){for(var r=0;r<t.length;r++)e.GA(t[r])}function writePackedSFixed64(t,e){for(var r=0;r<t.length;r++)e.HA(t[r])}function readUInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function writeInt32(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function readInt32(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function readUtf8(t,e,r){for(var i="",n=e;n<r;){var a=t[n],o=null,s=239<a?4:223<a?3:191<a?2:1;if(r<n+s)break;var u=void 0,f=void 0,c=void 0;1===s?a<128&&(o=a):2===s?128==(192&(u=t[n+1]))&&(o=(31&a)<<6|63&u)<=127&&(o=null):3===s?(u=t[n+1],f=t[n+2],128==(192&u)&&128==(192&f)&&((o=(15&a)<<12|(63&u)<<6|63&f)<=2047||55296<=o&&o<=57343)&&(o=null)):4===s&&(u=t[n+1],f=t[n+2],c=t[n+3],128==(192&u)&&128==(192&f)&&128==(192&c)&&((o=(15&a)<<18|(63&u)<<12|(63&f)<<6|63&c)<=65535||1114112<=o)&&(o=null)),null===o?(o=65533,s=1):65535<o&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),i+=String.fromCharCode(o),n+=s}return i}function writeUtf8(t,e,r){for(var i=0,n=void 0,a=void 0;i<e.length;i++){if(55295<(n=e.charCodeAt(i))&&n<57344){if(!a){56319<n||i+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):a=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(t[r++]=239,t[r++]=191,t[r++]=189,a=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}var Layer=(nja=Event,__extends(oja,nja),oja.prototype.p$=function(){},oja.prototype.v$=function(){},oja.prototype.Hh=function(t){this.uo=t},oja.prototype.Do=function(t){return this.Jh=t,this.Jh},oja.prototype.setMap=function(t){var e=this;if(null===t&&this.map)this.map.removeLayer(this);else if(this.map=t){var r=t.getLayers();find(r,function(t){return t.eo().id===e.eo().id})||t.addLayer(this)}},oja.prototype.Kh=function(t){var e=this;(this.source=t)&&this.source.on("complete",function(){e.emit("complete")})},oja.prototype.setzIndex=function(t){this.Qh=t,this.map&&this.map.setNeedUpdate(!0)},oja.prototype.setOpacity=function(t){this.tl=t,this.map&&this.map.setNeedUpdate(!0)},oja.prototype.getOpacity=function(){return this.tl},oja.prototype.Vh=function(){if(this.uo)return this.uo.Vh(this.co())},oja.prototype.getzIndex=function(){return this.eo().zIndex},oja.prototype.getMap=function(){return this.map},oja.prototype.ho=function(){return this.Jh},oja.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,createTile:void 0,rejectMapMask:this.lz}},oja.prototype.getOptions=function(){var t=this.eo(),e=this._opts||{};return assign({},e,t)},oja.prototype.getZooms=function(){return this.xt},oja.prototype.setZooms=function(t){this.xt=t,this.map&&this.map.setNeedUpdate(!0)},oja.prototype.getVisible=function(){return this._visible},oja.prototype.get=function(t){return this.getOptions()[t]},oja.prototype.vi=function(t){return null},oja.prototype.lo=function(){return this.source.lo()},oja.prototype.T$=function(){return this.No},oja.prototype.show=function(){this._visible=!0,this.map&&this.map.setNeedUpdate(!0)},oja.prototype.hide=function(){this._visible=!1,this.map&&this.map.setNeedUpdate(!0)},oja.prototype.destroy=function(){},oja.prototype.rT=function(){this.map&&this.map.addLayer(this)},oja),nja;function oja(t){void 0===t&&(t={});var e=nja.call(this)||this;return e.el="AMap.Layer",e.CLASS_NAME="AMap.Layer",e.hS=Util.stamp(e),e._visible=!0,e.tl=1,e.xt=[2,22],e.No="layer",e.nl=!0,e.No="layer_"+Util.sx(),e.xt=t.zooms||[2,22],e.tl=void 0===t.opacity?1:t.opacity,e.Qh=t.zIndex||1,e.lz=void 0!==t.rejectMapMask&&t.rejectMapMask,e._visible=void 0===t.visible||t.visible,e.AF=void 0!==t.depthTest&&Boolean(t.depthTest),e.IF=void 0!==t.ce&&Boolean(t.ce),e.wl=void 0!==t.cacheSize&&t.cacheSize,e.map=t&&t.map||null,e._opts=t,e}var BuildingLayer=(Hja=Layer,__extends(Ija,Hja),Ija.prototype.ro=function(){return{zooms:this.xt,heightFactor:this.Q_,visible:this._visible,zIndex:this.Qh,opacity:this.tl,wallColor:[],roofColor:[],To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Ija.prototype.eo=function(){var t=Hja.prototype.eo.call(this);return t.mapNumber="GS(2019)6379",t},Ija.prototype.Lo=function(){return{id:this.No,type:"nebula",tileUrl:AMap.getConfig().protocol+"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2",tileSize:0,zooms:[2,22]}},Ija.prototype.co=function(){return this.No},Ija.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},Ija),Hja;function Ija(){var t=Hja.call(this)||this;return t.CLASS_NAME="AMap.Buildings",t.Q_=1,t.No="nebula",t}var StyleOptionsBuilding=function(){this.hideWithoutStyle=!1,this.areas=[]},TrafficLayer=(Lja=Layer,__extends(Mja,Lja),Mja.prototype.ro=function(){return{ol:!0,al:!0,visible:this._visible,opacity:this.tl,To:this,zooms:this.xt,zIndex:this.Qh,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Mja.prototype.eo=function(){var t=Lja.prototype.eo.call(this);return t.mapNumber="",t},Mja.prototype.Lo=function(){return{id:"vectortraffic",type:"vectortraffic",tileUrl:"",tileSize:256,zooms:[3,18]}},Mja.prototype.co=function(){return"vectortraffic"},Mja.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},Mja.prototype.p$=function(){var t=this;this.map.on("styleChanged",this.reload,this),this.dl&&(this.iT=setInterval(function(){t.reload()},1e3*this.vl))},Mja.prototype.v$=function(){this.map.off("styleChanged",this.reload,this),clearInterval(this.iT),delete this.iT},Mja.prototype.reload=function(){var t=this.Vh();t&&this.map&&(t.reload(),this.map.setNeedUpdate(!0))},Mja),Lja;function Mja(){var t=null!==Lja&&Lja.apply(this,arguments)||this;return t.vl=60,t.dl=!0,t}var defaultOptions={opacity:1,visible:!0,zIndex:4,zooms:[7,22],dataZooms:[7,18],interval:30,ml:!0,depthTest:!1},VectorTraffic=(Rja=TrafficLayer,__extends(Sja,Rja),Sja),Rja;function Sja(t){void 0===t&&(t=defaultOptions);var e=this;return t.id=Util.sx(),t.opacity=void 0===t.opacity?defaultOptions.opacity:t.opacity,t.visible=void 0===t.visible?defaultOptions.visible:t.visible,t.zIndex=void 0===t.zIndex?defaultOptions.zIndex:t.zIndex,t.zooms=void 0===t.zooms?defaultOptions.zooms:t.zooms,t.interval=void 0===t.interval?defaultOptions.interval:t.interval,t.ml=void 0===t.ml?defaultOptions.ml:t.ml,t.depthTest=void 0===t.depthTest?defaultOptions.depthTest:t.depthTest,(e=Rja.call(this,t)||this).vl=Math.max(30,t.interval||e.vl),e.dl=!1!==t.ml&&e.dl,e.CLASS_NAME="AMap.TileLayer.Traffic",e.rT(),e}var RasterLayer=(Vja=Layer,__extends(Wja,Vja),Wja.prototype.Lo=function(){return{id:this.No||"tile",tileUrl:this.Be||"",type:"raster",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[2,20],projection:this.hl||"EPS3857"}},Wja.prototype.co=function(){return this.No},Wja.prototype.ro=function(){return{visible:this._visible,opacity:this.tl,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF,detectRetina:this.yl}},Wja.prototype.Hh=function(t){this.uo=t,this.uo.Vh(this.co()).Ks(this.wl)},Wja),Vja;function Wja(t){var e=Vja.call(this,t)||this;return e.CLASS_NAME="AMap.RasterLayer",e.Be=t.tileUrl,e.xt=t.zooms||[2,22],e.Qs=t.dataZooms,e.tl=void 0===t.opacity?1:t.opacity,e.Qh=t.zIndex||1,e._visible=void 0===t.visible||t.visible,e.Xa=t.tileSize||256,e.hl=t.projection,e.AF=void 0!==t.depthTest&&Boolean(t.depthTest),e.yl=void 0!==t.detectRetina&&Boolean(t.detectRetina),e.wl=t.cacheSize,e}var defaultOptions$1={id:"tile_"+Util.sx(),tileUrl:void 0,zooms:[2,22],dataZooms:[2,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:2},satelliteDefaultOptions={id:"satellite"+Util.sx(),tileUrl:"http://webst0{1,2,3,4}.is.autonavi.com/appmaptile?style=6&x=[x]&y=[y]&z=[z]",zooms:[2,22],dataZooms:[2,20],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:2},trafficDefaultOptions={id:"traffic"+Util.sx(),tileUrl:"http://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&zoom=[z]&x=[x]&y=[y]",zooms:[7,22],dataZooms:[7,20],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:4,getTileUrl:function(t,e,r){return AMap.getConfig().protocol+"://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0\n&t=1&zoom="+(17-r)+"&x="+t+"&y="+e}},roadNetDefaultOptions={id:"roadnet"+Util.sx(),tileUrl:"http://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&lang=zh_cn&size=1&scl=1&style=8&ltype=11",zooms:[2,22],dataZooms:[3,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:3},flexibleDefaultOptions={id:"flexible"+Util.sx(),zooms:[2,22],dataZooms:[2,22],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:3},wmsDefaultOptions={id:"wms"+Util.sx(),url:"",zooms:[2,22],dataZooms:[2,22],opacity:1,tileSize:512,visible:!0,projection:"EPSG:3857",zIndex:3},TileLayer=(bka=RasterLayer,__extends(cka,bka),cka.prototype.setTileUrl=function(t){t=0===(t=t.replace(/^\/\//,"").replace("http://","")).indexOf("http")?t:AMap.getConfig().protocol+"://"+t,this.Be=t,this.reload()},cka.prototype.getTileUrl=function(){return this.Be},cka.prototype.eo=function(){var t="";return this.Be!==AMap.getConfig().qT&&this.Be!==AMap.getConfig().YT||(t="GS(2019)6379"),{id:this.No,tileUrl:this.Be,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,getTileUrl:this.ll,mapNumber:t}},cka.prototype.reload=function(){var t=this.Vh();t&&(t.setTileUrl(this.Be),t.reload(),t.Fo(!1),this.map&&this.map.setNeedUpdate(!0))},cka),bka;function cka(t){void 0===t&&(t=defaultOptions$1);var e=this,r={};return t.getTileUrl&&"string"==typeof t.getTileUrl&&(t.tileUrl=t.getTileUrl,delete t.getTileUrl),r.tileUrl=void 0===t.tileUrl?AMap.getConfig().y_:t.tileUrl,r.tileUrl&&(r.tileUrl=r.tileUrl.replace(/^\/\//,"").replace("http://","")),r.tileUrl=r.tileUrl&&0===r.tileUrl.indexOf("http")?r.tileUrl:AMap.getConfig().protocol+"://"+r.tileUrl,r.id=t.id||"tile_"+Util.sx(),r.tileSize=t.tileSize||defaultOptions$1.tileSize,"d"===Support.baseRender&&Support.$e&&(defaultOptions$1.dataZooms=[2,20]),r.dataZooms=t.dataZooms||defaultOptions$1.dataZooms,r.zooms=t.zooms||defaultOptions$1.zooms,r.projection=t.projection||defaultOptions$1.projection,r.opacity=void 0===t.opacity?defaultOptions$1.opacity:t.opacity,r.visible=void 0===t.visible?defaultOptions$1.visible:t.visible,r.zIndex=void 0===t.zIndex?defaultOptions$1.zIndex:t.zIndex,r.rejectMapMask=t.rejectMapMask,r.depthTest=void 0!==t.depthTest&&Boolean(t.depthTest),r.map=t.map,r.detectRetina=void 0!==t.detectRetina&&t.detectRetina,r.cacheSize=t.cacheSize,(e=bka.call(this,r)||this).type=t.type||"base",e.ll=t.getTileUrl,e.CLASS_NAME="AMap.TileLayer",e.rT(),e}var Satellite=(jka=TileLayer,__extends(kka,jka),kka.prototype.eo=function(){var t=jka.prototype.eo.call(this);return t.mapNumber="GS(2019)5392",t},kka),jka;function kka(t){void 0===t&&(t=satelliteDefaultOptions);var e=this;return t.id="satellite_"+Util.sx(),t.tileUrl=satelliteDefaultOptions.tileUrl,t.zooms=void 0===t.zooms?satelliteDefaultOptions.zooms:t.zooms,t.opacity=void 0===t.opacity?satelliteDefaultOptions.opacity:t.opacity,t.visible=void 0===t.visible?satelliteDefaultOptions.visible:t.visible,t.zIndex=void 0===t.zIndex?satelliteDefaultOptions.zIndex:t.zIndex,(e=jka.call(this,t)||this).CLASS_NAME="AMap.TileLayer.Satellite",e.type=t.type||"base",e.rT(),e}var Traffic=(oka=TileLayer,__extends(pka,oka),pka.prototype.ul=function(){clearInterval(this.cl)},pka.prototype.pl=function(){var t=this;this.dl&&0<this.vl&&(this.cl=setInterval(function(){t.reload()},1e3*this.vl))},pka),oka;function pka(t){void 0===t&&(t=trafficDefaultOptions);var e=this;return t.id="traffic_"+Util.sx(),t.tileUrl=trafficDefaultOptions.tileUrl,t.zooms=void 0===t.zooms?trafficDefaultOptions.zooms:t.zooms,t.opacity=void 0===t.opacity?trafficDefaultOptions.opacity:t.opacity,t.visible=void 0===t.visible?trafficDefaultOptions.visible:t.visible,t.zIndex=void 0===t.zIndex?trafficDefaultOptions.zIndex:t.zIndex,t.getTileUrl=t.getTileUrl||trafficDefaultOptions.getTileUrl,(e=oka.call(this,t)||this).vl=t.interval||180,e.dl=void 0!==t.ml&&t.ml,e.CLASS_NAME="AMap.TileLayer.Traffic",e.type=t.type||"overlay",e.rT(),e.pl(),e}var RoadNet=(tka=TileLayer,__extends(uka,tka),uka.prototype.show=function(){tka.prototype.show.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Nebula.LabelsLayer");t&&t.oP()&&t.show()},uka.prototype.hide=function(){tka.prototype.hide.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Nebula.LabelsLayer");t&&t.aP()&&t.hide()},uka.prototype.v$=function(){tka.prototype.v$.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Nebula.LabelsLayer");t&&t.aP()&&t.hide()},uka),tka;function uka(t){var e;void 0===t&&(t=roadNetDefaultOptions);var r=this;return t.id="roadNet_"+Util.sx(),t.tileUrl=roadNetDefaultOptions.tileUrl,"d"===Support.baseRender&&(t.tileUrl=null===(e=t.tileUrl)||void 0===e?void 0:e.replace("&ltype=11","")),t.zooms=void 0===t.zooms?roadNetDefaultOptions.zooms:t.zooms,t.opacity=void 0===t.opacity?roadNetDefaultOptions.opacity:t.opacity,t.visible=void 0===t.visible?roadNetDefaultOptions.visible:t.visible,t.zIndex=void 0===t.zIndex?roadNetDefaultOptions.zIndex:t.zIndex,(r=tka.call(this,t)||this).CLASS_NAME="AMap.TileLayer.RoadNet",r.type=t.type||"overlay",r.rT(),r}var Flexible=(Eka=TileLayer,__extends(Fka,Eka),Fka.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,createTile:this.bl,cacheSize:this.wl,getTileUrl:this.ll,rejectMapMask:this.lz}},Fka.prototype.Hh=function(t){this.uo=t,this.uo.Vh(this.co()).Ks(this.wl)},Fka),Eka;function Fka(t){void 0===t&&(t=flexibleDefaultOptions);var e=this;return t.id=flexibleDefaultOptions.id,t.id="flexible_"+Util.sx(),t.zooms=void 0===t.zooms?flexibleDefaultOptions.zooms:t.zooms,t.opacity=void 0===t.opacity?flexibleDefaultOptions.opacity:t.opacity,t.visible=void 0===t.visible?flexibleDefaultOptions.visible:t.visible,t.zIndex=void 0===t.zIndex?flexibleDefaultOptions.zIndex:t.zIndex,(e=Eka.call(this,t)||this).bl=t.createTile,e.CLASS_NAME="AMap.TileLayer.Flexible",e.type=t.type||"base",e.rT(),e}var WMTS=(Jka=TileLayer,__extends(Kka,Jka),Kka.prototype._l=function(){this.kl.TileMatrixSet=this.kl.TileMatrixSet||"EPSG:3857",this.kl.Request="GetTile",this.kl.Service="WMTS",this.kl.Format=this.kl.Format||"image/png",this.Be=this.Ml+"?"+Util.join(this.kl,"&"),this.map&&this.map.setNeedUpdate(!0)},Kka.prototype.Rl=function(t){this.kl=assign({},t),this._l()},Kka.prototype.zl=function(){return this.kl},Kka.prototype.Sl=function(){return this.Ml},Kka.prototype.Cl=function(t){this.Ml=t,this._l()},Kka.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,Ll:this.kl,createTile:this.bl,getTileUrl:this.ll}},Kka),Jka;function Kka(t){void 0===t&&(t=flexibleDefaultOptions);var s=this;return t.id="wmts_"+Util.sx(),t.cacheSize=flexibleDefaultOptions.cacheSize,t.zooms=void 0===t.zooms?flexibleDefaultOptions.zooms:t.zooms,t.opacity=void 0===t.opacity?flexibleDefaultOptions.opacity:t.opacity,t.visible=void 0===t.visible?flexibleDefaultOptions.visible:t.visible,t.zIndex=void 0===t.zIndex?flexibleDefaultOptions.zIndex:t.zIndex,(s=Jka.call(this,t)||this).kl=t.params||{},s.CLASS_NAME="AMap.TileLayer.WMTS",s.type=t.type||"base",s.Be=t.url,s.Ml=t.url,s.bl=function(t,e,r,i,n){var a,o=document.createElement("img");"w"===(null===(a=s.map)||void 0===a?void 0:a.baseRender)&&(o.crossOrigin="anonymous"),o.onload=function(){i(o)},o.onerror=function(){n(o)},o.src=s.Be+"&TileMatrix="+r+"&TileRow="+e+"&TileCol="+t},s._l(),s.rT(),s}var WMS=(Wka=TileLayer,__extends(Xka,Wka),Xka.prototype._l=function(){this.kl.WIDTH=this.Xa,this.kl.HEIGHT=this.Xa,this.kl.CRS=this.kl.CRS||"EPSG:3857",this.kl.REQUEST="GetMap",this.kl.SERVICE="WMS",this.kl.FORMAT=this.kl.FORMAT||"image/png",this.kl.TRANSPARENT=void 0===this.kl.TRANSPARENT?"true":this.kl.TRANSPARENT,delete this.kl.BBOX,this.Be=this.Ml+"?"+Util.join(this.kl,"&")},Xka.prototype.Rl=function(t){this.kl=assign({},t),this._l()},Xka.prototype.zl=function(){return this.kl},Xka.prototype.Sl=function(){return this.Ml},Xka.prototype.Cl=function(t){this.Ml=t,this._l()},Xka.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,Ll:this.kl,createTile:this.bl,getTileUrl:this.ll}},Xka),Wka;function Xka(t){void 0===t&&(t=wmsDefaultOptions);var c=this;return t.id="wms_"+Util.sx(),t.cacheSize=flexibleDefaultOptions.cacheSize,t.zooms=void 0===t.zooms?flexibleDefaultOptions.zooms:t.zooms,t.opacity=void 0===t.opacity?flexibleDefaultOptions.opacity:t.opacity,t.visible=void 0===t.visible?flexibleDefaultOptions.visible:t.visible,t.zIndex=void 0===t.zIndex?flexibleDefaultOptions.zIndex:t.zIndex,(c=Wka.call(this,t)||this).Be=t.url,c.Ml=t.url,c.kl=t.params||{},c.CLASS_NAME="AMap.TileLayer.WMS",c.type=t.type||"base",c.bl=function(t,e,r,i,n){var a,o=2*HALF_WORLD_SIZE/256/Math.pow(2,r)*c.Xa,s=[o*t-HALF_WORLD_SIZE,HALF_WORLD_SIZE-o*(e+1)],u=[o*(t+1)-HALF_WORLD_SIZE,HALF_WORLD_SIZE-o*e],f=document.createElement("img");"w"===(null===(a=c.map)||void 0===a?void 0:a.baseRender)&&(f.crossOrigin="anonymous"),f.onload=function(){i(f)},f.onerror=function(){n(f)},c._l(),f.src=c.Be+"&BBOX="+s+","+u},c.bl=c.bl.bind(c),c.rT(),c}TileLayer.RoadNet=RoadNet,TileLayer.Satellite=Satellite,TileLayer.Traffic="d"===Support.baseRender?Traffic:VectorTraffic,TileLayer.Flexible=Flexible,TileLayer.WMTS=WMTS,TileLayer.WMS=WMS;var DistrictLayer=(lla=TileLayer,__extends(mla,lla),mla.prototype.eo=function(){var t=lla.prototype.eo.call(this);return t.mapNumber="GS(2019)6379",t},mla.prototype.Lo=function(){return{id:this.No,tileUrl:this.Be||"",type:"districtVectorTile",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[3,16],projection:this.hl||"EPS3857",SOC:this.SOC}},mla.prototype.SS=function(){return{zIndex:this.Qh,visible:this._visible,zooms:this.xt,opacity:this.tl,adcode:this._adcode,styles:this.Ze,To:this,rejectMapMask:this.lz}},mla.prototype.ro=function(){return exports.Ln({},this.SS())},mla.prototype.getDistrictByContainerPos=function(t){var e=this.map;if(e){var r=e.containerToLngLat(t),i=e.getProjection().project(r.KL,r.kT),n=e.getView().getStatus().optimalZoom,a=e.getTileCoordByLngLat(r,this.Xa,n-1),o=this.Vh().wS(),s=o.ta(a);if(!s&&a.z<12){var u=Math.pow(2,a.z)/((this.Xa||256)/256);s=o.ta(new TileCoord(a.z,a.x+u,a.y))||o.ta(new TileCoord(a.z,a.x-u,a.y))}if(s&&s.Ma&&s.data){var f=[i[0]-s.Ma.center[0],i[1]-s.Ma.center[1]],c=s.data;if(c.polygons)for(var h=0,l=c.polygons.length;h<l;h+=1){var d=c.polygons[h];if(3<d.path.length&&3===d.properties.lW){for(var v=[],g=0,p=d.path.length;g<p;g+=2)v.push([d.path[g],d.path[g+1]]);if(GeometryUtil.pointInRing(f,[[v]]))return d.properties}}}}},mla.prototype.co=function(){return this.No},mla.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},mla.prototype.reload=function(){if(this.map){var t=this.Vh();t.setTileUrl(this.Be),t.reload(),this.map.setNeedUpdate(!0)}},mla),lla;function mla(){var t=null!==lla&&lla.apply(this,arguments)||this;return t.CLASS_NAME="AMap.DistrictLayer",t}var DistrictLayerStyle=function(){this["stroke-width"]="",this["coastline-stroke"]="",this["nation-stroke"]="",this["province-stroke"]="",this["city-stroke"]="",this["county-stroke"]="",this.fill=""},DistrictLayer$1=(Hla=DistrictLayer,__extends(Ila,Hla),Ila.prototype.setSOC=function(t){this.SOC=t,this.Be=this.Ml.replace("[SOC]",this.SOC),this.reload()},Ila.prototype.setDistricts=function(t){this.setAdcode(t)},Ila.prototype.getDistricts=function(){return this._adcode},Ila.prototype.setStyles=function(t){this.Ze=Util.Jg(Util.Jg({},this.tP.styles),t),this.map&&(this.ho().i_(),this.map.setNeedUpdate(!0))},Ila.prototype.getStyle=function(){return this.Ze},Ila.prototype.setAdcode=function(t){t instanceof Array||(t=[t]);for(var e={},r=0;r<t.length;r+=1)e[t[r]]=1;t=e,this._adcode=t,this.reload()},Ila),Hla;function Ila(t){var e=Hla.call(this,t)||this;return e.tP={id:"DistrictLayer_"+Util.sx(),tileUrl:AMap.getConfig().protocol+"://mvt.amap.com/district/[SOC]/[z]/[x]/[y]/4096?\nkey="+AMap.getConfig().key,zooms:[2,20],dataZooms:[1,18],opacity:1,visible:!0,depth:0,zIndex:80,styles:{"stroke-width":.5,"nation-stroke":[.35,.35,.35,1],"coastline-stroke":[.18,.63,.94,1],"province-stroke":[.5,.5,.5,1],"city-stroke":[.7,.7,.7,1],"county-stroke":[.85,.85,.85,1],fill:[1,1,1,1]},SOC:"CHN"},e.SOC=t.SOC||e.tP.SOC,e.No=e.tP.id,t.adcode&&e.setAdcode(t.adcode),e._depth=t.depth||e.tP.depth,e.Ze=Util.Jg(Util.Jg({},e.tP.styles),t.styles||{}),e.Ml=e.tP.tileUrl,e.Be=e.tP.tileUrl.replace("[SOC]",e.SOC),e.xt=t.zooms||e.tP.zooms,e.tl=void 0===t.opacity?e.tP.opacity:t.opacity,e._visible=void 0===t.visible?e.tP.visible:t.visible,e.Qh=void 0===t.zIndex?e.tP.zIndex:t.zIndex,e.Qs=e.tP.dataZooms,e.CLASS_NAME="AMap.DistrictLayer",e}var WorldLayer=(Rla=DistrictLayer$1,__extends(Sla,Rla),Sla),Rla;function Sla(t){var e=this,r={id:"WorldLayer_"+Util.sx(),zIndex:81,SOC:"WLD"};return(e=Rla.call(this,t)||this).No=r.id,e.SOC=t.SOC||r.SOC,e.Qh=t.zIndex||r.zIndex,e.Be=e.Ml.replace("[SOC]",e.SOC),e.CLASS_NAME="AMap.District.World",e}var CountryLayer=(Wla=DistrictLayer$1,__extends(Xla,Wla),Xla),Wla;function Xla(t){var e=this,r={id:"CountryLayer_"+Util.sx(),depth:1,zIndex:82,SOC:"CHN"};return 0===(t=t||r).depth&&(t.styles||(t.styles={}),t.styles["stroke-width"]=0),(e=Wla.call(this,t)||this).No=r.id,e._depth=t.depth||r.depth,e.SOC=t.SOC||r.SOC,e.Qh=t.zIndex||r.zIndex,"CHN"===e.SOC&&1<e._depth&&(e.SOC="CHN2"),e.Be=e.Ml.replace("[SOC]",e.SOC),e.CLASS_NAME="AMap.District.Country",e}var ProvinceLayer=(_la=DistrictLayer$1,__extends(ama,_la),ama),_la;function ama(t){var e=this,r={id:"ProvinceLayer_"+Util.sx(),depth:1,zIndex:83,SOC:"CHN5"};return(e=_la.call(this,t)||this).No=r.id,e._depth=void 0===t.depth?r.depth:+t.depth,e.SOC=t.SOC||r.SOC,e.Qh=t.zIndex||r.zIndex,0===e._depth&&(e.SOC="CHN"),1===e._depth&&(e.SOC="CHN5"),2===e._depth&&(e.SOC="CHN3"),e.Be=e.Ml.replace("[SOC]",e.SOC),e.CLASS_NAME="AMap.District.Province",e.rT(),e}DistrictLayer$1.World=WorldLayer,DistrictLayer$1.Country=CountryLayer,DistrictLayer$1.Province=ProvinceLayer;var VectorTileSegements=(ema.prototype.add=function(t,e,r,i,n){VTLineSegement.getKey(t,e,n,i)!==(this.WM?this.WM.getKey():"-1")&&(this.GM=t,this.HM=e,this.VM+=this.WM?this.WM.length:0,this.WM=new VTLineSegement(t,e,this.VM,i,n),this.jc.push(this.WM)),this.WM.add(r)},ema);function ema(){this.jc=[],this.GM=-1,this.HM=-1,this.VM=0}var VTLineSegement=(mma.getKey=function(t,e,r,i){return t+":"+e+":"+r+":"+i},mma.prototype.add=function(t){this.length+=t},mma.prototype.getKey=function(){return this.mainkey+":"+this.subkey+":"+this.maxzoom+":"+this.minzoom},mma);function mma(t,e,r,i,n){this.mainkey=t,this.subkey=e,this.offset=r,this.minzoom=i,this.maxzoom=n,this.length=0}var registry={},Uma;function register(t,e,r){void 0===r&&(r={}),Object.defineProperty(e,"yk",{value:t,writable:!1}),registry[t]={mk:e,gk:r.gk||[],wk:r.wk||[]}}function serialize(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var r=t;return e&&e.push(r.buffer),r}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var i=[],n=0,a=t;n<a.length;n++){var o=a[n];i.push(serialize(o,e))}return i}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);var s=t.constructor,u=s.yk;if(!u)throw new Error("can't serialize object of unregistered class");var f=void 0;if(s.Wb)f=s.Wb(t,e);else{for(var c in f={},t)if(t.hasOwnProperty(c)&&!(0<=registry[u].gk.indexOf(c))){var h=t[c];f[c]=0<=registry[u].wk.indexOf(c)?h:serialize(h,e)}t instanceof Error&&(f.message=t.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(f.$name=u),f}function deserialize(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return map(t,deserialize);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);var e=t.$name||"Object",r=registry[e].mk;if(!r)throw new Error("can't deserialize unregistered class "+e);if(r.Gb)return r.Gb(t);for(var i=Object.create(r.prototype),n=0,a=Object.keys(t);n<a.length;n++){var o=a[n];if("$name"!==o){var s=t[o];i[o]=0<=registry[e].wk.indexOf(o)?s:deserialize(s)}}return i}register("Object",Object),register("LineArrayBuffer",LineArrayBuffer),register("TriangleIndexArray",TriangleIndexArray),register("TriangleIndexArrayUint",TriangleIndexArrayUint),register("PolylineBucket",PolylineBucket),register("LinesIndexArray",LinesIndexArray),register("LinesIndexArrayUint",LinesIndexArrayUint),register("FillArray",FillArray),register("PolygonBucket",PolygonBucket),register("FillExtrusionBucket",FillExtrusionBucket),register("FillExtrusionArray",FillExtrusionArray),register("Color",Color),register("Segements",NebulaSegements),register("VectorTileSegements",VectorTileSegements),register("VTLineSegement",VTLineSegement),register("LineSegement",LineSegement),register("DynamicVertice",DynamicVertice,{wk:["originData","style","coords","zoomsMap"]}),register("VectorTile",VectorTile),register("VectorTileLayer",VectorTileLayer),register("VectorTileFeature",VectorTileFeature),register("Pbf",Pbf),register("StyleOptionsBuilding",StyleOptionsBuilding),register("DistrictStyleOptions",DistrictLayerStyle),Uma=exports.Mo||(exports.Mo={}),Uma.TOLOAD="toload",Uma.LOADING="loading",Uma.LOADED="loaded",Uma.UNLOADED="unloaded",Uma.ERROR="error",Uma.RELOADING="reloading";var TileCoord=function(t,e,r){this.x=e,this.y=r,this.z=t,this.key=t+","+e+","+r};register("TileCoord",TileCoord);var Tile=(Zma.prototype.destroy=function(){},Zma);function Zma(t){this.Ro=[0,0,0,0],this.stamp=0,this.zo=t,this.status=exports.Mo.TOLOAD,this.data={}}var NebulaTile=(_ma=Tile,__extends(ana,_ma),Object.defineProperty(ana.prototype,"tag",{get:function(){return this.nN},set:function(t){this.aN=this.tag,this.nN=t},enumerable:!0,configurable:!0}),Object.defineProperty(ana.prototype,"data",{get:function(){var t=[];return this.oN()?t.push(this.qc):(this.sN&&t.push(this.sN),this.uN&&t.push(this.uN)),t},set:function(t){},enumerable:!0,configurable:!0}),ana.prototype.xa=function(t,e){switch(void 0===e&&(e=NebulaTagType.eN),e){case NebulaTagType.tN:this.uN=exports.Ln(exports.Ln({},this.uN),t);break;case NebulaTagType.rj:this.sN=exports.Ln(exports.Ln({},this.sN),t);break;case NebulaTagType.eN:default:this.qc=exports.Ln(exports.Ln({},this.qc),t)}},ana.prototype.rO=function(t,e){void 0===e&&(e=NebulaTagType.eN),this.xa(t,e)},ana.prototype.ID=function(t){t&&(t.uN&&(this.uN=t.uN),t.sN&&(this.sN=t.sN),t.qc&&(this.qc=t.qc))},ana.prototype.rN=function(){this.aN?this.nN=this.aN:this.nN=""},ana.prototype.destroy=function(){var t=this.data;if(t)for(var e=0,r=t;e<r.length;e++){var i=r[e];if(i.Dc&&(i.Dc.destroy(),delete i.Dc),i.$c&&(i.$c.destroy(),delete i.$c),i.labels){for(var n=0,a=i.labels;n<a.length;n++)a[n].destroy();delete i.labels}i.Ta=!1,delete i.gf}},ana.prototype.oN=function(){var t=this.qc,e=Object.keys(t||{});return!!e.length&&(1!==e.length||"sdfLoaded"!==e[0])},ana),_ma;function ana(){var t=null!==_ma&&_ma.apply(this,arguments)||this;return t.aN="",t}var RasterTile=(una=Tile,__extends(vna,una),vna.prototype.destroy=function(){var t=this.data;t&&(t.qi&&(t.qi.destroy(),delete t.qi),t.zs&&(t.zs.context.deleteBuffer(t.zs),delete t.zs),t.Js&&(t.Js.destroy(),delete t.Js))},vna),una;function vna(){return null!==una&&una.apply(this,arguments)||this}var VectorTile$1=(xna=Tile,__extends(yna,xna),yna.prototype.destroy=function(){var t=this.data;t&&(t.$c&&(t.$c.destroy(),delete t.$c),t.Uc&&delete t.Uc)},yna),xna;function yna(){return null!==xna&&xna.apply(this,arguments)||this}register("Tile",Tile);var NebulaTileCoord=(Ana=[-180,-90],Bna=[180,90],Cna=Bna[0]-Ana[0],Dna=Bna[1]-Ana[1],{ga:function(t,e,r,i){void 0===i&&(i="lnglat");var n=Math.pow(2,r),a=Cna/n,o=Dna/n,s=ProjectionManager.getProjection("EPSG:3857");if("lnglat"===i)return[t*a+Ana[0],Bna[1]-e*o,(t+1)*a+Ana[0],Bna[1]-(e+1)*o];if("EPSG:3857"!==i)return[0,0,0,0];var u=s.project(t*a+Ana[0],Bna[1]-e*o),f=s.project((t+1)*a+Ana[0],Bna[1]-(e+1)*o);return[u[0],u[1],f[0],f[1]]}}),Ana,Bna,Cna,Dna,LabelLayer=(Pna.prototype.nO=function(t,e){void 0===e&&(e={}),this.iO=e.from||"nebula",labelsUtil.zj(this,t),this.eO(e)},Pna.prototype.oO=function(){return this.gs.aO()},Pna.prototype.uO=function(){return this.oO().viewMode,!0},Pna.prototype.eO=function(t){void 0===t&&(t={});var e=t.center,r=this.Gj||{},i=this.Vj||{},n=this.Hj||{},a=this.iO,o=0;for(var s in r)if(r.hasOwnProperty(s)&&s){var u=r[s]||{};n[s]=this.sO(s,u),i[s]=this.fO(s,u,n[s],{from:a,center:e});var f=u.data.txt,c=u.opts,h=c.icon,l=c.text||{};f&&(o+=f.length+1,l.style&&l.style.borderWidth&&(o+=4)),h&&h.length&&h[0].image&&(o+=h.length)}this.$j=o,this.Vj=i,this.Hj=n},Pna.prototype.hO=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]);var r=CONSTS.Mp,i=CONSTS.Rp,n=t[0]||r,a=t[1]||i,o=e[0]||r,s=e[1]||i;return[o<n?n:o,a<s?a:s]},Pna.prototype.cO=function(t,e){void 0===t&&(t={});var r={};return r.type=t.type||e.type,r.image=t.image||"",r.clipOrigin=t.clipOrigin||e.clipOrigin,r.clipSize=t.clipSize,r.size=t.size,r.anchor=t.anchor||e.anchor,r.angel=t.angel||e.angel,r.retina=t.retina||e.retina,r.zooms=t.zooms||e.zooms,r},Pna.prototype.vO=function(t,e){void 0===t&&(t={});var r={};r.type=t.type||e.type,r.direction=t.direction||e.direction,r.offset=t.offset||e.offset,r.zooms=t.zooms||e.zooms;var i=e.style,n=t.style||{};r.style={},r.style.fontFamily=n.fontFamily||i.fontFamily,r.style.fontSize=n.fontSize||i.fontSize,r.style.fontWeight=n.fontWeight||i.fontWeight,r.style.fillColor=n.fillColor||i.fillColor;var a=n.strokeColor,o=n.strokeWidth;return isUndefined(o)&&isUndefined(a)?r.style.strokeWidth=i.strokeWidth:isUndefined(o)&&!isUndefined(a)?r.style.strokeWidth=1:r.style.strokeWidth=n.strokeWidth,r.style.borderColor=n.borderColor,r.style.borderWidth=n.borderWidth,r.style.strokeColor=n.strokeColor||i.strokeColor,r.style.borderColor=n.borderColor||i.borderColor,r.style.backgroundColor=n.backgroundColor,r.style.padding=n.padding||i.padding,r.style.fold=void 0===n.fold||n.fold,r},Pna.prototype.lO=function(t){var e=(this.ac.Fs||{})[t]||{};return[e.width||36,e.height||36]},Pna.prototype.dO=function(t,e){var r=CONSTS.sj,i=this.cO(t,r.icon);i.zooms=t.zooms||e.bO;var n=this.hO(e.zooms,i.zooms);if(i.zooms=n,!i.size||!i.clipSize){var a=this.lO(t.image||""),o=a[0]||0,s=a[1]||0;i.size||(i.size=[o,s]),i.clipSize||(i.clipSize=[o,s])}return i},Pna.prototype.pO=function(t,e){void 0===t&&(t={});var r=CONSTS.sj,i=this.vO(t,r.text);i.zooms=t.zooms||e.bO;var n=i.direction,a=e.yO,o=this.mO(n||"",a),s=o.textAlign,u=o.verticalAlign;i.style&&(i.style.textAlign=s,i.style.verticalAlign=u);var f=this.hO(e.zooms,i.zooms);return i.zooms=f,i},Pna.prototype.sO=function(t,e){var r=e.data,i=r&&r.txt,n=e.opts||{},a=n.angle||0,o=isUndefined(n.opacity)?1:n.opacity,s=n.icon,u=n.text,f=n.zooms,c=n.visible,h={angle:a,opacity:o,zooms:this.options.zooms,bO:f},l=[];if(s)for(var d=0,v=s;d<v.length;d++){var g=v[d];l.push(this.dO(g,h))}h.yO=!!s;var p=i?this.pO(u,h):null;p&&(p.txt=i);var b={icon:l,text:p,visible:c};return"labelsLayer"===this.iO&&(b.tn=1),b},Pna.prototype.gO=function(t){if(this.oO().zoom<LocalZoom)return t;var e=lcs.getLocalByCoord(t);return vector.Ip(t,e.center)},Pna.prototype.wO=function(t,e){if(!e||!e.image)return{size:[0,0],origin:t,anchorOffset:[0,0],coords:t};var r=CONSTS.sj.icon,i=e.size||this.lO(e.image),n=e.anchor||r.anchor,a=this._getAnchorOffset(i,n);return{size:i,origin:t,anchorOffset:a,coords:vector.add(t,a)}},Pna.prototype.MO=function(t,e,r){if(void 0===t&&(t="icon"),"text"===t){var s,i=e.origin,n=(e.start,r.padding),a=r.c,o=void 0,u=n.offsetX,f=n.offsetY,c=n.w,h=n.h;return s=this.uO()?(o=a[0],a[1]):(o=i[0],i[1]),{x:o+u,y:s+f,width:c,height:h}}var l=e.size,d=void 0===l?[]:l;return e.coords,{x:(a=e.c)[0],y:a[1],width:d[0]||0,height:d[1]||0}},Pna.prototype._getAnchorOffset=function(t,e){var r=CONSTS.JM,i=t[0]||0,n=t[1]||0;if("[object Array]"===Object.prototype.toString.apply(e)){var a=e[0],o=e[1];if("number"==typeof a&&"number"==typeof o)return vector.tA(e)}else if("string"==typeof e){var s=e.split("-"),u=s[0],f=s[1],c=0,h=0;switch(u!==r.ij||f||(u=r.nj,f=r.ij),f){case r.rj:c=0;break;case r.ij:c=-i/2;break;case r.QM:c=-i;break;default:c=0}switch(u){case r.ZM:h=0;break;case r.nj:h=-n/2;break;case r.tj:h=-n;break;default:h=0}return[c,h]}return[0,0]},Pna.prototype.jO=function(t){return this._getAnchorOffset(t.size||[],"middle-center")},Pna.prototype.AO=function(t,e,r,i){void 0===i&&(i={});var n,a,o=CONSTS.JM,s=i.kO,u=void 0===s?0:s,f=i.yO,c=void 0!==f&&f,h=i.padding,l=i.lines,d=this.jO(t),v=d[0]||0,g=d[1]||0,p=t.anchorOffset||[],b=p[0]||0,y=p[1]||0,m=t.size||[],T=m[0]||0,M=m[1]||0,A=b-v,w=y-g,x=h[0],S=h[1],P=h[2],k=h[3],$=.8*u;switch(r){case o.ZM:a=c?(n=A,y-P-.2*u-(_=$*l+3*(l-1))):(n=b+k,y+x);break;case o.QM:var _=$/2*l+1.5*(l-1);a=c?(n=b+T+k,w-_):(n=b-S,y-_-P);break;case o.tj:a=c?(n=A,y+M+x):(n=b+k,y-P-(_=$*l+3*(l-1)));break;case o.rj:_=$/2*l+1.5*(l-1),a=c?(n=b-S,w-_):(n=b+k,y-_-P);break;case o.nj:case o.ij:a=c?(n=b+T/2,w-(_=$/2*l+1.5*(l-1))):(n=b,y-(_=$/2*l+1.5*(l-1))-P);break;default:n=b,a=y-(_=$/2*l+1.5*(l-1))-P}return[n,a]},Pna.prototype.OO=function(t,e){void 0===e&&(e={});var r,i,n=CONSTS.JM,a=CONSTS.ic,o=e.xO,s=(e.kO,e.yO),u=e.direction,f=e.lines,c=e.size,h=e.IO,l=t[0]||0,d=t[1]||0;switch(this.mO(u,s).textAlign){case n.rj:r=l,i=d;break;case n.QM:r=l-o,i=d;break;case n.ij:r=l-o/2,i=d}var v=this.TO(c,f),g=Math.ceil(h/f);return{x:r,y:i,w:1<f?c*g+a*(g-1):o,h:v,FO:l,_O:d}},Pna.prototype.mO=function(t,e){var r,i,n=CONSTS.JM;if(e)switch(t){case n.rj:r=n.QM;break;case n.QM:r=n.rj;break;case n.ZM:case n.tj:default:r=n.ij,i=n.tj}else switch(t){case n.rj:case n.ij:case n.QM:r=t,i=n.tj;break;case n.ZM:case n.tj:case n.nj:default:r=n.rj,i=t}return{textAlign:r,verticalAlign:i}},Pna.prototype.TO=function(t,e){return void 0===t&&(t=12),void 0===e&&(e=1),(t*=5/4)*e+3*(e-1)},Pna.prototype.CT=function(t,e){return this.Mf?this.Mf.measureText(t,e):this.NT?(this.NT.font=(e||12)+"px",this.NT.measureText(t.join("")).width):0},Pna.prototype.SO=function(t,e,r){if(!e||!r.txt)return{origin:t.origin,offset:[0,0],coords:t.coords,start:{}};var i=CONSTS.sj.text,n=i.direction,a=i.offset,o=i.style,s=r.yO,u=r.CO,f=e.direction||n,c=e.offset||a,h=e.style||o,l=h.fontSize||12,d=h.padding||o.padding,v=!1===h.fold?100:o.fj,g=r.txt.length,p=Math.ceil(g/v),b=this.TO(l,1),y={xO:this.CT(u,l),kO:b,yO:s,direction:f,padding:d,fj:v,lines:p,size:l,IO:g},m=this.AO(t,t.size,f,y),T=vector.add(m,c),M=vector.add(t.origin,T),A=this.OO(M,y);return{origin:t.origin,offset:T,coords:M,start:A}},Pna.prototype.EO=function(t,e,r){if(!e||!r.txt)return{offsetX:0,offsetY:0,w:0,h:0};var i,n,a=CONSTS.JM,o=CONSTS.sj,s=(t.coords,t.start),u=t.offset,f=void 0===u?[]:u,c=f[0],h=f[1],l=s.w,d=s.h,v=r.yO,g=o.text,p=g.direction,b=g.style,y=e.direction||p,m=(e.style||b).padding||b.padding,T=m[0],M=m[1],A=m[2],w=m[3];if(v)switch(y){case a.ZM:i=c-l/2-w,n=h-T;break;case a.QM:i=c-w,n=h-T;break;case a.tj:i=c-l/2-w,n=h-T;break;case a.rj:i=c-l-w,n=h-T;break;case a.nj:case a.ij:i=c-l/2-w,n=h-T;break;default:i=c-l/2-w,n=h+A}else switch(y){case a.ZM:i=c-w,n=h+A;break;case a.QM:i=c-l-w,n=h+A;break;case a.tj:case a.rj:i=c-w,n=h+A;break;case a.nj:case a.ij:i=c-l/2-w,n=h-T;break;default:i=c-l/2-w,n=h+A}return{offsetX:i,offsetY:n,w:l+w+M,h:d+T+A}},Pna.prototype.fO=function(t,e,r,i){void 0===i&&(i={});var n,a=i.from,o=i.center,s=e.data,u=e.opts||{},f=s.position,c=s.txt,h=u.icon,l=r.text,d=e.CO,v=this.oO().zoom;n="nebula"!==a||"relative"!==s.positionType&&LocalZoom<=v?vector.Ip(f,o):f;var g=vector.add(n,[0,0]),p=!!h,b=this.wO(g,h[0]),y=this.SO(b,l,{CO:d,txt:c,yO:p}),m={txt:c,yO:p};return{origin:n,icon:b,text:y,padding:this.EO(y,l,m)}},Pna);function Pna(t){this.options={},this.Gj={},this.Hj={},this.Vj={},this.Wj={},this.$j=0,this.render=null,this.NO={},this.ac=t.z_,this.Mf=t.R_,this.io=t.canvas,this.NT=t.Nz}var LabelGroup=(Fsa.prototype.nT=function(t){if(!t)return"";var e=t.fontSize,r=t.fillColor,i=void 0===r?CONSTS.aT.Uj:r,n=t.strokeColor,a=void 0===n?CONSTS.aT.Uj:n,o=t.strokeWidth,s=t.backgroundColor,u=t.borderColor,f=labelsUtil.toString(i)+labelsUtil.toString(a)+(s?labelsUtil.toString(s):""+(u?labelsUtil.toString(u):""))+e+o;return this.AS(f),this.oT[f]},Fsa.prototype.AS=function(t){this.oT[t]||(this.oT[t]=this.index++)},Fsa);function Fsa(){this.oT={},this.index=1}var labelGroup=new LabelGroup,angle$1=0,LabelVertices=(Ssa.prototype.LO=function(t,e){var r=e.from,i=void 0===r?"nebula":r,n=CONSTS.ud;labelsUtil.zj(this,t),this.iO=i;var a=this.DO;this.Mf&&(a.rp=new Float32Array(this.$j*n*6));var o=this.Gj,s=this.Hj,u=this.Vj;if(!s||!u)return null;var f=assign(this.options,e),c=this.RO(o),h=isUndefined(f.opacity)?1:f.opacity;if(this.Mf){for(var l=0,d=0,v=0,g=0,p=c;g<p.length;g++){var b=p[g],y=s[b[0]],m={vd:[]};if(y&&y.text&&y.text.style){var T=s[b[0]].text.style||{};m.vd=this.pO(T)}d=v,m.start=d;var M=o[b[0]].opts||{},A=M.opacity;A=isUndefined(A)?1:A;var w=M.icon&&M.icon[0]&&M.icon[0].image;m.opacity=A,m.opacity*=h,a.pp.push(m),m.dp=[];for(var x=0,S=b;x<S.length;x++){var P=S[x],k=o[P].CO||[],$={height:o[P]&&o[P].opts.height||0},_=this.PO(P,u[P],s[P],a,$),L=this.UO(P,u[P],s[P],a,$),N=this.BO(P,u[P],s[P],a,k,$),O=6*(N+_+L);m.dp.push({id:P,Rd:N,icon:_,bg:L,kd:O}),v+=O*n}m.end=v,m.pd=w;var I=v-d;l+=I,a.bd.push(I)}a.up=l}return a.Fz=c,this.DO=a},Ssa.prototype.ym=function(){return this.gs.aO()},Ssa.prototype.zO=function(t){if(!t)return[];var e=this.qO;if(e[t])return e[t];var r=labelsUtil.Kj(parseInt(t,10));return this.qO[t]=r,this.qO[t]},Ssa.prototype.RO=function(t){var e={},r=this.Gj,i=this.iO;for(var n in t)if(t.hasOwnProperty(n)){var a=r[n],o=a.data||{},s=a.opts||{},u=s.zIndex,f=o.rank;f=s.forceShow?f-1e5:f;var c=isUndefined(s.opacity)?1:s.opacity,h=("labelsLayer"===i?u||f:u)||1,l=this.Hj[n]||{},d=l.text,v=void 0===d?{}:d,g=l.icon;e[h]=e[h]||{};var p=v&&v.style||"",b=void 0;b=p?labelGroup.nT(p)+c:"-1-"+c,"labelsLayer"===i&&(b+=g&&g[0]&&g[0].image?g[0].image:""),e[h][b]||(e[h][b]=[]),e[h][b].push(n)}var y=Object.keys(e),m=[];for(n=0;n<y.length;n++)(f=parseInt(y[n],10))<0&&(y.splice(n--,1),m.push(f+""));for(var T=[],M=0,A=y=m.concat(y);M<A.length;M++)for(var w=e[f=A[M]],x=0,S=Object.keys(w).sort();x<S.length;x++){var P=S[x];T.push(w[P])}return T},Ssa.prototype.WO=function(t,e){var r=Util.WorldAxesCenter;return[t-r.x,e-r.y]},Ssa.prototype.GO=function(t){return t},Ssa.prototype.HO=function(t,e,r,i,n){var a=n.VO,o=n.type,s=void 0===o?0:o,u=n.zooms,f=n.height,c=e.icon,h=void 0===c?[]:c,l=CONSTS.ud,d=this.$O,v=0,g=0,p=this.ac.getImage(r.image);p&&(v=p.startX||0,g=p.startY||0);var b=a[0],y=a[1],m=CONSTS._j,T=u[0],M=u[1],A=m,w=h.anchorOffset,x=r.size,S=r.clipSize,P=r.clipOrigin,k=x[0],$=x[1],_=S[0],L=S[1],N=P[0],O=P[1],I=this.GO(w),j=I[0]||0,C=I[1]||0,E=v+N,D=g+O;i.set([j,C,E,D,b,y,A,s,T,M,f,angle$1,j+k,C,E+_,D,b,y,A,s,T,M,f,angle$1,j,$+C,E,D+L,b,y,A,s,T,M,f,angle$1,j+k,C,E+_,D,b,y,A,s,T,M,f,angle$1,j+k,$+C,E+_,D+L,b,y,A,s,T,M,f,angle$1,j,$+C,E,D+L,b,y,A,s,T,M,f,angle$1],d),this.$O+=6*l},Ssa.prototype.PO=function(t,e,r,i,n){if(!e||!r)return 0;var a=e.icon,o=void 0===a?{}:a,s=r.icon,u=void 0===s?[]:s;if(!u.length||!u[0].image)return 0;for(var f=o.origin,c=f[0],h=f[1],l=(f[2],this.WO(c,h)),d=n.height,v=0,g=u;v<g.length;v++){var p=g[v];this.HO(t,e,p,i.rp,{VO:l,zooms:p.zooms,height:d})}return u.length},Ssa.prototype.YO=function(t,e,r,i,n){var a=n.VO,o=n.type,s=void 0===o?6:o,u=n.zooms,f=n.height,c=CONSTS.ud,h=this.$O,l=e.padding,d=a[0],v=a[1],g=u[0],p=u[1],b=l.w,y=l.h,m=l.offsetX,T=l.offsetY;i.set([m,T,0,0,d,v,0,s,g,p,f,angle$1,m+b,T,0,0,d,v,0,s,g,p,f,angle$1,m,y+T,0,0,d,v,0,s,g,p,f,angle$1,m+b,T,0,0,d,v,0,s,g,p,f,angle$1,m+b,y+T,0,0,d,v,0,s,g,p,f,angle$1,m,y+T,0,0,d,v,0,s,g,p,f,angle$1],h),this.$O+=6*c,h=this.$O;var M=r.text.style.borderWidth;if(M){for(var A=[m,T,b,y,d,v,M,g,p,f,angle$1],w=0;w<4;w++)A[11]=w,this.sT(A,i,h),h+=6*c;this.$O=h}},Ssa.prototype.sT=function(t,e,r){void 0===t&&(t={});var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],u=t[5],f=t[6],c=t[7],h=t[8],l=t[9],d=t[10],v=0,g=0,p=0,b=0,y=0,m=0,T=0,M=0;switch(t[11]){case 0:b=g=n-f,y=v=i+0,T=p=i+a,M=m=n+0;break;case 1:p=(v=i+a)+f,b=g=n-f,T=(y=i+a)+f,M=m=n+o+f;break;case 2:y=v=i+0,T=p=i+a,M=m=(b=g=n+o)+f;break;case 3:v=i-f,b=g=n-f,y=(p=i)-f,T=i,M=m=n+o+f}e.set([v,g,0,0,s,u,0,8,c,h,l,d,p,b,0,0,s,u,0,8,c,h,l,d,y,m,0,0,s,u,0,8,c,h,l,d,p,b,0,0,s,u,0,8,c,h,l,d,y,m,0,0,s,u,0,8,c,h,l,d,T,M,0,0,s,u,0,8,c,h,l,d],r)},Ssa.prototype.UO=function(t,e,r,i,n){if(!e||!r)return 0;var a=CONSTS.Mp,o=CONSTS.Rp,s=e.text,u=(r.text||{}).zooms,f=void 0===u?[a,o]:u;if(!r.text||!s.origin)return 0;var c=s.origin,h=c[0],l=c[1],d=(c[2],[h,l]),v=n.height;this.YO(t,e,r,i.rp,{VO:d,zooms:f,height:v});var g=1;return r.text.style.borderWidth&&(g+=4),g},Ssa.prototype.pO=function(t){var e=CONSTS.ec,r=this.ym().KO,i=void 0===r?1:r,n=t.fontSize,a=void 0===n?12:n,o=t.fillColor,s=void 0===o?[0,0,0,1]:o,u=t.strokeColor,f=t.strokeWidth,c=void 0===f?0:f,h=t.backgroundColor,l=void 0===h?0:h,d=t.borderColor;s=labelsUtil.Yj(Util.color2RgbaArray(s)),l=l?labelsUtil.Yj(Util.color2RgbaArray(l)):[0,0,0,0],u=labelsUtil.Yj(Util.color2RgbaArray(u),[.988,.988,.988,1]),d=labelsUtil.Yj(Util.color2RgbaArray(d),[.988,.988,.988,1]);var v=(a=a||12)<10?.78125:205/256,g=0,p=0;c&&(p=v*(1-(c=10<c*i?10:c)/10.1)),g=1.4142*(g=e<a||1<i?1.7:1.5)/a;var b=v+1.5/256*(i-1),y=new Float32Array(19);return y.set(s,0),y.set(u,4),y[8]=g,y[9]=p,y[10]=b,y.set(l,11),y.set(d,15),y},Ssa.prototype.CT=function(t,e){return this.Mf?this.Mf.measureText(t,e):this.NT?(this.NT.font=(e||12)+"px",this.NT.measureText(t.join("")).width):0},Ssa.prototype.XO=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var r=CONSTS.JM,i=CONSTS.ec,n=e.direction,a=void 0===n?r.rj:n,o=e.size,s=void 0===o?i:o,u=(e.yO,this.CT(t,s)),f=0,c=0;switch(a){case r.rj:f=-u,c=0;break;case r.QM:c=f=0;break;case r.ZM:case r.tj:f=-u/2,c=0;break;case r.ij:case r.nj:f=-u/2,c=0;break;default:c=f=0}return[f,c]},Ssa.prototype.JO=function(t,e,r,i){var n=CONSTS.Qu,a=CONSTS.ud,o=this.$O,s=i.size,u=i.VO,f=i.type,c=void 0===f?2:f,h=(i.id,i.zooms),l=i.height,d=CONSTS.Kp,v=this.Mf.mz(e);if(v){var g=v.index,p=v.char,b=(v.key,v.pos),y=u[0],m=u[1],T=h[0],M=h[1];if(p){var A=s/d.size,w=p[0],x=p[1],S=p[2],P=p[3],k=p[4],$=p[5],_=p[6],L=d.buffer;if(0<w&&0<x){w+=2*L,x+=2*L;var N=r.x,O=r.y,I=+(N+(S-L)*A),j=+(N+(S-L+w)*A),C=O-P*A,E=+(O+(x-P)*A),D=0,R=0;n<=g&&(D+=b.startX,R+=b.startY);var U=D+$,F=R+_;t.set([I,C,U,F,y,m,g,c,T,M,l,angle$1,j,C,U+w,F,y,m,g,c,T,M,l,angle$1,I,E,U,F+x,y,m,g,c,T,M,l,angle$1,I,E,U,F+x,y,m,g,c,T,M,l,angle$1,j,C,U+w,F,y,m,g,c,T,M,l,angle$1,j,E,U+w,F+x,y,m,g,c,T,M,l,angle$1],o),this.$O+=6*a}r.x=r.x+(k+CONSTS.ic)*A}}},Ssa.prototype.BO=function(t,e,r,i,n,a){if(!e||!r)return 0;var o=CONSTS.Mp,s=CONSTS.Rp,u=r,f=e.text,c=f.origin,h=f.offset,l=u.text||{},d=l.style,v=void 0===d?{}:d,g=l.direction,p=void 0===g?"left":g,b=l.zooms,y=void 0===b?[o,s]:b,m=n,T=c[0],M=c[1];if(c[2],!u.text||!u.text.style)return 0;for(var A=m.length,w=!1===v.fold?100:6,x=Math.ceil(A/w),S=Math.ceil(A/x),P=v.fontSize,k={direction:p,size:P,yO:u.icon.length&&u.icon[0].image},$=this.XO(m.slice(0,S),k),_=1<x&&"center"===p?this.XO(m.slice(0,A%S||S),k):$,L=[T,M],N=vector.add(h,$),O=vector.add(h,_),I={x:N[0]||0,y:N[1]||0},j=a.height,C=0,E=0;E<A;E++){var D=m[E],R=x-Math.ceil((A-E)/S);R||E||"center"!==p||(I.x=O[0]),R&&(I.y=N[1]+(P+3)*R,C!==R&&(I.x=N[0])),C=R,this.JO(i.rp,D,I,{size:P,VO:L,id:t,zooms:y,height:j})}return A},Ssa);function Ssa(t){this.DO={rp:[],pp:[],bd:[],up:0},this.ZO=[],this.options={},this.Gj={},this.Hj={},this.Vj={},this.QO={},this.tI={},this.Fs={},this.$j=0,this.qO={},this.$O=0,this.rI={},this.iO="nebula",this.No=Util.stamp(this),this.Mf=t.R_,this.ac=t.z_,this.io=t.canvas,this.NT=t.Nz}var DefaultLabelsLayerOpts={opacity:1,collision:!0,animation:!0},LabelMain=(Pya.prototype.Ns=function(t,e,r){void 0===r&&(r={});var i=r.zoom,n=r.center,a=r.from;this.nI=t,this.iI=!0,this.iO=a,this.eI.zoom=i||20,this.oI(),this.hu=n,this.uI(r,e)},Pya.prototype.aO=function(){return this.eI},Pya.prototype.zL=function(t){return this.Wj[t]},Pya.prototype.uI=function(t,e){void 0===t&&(t={});var r=this.iO,i={center:this.hu,from:r};assign(i,t),this.sI.nO(this,i),this.$j=this.sI.$j;var n=this.fI.LO(this,i);if(n){var a={},o={},s=n.Fz||{};delete n.Fz;var u=this.Gj;if("nebula"===this.iO){for(var f in u)if(u.hasOwnProperty(f)){var c=u[f],h=this.Vj[f],l=c.data,d=l.extData,v=l.position,g=l.name,p=l.rank;a[f]={data:{position:v,name:g,rank:p,extData:{type:d.type,id:d.id,Lp:d.Lp,Ap:d.Ap,bz:d.bz}}},o[f]={origin:h.origin,icon:{anchorOffset:h.icon.anchorOffset,size:h.icon.size},padding:h.padding},c.opts&&(a[f].opts={zooms:c.opts.zooms})}e&&e({Nf:a,style:this.Hj,coords:o,rp:n,zp:this.zp,Fz:s})}else e&&e({Nf:u,style:this.Hj,coords:this.Vj,rp:n,zp:this.zp,Fz:s})}},Pya.prototype.oI=function(){for(var t=this.nI,e=this.Gj||{},r=this.Wj,i=this.zp,n=CONSTS.Mp,a=CONSTS.Rp,o=CONSTS.Pp,s=CONSTS.jp,u=0,f=t;u<f.length;u++){var c=f[u],h=c.data.id,l=c.opts&&c.opts.zooms||[],d=l[0],v=void 0===d?n:d,g=l[1],p=void 0===g?a:g,b=isUndefined(r[h])?Util.stamp(this):r[h];h&&(r[h]=b);for(var y=Math.ceil(v-o);y<=p+s;)i[y]||(i[y]=[]),i[y].push(b),y++;e[b]=c,e[b].CO=this.Ws(c),this.hI(c)}if("undefined"!=typeof Uint32Array)for(var m in i)i.hasOwnProperty(m)&&(i[m]=new Uint32Array(i[m]));this.Gj=e},Pya.prototype.hI=function(t){var e=this.Fs,r=t.opts.icon,i=r&&r.image||"";i&&(e[i]=1)},Pya.prototype.Ws=function(t){for(var e=this.Es,r=[],i=t.data.txt||"",n=0;n<i.length;n++){var a=i.charCodeAt(n);e[a]=1,r.push(a)}return r},Pya);function Pya(t){if(this.CLASS_NAME="AMap.LabelsLayer",this.Gj={},this.Hj={},this.Vj={},this.Fs={},this.Es={},this.Wj={},this.$j=0,this.zp={},this.render=null,this.eI={},this.nI=[],this.cI=!1,this.iI=!1,this.iO="",this.cI=!1,this._opts=assign({},DefaultLabelsLayerOpts,{opacity:t.opacity}),this.Mf=t.R_,this.ac=t.z_,!t.R_)try{var e=this.io=document.createElement("canvas"),r=void 0;e&&(r=this.NT=e.getContext("2d")),t.canvas=e,t.Nz=r}catch(t){console.warn("canvas 初始化失败")}this.sI=new LabelLayer(t),this.fI=new LabelVertices(t)}var Actor=(Yza.prototype.send=function(t,e,r,i){var n=this,a=r?this.dI+":"+this.bI++:null;r&&a&&(this.pI[a]=r);var o=[],s=serialize(e,o);if(this.target.postMessage({yI:i,mI:this.dI,type:t,id:String(a),data:s},o),r)return{cancel:function(){n.target.postMessage({yI:i,mI:n.dI,type:"<cancel>",id:String(a),key:e.ya}),a&&delete n.pI[a]}}},Yza.prototype.gI=function(t){var e,n=this,r=t.data,a=r.id;if(!r.yI||this.dI===r.yI)if("<cancel>"===r.type)e=this.pI[r.id],delete this.pI[r.id],e&&e(null);else if("<response>"===r.type||"<cancel>"===r.type)e=this.pI[r.id],delete this.pI[r.id],e&&r.error?e(deserialize(r.error)):e&&e(null,deserialize(r.data));else if(void 0!==r.id&&this.parent[r.type]){var o=function(t,e){delete n.pI[a];var r=[],i=serialize(e,r);n.target.postMessage({mI:n.dI,type:"<response>",id:String(a),error:t?serialize(t):null,data:i},r),o=void 0};this.pI[r.id]=null;var i=this.parent[r.type](r.mI,deserialize(r.data),o);i&&null===this.pI[r.id]&&(this.pI[r.id]=i.cancel)}},Yza.prototype.remove=function(){this.target.removeEventListener("message",this.gI,!1)},Yza);function Yza(t,e,r){this.UD=!1,this.gI=this.gI.bind(this),this.target=t,this.parent=e,this.dI=r,this.pI={},this.bI=0,this.target.addEventListener("message",this.gI,!1)}var StyleParser=(uAa.Wb=function(t){return{style:JSON.stringify(t.styles)}},uAa.Gb=function(t){return new uAa(JSON.parse(t.style))},uAa.prototype.i_=function(){this.EI=-1,this.CI={}},uAa.prototype.setStyle=function(t){this.Ve=t,this.i_()},uAa.prototype.kF=function(t){this.bN=t},uAa.prototype.dn=function(t,e,r){if(this.SI(t,e,r))return this.CI[t+":"+e];if(this.jk(t,e,r)){var i=this.Ak(t,e,r,this.Ve)||null;return this.CI[t+":"+e]=i}return i=this.kk(t,e,r)||null,this.CI[t+":"+e]=i},uAa.prototype.MF=function(t,e){var r=this.bN;if(!r||!r[t])return null;if(r[t].styles&&r[t].styles.color){var i=Util.getOptimalZoom(e),n={};for(var a in r[t].styles.color.nodes)if(r[t].styles.color.nodes.hasOwnProperty(a)){var o=r[t].styles.color.nodes[a];n[o.zoom]=o.value}var s=this._k(n,i);return n[s]?Util.Hex2Rgba(n[s]):null}if(r[t].color){var u=r[t].color;return Util.Hex2Rgba(u)}},uAa.prototype.Ok=function(t,e,r){if(void 0===this.styles[t])return null;var i=this.styles[t][e];if(!i)return null;var n=i.levelStyleMapping[r];return void 0!==n?i.browserStyle[n]:null},uAa.prototype.xk=function(t,e,r){if(void 0===this.styles[t])return null;if(void 0===this.styles[t][e])return null;if(void 0===this.styles[t][e].levelStyleMapping)return null;if(void 0===this.styles[t][e].browserStyle)return null;var i=this.styles[t][e].levelStyleMapping,n=this.styles[t][e].browserStyle,a=Math.floor(r),o=Math.ceil(r),s=r-a<.8?a:o,u=n[i[a]],f=n[i[o]];if((u||f)&&(u||s!==a)&&(!u||f||s!==o)&&(u||!f||a!==s)){if(!u&&f){var c=g=cloneDeep(f);g instanceof Array&&(c=g[0]);for(var h=Object.keys(c),l=0;l<h.length;l++)if(-1<(b=h[l]).indexOf("Color")&&c[b]&&c[b].rgba){var d=(r-a-.8)/.2,v=Math.floor(c[b].rgba[3]*d);c[b].rgba[3]=v}else-1<b.indexOf("Width")&&(d=(r-a-.8)/.2,c[b]=c[b]*d);return g}if(u&&f){var g,p=g=cloneDeep(u);for(c=f,g instanceof Array&&(p=g[0]),g instanceof Array&&(c=f[0]),h=Object.keys(p),l=0;l<h.length;l++){var b;if(-1<(b=h[l]).indexOf("Width")){var y=(r-a)*(c[b]-p[b])+p[b];p[b]=y}}return g}return null}},uAa.prototype.Ik=function(t,e,r){var i=[];return i[0]=t[0]+(e[0]-t[0])*r,i[1]=t[1]+(e[1]-t[1])*r,i[2]=t[2]+(e[2]-t[2])*r,i[3]=t[3]+(e[3]-t[3])*r,i},uAa.prototype.kk=function(t,e,r){var i=t.toString()[0];if("1"!==i&&"4"!==i)return this.xk(t,e,r);var n=Util.getOptimalZoom(r);return this.Ok(t,e,n)},uAa.prototype.Ak=function(t,e,r,i){var n=cloneDeep(this.styles[t][e]),a=(n.type,n.levelStyleMapping),o=n.browserStyle,s=r,u=i[t][e],f=null;if(u.styles){var c=Util.getOptimalZoom(r);if(u.styles.visible){var h=this._k(u.styles.visible.nodes,c);if(h){var l=u.styles.visible.nodes[h];if(void 0!==l&&!1===l)return null}}for(var d=Object.keys(u.styles),v=0;v<d.length;v++){var g=d[v],p=u.styles[g],b=null;if(p.transitional&&"linear"===p.transitional){var y=this.Tk(p.nodes,r);if(!y||!y[0])continue;if(!(s=y[0]))continue;if(void 0===(M=a[c]))continue;f=o[M],1===y.length?b=p.nodes[s]:"color"===g&&(b=this.Fk(y,p.nodes,r))}else{if(!(s=this._k(p.nodes,c)))continue;if(void 0===(M=a[c]))continue;f=o[M],b=p.nodes[s]}if(!f)return null;var m=t.toString()[0],T=this.uP(u,c);if("1"===m){if(!T)return null;this.NI(g,b,f)}else"2"===m?(this.Sk(g,b,f),!T&&f&&f[1]&&(f[1]=null)):"4"===m?this.LI(g,b,f):this.Ck(g,b,f)}}else{if(void 0!==u.visible&&!1===u.visible)return null;var M;if(void 0===(M=a[s=Util.getOptimalZoom(s)]))return null;for(f=o[M],d=Object.keys(u),T=this.uP(u,s),v=0;v<d.length;v++){if(g=d[v],!f)return null;if("1"===(m=t.toString()[0])){if(!T)return null;this.NI(g,u[g],f)}else"2"===m?(this.Sk(g,u[g],f),!T&&f&&f[1]&&(f[1]=null)):"4"===m?this.LI(g,u[g],f):this.Ck(g,u[g],f)}}return f},uAa.prototype.mn=function(t,e){if(void 0===this.styles[t])return null;var r=this.styles[t][e];if(!r)return[];var i=r.levelStyleMapping||{},n=Object.keys(i);return[parseInt(n[0],10),parseInt(n[n.length-1],10)]},uAa.prototype.Lw=function(t,e){if(void 0===this.styles[t])return null;var r=this.styles[t][e];return r?r.z:null},uAa.prototype.mW=function(t,e){var r="butt";if(void 0===this.styles[t])return r;var i=this.styles[t][e];if(!i)return r;var n=i.browserStyle;return n&&n[0]&&n[0][0]&&(-1<n[0][0].hn.indexOf("roundcap")?r="round":-1<n[0][0].hn.indexOf("squarecap")&&(r="square")),r},uAa.prototype.uP=function(t,e){var r=!0;if(t.styles&&t.styles.showLabel){var i=this._k(t.styles.showLabel.nodes,e),n=t.styles.showLabel.nodes[i];void 0!==n&&!1===n&&(r=!1)}else void 0!==t.showLabel&&!1===t.showLabel&&(r=!1);return r},uAa.prototype.SI=function(t,e,r){var i=Math.floor(10*r);return this.EI!==i&&(this.EI=i,this.CI={}),void 0!==this.CI[t+":"+e]},uAa.prototype.jk=function(t,e,r){return!!(this.Ve&&this.Ve[t]&&this.Ve[t][e]&&this.styles&&this.styles[t]&&this.styles[t][e])},uAa.prototype.Fk=function(t,e,r){var i=Util.Hex2Rgba(e[t[0]]),n=Util.Hex2Rgba(e[t[1]]),a=(r-t[0])/(t[1]-t[0]);return[Math.floor(i[0]+a*(n[0]-i[0])),Math.floor(i[1]+a*(n[1]-i[1])),Math.floor(i[2]+a*(n[2]-i[2])),Math.floor(i[3]+a*(n[3]-i[3]))]},uAa.prototype.Tk=function(t,e){var r=[];if(t[e])return r.push(e),r;for(var i=!0,n=Math.floor(e);i&&0<n;){if(t[n]){r.push(n),i=!1;break}n--}for(n=Math.ceil(e),i=!0;i&&n<25;){if(t[n]){r.push(n),i=!1;break}n++}return r},uAa.prototype._k=function(t,e){if(!t)return null;if(t[e])return e;for(var r=!0,i=e;r&&0<i;)if(t[--i]||!1===t[i]||""===t[i]){r=!1;break}if(!r)return i;for(i=e;r&&i<25;)if(t[++i]||!1===t[i]||""===t[i]){r=!1;break}return r?null:i},uAa.prototype.Ck=function(t,e,r){var i=null;switch(t){case"color":case"fillColor":i=e,Array.isArray(e)||(i=Util.Hex2Rgba(e)),r.faceColor||(r.faceColor={}),r.faceColor.rgba=i;break;case"fontSize":r.fontSize=e;break;case"backgroundColor":i=Util.Hex2Rgba(e),r.Ke||(r.Ke={}),r.Ke.rgba=i;break;case"strokeColor":i=Util.Hex2Rgba(e),r.borderColor||(r.borderColor={}),r.borderColor.rgba=i;break;case"showIcon":!1===e&&r.He&&(r.He="0")}},uAa.prototype.LI=function(t,e,r){var i=null;switch(t){case"textFillColor":i=e,Array.isArray(e)||(i=Util.Hex2Rgba(e)),r.faceColor||(r.faceColor={}),r.faceColor.rgba=i;break;case"fontSize":r.fontSize=e;break;case"backgroundColor":i=Util.Hex2Rgba(e),r.Ke||(r.Ke={}),r.Ke.rgba=i;break;case"textStrokeColor":i=Util.Hex2Rgba(e),r.borderColor||(r.borderColor={}),r.borderColor.rgba=i;break;case"showIcon":!1===e&&r.He&&(r.He="0")}},uAa.prototype.NI=function(t,e,r){var i=null;switch(t){case"showIcon":!1===e&&r.He&&(r.He="0");break;case"textFillColor":i=e,Array.isArray(e)||(i=Util.Hex2Rgba(e)),r.faceColor||(r.faceColor={}),r.faceColor.rgba=i;break;case"fontSize":r.fontSize=e;break;case"backgroundColor":i=Util.Hex2Rgba(e),r.Ke||(r.Ke={}),r.Ke.rgba=i;break;case"textStrokeColor":i=Util.Hex2Rgba(e),r.borderColor||(r.borderColor={}),r.borderColor.rgba=i}},uAa.prototype.Sk=function(t,e,r){var i=null;switch(t){case"color":case"fillColor":i=Util.Hex2Rgba(e),r[0]&&(r[0].roadColor||(r[0].roadColor={}),r[0].roadColor.rgba=i);break;case"fillOpacity":if(r[0]&&r[0].roadColor&&r[0].roadColor.rgba){var n=r[0].roadColor.rgba;i=Util.Opacity2Rgba(e,n),r[0].roadColor.rgba=i}break;case"fillWidth":r[0]&&(r[0].roadWidth=e);break;case"strokeColor":i=Util.Hex2Rgba(e),r[0]&&(r[0].borderColor||(r[0].borderColor={}),r[0].borderColor.rgba=i);break;case"strokeWidth":r[0]&&(r[0].borderWidth=e);break;case"textFillColor":r[1]&&(i=Util.Hex2Rgba(e),r[1].faceColor||(r[1].faceColor={}),r[1].faceColor.rgba=i);break;case"textStrokeColor":r[1]&&(i=Util.Hex2Rgba(e),r[1].borderColor||(r[1].borderColor={}),r[1].borderColor.rgba=i)}},uAa),LoadFlag,dDa,eDa;function uAa(t){this.CI={},this.Ve=null,this.bN=null,this.styles=t}function b64toBlob(t,e,r){void 0===e&&(e=""),void 0===r&&(r=512);for(var i=atob(t),n=[],a=0;a<i.length;a+=r){for(var o=i.slice(a,a+r),s=new Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);var f=new Uint8Array(s);n.push(f)}return new Blob(n,{type:e})}register("StyleParser",StyleParser),dDa=LoadFlag=LoadFlag||{},dDa.TEXTUREFINISH="TEXTUREFINISH",dDa.UNLOAD="unload",dDa.LOADING="loading",dDa.LOADED="loaded",dDa.FAIL="fail",eDa=exports.qu||(exports.qu={}),eDa.AllLoaded="AllLoaded",eDa.AllUnLoaded="AllUnLoaded",eDa.SomeLoading="SomeLoading",eDa.AllLoading="AllLoading";var SDFManagerWorker=(qDa=Event,__extends(rDa,qDa),rDa.prototype.commonWordImageLoaded=function(){this.kc=LoadFlag.TEXTUREFINISH},rDa.prototype.vW=function(t,e){var r=e.tiles,i=void 0===r?[]:r,n=e.cb,a=e.optimalZoom,o=e.tags,s=void 0===o?[]:o,u=e.stamp;this.cN=a,this.fN[u]||(this.fN[u]=s);for(var f=0;f<i.length;f++){var c=i[f],h=this.Zu(t);e.result=h,this.oa(t,{Bw:c,result:h,cb:n,optimalZoom:a,stamp:u,i:f})}},rDa.prototype.oa=function(t,e){var r=this,i=e.cb,n=e.Bw,a=e.result,o=e.optimalZoom,s=e.stamp,u=e.i,f=a||this.Zu(t);switch(f.status){case exports.qu.AllLoaded:var c=this.wI();n&&(c.zo=n.zo),c.optimalZoom=o;var h=this.fN[s]&&this.fN[s][u];c.tag=h,this.emit("dynamicTextTextureInfoLoaded",c),i([]);break;case exports.qu.AllUnLoaded:var l=this.Yu(i,{Bw:n,stamp:s,index:u});this.MI(f.Vu,function(t){void 0===t&&(t={}),r.Xu[l]=t,r.Hu()});break;case exports.qu.SomeLoading:var d=this.Yu(i,{Bw:n,stamp:s,index:u});this.MI(f.Vu,function(t){void 0===t&&(t={}),r.Xu[d]=t,r.Hu()});break;case exports.qu.AllLoading:var v=this.Yu(i,{Bw:n,stamp:s,index:u});this.Xu[v]=[],this.Hu()}},rDa.prototype.mz=function(t){var e=this.Ku,r=this.info||{},i=this.SF;if(this.kc===LoadFlag.TEXTUREFINISH||this.kc===LoadFlag.LOADED)for(var n=0,a=this.Ku;n<a.length;n++){var o=a[n];if(i.hasOwnProperty(o)&&(s=i[o]).info[t])return{key:o,index:e.indexOf(o),char:s.info[t],pos:s.pos}}for(var o in r){var s;if(r.hasOwnProperty(o)&&e.indexOf(o)<0&&(s=r[o]).pos&&s.info[t])return{key:o,index:CONSTS.Qu,char:s.info[t],pos:s.pos}}return null},rDa.prototype.measureText=function(t,e){for(var r=CONSTS.ic,i=CONSTS.ec,n=0,a=this.info,o=this.SF,s=e/this._size,u=this.nc,f=0,c=t;f<c.length;f++){var h=c[f],l=void 0,d=h;if(!(l=13312<=d&&d<=40959?i:u[d]))for(var v in o)if(o.hasOwnProperty(v)&&(g=o[v].info[d])){this.nc[h]=l=g[4];break}if(!l)for(var v in a){var g;if(a.hasOwnProperty(v)&&(g=a[v].info[d])){this.nc[h]=l=g[4];break}}n+=(l+r)*s}return n},rDa.prototype.Ju=function(t){for(var e={},r=0,i=t;r<i.length;r++){var n=i[r],a=n.range,o=n.info,s=this.info;s[a],s[a]={info:o.info,pos:{startX:0,startY:0}},this.range.push(a),e[a]=1}return e},rDa.prototype.loadCommonWords=function(e){var r=this;if(this.kc!==LoadFlag.LOADING&&this.kc!==LoadFlag.LOADED&&this.kc!==LoadFlag.TEXTUREFINISH){this.kc=LoadFlag.LOADING;var t=CONSTS.yN;this.jI(t,function(t){t?(r.kc=LoadFlag.LOADED,e(t)):(r.kc=LoadFlag.FAIL,console.error("commonword load errro"),e(null))})}else e()},rDa.prototype.AI=function(t,e){this.info[t]&&(this.info[t].pos=e)},rDa.prototype.wI=function(t){var e;if(t){for(var r=0,i=t;r<i.length;r++){var n=i[r],a=this.kI.Qk(n.info.info);if(a){var o=a.tO.Dk(n.info.info,n.info.url);n.pos=o,this.AI(n.range,o)}}var s=this.kI.Xk();0<s.Uk&&(e={Dm:s.zk,data:s.Gk(),OI:this.kI.currentIndex}),s.clear()}else e={Dm:[],data:null,OI:0};return e},rDa.prototype.MI=function(e,r){var i=this;void 0===e&&(e=[]);for(var t=e.length,n=CONSTS.Mj,a=0,o=e;a<o.length;a++){var s=o[a];this._c[s]=!0}for(var u=Math.ceil(t/CONSTS.Mj),f=[],c=0;c<u;){var h=n*c,l=t<h+n?t:h+n,d=e.slice(h,l),v=this.xI(d);f.push(v),c++}Promise.all(f).then(function(t){i.II(e),i.Ju(t),r(t)})},rDa.prototype.xI=function(t){var o=this,e=this.fc()+("/getsdfdata?chars="+t.join(",").split(",").join("|"));return new Promise(function(n,a){XHR.send(e,{Me:"json",method:"get",qw:function(t){if(t&&t.info){var e=o.vc(t.info),r=b64toBlob(t.url.substring(22),"image/png"),i=URLObject.createObjectURL(r);t.url=i,n({range:e,info:t})}else a(null)},error:function(){a(null)}})})},rDa.prototype.fc=function(){var t=CONSTS.pc,e=this.protocol+t[this.dc];return this.dc=(this.dc+1)%t.length,e},rDa.prototype.vc=function(t){void 0===t&&(t={});var e=map(Object.keys(t),function(t){return parseInt(t,10)});e.sort(function(t,e){return t-e});var r=e.length;return 2<=r?e[0]+"-"+e[r-1]:1===r?""+e[0]:""},rDa.prototype.mc=function(){},rDa.prototype.gc=function(t){var e=this.range||[],r=this.info||{},i=this.SF;if(this.kc===LoadFlag.TEXTUREFINISH||this.kc===LoadFlag.LOADED)for(var n=0,a=this.Ku;n<a.length;n++){var o=a[n];if(i.hasOwnProperty(o)){var s=o.split("-"),u=parseInt(s[0]||"",10),f=parseInt(s[1]||"",10);if(u<=t&&t<=f&&(i[o]&&i[o].info||{})[t])return!0}}for(var c=0,h=e;c<h.length;c++)if((o=h[c]).indexOf("-")<0){if(t===+o&&(r[o]&&r[o].info||{})[t])return!0}else if(s=o.split("-"),u=parseInt(s[0]||"",10),f=parseInt(s[1]||"",10),u<=t&&t<=f&&(r[o]&&r[o].info||{})[t])return!0;return!1},rDa.prototype.wc=function(t){return this._c[t]},rDa.prototype.Zu=function(t){for(var e=[],r=(this.range,0),i=0,n=0,a=t;n<a.length;n++){var o=a[n];this.gc(o)||(this.wc(o)?i+=1:(r+=1,e.push(o)))}return 0===i&&0===r?{status:exports.qu.AllLoaded,Vu:e}:0<r&&0===i?{status:exports.qu.AllUnLoaded,Vu:e}:0===r&&0<i?{status:exports.qu.AllLoading,Vu:e}:{status:exports.qu.SomeLoading,Vu:e}},rDa.prototype.TI=function(t,e,r){try{var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onerror=function(){r({code:0})},i.onload=function(){if(200===i.status){var t=new FileReader;t.onload=function(){r(t.result,e)},t.readAsDataURL(i.response)}else r({code:0})},i.send()}catch(t){r({code:0})}},rDa.prototype.FI=function(n){var o=this;void 0===n&&(n=[]);var s=n.length,u=0,f=0,c=[];return new Promise(function(a,t){for(var e=function(t){var e=f;f+=1;var r=t.url,i=t.range;o.Ku.push(i);var n=o.fc()+r;o.ac.loadImage(n,{name:i,type:"common",cb:function(t){u++,c[e]=t,u===s&&a(c)}})},r=0,i=n;r<i.length;r++)e(i[r])})},rDa.prototype._I=function(a){var o=this,s=a.length,u=0,f=0,c=[];return new Promise(function(i,n){for(var t=function(t){var e=f;f+=1;var r=t.url;t.range,XHR.send(o.fc()+r,{Me:"json",qw:function(t){u++,c[e]=t,u===s&&i(c)},error:function(){n()}})},e=0,r=a;e<r.length;e++)t(r[e])})},rDa.prototype.jI=function(t,v){for(var g=this,p=t.range||[],e=t.urlPrefix||"",r=t.version?t.version:"1",i=[],n=[],a=0,o=p;a<o.length;a++){var s=o[a],u=e+s,f=u+".v"+r+".png",c=u+".v"+r+".json";i.push({range:s,url:f}),n.push({range:s,url:c})}var h=this._I(n),l=this.FI(i);Promise.all([h,l]).then(function(t){for(var e=g.Ku,r=[],i=[],n=t[0],a=t[1],o=0,s=n.length;o<s;o++){var u=n[o],f=a[o];u&&f.status===exports.uc.LOADED||v(null)}for(o=0,s=n.length;o<s;o++){u=n[o],f=a[o];var c=p[o];u&&f.status===exports.uc.LOADED&&(g.SF[c]||(g.SF[c]={info:u,pos:{startX:0,startY:0}}))}for(var h=0,l=e;h<l.length;h++){var d=l[h];r.push(g.ac.getImage(d)),i.push({range:d,info:{info:g.SF[d].info},pos:g.SF[d].pos})}v({Ku:e,hc:r,jm:i})}).catch(function(t){v(null)})},rDa.prototype.Yu=function(t,e){void 0===e&&(e={});var r=this.yc+=1;return this.xc.push(r),this.bc[r]=t,this.bc[r]={cb:t,params:e},r},rDa.prototype.Hu=function(){var t=this.xc[0];if(t){var e=this.Xu[t];if(e){this.xc.shift();var r=this.bc[t];if(r){var i=this.wI(e),n=void 0,a=r.params||{};if(a.Bw&&(i.zo=n=r.params.Bw.zo),i.optimalZoom=this.cN,n){var o=this.fN[a.stamp]&&this.fN[a.stamp][a.index];i.tag=o}this.emit("dynamicTextTextureInfoLoaded",i),this.emit("dynamicTextSDFInfoLoaded",{data:e}),r.cb(e)}else console.error("sdf task error");delete this.Xu[t],delete this.bc[t],this.Hu()}}},rDa.prototype.II=function(t){for(var e=0,r=t;e<r.length;e++){var i=r[e];delete this._c[i]}},rDa),qDa;function rDa(t){var e=qDa.call(this)||this;return e.protocol="https",e.range=[],e.Ku=[],e.info={},e.SF={},e.dc=0,e.kc=LoadFlag.UNLOAD,e._c={},e._size=24,e.nc={},e.xc=[],e.bc={},e.Xu={},e.yc=1,e.fN={},e.kI=new MockTextureManager,e.ac=t.z_,e}exports.Ge=AMapStyleSource,exports.Bh=Actor,exports.bb=BezierUtil,exports.BuildingLayer=BuildingLayer,exports.tc=CONSTS,exports._n=Color,exports.hL=Coordinate,exports.DistrictLayer=DistrictLayer$1,exports.La=DynamicVertice,exports.Event=Event,exports.iz=FillExtrusionBucket,exports.GeometryUtil=GeometryUtil,exports.rW=GeometryUtilCls,exports.$s=LabelMain,exports.Jw=LabelTileWorker,exports.lw=Layer,exports.LngLat=LngLat$2,exports.za=LocalTileZoom,exports.Ra=LocalZoom,exports.vo=MockTextureManager,exports.Module=Module,exports._w=NebulaSegements,exports.pa=NebulaTile,exports.TD=NebulaTileCache,exports.wa=NebulaTileCoord,exports.pw=Pbf,exports.Pixel=Pixel,exports.kS=PlaneGeometryUtilInstance,exports.K_=PolygonBucket,exports.J_=PolylineBucket,exports.at=ProjectionManager,exports.tS=Queue,exports.Vs=RasterTile,exports.jb=SDFManagerWorker,exports.Size=Size,exports.yp=SmartArrayBuffer,exports.Cn=StyleParser,exports._=Support,exports.zb=SymbolArray,exports.Am=TextCombineTexture,exports.Gh=Tile,exports.OD=TileCache,exports.ca=TileCoord,exports.TileLayer=TileLayer,exports.V=transform,exports.cc=URLObject,exports.Util=Util,exports.Sw=VectorTile$1,exports.tW=VectorTile,exports.LW=VectorTileSegements,exports.Yw=XHR,exports.Ei=__extends,exports.Pt=__spreadArrays,exports.assign=assign,exports.jw=calcTileMectorBounds,exports.clone=clone$1,exports.Ex=clone,exports.yn=cloneDeep,exports.eg=copy,exports.create=create$3,exports.Il=create,exports.Dl=create$1,exports.Zl=create$2,exports.Ss=defaultsDeep,exports.Db=distanceBetweenPos,exports.oL=distanceOfMultiPolyline,exports.nL=distanceOfPolyline,exports.equals=equals$1,exports.Ru=equals,exports.every=every,exports.filter=filter,exports.find=find,exports.findIndex=findIndex,exports.forEach=forEach$3,exports.vx=forIn,exports.Bu=fromValues$3,exports.xd=fromValues$2,exports.sL=generateGeodesicPath,exports.N$=getMultiPolygonArea,exports.E$=getPolygonArea,exports.Ol=getTranslation,exports.Ul=invert,exports.xs=isBounds,exports.sB=isCircleMarker,exports.isEmpty=isEmpty,exports.isEqual=isEqual,exports.isFunction=isFunction,exports.px=isLayer,exports.Bs=isLngLat,exports.iL=isLnglatLikeArray,exports.eL=isLnglatLikeArrayArray,exports.yL=isLnglatLikeArrayArrayArray,exports.zm=isNebulaLabelsLayer,exports.ys=isNumberArrayArray,exports.Ox=isNumberArrayArrayArray,exports.tL=isNumberArrayArrayArrayArray,exports.er=isOverlay,exports.RF=isOverlayGroup,exports.oy=isPixel,exports.ay=isSize,exports.jz=isUndefined,exports.FF=isVectorLayer,exports.jsonLngLatData=jsonLngLatData,exports.bf=labelsUtil,exports.lcs=lcs,exports.Tl=lookAt,exports.map=map,exports.V$=moveMultiPolygonWithPixel,exports.J$=moveMultiPolygonWithPos,exports.H$=movePolygonWithPixel,exports.Y$=movePolygonWithPos,exports.G$=moveRingWithPixel,exports.Z$=moveRingWithPos,exports.K$=multiPolygonJson,exports.aL=multiPolylineJson,exports.multiply=multiply,exports.ou=ortho,exports.parseLngLatData=parseLngLatData,exports.perspective=perspective,exports.W$=pointInMultiPolygon,exports.U$=pointInPolygon,exports.pointInRing=pointInRing,exports.scale=scale,exports.set=set$1,exports.Pl=set,exports.some=some,exports.subtract=subtract,exports.Gu=transformMat4,exports.Sp=vector}),define(["./shared"],function(SDFManagerWorker){var Ring={read:function(r,e){return r.nw(Ring.iw,{path:[]},e)},iw:function(r,e,n){0===r&&n.tw(e.path,!0)},write:function(r,e){if(r.path)for(var n=0;n<r.path.length;n++)e.rw(0,r.path[n])}},Building={read:function(r,e){return r.nw(Building.iw,{minzoom:0,maxzoom:0,path:[],height:0,ew:""},e)},iw:function(r,e,n){0===r?e.minzoom=n.ow():1===r?e.maxzoom=n.ow():2===r?e.path.push(Ring.read(n,n.ow()+n.pos)):3===r?e.height=n.ow():4===r&&(e.ew=n.aw())},write:function(r,e){if(r.minzoom&&e.rw(0,r.minzoom),r.maxzoom&&e.rw(1,r.maxzoom),r.path)for(var n=0;n<r.path.length;n++)e.fw(2,Ring.write,r.path[n]);r.height&&e.rw(3,r.height),r.ew&&e.uw(4,r.ew)}},BuildingSameStyle={read:function(r,e){return r.nw(BuildingSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},e)},iw:function(r,e,n){0===r?e.mainkey=n.ow():1===r?e.subkey=n.ow():2===r?e.items.push(Building.read(n,n.ow()+n.pos)):3===r&&(e.resolution=n.ow())},write:function(r,e){if(r.mainkey&&e.rw(0,r.mainkey),r.subkey&&e.rw(1,r.subkey),r.items)for(var n=0;n<r.items.length;n++)e.fw(2,Building.write,r.items[n]);r.resolution&&e.rw(3,r.resolution)}},buildingLayer={read:function(r,e){return r.nw(buildingLayer.iw,{building:[]},e)},iw:function(r,e,n){0===r&&e.building.push(BuildingSameStyle.read(n,n.ow()+n.pos))},write:function(r,e){if(r.building)for(var n=0;n<r.building.length;n++)e.fw(0,BuildingSameStyle.write,r.building[n])}},Poi={read:function(r,e){return r.nw(Poi.iw,{minzoom:0,maxzoom:0,pos:[],cw:"",ew:"",name:"",rank:0},e)},iw:function(r,e,n){0===r?e.minzoom=n.ow():1===r?e.maxzoom=n.ow():2===r?n.tw(e.pos,!0):3===r?e.cw=n.aw():4===r?e.ew=n.aw():5===r?e.name=n.aw():6===r&&(e.rank=n.ow())},write:function(r,e){if(r.minzoom&&e.rw(0,r.minzoom),r.maxzoom&&e.rw(1,r.maxzoom),r.pos)for(var n=0;n<r.pos.length;n++)e.rw(2,r.pos[n]);r.cw&&e.uw(3,r.cw),r.ew&&e.uw(4,r.ew),r.name&&e.uw(5,r.name),r.rank&&e.rw(6,r.rank)}},PoiSameStyle={read:function(r,e){return r.nw(PoiSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},e)},iw:function(r,e,n){0===r?e.mainkey=n.ow():1===r?e.subkey=n.ow():2===r?e.items.push(Poi.read(n,n.ow()+n.pos)):3===r&&(e.resolution=n.ow())},write:function(r,e){if(r.mainkey&&e.rw(0,r.mainkey),r.subkey&&e.rw(1,r.subkey),r.items)for(var n=0;n<r.items.length;n++)e.fw(2,Poi.write,r.items[n]);r.resolution&&e.rw(3,r.resolution)}},poiLayer={read:function(r,e){return r.nw(poiLayer.iw,{poilabel:[]},e)},iw:function(r,e,n){0===r&&e.poilabel.push(PoiSameStyle.read(n,n.ow()+n.pos))},write:function(r,e){if(r.poilabel)for(var n=0;n<r.poilabel.length;n++)e.fw(0,PoiSameStyle.write,r.poilabel[n])}},Ring$1={read:function(r,e){return r.nw(Ring$1.iw,{path:[]},e)},iw:function(r,e,n){0===r&&n.tw(e.path,!0)},write:function(r,e){if(r.path)for(var n=0;n<r.path.length;n++)e.rw(0,r.path[n])}},Region={read:function(r,e){return r.nw(Region.iw,{minzoom:0,maxzoom:0,path:[],sw:""},e)},iw:function(r,e,n){0===r?e.minzoom=n.ow():1===r?e.maxzoom=n.ow():2===r?e.path.push(Ring$1.read(n,n.ow()+n.pos)):3===r&&(e.sw=n.aw())},write:function(r,e){if(r.minzoom&&e.rw(0,r.minzoom),r.maxzoom&&e.rw(1,r.maxzoom),r.path)for(var n=0;n<r.path.length;n++)e.fw(2,Ring$1.write,r.path[n]);r.sw&&e.uw(3,r.sw)}},RegionSameStyle={read:function(r,e){return r.nw(RegionSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},e)},iw:function(r,e,n){0===r?e.mainkey=n.ow():1===r?e.subkey=n.ow():2===r?e.items.push(Region.read(n,n.ow()+n.pos)):3===r&&(e.resolution=n.ow())},write:function(r,e){if(r.mainkey&&e.rw(0,r.mainkey),r.subkey&&e.rw(1,r.subkey),r.items)for(var n=0;n<r.items.length;n++)e.fw(2,Region.write,r.items[n]);r.resolution&&e.rw(3,r.resolution)}},regionLayer={read:function(r,e){return r.nw(regionLayer.iw,{region:[]},e)},iw:function(r,e,n){0===r&&e.region.push(RegionSameStyle.read(n,n.ow()+n.pos))},write:function(r,e){if(r.region)for(var n=0;n<r.region.length;n++)e.fw(0,RegionSameStyle.write,r.region[n])}},Road={read:function(r,e){return r.nw(Road.iw,{minzoom:0,maxzoom:0,path:[],shield:"",dw:0,name:"",rank:0},e)},iw:function(r,e,n){0===r?e.minzoom=n.ow():1===r?e.maxzoom=n.ow():2===r?n.tw(e.path,!0):3===r?e.shield=n.aw():4===r?e.dw=n.ow():5===r?e.name=n.aw():6===r&&(e.rank=n.ow())},write:function(r,e){if(r.minzoom&&e.rw(0,r.minzoom),r.maxzoom&&e.rw(1,r.maxzoom),r.path)for(var n=0;n<r.path.length;n++)e.rw(2,r.path[n]);r.shield&&e.uw(3,r.shield),r.dw&&e.rw(4,r.dw),r.name&&e.uw(5,r.name),r.rank&&e.rw(6,r.rank)}},RoadSameStyle={read:function(r,e){return r.nw(RoadSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},e)},iw:function(r,e,n,a){0===r?e.mainkey=n.ow():1===r?e.subkey=n.ow():2===r?e.items.push(Road.read(n,n.ow()+n.pos)):3===r&&(e.resolution=n.ow())},write:function(r,e){if(r.mainkey&&e.rw(0,r.mainkey),r.subkey&&e.rw(1,r.subkey),r.items)for(var n=0;n<r.items.length;n++)e.fw(2,Road.write,r.items[n]);r.resolution&&e.rw(3,r.resolution)}},roadLayer={read:function(r,e){return r.nw(roadLayer.iw,{road:[]},e)},iw:function(r,e,n,a){0===r&&e.road.push(RoadSameStyle.read(n,n.ow()+n.pos))},write:function(r,e){if(r.road)for(var n=0;n<r.road.length;n++)e.fw(0,RoadSameStyle.write,r.road[n])}},roadNameLayer={read:function(r,e){return r.nw(roadNameLayer.iw,{roadName:[]},e)},iw:function(r,e,n,a){0===r&&e.roadName.push(RoadSameStyle.read(n,n.ow()+n.pos))},write:function(r,e){if(r.roadName)for(var n=0;n<r.road.length;n++)e.fw(0,RoadSameStyle.write,r.roadName[n])}},result={read:function(r,e){return r.nw(result.iw,{tiles:[],version:"",status:!1},e)},iw:function(r,e,n){0===r?e.tiles.push(result.Gh.read(n,n.ow()+n.pos)):1===r?e.version=n.aw():2===r&&(e.status=n.vw())},write:function(r,e){if(r.tiles)for(var n=0;n<r.tiles.length;n++)e.fw(0,result.Gh.write,r.tiles[n]);r.version&&e.uw(1,r.version),r.status&&e.hw(2,r.status)},Gh:{read:function(r,e){return r.nw(result.Gh.iw,{z:0,x:0,y:0,layers:[]},e)},iw:function(r,e,n){0===r?e.z=n.ow():1===r?e.x=n.ow():2===r?e.y=n.ow():3===r?e.layers.push(result.Gh.lw.read(n,n.ow()+n.pos)):4===r&&(e.t=n.ow())},write:function(r,e){if(r.z&&e.rw(0,r.z),r.x&&e.rw(1,r.x),r.y&&e.rw(2,r.y),r.layers)for(var n=0;n<r.layers.length;n++)e.fw(3,result.Gh.lw.write,r.layers[n]);void 0!==r.t&&e.rw(4,r.t)},lw:{read:function(r,e){return r.nw(result.Gh.lw.iw,{z:0,x:0,y:0,type:0,d:null,t:0},e)},iw:function(r,e,n){0===r?e.z=n.ow():1===r?e.x=n.ow():2===r?e.y=n.ow():3===r?e.type=n.ow():4===r?e.d=n.mw():5===r&&(e.tag=n.ow())},write:function(r,e){r.z&&e.rw(0,r.z),r.x&&e.rw(1,r.x),r.y&&e.rw(2,r.y),r.type&&e.rw(3,r.type),r.d&&e.ww(4,r.d),r.t&&e.rw(5,r.t)}}}},decodePois=function(r){var e=new SDFManagerWorker.pw(r);return poiLayer.read(e)},decodeRoads=function(r){var e=new SDFManagerWorker.pw(r);return roadLayer.read(e)},decodeRoadNames=function(r){var e=new SDFManagerWorker.pw(r);return roadNameLayer.read(e)},decodeRegions=function(r){var e=new SDFManagerWorker.pw(r);return regionLayer.read(e)},decodeBuildings=function(r){var e=new SDFManagerWorker.pw(r);return buildingLayer.read(e)},decodeTiles=function(r){for(var e=new SDFManagerWorker.pw(r),n=result.read(e),a=n.tiles,o=0,i=a.length;o<i;o+=1)for(var t=a[o].layers,u=0,f=t.length;u<f;u+=1)switch(t[u].type){case 0:t[u].d=decodePois(t[u].d);break;case 1:t[u].d=decodeRoads(t[u].d);break;case 2:t[u].d=decodeRegions(t[u].d);break;case 3:t[u].d=decodeBuildings(t[u].d);break;case 4:t[u].d=decodeRoadNames(t[u].d)}return n},DEF_NDS_MAX_COORD=2147483648,DEF_DEGREE_MAX_COORD=180,MIN_LAT_WGS=-90,MAX_LAT_WGS=90,MIN_LON_WGS=-180,MAX_LON_WGS=180,MKT=20037508.342789244;function tileInnerCoord2LngLat(r,e,n,a){var o=getTileSWCoord(r,e),i=n+o[0],t=a+o[1],u=getCoordShift(r.z,e);return n=i<<u,a=t<<u,0<i&&n<0&&(n=DEF_NDS_MAX_COORD-1),[coord2Degree(n),coord2Degree(a)]}function lnglat2WGSCoord(r,e,n,a){var o=getCoordShift(r,e);a<MIN_LAT_WGS&&(a=MIN_LAT_WGS),MAX_LAT_WGS<a&&(a=MAX_LAT_WGS),n<MIN_LON_WGS&&(n=MIN_LON_WGS),MAX_LON_WGS<n&&(n=MAX_LON_WGS);var i=degree2Coord(n),t=degree2Coord(a),u=i/(1<<o),f=t/(1<<o);return[i=0<u?Math.floor(.5+u):Math.floor(u-.5),t=0<f?Math.floor(.5+f):Math.floor(f-.5)]}function getWorldSize(r,e){var n=lnglat2WGSCoord(r,e,180,90);return[2*n[0],2*n[1]]}function getTileSWCoord(r,e){var n=getWorldSize(r.z,e),a=n[0],o=n[1],i=1<<r.z;return[-a/2+r.x*a/i,o/2-(r.y+1)*o/i]}function degree2Coord(r){return Math.floor(r*DEF_NDS_MAX_COORD/DEF_DEGREE_MAX_COORD+.5)}function coord2Degree(r){return r*DEF_DEGREE_MAX_COORD/DEF_NDS_MAX_COORD}function getCoordShift(r,e){return 33-e-r}function getMVTTileBbox(r,e,n,a,o){return void 0===o&&(o=256),[r*o*a-MKT,-((e+1)*o*a-MKT),(r+1)*o*a-MKT,-(e*o*a-MKT)]}var geoUtil=new SDFManagerWorker.rW({}),NebulaSourceWorker=($c=SDFManagerWorker.Event,SDFManagerWorker.Ei(_c,$c),_c.prototype.loadCommonWords=function(){this.parent.yw.loadCommonWords()},_c.prototype.bw=function(r,e,d,s,l,n,v,g,h,a,S){var D=this;r=r+("?key="+this.parent.key)+"&flds=road,building,region&t="+e.join(";");var k=new XMLHttpRequest;return this.WW=a,k.onreadystatechange=function(){4===k.readyState&&200===k.status&&setTimeout(function(){var r=decodeTiles(new Uint8Array(k.response)),a=[];SDFManagerWorker.forEach(r.tiles,function(r){var e=new SDFManagerWorker.Gh(new SDFManagerWorker.ca(r.z,r.x,r.y));e.data=D.kw(r,l,e),D.xw(e,d),D.zw(e,d,g,h),D.nz(e,v,s);var n=SDFManagerWorker.Util.pW(r.t);a.push({zo:e.zo,ba:e.data,tag:n})});for(var e=[],n=0,o=a;n<o.length;n++){var i=o[n];if(i&&i.ba){if(i.ba.road){for(var t=[],u=0,f=i.ba.road;u<f.length;u++){var c=f[u];c.name&&(delete c.gw,t.push(c))}i.ba.road=t}i.ba.road,i.ba.poilabel,delete i.ba.poilabel,delete i.ba.region,delete i.ba.building,delete i.ba.Mw}e.push(i)}S(null,e)},10)},k.responseType="arraybuffer",k.open("GET",r,!0),k.send(),{cancel:function(){k.abort()}}},_c.prototype.bW=function(r,e,n,a,W,o,i,t,u,f,c){var F=this;this.WW=f,r=r+("?key="+this.parent.key)+"&flds=poi,roadname&t="+e.join(";");var y=new XMLHttpRequest;return y.onreadystatechange=function(){4===y.readyState&&200===y.status&&setTimeout(function(){var r=decodeTiles(new Uint8Array(y.response)),a=[];SDFManagerWorker.forEach(r.tiles,function(r){var e=new SDFManagerWorker.Gh(new SDFManagerWorker.ca(r.z,r.x,r.y));e.data=F.kw(r,W,e);var n=SDFManagerWorker.Util.pW(r.t);a.push({zo:e.zo,ba:e.data,tag:n})});for(var e=[],n=0,o=a;n<o.length;n++){var i=o[n];if(i&&i.ba){var t=i.ba.roadName;if(t){for(var u=[],f=0,c=t;f<c.length;f++){var d=c[f];d.name&&(delete d.gw,u.push(d))}i.ba.roadName=u}t=i.ba.roadName;var s=i.ba.poilabel;delete i.ba.poilabel,delete i.ba.region,delete i.ba.building,delete i.ba.Mw,e.push({zo:i.zo,ba:{roadName:t,poilabel:s},tag:i.tag})}}if(e.length){for(var l=0,v=e;l<v.length;l++){var g=v[l],h=new SDFManagerWorker.Gh(g.zo),S=SDFManagerWorker.wa.ga(h.zo.x,h.zo.y,h.zo.z,"EPSG:3857"),D=SDFManagerWorker.lcs.getLocalByCoord([S[0],S[1]]);h.Ma=D,h.data=g.ba;var k=F.parent.params,M=(k.showLabel,k.scale),m=g.tag;F.eW[h.zo.key+","+m]={Bw:h,params:{scale:M,tag:m}}}F.nW()}},10)},y.responseType="arraybuffer",y.open("GET",r,!0),y.send(),{cancel:function(){y.abort()}}},_c.prototype.processLabels=function(r){var e=SDFManagerWorker.Util.getOptimalZoom(this.WW);SDFManagerWorker.isEmpty(this.eW)||(this.parent.yw.iW(this.eW,{ZL:this.WW,optimalZoom:e}),this.eW={})},_c.prototype.nW=function(){this.processLabels()},_c.prototype.kw=function(r,e,n){var v=this,a={},g=SDFManagerWorker.at.getProjection(e),o=SDFManagerWorker.wa.ga(r.x,r.y,r.z,"EPSG:3857"),h=SDFManagerWorker.lcs.getLocalByCoord([o[0],o[1]]).center;n.Mw=h,n.Ro=o;var S=n.zo.z;return SDFManagerWorker.forEach(r.layers,function(s){var l=[],r=_c.Wa[s.type];if(SDFManagerWorker.forEach(s.d[r],function(c){c.items.sort(function(r,e){return r.minzoom-e.minzoom||r.maxzoom-e.maxzoom});var d=2===Math.floor(c.mainkey/1e4)?v.parent.vn.mW(c.mainkey,c.subkey):"butt";SDFManagerWorker.forEach(c.items,function(r){if(r.path&&r.path.length)if(r.path[0].path){var e=r.path;r.oW=[];for(var n=0;n<e.length;n+=1){var a=e[n].path,o=[];for(i=0;i<a.length;i+=2)t=a[i],u=a[i+1],f=tileInnerCoord2LngLat(s,c.resolution,t,u),o[i]=f[0],o[i+1]=f[1],f=g.project(f[0],f[1]),S>=SDFManagerWorker.Ra&&(f[0]-=h[0],f[1]-=h[1]),a[i]=f[0],a[i+1]=f[1];e[n]=a,r.oW[n]=o}}else for(var i=0;i<r.path.length;i+=2){var t=r.path[i],u=r.path[i+1],f=tileInnerCoord2LngLat(s,c.resolution,t,u);f=g.project(f[0],f[1]),S>=SDFManagerWorker.Ra&&(f[0]-=h[0],f[1]-=h[1]),r.path[i]=f[0],r.path[i+1]=f[1]}else r.pos&&(o=tileInnerCoord2LngLat(s,c.resolution,r.pos[0],r.pos[1]),r.pos=g.project(o[0],o[1]));l.push(SDFManagerWorker.Ln(SDFManagerWorker.Ln({},r),{du:c.resolution,Fp:c.mainkey,Ep:c.subkey,zIndex:v.parent.vn.Lw(c.mainkey,c.subkey),lineCap:d,gw:{z:s.z,y:s.y,x:s.x}}))})}),/(poilabel)/.test(r)?v.Na(l):v.Tw(l),"poilabel"===r){var e=s.z+"-"+s.x+"-"+s.y;a[r]?a[r][e]?a[r][e].push.apply(a[r][e],l):a[r][e]=l:(a[r]={},a[r][e]=l)}else a[r]?a[r].push.apply(a[r],l):a[r]=l}),a.Mw=h,a},_c.prototype.Tw=function(r){return r.sort(function(r,e){return r.zIndex-e.zIndex}),r},_c.prototype.Na=function(r){return r.sort(function(r,e){return r.rank-e.rank}),r},_c.prototype.xw=function(r,e){var n=r.data,a=new SDFManagerWorker._w;if(n.Uc=a,!n.$c){n.$c=new SDFManagerWorker.J_,n.road=n.road||[];var o=r.Mw.slice(0);if(r.zo.z<=SDFManagerWorker.za&&(o[0]=0,o[1]=0),n.road.push({name:"",rank:1,maxzoom:22,minzoom:2,path:[r.Ro[0]-o[0],r.Ro[1]-o[1],r.Ro[2]-o[0],r.Ro[1]-o[1],r.Ro[2]-o[0],r.Ro[3]-o[1],r.Ro[0]-o[0],r.Ro[3]-o[1],r.Ro[0]-o[0],r.Ro[1]-o[1]],Fp:-2,Ep:-2,shield:"",dw:0,du:13,lineCap:"butt"}),n.road)for(var i=0,t=n.road;i<t.length;i++){for(var u=t[i],f=[],c=0,d=u.path.length;c<d;c+=2)f.push(SDFManagerWorker.Bu(u.path[c],u.path[c+1]));var s=n.$c.hb(f,{X_:"butt"===u.lineCap?0:.9,lineCap:u.lineCap,lineJoin:"auto"}),l=s.Iw,v=s.distance;0<l&&(a.add(u.Fp,u.Ep,l,u.minzoom,u.maxzoom),u.distance=v)}}},_c.prototype.zw=function(r,e,n,a){var o=r.data,i=new SDFManagerWorker._w;if(o.Oc=i,o.Fc=new SDFManagerWorker._w,!o.Dc){o.Dc=new SDFManagerWorker.K_,o.region=o.region||[];var t=r.Mw.slice(0);if(r.zo.z<=SDFManagerWorker.za&&(t[0]=0,t[1]=0),o.region.unshift({maxzoom:22,minzoom:2,path:[[r.Ro[0]-t[0],r.Ro[1]-t[1],r.Ro[2]-t[0],r.Ro[1]-t[1],r.Ro[2]-t[0],r.Ro[3]-t[1],r.Ro[0]-t[0],r.Ro[3]-t[1],r.Ro[0]-t[0],r.Ro[1]-t[1]]],Fp:30001,Ep:1}),o.region)for(var u=0,f=o.region;u<f.length;u++)for(var c=f[u],d=0,s=c.path;d<s.length;d++)(b=s[d]).push(b[0],b[1]),0<(N=o.Dc.Nx(b))&&i.add(c.Fp,c.Ep,N,c.minzoom,c.maxzoom);if(o.building){if(o.FD)return;o.FD=new SDFManagerWorker.K_,o.BD=new SDFManagerWorker._w;for(var l=o.BD,v=0,g=o.building;v<g.length;v++){var h=g[v],S=SDFManagerWorker.jw(h.gw.z,h.gw.x,h.gw.y),D=S[0],k=S[1],M=S[2],m=S[3];r.Mw&&(D-=r.Mw[0],M-=r.Mw[0],k-=r.Mw[1],m-=r.Mw[1]);var W=Math.floor(D),F=Math.floor(M),y=Math.floor(k),w=Math.floor(m);if("2D"===n){for(var _=0,p=h.path;_<p.length;_++){var b=p[_];0<(N=o.FD.Nx(b))&&l.add(h.Fp,h.Ep,N,h.minzoom,h.maxzoom,h.ew||"indoor_out_building")}for(var L=0,T=h.path;L<T.length;L++){var R=T[L];R.push(R[0],R[1]),b=[];for(var C=0,I=R.length;C<I-2;C+=2)b.push(SDFManagerWorker.Bu(R[C],R[C+1])),b.push(SDFManagerWorker.Bu(R[C+2],R[C+3]));var j=[];for(C=0,I=b.length;C<I;C+=2){var N,x=b[C][0],O=b[C][1],z=b[C+1][0],A=b[C+1][1],B=Math.floor(x),G=Math.floor(O);(x!==z||B!==W&&B!==F)&&(O!==A||G!==y&&G!==w)?j.push(b[C],b[C+1]):(0<(N=o.Dc.Ew(j))&&o.Fc.add(h.Fp,h.Ep,N,h.minzoom,h.maxzoom,h.ew||"indoor_out_building"),j=[])}0<j.length&&0<(N=o.Dc.Ew(j))&&o.Fc.add(h.Fp,h.Ep,N,h.minzoom,h.maxzoom,h.ew)}}}for(var E=[],X=0,P=o.building;X<P.length;X++)if((h=P[X]).ew)if(-1<h.ew.indexOf("|")){var V=h.ew.split("|");for(C=0;C<V.length;C++)E.push(V[C])}else E.push(h.ew);o.indoorInfo||(o.indoorInfo=[]),o.indoorInfo=E}}},_c.prototype.nz=function(r,e,n){void 0===e&&(e={});var a=r.data;if(a.C_=new SDFManagerWorker._w,!a.A_){a.A_=new SDFManagerWorker.iz;var o=e.hideWithoutStyle,i=e.areas;if(a.building)for(var t=0,u=a.building;t<u.length;t++)for(var f=u[t],c=0;c<f.path.length;c++){var d=f.path[c],s=f.oW[c];d.push(d[0],d[1]),s.push(s[0],s[1]);for(var l=[],v=0;v<s.length;v+=2)l.push([s[v],s[v+1]]);if(i){for(var g=!1,h=!1,S={},D=0;D<i.length;D++){var k=i[D],M=k.path;geoUtil.isRingInRing(l,M)&&(g=!0,!k.visible&&void 0!==k.visible||(h=!0,S={roofColor:SDFManagerWorker.Util.color2RgbaArray(k.color1),wallColor:SDFManagerWorker.Util.color2RgbaArray(k.color2)}))}if(!g&&o||g&&!h)continue;0<(m=a.A_.tz(d,f.height))&&a.C_.add(f.Fp,f.Ep,m,f.minzoom,f.maxzoom,f.ew,S.roofColor,S.wallColor)}else{var m;0<(m=a.A_.tz(d,f.height))&&a.C_.add(f.Fp,f.Ep,m,f.minzoom,f.maxzoom,f.ew)}}}},_c.Pw=[1,0,1,0],_c.Wa={0:"poilabel",1:"road",2:"region",3:"building",4:"roadName"},_c),$c;function _c(r){var e=$c.call(this)||this;return e.parent=r,e.eW={},e.aW=null,e.WW=20,e}var MVTSourceWorker=(wg.prototype.bw=function(r,n,a,o,i){var t=this,u=new XMLHttpRequest;return u.onreadystatechange=function(){if(4===u.readyState&&200===u.status){var r=new SDFManagerWorker.tW(new SDFManagerWorker.pw(new Uint8Array(u.response))),e=t.Ow(r,{x:n.x,y:n.y,z:n.z,projectionId:a,tileSize:o});i(null,{zo:n,Xw:e})}},u.responseType="arraybuffer",u.open("GET",r,!0),u.send(),{cancel:function(){u.abort()}}},wg.prototype.Ow=function(c,r){var a=r.x,o=r.y,i=r.z,t=r.tileSize,u=r.projectionId;c.z=i,c.x=a,c.y=o;var e=SDFManagerWorker.at.getProjection(u).getResolution(i);return c.Ro=getMVTTileBbox(a,o,i,e,t),c.zS=SDFManagerWorker.lcs.getLocalByCoord([c.Ro[0],c.Ro[1]]),SDFManagerWorker.vx(c.layers,function(f){var r=f.Cw,e=f.extent;f.Ah=[],f.scale=t/e;var n=SDFManagerWorker.V[u].Xs(t*a,t*o,i);f.ox=n[0],f.oy=n[1],SDFManagerWorker.forEach(r,function(r,e){if((r=f.Gw(e)).Dw(),f.Ah.push(r),r.lines&&r.lines.length&&(2===r.type||3===r.type)){r.Rw=[];for(var n=0,a=r.lines.length;n<a;n++){for(var o=[],i=0,t=r.lines[n].length;i<t;i++){var u=[f.ox+f.scale*r.lines[n][i][0]-c.zS.center[0],f.oy+f.scale*r.lines[n][i][1]-c.zS.center[1]];o.push(u)}r.Rw.push(o)}}})}),this.uW(c),this.xw(c),c},wg.prototype.uW=function(r){var e=[],n=[];for(var a in r.layers)if(r.layers.hasOwnProperty(a))for(var o=r.layers[a],i=0;i<o.Ah.length;i+=1){var t=o.Ah[i];if(3===t.type)for(var u=0;u<t.Rw.length;u++){for(var f=t.Rw[u],c={properties:t.properties,path:[]},d=c.path,s=0;s<f.length;s++){var l=f[s];d.push(l[0],l[1])}6<d.length&&e.push(c)}else if(2===t.type)for(u=0;u<t.Rw.length;u++){f=t.Rw[u];var v={properties:t.properties,path:[]};for(d=v.path,s=0;s<f.length;s++)l=f[s],d.push(l[0],l[1]);4<d.length&&n.push(v)}}r.polygons=e,r.Dh=n,delete r.layers},wg.prototype.xw=function(r){if(!r.data||!r.data.$c){var e=r.data={},n=new SDFManagerWorker._w;if(!e.$c&&(e.Uc=n,e.$c=new SDFManagerWorker.J_,r.Dh))for(var a=0,o=r.Dh;a<o.length;a++){for(var i=o[a],t=[],u=0,f=i.length;u<f;u+=2)t.push(SDFManagerWorker.Bu(i.path[u],i.path[u+1]));var c=e.$c.hb(t,{X_:0,lineJoin:"miter",lineCap:"butt"}),d=c.Iw,s=c.distance;0<d&&(n.add(i.Fp,i.Ep,d,i.minzoom,i.maxzoom),i.distance=s)}}},wg.prototype.zw=function(r){if(!r.data||!r.data.Dc){var e=r.data={},n=new SDFManagerWorker._w;e.Oc=n,e.Fc=new SDFManagerWorker._w,e.Dc=new SDFManagerWorker.K_;for(var a=0,o=r.polygons;a<o.length;a++)for(var i=o[a],t=0,u=i;t<u.length;t++){var f=u[t];f.push(f[0],f[1]);var c=e.Dc.Nx(f);0<c&&n.add(i.Fp,i.Ep,c,i.minzoom,i.maxzoom)}}},wg.Wa={0:"poilabel",1:"road",2:"region",3:"building"},wg);function wg(r){this.parent=r}var DistrictSourceWorker=function(){function DistrictSourceWorker(r){this.parent=r,this.fW={}}return DistrictSourceWorker.prototype.bw=function(r,n,a,o,i,t,u){var f=this;for(var e in i)if(i.hasOwnProperty(e)){var c=i[e];-1<c.toString().indexOf("function")&&(c=c.replace("function","return function"),i[e]=new Function(c))}var d=new XMLHttpRequest;return d.onreadystatechange=function(){if(4===d.readyState&&(200===d.status||204===d.status)){var r=new SDFManagerWorker.tW(new SDFManagerWorker.pw(new Uint8Array(d.response))),e=f.Ow(r,{x:n.x,y:n.y,z:n.z,projectionId:a,tileSize:o},i,t);u(null,SDFManagerWorker.Ln({zo:n},e))}},d.responseType="arraybuffer",d.open("GET",r,!0),d.send(),{cancel:function(){d.abort()}}},DistrictSourceWorker.prototype.Ow=function(v,r,e,g){var n=r.x,a=r.y,o=r.z,i=r.tileSize,t=r.projectionId;v.z=o,v.x=n,v.y=a;var u=SDFManagerWorker.at.getProjection(t).getResolution(o);v.Ro=getMVTTileBbox(n,a,o,u,i),v.zS=SDFManagerWorker.lcs.getLocalByCoord([v.Ro[0],v.Ro[1]]);var f=SDFManagerWorker.at.getProjection(t).getResolution(o);return SDFManagerWorker.vx(v.layers,function(l){var r=l.Cw;l.Ah=[],l.scale=f*i/l.extent;var e=SDFManagerWorker.V[t].Xs(i*n,i*a,o);l.ox=e[0],l.oy=e[1],SDFManagerWorker.forEach(r,function(r,e){(r=l.Gw(e)).Dw(),l.Ah.push(r);var n=r.properties,a=n.adcode,o=n.adcode_pro,i=n.adcode_cit;if((!g||a&&a in g||o&&o in g||i&&i in g)&&r.lines&&0<r.lines.length){r.Rw=[];for(var t=0,u=r.lines.length;t<u;t++){for(var f=[],c=0,d=r.lines[t].length;c<d;c++){var s=[l.ox+l.scale*r.lines[t][c][0]-v.zS.center[0],l.oy-l.scale*r.lines[t][c][1]-v.zS.center[1]];f.push(s)}r.Rw.push(f)}}})}),this.uW(v),this.xw(v,e),this.zw(v,e),v},DistrictSourceWorker.prototype.uW=function(r){var e=[],n=[];for(var a in r.layers)if(r.layers.hasOwnProperty(a))for(var o=r.layers[a],i=0;i<o.Ah.length;i+=1){var t=o.Ah[i];if(3==+t.type&&t.Rw)for(var u=0;u<t.Rw.length;u++){for(var f=t.Rw[u],c={properties:t.properties,path:[]},d=c.path,s=0;s<f.length;s++){var l=f[s];d.push(l[0],l[1])}e.push(c)}else if(3!==t.type&&t.Rw)for(u=0;u<t.Rw.length;u++)n.push({properties:t.properties,path:t.Rw[u]});this.cW(t)}r.polygons=e,r.Dh=n,delete r.layers},DistrictSourceWorker.prototype.xw=function(r,e){if(!r||!r.$c){var n=new SDFManagerWorker.LW;if(!r.$c&&(r.Uc=n,r.$c=new SDFManagerWorker.J_,r.Dh))for(var a=0,o=r.Dh;a<o.length;a++){var i=o[a],t=JSON.stringify(i.properties),u=r.$c.hb(i.path,{X_:0,lineJoin:"round",lineCap:"butt"}),f=u.Iw,c=u.distance;0<f&&(n.add(t,0,f,0,22),i.distance=c)}}},DistrictSourceWorker.prototype.zw=function(r,e){if(!r||!r.Dc){var n=new SDFManagerWorker.LW;r.Oc=n,r.Dc=new SDFManagerWorker.K_;for(var a=0,o=r.polygons;a<o.length;a++){var i=o[a],t=JSON.stringify(i.properties),u=r.Dc.Nx(i.path);0<u&&n.add(t,0,u,0,22)}}},DistrictSourceWorker.prototype.dW=function(r){switch(r){case 0:case 1:return"Nation_Border_China";case 2:return"Coastline_China";case 3:case 4:return"Province_Border_China";case 5:return"City_Border_China";case 6:return"County_Border_China";case 7:case 8:return"Nation_Border_Foreign";case 9:return"Coastline_Foreign";case 10:case 11:return"Nation_Border_Foreign";case 12:return"Province_Border_Foreign";default:return""}},DistrictSourceWorker.prototype.sW=function(code){return this.fW[code]||(this.fW[code]=eval("'"+code.replace(/\//g,"\\u")+"'")),this.fW[code]},DistrictSourceWorker.prototype.cW=function(r){r.properties.NAME_CHN&&(r.properties.NAME_CHN=this.sW(r.properties.NAME_CHN.trim())),r.properties.NAME_ENG&&(r.properties.NAME_ENG=r.properties.NAME_ENG.trim()),r.properties.level&&(r.properties.level=r.properties.level.trim()),r.properties.citycode&&r.properties.citycode.length&&(r.properties.citycode=r.properties.citycode.trim()),r.properties.bC=+r.properties.type,r.properties.lW=+r.type,r.properties.type=this.dW(+r.properties.type)},DistrictSourceWorker}(),DefaultIconInfo={TW:{img:"https://vdata.amap.com/style_icon/2.0/icon-normal-big.png",width:512,height:1024,startX:0,startY:0,status:"loaded",type:"icon",ext:{hv:0}},RW:{img:"https://vdata.amap.com/style_icon/2.0/icon-biz-big.png",width:512,height:1024,startX:0,startY:1024,status:"loaded",type:"icon",ext:{hv:1}}},ImageManagerWorker=(cj=SDFManagerWorker.Event,SDFManagerWorker.Ei(dj,cj),dj.prototype.loadImage=function(r,e){var n=e.name,a=e.type,o=e.cb,i=n||r,t=this.Fs[i];t&&t.status===SDFManagerWorker.uc.LOADED?o(t,e):t&&t.status===SDFManagerWorker.uc.LOADING?(this.Mc[i]||(this.Mc[i]=[]),this.Mc[i].push({cb:o,opts:e})):("icon"===a&&(e.hv=this.Uw,this.Uw++),this.Rc(r,e))},dj.prototype.loadImages=function(r,e){var o=this,n=e.cb,i=e.type;if(0!==Object.keys(r).filter(function(r){return!o.Fs[r]}).length){var t=[],u=[];if(r.length){for(var a=function(a){var r=new Promise(function(n,r){o.loadImage(a,{cb:function(r,e){u.push(o.Fs[a]),n()},type:i})});t.push(r)},f=0,c=r;f<c.length;f++)a(c[f]);Promise.all(t).then(function(){n(u)}).catch(function(){n(u)})}else n(u)}else n()},dj.prototype.Vw=function(r,e){var o=this,i=e.cb,t=r.filter(function(r){return!o.Fs[r]});if(0!==t.length){var n=[],u=[];if(r.length){for(var a=function(a){var r=new Promise(function(n,r){o.loadImage(a,{cb:function(r,e){u.push(o.Fs[a]),n()},type:"icon"})});n.push(r)},f=0,c=r;f<c.length;f++)a(c[f]);Promise.all(n).then(function(){var r=[];if(0<t.length){for(var e=0,n=t;e<n.length;e++){var a=n[e];r.push({url:a,data:o.getImage(a)})}o.emit("iconImageLoaded",{data:r})}i(u)}).catch(function(){i(u)})}else i(u)}else i([])},dj.prototype.getImage=function(r){return void 0===r&&(r=""),this.Fs[r]},dj.prototype.Bi=function(){var r;this.Fs=((r={})[DefaultIconInfo.TW.img]=DefaultIconInfo.TW,r[DefaultIconInfo.RW.img]=DefaultIconInfo.RW,r)},dj.prototype.Rc=function(f,c){var d=this,s=c.name,r=c.ext,l=void 0===r?{}:r,e=c.type,v=void 0===e?"other":e,g=c.cb,n=this.Fs;n[s||f]={status:SDFManagerWorker.uc.LOADING,startX:0,startY:1024*(c.hv||0),type:v,height:0,width:0},SDFManagerWorker.Yw.send(f,{Me:"blob",qw:function(r){var e=new Blob([r],{type:"image/png"}),n=SDFManagerWorker.cc.createObjectURL(e),a=s||f,o=d.Fs;if(!n)return console.error("createObjectURL fail"),o[a].status=SDFManagerWorker.uc.ERROR,void g(o[a],c);if("icon"===v?(l.hv=c.hv,o[a]={ext:l,type:v,startX:0,startY:1024*(c.hv||0),height:1024,width:512,lc:n,status:SDFManagerWorker.uc.LOADED}):o[a]={ext:l,type:v,startX:0,startY:0,height:0,width:0,lc:n,status:SDFManagerWorker.uc.LOADED},g(o[a],c),d.Mc[a])for(var i=0,t=d.Mc[a];i<t.length;i++){var u=t[i];u.cb(o[a],u.opts)}},Aw:function(r){console.warn(r);var e=s||f;n[e].status=SDFManagerWorker.uc.ERROR,g(n[e],c)}})},dj.prototype.Sc=function(r){var e,n;void 0===r&&(r={});var a=r.img;return n=a&&a.context?(e=a.width||0,a.height||0):(e=r.width||0,r.height||0),[e,n]},dj),cj;function dj(){var r,e=cj.call(this)||this;return e.Fs=((r={})[DefaultIconInfo.TW.img]=DefaultIconInfo.TW,r[DefaultIconInfo.RW.img]=DefaultIconInfo.RW,r),e.Cc=16,e.Uw=0,e.Hw={},e.Mc={},e}var LabelWorker=(Ck=SDFManagerWorker.Event,SDFManagerWorker.Ei(Dk,Ck),Dk.prototype.iW=function(r,e){var f=this;void 0===e&&(e={});var c=[],n={},a={},o=[];this.MW.ZL=e.ZL||20;var i=[];for(var t in r)if(r.hasOwnProperty(t)){var u=r[t],d=u.Bw,s=u.params,l=s.scale,v=s.tag;i.push(v);var g=new SDFManagerWorker.Jw(this.parent,this),h=g.Ns(d,{ZL:this.MW.ZL,zoom:d.zo.z,scale:l});SDFManagerWorker.assign(n,g.Fs),SDFManagerWorker.assign(a,g.Es),o.push(d),c.push([d,g,h,v])}var S=Object.keys(n),D=SDFManagerWorker.map(Object.keys(a),function(r){return parseInt(r,10)}),k=Date.now(),M=[],m=o.length,W=0,F=!1,y=e.optimalZoom,w=!1,_=null;this.R_.vW(D,{tiles:o,optimalZoom:y,tags:i,stamp:k,cb:function(r){if((W+=1)===m){for(var e=0,n=c;e<n.length;e++){var a=n[e],o=a[0],i=a[1],t=a[2],u=a[3];M.push({Bw:o,gW:i,SW:t,tag:u})}w=!0,_=M,f.yW(F,w,_)}}}),this.wW(S)?(F=!0,this.yW(F,w,_)):this.z_.Vw(S,{type:"icon",cb:function(){F=!0,f.yW(F,w,_)}})},Dk.prototype.hW=function(r){r.length;for(var c=[],e=function(r){var n=r.Bw,a=r.SW,o=(r.gW,r.tag),i=Object.keys(a).length,t={},u=0;if(0===i)return c.push({data:n.zo}),"continue";function e(e){if(a.hasOwnProperty(e)){var r=a[e];new SDFManagerWorker.$s({R_:d.R_,z_:d.z_}).Ns(r,function(r){t[e]=new SDFManagerWorker.La(n.zo,r),++u===i&&c.push({data:t,tag:o})},{ZL:d.MW.ZL,zoom:n.zo.z,from:"nebula",center:n.Ma.center})}}for(var f in a)e(f)},d=this,n=0,a=r;n<a.length;n++)e(a[n]);var o=SDFManagerWorker.Util.getOptimalZoom(this.MW.ZL);this.emit("dynamicTextVerticeLoadedByTile",{data:c,optimalZoom:o})},Dk.prototype.Fw=function(n,r,a,e){var o=this;void 0===e&&(e={});var i=e.optimalZoom,t=Object.keys(a).length,u={},f=0;if(0!==t){var c=function(e){if(a.hasOwnProperty(e)){var r=a[e];new SDFManagerWorker.$s({R_:d.R_,z_:d.z_}).Ns(r,function(r){u[e]=new SDFManagerWorker.La(n.zo,r),++f===t&&o.emit("dynamicTextVerticeLoaded",{data:u,optimalZoom:i})},{zoom:n.zo.z,from:"nebula",center:n.Ma.center})}},d=this;for(var s in a)c(s)}else this.emit("dynamicTextVerticeLoaded",{data:n.zo,optimalZoom:i})},Dk.prototype.commonWordImageLoaded=function(){this.R_.commonWordImageLoaded()},Dk.prototype.loadCommonWords=function(){var e=this;"error"===this.Nw&&(this.Nw="loading",this.R_.loadCommonWords(function(r){r?(e.Nw="loaded",e.parent.Uh.send("commonWordLoaded",r)):e.Nw="error"}))},Dk.prototype.wW=function(r){void 0===r&&(r=[]);for(var e=this.hD,n=0,a=0,o=r;a<o.length;a++){var i=o[a];-1!==e.indexOf(i)&&n++}return n===r.length},Dk.prototype.yW=function(r,e,n){r&&e&&n&&this.hW(n)},Dk),Ck,env;function Dk(r){var e=Ck.call(this)||this;return e.parent=r,e.Nw="error",e.MW={},e.hD=["https://vdata.amap.com/style_icon/2.0/icon-normal-big.png","https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],e.z_=r.z_,e.R_=r.R_,e}env=SDFManagerWorker._.DW?{movingDraw:sharedChunk.movingDraw}:{movingDraw:window.movingDraw};var AMapWorker=(jm.prototype.setId=function(r,e,n){this.No=e,n()},jm.prototype.loadNebulaSourceTile=function(r,e,n){var a=this,o=e.url,i=e.ya,t=e.zoom,u=e.projectionId,f=e.optimalZoom,c=e.Ca,d=e.mS,s=e.viewMode,l=e.showBuildingBlock,v=e.ZL;return this.Ww.bw(o,i,t,f,u,c,d,s,l,v,function(r,e){a.Zw?a.$w.push({done:n,type:"NebulaSourceTile",data:e}):n(r,e)})},jm.prototype.loadNebulaSourceTileSdf=function(r,e,n){var a=this,o=e.url,i=e.CD,t=e.zoom,u=e.projectionId,f=e.optimalZoom,c=e.Ca,d=e.mS,s=e.viewMode,l=e.showBuildingBlock,v=e.ZL;return this.Ww.bW(o,i,t,f,u,c,d,s,l,v,function(r,e){a.Zw?a.$w.push({done:n,type:"NebulaSourceTileSdf",data:e}):n(r,e)})},jm.prototype.loadMVTSourceTile=function(r,e,n){var a=e.url,o=e.Zh,i=e.projectionId,t=e.tileSize;return this._getMVTSourceWorker(),this.Kw.bw(a,o,i,t,n)},jm.prototype.loadDistrictSourceTile=function(r,e,n){var a=e.url,o=e.Zh,i=e.projectionId,t=e.tileSize,u=e.styles,f=e.adcode;return this._getDistrictSourceWorker(),this.kW.bw(a,o,i,t,u,f,n)},jm.prototype.processLabels=function(r,e){this.Ww.processLabels(e.id)},jm.prototype.updateMapStyle=function(r,e,n){this.vn=e.vn},jm.prototype.updateUserStyle=function(r,e,n){this.vn&&(this.vn.Ve=e.Kd),n&&n()},jm.prototype.sendHttp=function(r,e){this.R_.protocol=e.protocol},jm.prototype.updateParams=function(r,e){this.params=e},jm.prototype.commonWordImageLoaded=function(r){this.yw.commonWordImageLoaded()},jm.prototype.loadCommonWords=function(r){this.Ww.loadCommonWords()},jm.prototype.getSDFData=function(r,e,n){this.R_.oa(e,{cb:function(r){n(r)}})},jm.prototype.getImages=function(r,e){var i=this,t=e.data,u=e.cb,f=this.z_;f.loadImages(t,{cb:function(r){for(var e=[],n=0,a=t;n<a.length;n++){var o=a[n];e.push({url:o,data:f.getImage(o)})}i.Uh.send("imageLoaded",{data:e,cb:u})},type:"icon"})},jm.prototype.Qw=function(r){this.Uh.send("NebulaTileSdfLoaded",SDFManagerWorker.ca)},jm.prototype.setMainThreadBusy=function(r,e){if(env.movingDraw)this.Zw=!1;else{if(this.Zw=e,!this.Zw)for(var n=0,a=this.$w;n<a.length;n++){var o=a[n];o.done?o.done(null,o.data):this.Uh.send(o.type,o.data)}this.$w=[]}},jm.prototype._getNebulaSourceWorker=function(){return this.Ww||(this.Ww=new NebulaSourceWorker(this)),this.Ww},jm.prototype._getMVTSourceWorker=function(){return this.Kw||(this.Kw=new MVTSourceWorker(this)),this.Kw},jm.prototype._getDistrictSourceWorker=function(){return this.kW||(this.kW=new DistrictSourceWorker(this)),this.kW},jm.prototype.Fb=function(){var a=this;this.z_.on("iconImageLoaded",function(r){delete r.type,a.Uh.send("iconImageLoaded",r)}),this.R_.on("dynamicTextTextureInfoLoaded",function(r){delete r.type,a.Uh.send("dynamicTextTextureInfoLoaded",r)}),this.R_.on("dynamicTextSDFInfoLoaded",function(r){delete r.type,a.Uh.send("dynamicTextSDFInfoLoaded",r.data)}),this.yw.on("dynamicTextVerticeLoaded",function(r){var e=r;if(a.Zw){var n=r.type;delete r.type,a.$w.push({type:n,data:e})}else delete r.type,a.Uh.send("dynamicTextVerticeLoaded",e)}),this.yw.on("dynamicTextVerticeLoadedByTile",function(r){var e=r;if(a.Zw){var n=r.type;delete r.type,a.$w.push({type:n,data:e})}else delete r.type,a.Uh.send("dynamicTextVerticeLoadedByTile",e)})},jm);function jm(r,e){this.key=e,this.Zw=!1,this.No="-1",this.$w=[],this.Uh=new SDFManagerWorker.Bh(r,this),this.self=r;var n=this.z_=new ImageManagerWorker;this.R_=new SDFManagerWorker.jb({z_:n}),this.Ww=new NebulaSourceWorker(this),this.yw=new LabelWorker(this),this.Fb()}return SDFManagerWorker._.DW&&(self.Wh=new AMapWorker(self,sharedChunk.key),self.Cn=SDFManagerWorker.Cn),AMapWorker}),define(["./shared"],function(_t){var f={"AMap.MouseTool":["AMap.RangingTool"],"AMap.Adaptor":["AMap.CallAMap"]},u=new _t.tS;function c(t){try{var i=localStorage.getItem("_AMap_"+t);if(!i)return;var e=JSON.parse(i);return e.version===_t.Module.eS.iS?(window._jsload_(t,e.script,!0),e.css&&window._cssload_(t,e.css,!0),1):void window.localStorage.removeItem("_AMap_"+t)}catch(t){return}}function a(t){for(var i=[],e=0,n=t;e<n.length;e++){var o=n[e],r=o;if(!u.has(o)){var a=f[r];if(a)for(var s=0,h=a;s<h.length;s++){var l=h[s];!t[l]&&i.indexOf(l)<0&&(c(l)||i.push(l))}i.indexOf(o)<0&&(c(o)||i.push(o))}}return i}function s(t,i){var e=document.createElement("script");e.type="text/javascript",document.body?(e.onload=function(){document.body.removeChild(e),i()},e.src=t,document.body.appendChild(e)):(e.onload=function(){document.head.removeChild(e),i()},e.src=t,document.head.appendChild(e))}var n=function(){var i=document.getElementById("AMap_Dynamic_style");if(!i){(i=document.createElement("style")).type="text/css",i.id="AMap_Dynamic_style";var t=document.head||document.getElementsByTagName("head")[0];t.childNodes.length<2?t.appendChild(i):t.insertBefore(i,t.childNodes[1])}return function(t){i.appendChild(document.createTextNode(t))}}();window._cssload_=function(t,i,e){try{!e&&window.localStorage&&i&&""!==i&&window.localStorage.setItem("_AMap_"+t,JSON.stringify({css:i,version:_t.Module.eS.iS}))}catch(t){}n(i)},window._jsload_=function(t,i,e){try{if(!e&&i&&""!==i){var n=window.localStorage["_AMap_"+t];n=n||"{}",(n=JSON.parse(n)).version!==_t.Module.eS.iS||n.script?window.localStorage.setItem("_AMap_"+t,JSON.stringify({version:_t.Module.eS.iS,script:i})):window.localStorage.setItem("_AMap_"+t,JSON.stringify({version:_t.Module.eS.iS,script:i,css:n.css}))}}catch(t){}_t.Module.nS(t,i)};var r="function"==typeof Float32Array;function o(t,i){return 1-3*i+3*t}function h(t,i){return 3*i-6*t}function l(t){return 3*t}function d(t,i,e){return((o(i,e)*t+h(i,e))*t+l(i))*t}function p(t,i,e){return 3*o(i,e)*t*t+2*h(i,e)*t+l(i)}var L=(t.prototype.t=function(t){for(var i=0,e=1;10!==e&&this.i[e]<=t;++e)i+=.1;--e;var n=i+(t-this.i[e])/(this.i[e+1]-this.i[e])*.1,o=p(n,this.o,this.s);return.001<=o?function(t,i,e,n){for(var o=0;o<4;++o){var r=p(i,e,n);if(0===r)return i;i-=(d(i,e,n)-t)/r}return i}(t,n,this.o,this.s):0===o?n:function(t,i,e,n,o){for(var r,a,s=0;0<(r=d(a=i+(e-i)/2,n,o)-t)?e=a:i=a,1e-7<Math.abs(r)&&++s<10;);return a}(t,i,i+.1,this.o,this.s)},t.prototype.h=function(t){return 0===t?0:1===t?1:d(this.t(t),this.l,this.u)},t.prototype.p=function(t){return t},t);function t(t,i,e,n){if(!(0<=t&&t<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");this.o=t,this.l=i,this.s=e,this.u=n,this.i=new(r?Float32Array:Array)(11);for(var o=0;o<11;++o)this.i[o]=d(.1*o,t,e)}var i,e,P={getViewport:function(t){return t?[t.clientWidth,t.clientHeight]:[0,0]},n_:function(t,i){var e=t.style[i];if((!e||"auto"===e)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);e=n?n[i]:null}return e&&"auto"!==e||"height"!==i||(e=t.clientHeight+"px"),e&&"auto"!==e||"width"!==i||(e=t.clientWidth+"px"),"auto"===e?null:e},getViewportOffset:function(t){var i,e=0,n=0,o=t,r=document.body,a=document.documentElement;do{if(e+=o.offsetTop||0,n+=o.offsetLeft||0,e+=parseInt(P.n_(o,"borderTopWidth"),10)||0,n+=parseInt(P.n_(o,"borderLeftWidth"),10)||0,i=P.n_(o,"position"),o.offsetParent===r&&"absolute"===i)break;if("fixed"===i){e+=r.scrollTop||a.scrollTop||0,n+=r.scrollLeft||a.scrollLeft||0;break}o=o.offsetParent}while(o);o=t;do{if(o===r)break;e-=o.scrollTop||0,n-=o.scrollLeft||0,!P.m()&&_t._.webkit&&(n+=o.scrollWidth-o.clientWidth),o=o.parentNode}while(o);return[n,e]},m:function(){return i||(e="ltr"===P.n_(document.body,"direction"),i=!0),e},create:function(t,i,e,n){var o=document.createElement(t);if(e&&(o.className=e),i)if(n&&"before"===n){var r=i.firstChild;i.insertBefore(o,r)}else i.appendChild(o);return o},toggleClass:function(t,i,e){e?this.addClass(t,i):this.removeClass(t,i)},hasClass:function(t,i){if(t&&i)return 0<t.className.length&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){t&&i&&(t.classList&&t.classList.add?t.classList.add(i):this.hasClass(t,i)||(t.className+=(t.className?" ":"")+i))},setClass:function(t,i){t&&(t.className=i||"")},removeClass:function(t,e){t&&e&&(t.classList&&t.classList.remove?t.classList.remove(e):t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===e?"":t}).replace(/(^\s+|\s+$)/,""))},watchSize:function(e,n,o){var t=document.createElement("iframe");t.style.cssText="width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",t.onload=function(){t.contentWindow.onresize=i},e.appendChild(t),t.src="about:blank";var r=0,a=0;function i(){o.k=e.getBoundingClientRect(),o.M=[e.clientLeft,e.clientTop];var t=e.offsetWidth,i=e.offsetHeight;t===r&&i===a||(n(t,i),r=t,a=i)}return i(),window.onscroll=i,function(){t.contentWindow.onresize=null}},watchSize2:function(e,n,o){var r=document.createElement("_");r.className="expand";var a=r.appendChild(document.createElement("_"));a.className="shrink";var s=r.appendChild(document.createElement("_"));s.className="expandChild";var h,l,t=a.appendChild(document.createElement("_"));return t.className="shrinkChild",a.style.cssText=r.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",t.style.cssText=s.style.cssText="display:block;height:100%;transition:0s;width:100%",t.style.width=t.style.height="200%",e.appendChild(r),f(),function(){u(),e.removeChild(r)};function f(){u(),o.k=e.getBoundingClientRect(),o.M=[e.clientLeft,e.clientTop];var t=e.offsetWidth,i=e.offsetHeight;t===h&&i===l||(h=t,l=i,s.style.width=2*t+"px",s.style.height=2*i+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,n(t,i)),a.addEventListener("scroll",f),r.addEventListener("scroll",f)}function u(){a.removeEventListener("scroll",f),r.removeEventListener("scroll",f)}},mousePos:function(t,i,e){var n=e.k,o=i;return o.touches&&o.changedTouches&&(o=0<o.touches.length?o.touches[0]:o.changedTouches[o.changedTouches.length-1]),[o.clientX-n.left-e.M[0],o.clientY-n.top-e.M[1]]},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},closest:function(t,i){if(t){if(this.hasClass(t,i))return t;var e=t.parentElement;return e?P.closest(e,i):null}return null},fillText:function(t,i){if(t)return void 0!==t.textContent?t.textContent=i:void 0!==t.innerText?t.innerText=i:t.innerHTML=i,t},_L:function(t){for(var i=document.documentElement.style,e=0;e<t.length;e+=1)if(t[e]in i)return t[e];return!1},rotate:function(t,i,e){var n=P.kL;if(e=e||{x:t.clientWidth/2,y:t.clientHeight/2},n){var o="";o+=" rotate("+i+"deg)",t.style[n]=o,t.style[P.ML[n]+"-origin"]=e.x+"px "+e.y+"px"}else{var r=Math.cos(i*Math.PI/180),a=Math.sin(i*Math.PI/180);if(t.style.filter="progid:DXImageTransform.Microsoft.Matrix()",0<t.filters.length){var s=t.filters.item(0);s.Dx=-e.x*r+e.y*a+e.x,s.Dy=-e.x*a-e.y*r+e.y,s.M11=s.M22=r,s.M12=-(s.M21=a)}}},setCss:function(t,i){t=t instanceof Array?t:[t];for(var e=0;e<t.length;e+=1)for(var n in i)i.hasOwnProperty(n)&&(t[e].style[n]=i[n]);return this},setOpacity:function(t,i){if(t.style)if("opacity"in t.style)t.style.opacity=""+i;else if("filter"in t.style){var e=Math.round(100*i);t.style.filter="",100!==e&&(t.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")}},ML:{},kL:e=i=!1};P.kL=P._L(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]),P.ML={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};var v=(m.prototype.isEnabled=function(){return"disabled"!==this.R},m.prototype.isActive=function(){return"active"===this.R},m.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},m.prototype.disable=function(){this.isEnabled()&&(this.R,this.R="disabled")},m.prototype.L=function(t){this.A&&(this.A=!1),t.ctrlKey||0!==t.button||(document.addEventListener("mousemove",this.T),document.addEventListener("mouseup",this.I),this.D(t))},m.prototype.P=function(t){if(1<t.touches.length)return this.j.removeEventListener("touchmove",this.T),void(this.R="enabled");this.A&&(this.A=!1),"enabled"===this.R&&(this.j.addEventListener("touchmove",this.T,{capture:!0,passive:!0}),document.addEventListener("touchend",this.oS),this.D(t))},m.prototype.D=function(t){this.$=this.U=this.B=P.mousePos(this.j,t,this._map),this.YF=this._map.getView().getStatus().centerCoord,this.XF=this._map.containerToCoord(this.$),this.W=[[Date.now(),this.$]],this.R="active"},m.prototype.Z=function(t){if(!("touchmove"===t.type&&1<t.touches.length)&&(this.W.length<2&&"active"===this.R&&this.G("dragstart",t),"touchmove"===t.type&&this.G("touchmove",t),this.G("dragging",t),this.isEnabled()&&("active"===this.R&&(this.R="pending"),"disabled"!==this.R))){var i=P.mousePos(this.j,t,this._map);if(this.q=t,this.B=_t.set(_t.create(),i[0],i[1]),this.Y(),this.W.push([Date.now(),this.B]),!(this.W.length<2)){var e=this._map.getView(),n=(e.getStatus().rotation,this._map.containerToCoord(i)),o=[this.XF[0]-n[0]+this.YF[0],this.XF[1]-n[1]+this.YF[1]];e.setOptions({center:this._map.getProjection().unproject(o[0],o[1])})}}},m.prototype.tt=function(t){if(0===t.button){if(this.it())return this.S(),void this.C();switch(this.R){case"active":this.R="enabled",this.S(),this.C();break;case"pending":this.R="enabled",this.S(),this.C(),this.et(t),this.G("dragend",t);break;default:this.R="enabled",this.S(),this.G("dragend",t)}}},m.prototype.N=function(t){if(0<t.touches.length)return this.$=this.U=this.B=P.mousePos(this.j,t,this._map),this.YF=this._map.getView().getStatus().centerCoord,void(this.XF=this._map.containerToCoord(this.$));if(this.it())return this.S(),void this.C();switch(this.R){case"active":this.R="enabled",this.S(),this.C();break;case"pending":this.R="enabled",this.S(),this.C(),this.G("dragend",t),this.et(t);break;default:this.G("dragend",t),this.S()}},m.prototype.it=function(){var t=this._map.getLimitBounds();if(t=t&&t.toJSON()){var i=this._map.getBounds().toJSON(),e=[],n=this._map.getCenter().toJSON(),o=[n[0],n[1]];return(i[0]<t[0]||i[1]<t[1]||i[2]>t[2]||i[3]>t[3])&&(e[0]=i[0]-t[0],e[1]=i[1]-t[1],e[2]=i[2]-t[2],e[3]=i[3]-t[3],e[0]<0&&0<e[2]?o[0]=(t[0]+t[2])/2:e[0]<0?o[0]=n[0]-e[0]:0<e[2]&&(o[0]=n[0]-e[2]),e[1]<0&&0<e[3]?o[1]=(t[1]+t[3])/2:e[1]<0?o[1]=n[1]-e[1]:0<e[3]&&(o[1]=n[1]-e[3]),this._map.panTo(o,100),!0)}},m.prototype.S=function(){this.j.removeEventListener("touchmove",this.T),document.removeEventListener("touchend",this.oS),document.removeEventListener("mousemove",this.T),document.removeEventListener("mouseup",this.I)},m.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},m.prototype.Y=function(){for(var t=this.W,i=Date.now();0<t.length&&60<i-t[0][0];)t.shift()},m.prototype.et=function(t){if(this._map.getStatus().jogEnable){this.A=!0,this.Y();var i=this.W;if(!(i.length<2)){var e=i[i.length-1],n=i[0],o=[e[1][0]-n[1][0],e[1][1]-n[1][1]],r=(e[0]-n[0])/1e3;if(0==r||_t.equals(e[1],n[1]))this.G("moveend",t);else{var a=[o[0]/(.3/r),o[1]/(.3/r)],s=Math.sqrt(a[0]*a[0]+a[1]*a[1])/750,h=this._map.getView(),l=h.getStatus(),f=l.rotation,u=parseInt((1e3*s+400)/17+"",10),c=u,d=(new L(.1,0,1,.1),_t.V[l.projectionId].nt(-o[0]/7,o[1]/7,l.zoom),_t.at.getProjection(l.projectionId).project(l.center[0],l.center[1])),p=Date.now(),v=17*c,m=i[i.length-Math.min(i.length,3)],y=[e[1][0]-m[1][0],e[1][1]-m[1][1]];0!==f&&(y=this.J(f,y)),y=_t.V[l.projectionId].nt(y[0],-y[1],l.zoom);var x=Math.min(m[0]-e[0],-15),g=[y[0]/x,y[1]/x],b=[-g[0]/v,-g[1]/v],_=[0,0];_t.Util.requestAnimFrame(function t(){this.isEnabled()&&this.A||(u=-1);var i=Date.now()-p;v<i&&(u=-1);var e=[g[0]*i+b[0]*i*i/2,g[1]*i+b[1]*i*i/2];d=[d[0]+(e[0]-_[0]),d[1]+(e[1]-_[1])],_=e,u<=0?this.A=!1:(h.setOptions({center:_t.at.getProjection(l.projectionId).unproject(d[0],d[1])}),_t.Util.requestAnimFrame(t.bind(this)),u--)}.bind(this))}}}},m.prototype.J=function(t,i){var e=Math.sqrt(i[0]*i[0]+i[1]*i[1]),n=Math.atan2(i[1],i[0]),o=t/180*Math.PI-n;return i[0]=e*Math.cos(o),i[1]=-e*Math.sin(o),i},m.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},m);function m(t,i){this.st="mouse",this._map=i,this.W=[],this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.I=this.tt.bind(this),this.oS=this.N.bind(this)}var y=(x.prototype.isEnabled=function(){return"disabled"!==this.R},x.prototype.isActive=function(){return"active"===this.R},x.prototype.enable=function(){this.isEnabled()||(this.rt=!0,this.R="enabled")},x.prototype.ht=function(){return!!this.lt},x.prototype.disable=function(){if(this.isEnabled())switch(this.R){case"active":this.R="disabled",this.S(),this.C();break;case"pending":this.R="disabled",this.S();break;default:this.R="disabled"}},x.prototype.ut=function(t){t.preventDefault(),"enabled"===this.R&&this._map.getStatus().doubleClickZoom&&(t.ctrlKey||0!==t.button||this.D(t))},x.prototype.P=function(t,i){var e=this;if(this.$=P.mousePos(this.j,t,this._map),2===t.touches.length)return this.rt=!1,void(this.ct=0);this.rt=!0,this.ct++,this.ft=i,this.lt=!1,setTimeout(function(){1===e.ct&&(e.ct=0)},300),this.pt=[t.changedTouches[0].clientX,t.changedTouches[0].clientY],this.j.addEventListener("touchmove",this.dt),2<=this.ct&&this.j.addEventListener("touchend",this.N.bind(this))},x.prototype.vt=function(t){var i=this;this.rt&&(this.yt++,setTimeout(function(){i.yt=0},300),2!==this.yt||this.lt||(t.preventDefault(),this.yt=0,this.ct=0,this.D(t)),2===this.ct&&(this.ct=0))},x.prototype.D=function(i){var e=this;this.lt=!0,this.R="active",this.G("zoomstart");var n=0,o=this._map.getView().getStatus().zoom,r=new L(.4,0,.15,1);if(!(o>=this.xt[1])){var a=0,s=function(){n+=16;var t=o+r.h(n/400);t>=e.xt[1]||(e.bt(i,t),o+1<=t&&(_t.Util.cancelAnimFrame(a),e.lt=!1,e.R="enabled",e.tt(),e.N()),(e.lt||n<400)&&(a=_t.Util.requestAnimFrame(s)))};a=_t.Util.requestAnimFrame(s)}},x.prototype.gt=function(t){var i=P.mousePos(this.j,t,this._map);if(i[0]-this.$[0]!=0||i[1]-this.$[1]!=0)if(this.yt=-1,this.ct<2)this.ct=0;else if(this.rt){this.lt=!0,this.wt=!0,this.ft.disable();var e=t.changedTouches.length,n=this._map.getView(),o=this._map.getView().getStatus().zoom-(t.changedTouches[e-1].clientY-this.pt[1])/100;n.setOptions({zoom:o}),this.pt=[t.changedTouches[e-1].clientX,t.changedTouches[e-1].clientY]}},x.prototype.N=function(){this.wt&&2<=this.ct&&(this.ft.enable(),this.tt(),this.lt=!1,this.wt=!1)},x.prototype.bt=function(t,i){var e=this._map.getView(),n=e.getStatus(),o=n.center,r=n.zoom,a=n.rotation,s=n.projectionId,h=P.mousePos(this.j,t,this._map),l=[this.j.clientWidth/2,this.j.clientHeight/2],f=this._t(l,h),u=Math.atan((h[1]-l[1])/(h[0]-l[0])),c=-a/180*Math.PI+u,d=[-Math.cos(c)*f,Math.sin(c)*f];h[0]-l[0]<0&&(d[0]=-d[0],d[1]=-d[1]);var p=_t.V[s].nt(d[0],d[1],r),v=_t.V[s].nt(d[0],d[1],i),m=Math.pow(2,i-r);e.setOptions({kt:{pos:h,Mt:i,Rt:v,zt:p,scale:m,center:_t.set(_t.create(),o[0],o[1])}}),this.G("zooming")},x.prototype.tt=function(t){t&&0!==t.button||(this.S(),this.C(),this.G("zoomend"))},x.prototype.S=function(){this.j.removeEventListener("dblclick",this.St),this.j.removeEventListener("touchmove",this.dt)},x.prototype.C=function(){delete this.$,delete this.U,delete this.U},x.prototype._t=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.sqrt(e*e+n*n)},x.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},x);function x(t,i){this.lt=!1,this.wt=!1,this.rt=!0,this.xt=[2,22],this.yt=0,this.ct=0,this.pt=[0,0],this._map=i,this.j=t,this.R="disabled",this.St=this.ut.bind(this),this.dt=this.gt.bind(this)}var g=(b.prototype.isEnabled=function(){return"disabled"!==this.R},b.prototype.isActive=function(){return"active"===this.R},b.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},b.prototype.disable=function(){if(this.isEnabled())switch(P.removeClass(this.j,"mapboxgl-touch-drag-pan"),this.R){case"active":this.R="disabled",this.S(),this.G("zoomstart");break;case"pending":this.R="disabled",this.S();break;default:this.R="disabled"}},b.prototype.ht=function(){return!!this.lt},b.prototype.P=function(t){2===t.touches.length&&(t.stopPropagation(),this.G("zoomstart"),this.Ct=this._map.getView().getStatus().rotation,this.Lt=this._map.getView().getStatus().zoom,this.$=t.touches,this.B=t.touches,this.j.addEventListener("touchmove",this.T),this.j.addEventListener("touchend",this.At))},b.prototype.Z=function(t){if(!(t.touches.length<2)&&(this.G("touchmove"),this._map.getStatus().touchZoom&&this.isEnabled())){this.lt=!0;var i=this.CF(t),e=this._map.getView(),n=e.getStatus(),o=n.rotation,r=n.center,a=n.zoom,s=n.projectionId,h=n.Tt,l=void 0===h?s:h,f=n.pitch,u=this._map.getStatus(),c=u.rotateEnable,d=u.zoomEnable,p=u.pitchEnable,v=u.touchZoomCenter,m=!1,y=!1,x=!1,g=this.It(this.B[0],this.B[1]),b=this.It(t.touches[0],t.touches[1]),_=this.Dt(this.B[0],this.B[1]),w=this.Dt(t.touches[0],t.touches[1]),k=a+(b-g)/180,M=_t.Pt(P.mousePos(this.j,this.$[0],this._map),P.mousePos(this.j,this.$[1],this._map));M=[(M[0]+M[2])/2,(M[1]+M[3])/2];var S=[this.j.clientWidth/2,this.j.clientHeight/2],z=this.jt(S,M),R=Math.atan((M[1]-S[1])/(M[0]-S[0])),C=o*Math.PI/180+R,A=[-Math.cos(C)*z,Math.sin(C)*z];M[0]-S[0]<0&&(A[0]=-A[0],A[1]=-A[1]);var I=_t.V[l].nt(A[0],A[1],a),L=_t.V[l].nt(A[0],A[1],k),$=Math.pow(2,k-a),T=o+(w-_);3<Math.abs(T-o)&&(m=!0),1<Math.abs(i)&&(y=m=!(x=!0)),.01<Math.abs(k-a)&&(y=!0);var D=P.mousePos(this.j,this.$[0],this._map),F=P.mousePos(this.j,this.$[1],this._map);1===v?e.setOptions({pitch:p&&x?f+i:f,zoom:d&&y&&k,rotation:c&&m?T:o}):e.setOptions({pitch:p&&x?f+i:f,kt:d&&y&&{Mt:k,Rt:L,zt:I,pos:[(D[0]+F[0])/2,(D[1]+F[1])/2],scale:$,center:_t.set(_t.create(),r[0],r[1])},rotation:c&&m?T:o}),this.B=t.touches}},b.prototype.CF=function(t){var i=this.B,e=this.$,n=[P.mousePos(this.j,i[0],this._map),P.mousePos(this.j,i[1],this._map)],o=(P.mousePos(this.j,e[0],this._map),P.mousePos(this.j,e[1],this._map),[P.mousePos(this.j,t.touches[0],this._map),P.mousePos(this.j,t.touches[1],this._map)]),r=Math.sqrt(Math.pow(n[0][0]-n[1][0],2)+Math.pow(n[0][1]-n[1][1],2)),a=Math.sqrt(Math.pow(o[0][0]-o[1][0],2)+Math.pow(o[0][1]-o[1][1],2));if(2<Math.abs(a-r))return 0;var s=o[0][0]-n[0][0],h=o[0][1]-n[0][1],l=o[1][0]-n[1][0],f=o[1][1]-n[1][1];return Math.abs(h)<Math.abs(s)||Math.abs(f)<Math.abs(l)?0:-(h+f)/2/4},b.prototype.Et=function(t){this.G("zoomend"),this.S()},b.prototype.It=function(t,i){var e=i.clientX-t.clientX,n=i.clientY-t.clientY;return Math.sqrt(e*e+n*n)},b.prototype.jt=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.sqrt(e*e+n*n)},b.prototype.Dt=function(t,i){var e=t.pageX-i.pageX,n=t.pageY-i.pageY;return Math.atan2(n,e)/Math.PI*180},b.prototype.S=function(){this.j.removeEventListener("touchstart",this.Nt),this.j.removeEventListener("touchmove",this.T),this.j.removeEventListener("touchend",this.At)},b.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},b);function b(t,i){this.Ot=!1,this.Ft=!1,this._map=i,this.W=[],this.j=t,this.R="disabled",this.$t=0,this.T=this.Z.bind(this),this.At=this.Et.bind(this)}var it=(_.wi={ZERO:0,ONE:1,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771},_._i=[!0,!0,!0,!0],_.ki=[!1,!1,!1,!1],_.disabled=new _([_.wi.ONE,_.wi.ZERO,_.wi.ONE,_.wi.ZERO],_.ki),_.Mi=new _([_.wi.ONE,_.wi.ZERO,_.wi.ONE,_.wi.ZERO],_._i),_.Ri=new _([_.wi.SRC_ALPHA,_.wi.ONE_MINUS_SRC_ALPHA,_.wi.SRC_ALPHA,_.wi.ONE_MINUS_SRC_ALPHA],_._i),_.zi=new _([_.wi.ONE,_.wi.ONE_MINUS_SRC_ALPHA,_.wi.ONE,_.wi.ONE_MINUS_SRC_ALPHA],_._i),_.Si=new _([_.wi.SRC_ALPHA,_.wi.ONE_MINUS_SRC_ALPHA,_.wi.ONE,_.wi.ONE_MINUS_SRC_ALPHA],_._i),_.land=new _([_.wi.SRC_ALPHA,_.wi.ONE_MINUS_SRC_ALPHA,_.wi.ONE,_.wi.ZERO],_._i),_);function _(t,i){this.Ci=t,this.mask=i}var O=(w.disable=new w({test:(w.wi={ALWAYS:519,EQUAL:514,KEEP:7680,REPLACE:7681}).ALWAYS,Li:0,mask:0},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],0),w.Ai=new w({test:w.wi.ALWAYS,Li:1,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.REPLACE],255),w.Ti=new w({test:w.wi.EQUAL,Li:1,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],255),w);function w(t,i,e){this.stencilFunc=t,this.stencilOp=i,this.stencilMask=e}var k=(S.prototype.set=function(t){this.Ii=t},S.prototype.get=function(){return this.Ii},S.prototype.Di=function(){this.Pi=!0},S.prototype.reset=function(){this.set(this.default)},S.prototype.ji=function(t){return this.Pi||!this.Oi(t,this.Ii)},S);function S(t){this.Oi=pi,this.gl=t.gl,this.default=this.Fi(),this.Ii=this.Fi(),this.Pi=!1}var z,R=(z=k,_t.Ei(C,z),C.prototype.Fi=function(){return!1},C.prototype.set=function(t){if(this.ji(t)){var i=this.gl;t?i.enable(i.BLEND):i.disable(i.BLEND),this.Ii=t,this.Pi=!1}},C);function C(){return null!==z&&z.apply(this,arguments)||this}var A,I=(A=k,_t.Ei($,A),$.prototype.Fi=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},$.prototype.set=function(t){var i=this.Ii;t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2]&&t[3]===i[3]&&!this.Pi||(this.gl.viewport(t[0],t[1],t[2],t[3]),this.Ii=t,this.Pi=!1)},$);function $(){return null!==A&&A.apply(this,arguments)||this}var T,D=(T=k,_t.Ei(F,T),F.prototype.Fi=function(){return!1},F.prototype.set=function(t){if(this.ji(t)){var i=this.gl;t?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST),this.Ii=t,this.Pi=!1}},F);function F(){return null!==T&&T.apply(this,arguments)||this}var B,H=(B=k,_t.Ei(j,B),j.prototype.Fi=function(){return!1},j.prototype.set=function(t){if(this.ji(t)){var i=this.gl;t?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),this.Ii=t,this.Pi=!1}},j);function j(){return null!==B&&B.apply(this,arguments)||this}var E,N=(E=k,_t.Ei(W,E),W.prototype.Fi=function(){return{test:this.gl.ALWAYS,Li:1,mask:65535}},W.prototype.set=function(t){this.ji(t)&&(this.gl.stencilFunc(t.test,t.Li,t.mask),this.Ii=t,this.Pi=!1)},W);function W(){return null!==E&&E.apply(this,arguments)||this}var U,G=(U=k,_t.Ei(V,U),V.prototype.Fi=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},V.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).stencilOp.apply(i,t),this.Ii=t,this.Pi=!1)},V);function V(){return null!==U&&U.apply(this,arguments)||this}var Y,J,Z=(Y=k,_t.Ei(X,Y),X.prototype.Fi=function(){return!1},X.prototype.set=function(t){if(this.ji(t)){var i=this.gl;t?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),this.Ii=t,this.Pi=!1}},X);function X(){return null!==Y&&Y.apply(this,arguments)||this}function q(){return null!==J&&J.apply(this,arguments)||this}J=k,_t.Ei(q,J),q.prototype.Fi=function(){return[this.gl.ONE,this.gl.ZERO]},q.prototype.set=function(t){this.ji(t)&&(this.gl.blendFunc(t[0],t[1]),this.Ii=t,this.Pi=!1)};var Q,K=(Q=k,_t.Ei(tt,Q),tt.prototype.Fi=function(){var t=this.gl.ONE,i=this.gl.ZERO;return[t,i,t,i]},tt.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).blendFuncSeparate.apply(i,t),this.Ii=t,this.Pi=!1)},tt);function tt(){return null!==Q&&Q.apply(this,arguments)||this}var et,rt,nt=(et=k,_t.Ei(ot,et),ot.prototype.Fi=function(){return this.gl.FUNC_ADD},ot.prototype.set=function(t){this.ji(t)&&(this.gl.blendEquation(t),this.Ii=t,this.Pi=!1)},ot);function ot(){return null!==et&&et.apply(this,arguments)||this}function at(){return null!==rt&&rt.apply(this,arguments)||this}rt=k,_t.Ei(at,rt),at.prototype.Fi=function(){return[this.gl.FUNC_ADD,this.gl.FUNC_ADD]},at.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).blendEquationSeparate.apply(i,t),this.Ii=t,this.Pi=!1)};var st,ht=(st=k,_t.Ei(lt,st),lt.prototype.Fi=function(){return this.gl.BACK},lt.prototype.set=function(t){this.ji(t)&&(this.gl.cullFace(t),this.Ii=t,this.Pi=!1)},lt);function lt(){return null!==st&&st.apply(this,arguments)||this}var ft,ut=(ft=k,_t.Ei(ct,ft),ct.prototype.Fi=function(){return this.gl.CCW},ct.prototype.set=function(t){(this.ji(t)||this.Pi)&&(this.gl.frontFace(t),this.Ii=t,this.Pi=!1)},ct);function ct(){return null!==ft&&ft.apply(this,arguments)||this}var dt,pt=(dt=k,_t.Ei(vt,dt),vt.prototype.Fi=function(){return 1},vt.prototype.set=function(t){this.ji(t)&&(this.gl.clearDepth(t),this.Ii=t,this.Pi=!1)},vt);function vt(){return null!==dt&&dt.apply(this,arguments)||this}var mt,yt=(mt=k,_t.Ei(xt,mt),xt.prototype.Fi=function(){return[0,0,0,0]},xt.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).clearColor.apply(i,t),this.Ii=t,this.Pi=!1)},xt);function xt(){return null!==mt&&mt.apply(this,arguments)||this}var gt,bt=(gt=k,_t.Ei(wt,gt),wt.prototype.Fi=function(){return 0},wt.prototype.set=function(t){this.ji(t)&&(this.gl.clearStencil(t),this.Ii=t,this.Pi=!1)},wt);function wt(){return null!==gt&&gt.apply(this,arguments)||this}var kt,Mt=(kt=k,_t.Ei(St,kt),St.prototype.Fi=function(){return[!0,!0,!0,!0]},St.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).colorMask.apply(i,t),this.Ii=t,this.Pi=!1)},St);function St(){return null!==kt&&kt.apply(this,arguments)||this}var zt,Rt=(zt=k,_t.Ei(Ct,zt),Ct.prototype.Fi=function(){return!0},Ct.prototype.set=function(t){this.ji(t)&&(this.gl.depthMask(t),this.Ii=t,this.Pi=!1)},Ct);function Ct(){return null!==zt&&zt.apply(this,arguments)||this}var At,It=(At=k,_t.Ei(Lt,At),Lt.prototype.Fi=function(){return 65535},Lt.prototype.set=function(t){this.ji(t)&&(this.gl.stencilMask(t),this.Ii=t,this.Pi=!1)},Lt);function Lt(){return null!==At&&At.apply(this,arguments)||this}var $t,Tt=($t=k,_t.Ei(Dt,$t),Dt.prototype.Fi=function(){return null},Dt.prototype.set=function(t){if(this.ji(t)){var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,t),this.Ii=t,this.Pi=!1}},Dt);function Dt(){return null!==$t&&$t.apply(this,arguments)||this}var Ft,Pt=(Ft=k,_t.Ei(Ot,Ft),Ot.prototype.Fi=function(){return null},Ot.prototype.set=function(t){this.ji(t)&&(this.Ii&&this.Ii!==t&&this.Ii.Ni(),t?this.gl.useProgram(t.$i):this.gl.useProgram(null),this.Ii=t,this.Pi=!1)},Ot);function Ot(){return null!==Ft&&Ft.apply(this,arguments)||this}var Bt,Ht=(Bt=k,_t.Ei(jt,Bt),jt.prototype.Fi=function(){return this.gl.TEXTURE0},jt.prototype.set=function(t){this.ji(t)&&(this.gl.activeTexture(this.gl.TEXTURE0+t),this.Ii=t,this.Pi=!1)},jt);function jt(){return null!==Bt&&Bt.apply(this,arguments)||this}var Et,Nt=(Et=k,_t.Ei(Wt,Et),Wt.prototype.Fi=function(){return null},Wt.prototype.set=function(t){if(this.ji(t)){var i=this.gl;i.bindTexture(i.TEXTURE_2D,t),this.Ii=t,this.Pi=!1}},Wt);function Wt(){return null!==Et&&Et.apply(this,arguments)||this}var Ut,Gt=(Ut=k,_t.Ei(Vt,Ut),Vt);function Vt(t,i){var e=Ut.call(this,t)||this;return e.context=t,e.parent=i,e}var Yt,Zt=(Yt=Gt,_t.Ei(Xt,Yt),Xt.prototype.set=function(t){if(this.Pi||this.ji(t)){var i=this.gl,e=this.context.bindFramebuffer.Ii;this.context.bindFramebuffer.set(this.parent.Ui),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),this.context.bindFramebuffer.set(e),this.Ii=t}},Xt.prototype.Bi=function(){var t=this.Ii,i=this.gl;t&&(i.deleteTexture(t),this.Ii=null)},Xt.prototype.Fi=function(){return null},Xt);function Xt(){return null!==Yt&&Yt.apply(this,arguments)||this}var Jt,qt=(Jt=Gt,_t.Ei(Qt,Jt),Qt.prototype.set=function(t){if(this.Pi||this.ji(t)){var i=this.gl;this.context.bindFramebuffer.set(this.parent.Ui),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,t),this.Ii=t}},Qt.prototype.Bi=function(){var t=this.Ii,i=this.gl;t&&(i.deleteRenderbuffer(t),this.Ii=null)},Qt.prototype.Fi=function(){return null},Qt);function Qt(){return null!==Jt&&Jt.apply(this,arguments)||this}var Kt,ti=(Kt=k,_t.Ei(ii,Kt),ii.prototype.Fi=function(){return null},ii.prototype.set=function(t){t&&t.xe,this.ji(t)&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.Ii=t,this.Pi=!1)},ii);function ii(){return null!==Kt&&Kt.apply(this,arguments)||this}var ei,ni=(ei=k,_t.Ei(oi,ei),oi.prototype.Fi=function(){return null},oi.prototype.set=function(t){this.ji(t)&&(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.Ii=t,this.Pi=!1)},oi);function oi(){return null!==ei&&ei.apply(this,arguments)||this}var ri,ai=(ri=k,_t.Ei(si,ri),si.prototype.Fi=function(){return!1},si.prototype.set=function(t){this.ji(t)&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,t),this.Ii=t,this.Pi=!1)},si);function si(){return null!==ri&&ri.apply(this,arguments)||this}var hi=(li.prototype.resize=function(t,i){this.Wi.Bi(),this.Gi.Bi(),this.width=t,this.height=i},li.prototype.destroy=function(){var t=this.context.gl;this.Wi.Bi(),this.Gi.Bi(),t.deleteFramebuffer(this.Ui)},li.prototype.get=function(){return this.Ui},li);function li(t,i,e){this.context=t,this.width=i,this.height=e;var n=t.gl.createFramebuffer();if(!n)throw Error("createFramebuffer error");this.Ui=n,this.Wi=new Zt(t,this),this.Gi=new qt(t,this)}var fi=(ui.prototype.update=function(t,i,e){var n=t.width,o=t.height,r=i&&i.resize||(!this.size||this.size[0]!==n||this.size[1]!==o)&&!e,a=this.context.gl;if(this.Zi=Boolean(i&&i.Zi),a.bindTexture(a.TEXTURE_2D,this.qi),i&&i.Yi&&a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),r)this.size=[n,o],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n,o,0,a.RGBA,a.UNSIGNED_BYTE,t.data);else{var s=e||{x:0,y:0},h=s.x,l=s.y;t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData?a.texSubImage2D(a.TEXTURE_2D,0,h,l,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,h,l,n,o,a.RGBA,a.UNSIGNED_BYTE,t.data)}this.Zi&&this.Vi()&&a.generateMipmap(a.TEXTURE_2D),i&&i.Yi&&a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),a.bindTexture(a.TEXTURE_2D,null)},ui.prototype.generateMipmap=function(){if(this.Vi()){var t=this.context.gl;t.bindTexture(t.TEXTURE_2D,this.qi),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)}else console.warn("generateMipmap error")},ui.prototype.bind=function(t,i,e){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.qi),i&&i!==this.Xi&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i),this.Xi=i),e&&e!==this.Hi&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e),this.Hi=e),t&&t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)},ui.prototype.Vi=function(){return Math.log(this.size[0])/Math.LN2%1==0&&Math.log(this.size[1])/Math.LN2%1==0},ui.prototype.destroy=function(){this.context.gl.deleteTexture(this.qi),this.qi=null},ui.prototype.get=function(){return this.qi},ui);function ui(t,i,e){this.context=t,this.qi=t.gl.createTexture(),this.update(i,e)}function ci(t,i){return t!==i}function pi(t,i){return!function(t,i){if(typeof t!=typeof(n=i)||"object"==typeof t&&Array.isArray(t)!==Array.isArray(n))return 1;var n;switch(typeof t){case"boolean":case"number":case"string":return ci(t,i);case"object":return(Array.isArray(t)?function(t,i){if(t===i)return!1;if(t.length!==i.length)return!0;for(var e=0,n=t.length;e<n;e++)if(t[e]!==i[e])return!0;return!1}:ci)(t,i);default:return 1}}(t,i)}var vi=(mi.prototype.clear=function(t){var i=0,e=this.gl;t.color&&(i|=e.COLOR_BUFFER_BIT),t.depth&&(i|=e.DEPTH_BUFFER_BIT),t.stencil&&(i|=e.STENCIL_BUFFER_BIT),0!==i&&e.clear(i)},mi.prototype.Qi=function(t){this.blendEquation.set(this.gl.FUNC_ADD),this.te(t,it.Mi)?this.ie.set(!1):this.te(t,it.disabled)?this.colorMask.set(it.ki):(this.ie.set(!0),this.ee.set(t.Ci),this.colorMask.set(t.mask))},mi.prototype.ne=function(t){this.depthTest.set(t)},mi.prototype.ae=function(t){this.te(t.stencilFunc.test,O.wi.ALWAYS)&&!t.stencilMask?this.se.set(!1):(this.se.set(!0),this.stencilFunc.set(t.stencilFunc),this.stencilOp.set(t.stencilOp),this.stencilMask.set(t.stencilMask))},mi.prototype.re=function(t){t.enable?(this.cullFace.set(t.enable),this.he.set(t.mode),this.frontFace.set(t.frontFace)):this.cullFace.set(!1)},mi.prototype.reset=function(){this.ie.reset(),this.ee.reset(),this.blendEquation.reset(),this.cullFace.reset(),this.he.reset(),this.frontFace.reset(),this.depthTest.reset(),this.se.reset(),this.stencilFunc.reset(),this.stencilOp.reset(),this.stencilMask.reset(),this.le.reset(),this.ue.reset(),this.ce.reset(),this.bindFramebuffer.set(null)},mi.prototype.createFramebuffer=function(t,i){return new hi(this,t,i)},mi.prototype.createRenderbuffer=function(t,i){var e=this.gl,n=e.createRenderbuffer();if(e.bindRenderbuffer(e.RENDERBUFFER,n),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t,i),!n)throw Error("bindRenderbuffer error");return n},mi.prototype.createTexture=function(t,i){return new fi(this,t,i)},mi.prototype.fe=function(t,i,e){void 0===e&&(e="STATIC_DRAW");var n=this.gl,o=n.createBuffer();if(!o)throw Error("createBuffer error");o.context=this,o.size=i,o.length=t.byteLength/i;var r=this.de.Ii;return this.de.set(o),n.bufferData(n.ARRAY_BUFFER,t,n[e]),this.de.set(r),o},mi.prototype.ve=function(t){var i=this.gl,e=i.createBuffer();if(!e)throw Error("createBuffer error");e.context=this,e.length=t.length,e.type="int",e.G_=!0,t instanceof Uint16Array?e.size=16:e.size=32;var n=this.me.Ii;return this.me.set(e),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,i.STATIC_DRAW),this.me.set(n),e},mi.prototype.getSize=function(){return{width:this.gl.canvas.width,height:this.gl.canvas.height}},mi.prototype.getParameter=function(t){return this.ye[t]||(this.ye[t]=this.gl.getParameter(this.gl[t])),this.ye[t]},mi.prototype.deleteBuffer=function(t){this.de.set(null),this.me.set(null),this.gl.deleteBuffer(t),t.xe=!0},mi.prototype.getExtension=function(t){this.extensions[t]||(this.Z_?this.Z_.indexOf(t)<0?console.error("WebGL: supportedExtension not exist "+t):this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t),this.extensions[t]||console.error("WebGL: getExtension "+t+" failed")):console.error("WebGL: supportedExtension not exist"))},mi.prototype.Di=function(){this.ge.Di(),this.bindTexture.Di(),this.bindFramebuffer.Di(),this.de.Di(),this.me.Di(),this.be.Di(),this.activeTexture.Di(),this.colorMask.Di(),this.depthMask.Di(),this.se.Di(),this.le.Di(),this.stencilMask.Di(),this.stencilFunc.Di(),this.stencilOp.Di(),this.colorMask.Di(),this.ie.Di(),this.blendEquation.Di(),this.ee.Di(),this.depthTest.Di(),this.cullFace.Di(),this.he.Di(),this.frontFace.Di(),this.hB.Di()},mi);function mi(t){this.te=pi,this.gl=t,this.Z_=this.gl.getSupportedExtensions(),this.extensions={},this.be=new I(this),this.ie=new R(this),this.ee=new K(this),this.blendEquation=new nt(this),this.cullFace=new Z(this),this.he=new ht(this),this.frontFace=new ut(this),this.depthTest=new D(this),this.se=new H(this),this.stencilFunc=new N(this),this.stencilOp=new G(this),this.stencilMask=new It(this),this.le=new bt(this),this.ue=new yt(this),this.ce=new pt(this),this.bindFramebuffer=new Tt(this),this.ge=new Pt(this),this.bindTexture=new Nt(this),this.activeTexture=new Ht(this),this.de=new ti(this),this.me=new ni(this),this.colorMask=new Mt(this),this.depthMask=new Rt(this),this.ye={},this.hB=new ai(this)}var yi=(xi.we=new xi(!1,(xi.wi={CW:2304,CCW:2305,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032}).FRONT_AND_BACK,xi.wi.CW),xi._e=new xi(!0,xi.wi.FRONT,xi.wi.CW),xi.back=new xi(!0,xi.wi.BACK,xi.wi.CW),xi);function xi(t,i,e){this.enable=t,this.mode=i,this.frontFace=e}var gi=(bi.prototype.set=function(t){var i=this.context.gl;if(t)if(t.type===this.type){if(this.ke(t)){var e,n;switch(this.Ii=t,i.enableVertexAttribArray(this.location),this.context.de.set(t.buffer),this.type){case"float":case"int":e=1;break;case"vec2":e=2;break;case"vec3":e=3;break;case"vec4":e=4;break;default:e=1}switch(this.Me){case"int8":n=i.BYTE;break;case"uint8":n=i.UNSIGNED_BYTE;break;case"int16":n=i.SHORT;break;case"uint16":n=i.UNSIGNED_SHORT;break;case"float32":n=i.FLOAT}i.vertexAttribPointer(this.location,e,n,this.normalize,t.Re,t.offset)}}else console.error("error webglBuffer type,need "+this.type+", receive "+t.type+" ");else i.disableVertexAttribArray(this.location)},bi.prototype.ke=function(t){return!0},bi);function bi(t,i,e,n,o){void 0===o&&(o=!1),this.context=t,this.type=i,this.Me=e,this.location=n,this.normalize=o}var _i=(wi.prototype.set=function(t){if(!this.te(this.Ii,t)&&void 0!==t){switch(this.type){case"bool":case"int":case"sampler2D":this.ze.uniform1i(this.location,t);break;case"sampler2D[]":this.ze.uniform1iv(this.location,t);break;case"float":this.ze.uniform1f(this.location,t);break;case"float[]":this.ze.uniform1fv(this.location,t);break;case"vec2":this.ze.uniform2f(this.location,t[0],t[1]);break;case"vec3":this.ze.uniform3f(this.location,t[0],t[1],t[2]);break;case"vec4":this.ze.uniform4f(this.location,t[0],t[1],t[2],t[3]);break;case"mat2":this.ze.uniformMatrix2fv(this.location,!1,new Float32Array(t));break;case"mat3":this.ze.uniformMatrix3fv(this.location,!1,new Float32Array(t));break;case"mat4":this.ze.uniformMatrix4fv(this.location,!1,new Float32Array(t))}this.Ii=t}},wi);function wi(t,i,e){this.context=t,this.type=i,this.location=e,this.Re=0,this.offset=0,this.te=pi,this.ze=t.gl}var ki=(Mi.createProgram=function(t,i,e){var n=Mi.Se(t,t.VERTEX_SHADER,i),o=Mi.Se(t,t.FRAGMENT_SHADER,e);if(!n||!o)return null;var r=t.createProgram();if(!r)return null;t.attachShader(r,n),t.attachShader(r,o),t.bindAttribLocation(r,0,"a_Position"),t.linkProgram(r);var a=t.getProgramParameter(r,t.LINK_STATUS);return t.deleteShader(o),t.deleteShader(n),a?r:(t.getProgramInfoLog(r),t.deleteProgram(r),null)},Mi.Se=function(t,i,e){var n=t.createShader(i);if(null===n)return null;if(t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;var o=t.getShaderInfoLog(n);return console.log("Failed to compile shader: "+o),t.deleteShader(n),null},Mi.prototype.Ce=function(t,i,e,n,o,r,a,s,h,l){void 0===o&&(o="TRIANGLES"),void 0===r&&(r=!1),void 0===a&&(a=it.Mi),void 0===s&&(s=O.disable),void 0===h&&(h=yi.we),void 0===l&&(l=0);var f=this.context,u=f.gl;f.ge.set(this),f.ne(r),f.ae(s),f.Qi(a),f.re(h),f.hB.set(!1),this.Le(t),this.Ae(i),n?(f.me.set(n),32===n.size?u.drawElements(u[o],e,u.UNSIGNED_INT,n.size/8*l):u.drawElements(u[o],e,u.UNSIGNED_SHORT,n.size/8*l)):u.drawArrays(u[o],l,e)},Mi.prototype.Le=function(t){for(var i in this.Te){var e=this.Te[i];if("sampler2D"===e.type)0<=(f=this.Ie.indexOf(i))&&(this.context.activeTexture.set(f),(l=t[i]).bind(),e.set(f));else if("sampler2D[]"===e.type){for(var n=t[i],o=n.De,r=n.offset||0,a=n.count||o.length,s=[],h=0;h<a;h++){var l,f=r+h;(l=o[h])?(this.context.activeTexture.set(f),l.bind(),s.push(f)):(this.context.activeTexture.set(r),o[0].bind(),s.push(r))}e.set(s)}else e.set(t[i])}},Mi.prototype.Ae=function(t){for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&this.attributes[i].set(t[i])},Mi.prototype.Pe=function(t,i,e,n,o,r,a,s){void 0===i&&(i=0),void 0===n&&(n="TRIANGLES"),void 0===o&&(o=!1),void 0===r&&(r=it.Mi),void 0===a&&(a=O.disable),void 0===s&&(s=yi.we);var h=this.context,l=h.gl;h.ge.set(this),h.ne(o),h.ae(a),h.Qi(r),h.re(s),e?(h.me.set(e),l.drawElements(l[n],t,l.UNSIGNED_SHORT,e.size/8*i)):l.drawArrays(l[n],i,t)},Mi.prototype.Ni=function(){for(var t in this.attributes)this.attributes.hasOwnProperty(t)&&this.attributes[t].set(null)},Mi.prototype.destroy=function(){this.context.gl.deleteProgram(this.$i),this.$i=null},Mi);function Mi(t,i,e,n,o){this.Ie=[];var r=(this.context=t).gl,a=Mi.createProgram(r,i,e);if(!a)throw Error("createProgram fail");for(var s in this.je=!0,this.attributes={},this.Te={},this.$i=a,n)if(n.hasOwnProperty(s)){var h=n[s].Oe,l=n[s].Me,f=r.getAttribLocation(this.$i,s),u=n[s].normalize;this.attributes[s]=new gi(t,h,l,f,u)}for(var s in o)o.hasOwnProperty(s)&&(h=o[s],(f=r.getUniformLocation(this.$i,s))&&(this.Te[s]=new _i(t,h,f)),"sampler2D"===h&&this.Ie.push(s))}function Si(t,i,e){return t+(i-t)*e}var zi=(Ri.prototype.An=function(t,i,e,n,o){var r=this.Tn(t,i,e,n);if(!r)return null;var a=r[this.key];return a&&a.rgba?this.In(a.rgba):a},Ri.prototype.In=function(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]/255]},Ri.prototype.Dn=function(t,i,e,n,o){var r=Math.floor(n),a=Math.ceil(n),s=n-r<.8?r:a,h=this.Tn(t,i,e,r),l=this.Tn(t,i,e,a);if((h||s!==r)&&(h||l)&&(!h||l||s!==a)&&(h||!l||r!==s)){var f=n-r;if(h||(f=(f-.8)/.2),f=Math.max(f,0),"const"===this.type)return this.Pn(t,i,e,s);if("linear"===this.type&&r===a)return this.Pn(t,i,e,r);if(!h&&l){var u=l[this.key];return"number"!=typeof u?((x=u.normalize())&&"line"!==this.sort&&(x[3]=x[3]*f),x):Si(0,u,f)}if(h&&!l)return this.Pn(t,i,e,r);var c=h[this.key],d=l[this.key];if(c)return"number"==typeof c?Si(c,d,f):(v=d,m=f,y=[0,0,0,1],_t.forEach(c.rgba,function(t,i){var e=v.rgba[i];y[i]=Si(t,e,m)/255}),y);if("number"==typeof d)return Si(0,d,f);var v,m,y,x=d.normalize();return"line"!==this.sort&&(x[3]=x[3]*f),x}},Ri.prototype.Pn=function(t,i,e,n){var o;switch(this.sort){case"line":o=this.jn(t,i,e,n);break;case"other":o=this.On(t,i,e,n);break;default:o=this.On(t,i,e,n)}return o},Ri.prototype.Tn=function(t,i,e,n){var o;switch(this.sort){case"line":o=this.Fn(t,i,e,n);break;case"other":o=this.En(t,i,e,n);break;default:o=this.En(t,i,e,n)}return o},Ri.prototype.Fn=function(t,i,e,n){var o=t.dn(i,e,n);if(this.Nn(o))return o[0]},Ri.prototype.En=function(t,i,e,n){var o=t.dn(i,e,n);if(this.Nn(o))return o},Ri.prototype.jn=function(t,i,e,n){var o,r=Math.floor(n),a=Math.ceil(n),s=t.dn(i,e,r);return s?(o=s[0][this.key])&&o.normalize?o.normalize():o:(o=t.dn(i,e,a)[0][this.key])&&o.normalize?o.normalize():o},Ri.prototype.On=function(t,i,e,n){var o,r=Math.floor(n),a=Math.ceil(n),s=t.dn(i,e,r);return s?(o=s[this.key])instanceof _t._n?o.normalize():o:(o=t.dn(i,e,a)[this.key])instanceof _t._n?o.normalize():o},Ri);function Ri(t,i,e){void 0===e&&(e="other"),this.key=t,this.type=i,this.sort=e}var Ci,Ai=(Ci=zi,_t.Ei(Ii,Ci),Ii.prototype.Nn=function(t){return t&&t[0].roadColor},Ii);function Ii(t,i){var e=Ci.call(this,t,i,"line")||this;return e.key=t,e.type=i,e}var Li,$i=(Li=zi,_t.Ei(Ti,Li),Ti.prototype.Nn=function(t){return t&&t[0].borderColor},Ti);function Ti(t,i){var e=Li.call(this,t,i,"line")||this;return e.key=t,e.type=i,e}var Di,Fi=(Di=zi,_t.Ei(Pi,Di),Pi.prototype.Nn=function(t){return t&&t.faceColor},Pi);function Pi(){return null!==Di&&Di.apply(this,arguments)||this}var Oi,Bi=(Oi=zi,_t.Ei(Hi,Oi),Hi.prototype.Nn=function(t){return t&&t.faceColor},Hi);function Hi(){return null!==Oi&&Oi.apply(this,arguments)||this}var ji,Ei=(ji=zi,_t.Ei(Ni,ji),Ni.prototype.Nn=function(t){return t&&t.wallColor2},Ni);function Ni(){return null!==ji&&ji.apply(this,arguments)||this}function Wi(t,i,e,n,o){void 0===e&&(e=[0,0]),void 0===o&&(o=1);var r=t.$n,a=r.zoom,s=r.size;if(!(i.minzoom-.2>t.$n.zoom&&3<i.minzoom)){var h=i.mainkey,l=i.subkey,f=i.minzoom,u=Vi.faceColor.An(n,h,l,a,f),c=t.map.JF();if(u)return{u_matrix:t.$n.mvpMatrix,u_color:u,u_offset:[0,0],u_skyHeight:o,u_viewHeight:s[1],u_skyColor:c||[1,1,1,0],u_localDeltaCenter:e}}}function Ui(t,i,e,n,o,r,a){void 0===e&&(e=[0,0]);var s,h,l,f=t.$n.zoom,u=t.$n.pitch,c=t.$n.size[1],d=[16,22],p=1,v=1;if("AMap.Buildings"===n.To.CLASS_NAME&&(d=n.zooms,p=n.opacity,v=n.heightFactor),!(d[0]>f||d[1]<f))return{u_skyBMRange:a,u_skyHeight:r,u_viewHeight:c,u_heightFactor:v,u_roofColor:o.roofColor,u_wallColor:o.wallColor,u_lightDir:(s=t.$n.center,l=-15*((h=new Date).getHours()+h.getMinutes()/60)+300,[Math.sin(s[0]-l),1,.75]),u_opacity:p,u_pitch:u,u_matrix:t.$n.mvpMatrix,u_offset:[0,0],u_normalMatrix:t.$n.modelMatrix,u_localDeltaCenter:e}}var Vi={faceColor:new Fi("faceColor","linear"),borderWidth:new Fi("borderWidth","linear"),borderColor:new Fi("borderColor","linear")};function Zi(t,i,e,n){var o=t.$n.zoom;if(!(i.minzoom-.5>t.$n.zoom&&3<i.minzoom)){var r=i.mainkey,a=i.subkey,s=i.minzoom,h=Ki.borderColor.An(n,r,a,o,s);if(h)return{u_color:h,u_normal:[0,0,-.1],u_matrix:t.$n.mvpMatrix,u_localDeltaCenter:e}}}function Xi(t,i,e,n,o,r){void 0===n&&(n=[0,0]);var a=i.minzoom,s=i.maxzoom,h=t.$n.zoom;if(!(h<a-.2&&3<a||s+.8<h&&s<18))return i.mainkey,i.subkey,(e?function(t,i,e,n,o){void 0===e&&(e=[0,0]);var r=t.$n.zoom,a=i.mainkey,s=i.subkey,h=i.minzoom,l=te.borderColor.An(n,a,s,r,h);if(l){var f=te.roadWidth.An(n,a,s,r,h)+te.borderWidth.An(n,a,s,r,h),u=te.borderDash.An(n,a,s,r,h)||[1,0,1,0];return{u_skyHeight:o,u_matrix:t.$n.mvpMatrix,u_meter_per_pixel:t.$n.resolution,u_width:f,u_border:1,u_color:l,u_dash:u,u_localDeltaCenter:e,u_viewHeight:t.size[1]}}}:function(t,i,e,n,o){void 0===e&&(e=[0,0]);var r=t.$n.zoom,a=i.mainkey,s=i.subkey,h=i.minzoom,l=(i.maxzoom,te.roadColor.An(n,a,s,r,h));if(s<0&&a<0&&(l=[1,0,0,t.debug?1:0]),l){var f=te.roadWidth.An(n,a,s,r,h),u=te.roadDash.An(n,a,s,r,h)||[1,0,1,0];return{u_matrix:t.$n.mvpMatrix,u_meter_per_pixel:t.$n.resolution,u_width:f,u_color:l,u_dash:u,u_border:0,u_localDeltaCenter:e,u_viewHeight:t.size[1],u_skyHeight:o}}})(t,i,n,o,r)}var Ki={faceColor:new Bi("faceColor","linear"),borderWidth:new Ei("borderWidth","const"),borderColor:new Ei("borderColor","linear"),wallColor1:new Bi("wallColor1","linear"),wallColor2:new Bi("wallColor2","linear")},te={roadColor:new Ai("roadColor","linear"),roadWidth:new Ai("roadWidth","linear"),roadDash:new Ai("roadDash","const"),borderColor:new $i("borderColor","linear"),borderWidth:new $i("borderWidth","linear"),borderDash:new $i("borderDash","const")},ie={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},ee={fill:{uniforms:{u_skyColor:"vec3",u_color:"vec4",u_skyHeight:"float",u_viewHeight:"float",u_offset:"vec2",u_matrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec2"}},vertexSource:"precision highp float;\nattribute vec2 a_pos;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform vec2 u_offset;\nvarying vec4 v_pos;\n\nvoid main(){\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\n    gl_Position = u_matrix * vec4(pos, 0, 1);\n    v_pos = gl_Position;\n}\n",fragmentSource:"precision highp float;\nuniform vec4 u_color;\n// uniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nuniform vec3 u_skyColor;\nvarying vec4 v_pos;\n\nvoid main() {\n    gl_FragColor = u_color;\n    // gl_FragColor = v_color;\n    // gl_FragColor = vec4(0,0,1.0,1.0);\n    // return;\n\n    // 雾化\n    float y = v_pos.y / v_pos.w;\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\n    if(u_skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        gl_FragColor.a *= fogFactor;\n    }\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},sky:{uniforms:{u_mvpMatrix:"mat4",u_opacity:"float",u_skyline:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec4"},a_color:{Me:"float32",Oe:"vec4"}},vertexSource:"precision highp float;\nuniform vec2 u_skyline;\nuniform mat4 u_mvpMatrix;\nattribute vec4 a_pos;\nattribute vec4 a_color;\nvarying vec4 v_color;\nvarying vec4 v_pos;\n\nvoid main() {\n    vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\n    gl_Position = pos;\n    v_color = a_color;\n    v_pos = gl_Position;\n}\n",fragmentSource:"precision highp float;\nuniform float u_opacity;\n\nvarying vec4 v_color;\nvarying vec4 v_pos;\n\nvoid main() {\n  gl_FragColor = v_color;\n  // float x = v_pos.x / v_pos.w;\n  gl_FragColor.a *= u_opacity;\n}"},mask:{uniforms:{u_mvpMatrix:"mat4",u_color:"vec4",u_deltaCenter:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec2"}},vertexSource:"precision highp float;\nuniform mat4 u_mvpMatrix;\nuniform vec2 u_deltaCenter;\nattribute vec2 a_pos;\n\nvoid main() {\n    gl_Position = u_mvpMatrix * vec4(a_pos.xy+u_deltaCenter, 0, 1);\n}\n",fragmentSource:"precision highp float;\n// uniform float u_opacity;\nuniform vec4 u_color;\n\n// varying vec4 v_color;\n\nvoid main() {\n//   gl_FragColor = u_color;\n    gl_FragColor = vec4(0, 0, 0, 0);\n}"},fillExtrusion:{uniforms:{u_skyBMRange:"vec2",u_skyHeight:"float",u_viewHeight:"float",u_heightFactor:"float",u_roofColor:"vec4",u_wallColor:"vec4",u_lightDir:"vec3",u_opacity:"float",u_pitch:"float",u_offset:"vec2",u_matrix:"mat4",u_normalMatrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec4"},a_normal:{Me:"float32",Oe:"vec3"}},vertexSource:"precision highp float;\nattribute vec4 a_pos;\n// attribute vec4 a_color;\n// attribute float a_flag;\nattribute vec3 a_normal;\n\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform vec2 u_offset;\nuniform float u_pitch;\nuniform float u_heightFactor;\nuniform vec4 u_roofColor;\nuniform vec4 u_wallColor;\n\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvarying vec4 v_roofColor;\n// varying vec4 v_color;\n// varying float v_height;\n// varying float v_flag;\nvarying float v_fullHeight;\nvarying float v_fragHeight;\nvarying vec4 v_pos;\n\nvoid main() {\n    vec3 pos = vec3(\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\n        a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\n    );\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\n\n    // v_color = a_color;\n    // v_flag = a_flag;\n    v_pos = gl_Position;\n    // vec4(a_pos, 1);\n    v_fragHeight = a_pos.z;\n    v_fullHeight = a_pos.w;\n    // v_height = pos.z / a_pos.w;\n    v_normal = normalize(a_normal);\n    // 1.4 拿过来的\n    v_roofColor = u_roofColor;\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\n}\n",fragmentSource:"precision mediump float;\n\n// uniform vec4 u_roofColor;\n// uniform vec4 u_wallColor;\nuniform vec3 u_lightColor;\nuniform vec3 u_lightDir;\nuniform mat4 u_normalMatrix;\nuniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;\nuniform vec2 u_skyBMRange;\n\nvarying vec3 v_normal;\nvarying vec4 v_color;\n// varying vec4 v_color;\n// varying float v_flag;\nvarying float v_fullHeight;\nvarying float v_fragHeight;\nvarying vec4 v_roofColor;\nvarying vec4 v_pos;\n\nvoid main() {\n    // 环境光\n    vec3 ambientLightColor = vec3(1, 1, 1);\n    float ambientStrength = 0.92;\n    vec3 ambient = ambientStrength * ambientLightColor;\n\n    // 平行光的漫反射\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\n    vec3 lightDir = u_lightDir;\n    vec3 lightColor = vec3(1, 1, 1);\n    float lightStrength = 0.1;\n    vec3 norm = normalize(v_normal);\n    float nDotL = max(dot(lightDir, norm), 0.0);\n    vec3 diff = lightStrength * lightColor * nDotL;\n\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\n    float topOpacity = 1.0;\n    if(v_fragHeight >= v_fullHeight) {\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\n    }\n\n    // 根据楼高判断颜色\n    if(v_fragHeight >= v_fullHeight) {\n        gl_FragColor = v_roofColor;\n        // gl_FragColor = u_roofColor;\n    } else {\n        // 渐变色，暂时不用\n        // float hFactor = v_fragHeight / v_fullHeight / 8.0 + 1.0;\n        gl_FragColor = v_color;\n    }\n\n    gl_FragColor.rgb *= diff + ambient;\n    gl_FragColor.a *= u_opacity * topOpacity;\n\n    // 雾化\n    // float y = v_pos.y / v_pos.w;\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\n    if(u_skyHeight < 1.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        // gl_FragColor.a *= fogFactor;\n\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\n        gl_FragColor.a *= fogFactor;\n    }\n\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},raster:{uniforms:{u_skyColor:"vec3",u_viewHeight:"float",u_skyHeight:"float",u_texture:"sampler2D",u_opacity:"float",u_mvpMatrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_Position:{Oe:"vec4",Me:"float32"}},vertexSource:"precision highp float;\n\nuniform mat4 u_mvpMatrix;\nuniform vec2 u_localDeltaCenter;\n\nvarying vec2 v_TextureCoord;\nvarying vec4 v_pos;\n\nattribute vec4 a_Position;\n\nvoid main(){\n    v_TextureCoord=a_Position.zw;\n    vec4 pos=vec4(a_Position.x+u_localDeltaCenter.x,a_Position.y+u_localDeltaCenter.y,0.,1.);\n    gl_Position=u_mvpMatrix*pos;\n    v_pos = gl_Position;\n}\n",fragmentSource:"precision highp float;\n\nuniform sampler2D u_texture;\nuniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nuniform vec3 u_skyColor;\n\nvarying vec2 v_TextureCoord;\nvarying vec4 v_pos;\n\nvoid main(void) {\n    vec4 smpColor = texture2D(u_texture, v_TextureCoord);\n    if(smpColor.a < 0.01){\n        discard;\n    }\n    gl_FragColor = smpColor;\n    gl_FragColor.a *= u_opacity;\n\n    float y = v_pos.y / v_pos.w;\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\n    vec3 fogColor = vec3(0.9, 0.9, 0.9);\n    if(u_skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\n        gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        gl_FragColor.a *= fogFactor;\n    }\n    // gl_FragColor = vec4(1.0,0,0,1.0);\n}\n"},labelsLayer:{uniforms:{u_gl_size:"vec2",u_matrix:"mat4",u_texsize:"float[]",u_texture:"sampler2D[]",u_event:"int",u_zoom:"float",u_color:"vec4",u_borderColor:"vec4",u_strokeColor:"vec4",u_backgroundColor:"vec4",u_borderBuffer:"float",u_buffer:"float",u_gamma:"float",u_opacity:"float",u_delta_center:"vec2",u_offset:"vec2",u_transform:"vec4",u_skyHeight:"float"},attributes:{a_vertex:{Oe:"vec2",Me:"float32"},a_texcoord:{Oe:"vec2",Me:"float32"},a_origin:{Oe:"vec2",Me:"float32"},a_zooms:{Oe:"vec2",Me:"float32"},a_height:{Oe:"float",Me:"float32"},a_angle:{Oe:"float",Me:"float32"},a_type:{Oe:"float",Me:"float32"},a_texIndex:{Oe:"float",Me:"float32"},a_visible:{Oe:"float",Me:"uint8"}},vertexSource:"precision mediump float;\nattribute highp vec2 a_vertex;\nattribute vec2 a_texcoord;\nattribute highp vec2 a_origin;\nattribute lowp float a_type;\nattribute lowp float a_texIndex;\nattribute vec4 a_color;\nattribute lowp vec2 a_zooms;\nattribute lowp float a_visible;\nattribute highp float a_height;\nattribute lowp float a_angle;\n\nuniform lowp vec2 u_gl_size;\nuniform highp mat4 u_matrix;\nuniform float u_texsize[_TotalTextureLenTwice];\nuniform lowp int u_event;\nuniform float u_zoom;\nuniform highp vec2 u_delta_center;\nuniform highp vec2 u_offset;\n// u_transform.x => rotate; u_transform.y => pinch; u_transform.z => scale\nuniform lowp vec4 u_transform;\nuniform float u_skyHeight;\n\nvarying vec2 v_texcoord;\nvarying float v_texIndex;\nvarying float v_type;\nvarying vec4 v_color;\nvarying vec2 v_zooms;\nvarying lowp float v_visible;\nvarying vec2 v_pos;\n\nmat4 rotateMat4(mat4 a, float rad, vec3 axis) {\n    float x = axis[0], y = axis[1], z = axis[2];\n    float len = length(axis);\n    float s, c, t;\n    float a00, a01, a02, a03;\n    float a10, a11, a12, a13;\n    float a20, a21, a22, a23;\n    float b00, b01, b02;\n    float b10, b11, b12;\n    float b20, b21, b22;\n\n    len = 1.0 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = sin(rad);\n    c = cos(rad);\n    t = 1.0 - c;\n\n    a00 = a[0][0]; a01 = a[0][1]; a02 = a[0][2]; a03 = a[0][3];\n    a10 = a[1][0]; a11 = a[1][1]; a12 = a[1][2]; a13 = a[1][3];\n    a20 = a[2][0]; a21 = a[2][1]; a22 = a[2][2]; a23 = a[2][3];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    mat4 outMatrix = mat4(\n    a00 * b00 + a10 * b01 + a20 * b02,\n    a00 * b10 + a10 * b11 + a20 * b12,\n    a00 * b20 + a10 * b21 + a20 * b22,\n    a[3][0],\n\n    a01 * b00 + a11 * b01 + a21 * b02,\n    a01 * b10 + a11 * b11 + a21 * b12,\n    a01 * b20 + a11 * b21 + a21 * b22,\n    a[3][1],\n\n    a02 * b00 + a12 * b01 + a22 * b02,\n    a02 * b10 + a12 * b11 + a22 * b12,\n    a02 * b20 + a12 * b21 + a22 * b22,\n    a[3][2],\n\n    a03 * b00 + a13 * b01 + a23 * b02,\n    a03 * b10 + a13 * b11 + a23 * b12,\n    a03 * b20 + a13 * b21 + a23 * b22,\n    a[3][3]\n    );\n\n\n    //    outMatrix = mat4(1.0);\n    return outMatrix;\n}\n\nmat4 scaleMat4(mat4 a, vec3 v) {\n    float x = v.x, y = v.y, z = v.z;\n\n    mat4 outMatrix = mat4(\n        a[0][0] * x, a[1][0] * y, a[2][0] * z, a[3][0],\n        a[0][1] * x, a[1][1] * y, a[2][1] * z, a[3][1],\n        a[0][2] * x, a[1][2] * y, a[2][2] * z, a[3][2],\n        a[0][3] * x, a[1][3] * y, a[2][3] * z, a[3][3]\n    );\n\n    return outMatrix;\n}\n\nvec2 getSizeFromArray(float u_texsize[_TotalTextureLenTwice], int ndx){\n    vec2 texsize;\n\n    if (ndx==0){\n        texsize=vec2(u_texsize[0], u_texsize[1]);\n    } else if (ndx==1){\n        texsize=vec2(u_texsize[2], u_texsize[3]);\n    } else if (ndx==2){\n        texsize=vec2(u_texsize[4], u_texsize[5]);\n    } else if (ndx==3){\n        texsize=vec2(u_texsize[6], u_texsize[7]);\n    } else if (ndx==4){\n        texsize=vec2(u_texsize[8], u_texsize[9]);\n    } else if (ndx==5){\n        texsize=vec2(u_texsize[10], u_texsize[11]);\n    }else if (ndx==6){\n        texsize=vec2(u_texsize[12], u_texsize[13]);\n    }\n\n    return texsize;\n}\n\nvoid main(){\n    float pi = 3.141592653589793238462;\n\n    // 任意点打点测试\n    if (a_type==4.){\n        gl_PointSize = 8.0;\n        gl_Position = u_matrix * vec4(a_vertex.xy, 0, 1);\n        v_type=a_type;\n        return;\n    }\n\n    // 纹理拼接\n    if (a_type == 5.0){\n        vec4 pos = u_matrix * vec4(a_vertex.xy, 0, 1);\n        gl_Position = vec4(pos.xy/u_gl_size * 2.0, 0, 1);\n        v_type = a_type;\n        v_texIndex = a_texIndex;\n        v_texcoord = a_texcoord;\n        return;\n    }\n    // for what??\n    if (a_type == 7.0){\n        gl_Position = vec4(a_vertex.xy, 0, 1);\n        v_type = a_type;\n        v_texcoord = a_texcoord;\n        return;\n    }\n    // zooms 放弃绘制\n    v_zooms=a_zooms;\n    v_visible=a_visible;\n\n    if (a_visible==0. || u_zoom<a_zooms.x || u_zoom>a_zooms.y){\n        return;\n    }\n\n    // 绘制背景 || border\n    if (a_type==6. || a_type==8.){\n        vec4 cur_position=u_matrix*vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\n        gl_Position=cur_position/cur_position.w+vec4(a_vertex.x/u_gl_size.x*2., -a_vertex.y/u_gl_size.y*2., 0, 0);\n        v_type=a_type;\n        v_zooms=a_zooms;\n        v_visible=a_visible;\n        v_pos = gl_Position.xy;\n        return;\n    }\n\n    // 绘制贴地效果文字\n    if (a_type==1.){\n        gl_Position = u_matrix * vec4(a_vertex.xy, 0, 1);\n    } else {\n        // 绘制 billborad 效果\n        mat4 originMatirx = mat4(1.0);\n        mat4 scaleMatrix = scaleMat4(originMatirx, vec3(u_transform.z));\n        mat4 rotateMatrix = rotateMat4(originMatirx, a_angle + u_transform.x, vec3(0, 0, 1));\n        vec4 trans_position = rotateMatrix * scaleMatrix * vec4(a_vertex.x, -a_vertex.y, 0, 1);\n\n        vec4 trans_normalize_position = vec4(trans_position.xy/u_gl_size.xy*2., 0, 1);\n\n        vec4 cur_position = u_matrix * vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\n\n        // 修复文字超出 z 轴范围没有裁剪的问题，现象就是在地图最大级别、pitch 最大的时候出现文字（不应该在地图中的）悬浮在高空中。\n        if(cur_position.z / cur_position.w > 1. || cur_position.z / cur_position.w < -1.) {\n            gl_Position = vec4(0, 0, cur_position.z/cur_position.w, 1);\n        } else {\n            gl_Position=vec4(cur_position.xy/cur_position.w+trans_normalize_position.xy/trans_normalize_position.w,0,1);\n        }\n    }\n    // if(gl_Position.y > u_skyHeight) {\n    //     gl_Position = vec4(0, 0, 0, 0);\n    // }\n\n    // 事件支持\n    if (u_event==1){\n        v_color=a_color;\n        return;\n    }\n\n    v_texcoord=a_texcoord/getSizeFromArray(u_texsize, int(a_texIndex));\n    v_texIndex=a_texIndex;\n    v_type=a_type;\n    v_pos = gl_Position.xy;\n}",fragmentSource:"precision mediump float;\nuniform sampler2D u_texture[_TotalTextureLen];\nuniform vec4 u_color;\nuniform vec4 u_borderColor;\nuniform vec4 u_strokeColor;\nuniform vec4 u_backgroundColor;\nuniform float u_borderBuffer;\nuniform float u_buffer;\nuniform float u_gamma;\nuniform lowp int u_event;\nuniform float u_zoom;\nuniform lowp float u_opacity;\nuniform float u_skyHeight;\n\nvarying vec2 v_texcoord;\nvarying float v_texIndex;\nvarying float v_type;\nvarying vec4 v_color;\nvarying vec2 v_zooms;\nvarying vec2 v_pos;\nvarying lowp float v_visible;\n\nfloat skyOpacity() {\n    if (v_pos.y > u_skyHeight){\n        return 1.0 - smoothstep(u_skyHeight, u_skyHeight + (1.0 - u_skyHeight) / 6.0, v_pos.y);\n    }\n    return 1.0;\n}\n\n/*由于片元着色器的数据index必须是常量，只能如此取出相应的值*/\n\nvoid main() {\n    // texture5\n    if (v_type == 7.0){\n        gl_FragColor = texture2D(u_texture[4], v_texcoord);\n        return;\n    }\n    if (v_type == 4.0){\n        gl_FragColor = u_color;\n        return;\n    }\n    int texIdx = int(floor(v_texIndex + 0.1));\n\n    vec4 distColor;\n    // 拼接纹理\n    if (v_type == 5.0){\n        __SmpColorLoop__\n        gl_FragColor = distColor;\n        return;\n    }\n\n    if (v_type == 6.0){\n        gl_FragColor = vec4(u_backgroundColor.rgb, u_backgroundColor.a * u_opacity);\n        gl_FragColor.a *= skyOpacity();\n        return;\n    }\n\n    if (v_type == 8.0){\n         gl_FragColor = vec4(u_borderColor.rgb, u_borderColor.a * u_opacity);\n        gl_FragColor.a *= skyOpacity();\n        return;\n    }\n\n    if (u_event == 1){\n        gl_FragColor = v_color;\n        gl_FragColor.a *= skyOpacity();\n        return;\n    }\n\n    __SmpColorLoop__\n\n    // icon\n    if (v_type == 0.0){\n        float opacity = u_opacity * distColor.a;\n        if (opacity < 0.03){\n            discard;\n        }\n        gl_FragColor = vec4(distColor.rgb, opacity);\n        // gl_FragColor = vec4(distColor.rgb, u_opacity * distColor.a);\n        gl_FragColor.a *= skyOpacity();\n        return;\n    }\n\n    float dist = distColor.r;\n    float alpha;\n    if (u_borderBuffer == 0.0){\n        alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\n        gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\n        // gl_FragColor = vec4(1.0,0,0,1.0);\n\n    } else {\n\n        if (dist <= u_buffer - u_gamma){\n            // border 与外界交界\n            alpha = smoothstep(u_borderBuffer - u_gamma, u_borderBuffer, dist);\n            float opacity = alpha * u_strokeColor.a * u_opacity;\n            if (opacity == 0.0){\n                discard;\n            }\n            gl_FragColor = vec4(u_strokeColor.rgb, opacity);\n        } else if (dist < u_buffer){\n            // 文字与 border 交界\n            alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\n            gl_FragColor = vec4(alpha * u_color.rgb + (1.0 - alpha) * u_strokeColor.rgb, 1.0 * u_color.a *\n            alpha * u_opacity + (1.0 - alpha) * u_strokeColor.a * u_opacity);\n        } else {\n            // 文字\n            alpha = 1.0;\n            gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\n        }\n    }\n    gl_FragColor.a *= skyOpacity();\n}"},fillOutline:{uniforms:{u_color:"vec4",u_normal:"vec3",u_matrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Oe:"vec2",Me:"float32"}},vertexSource:"precision highp float;\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nvarying vec2 v_pos;\n\nvoid main(){\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x,a_pos.y+u_localDeltaCenter.y);\n    gl_Position=u_matrix*vec4(pos,0,1);\n    v_pos=(gl_Position.xy/gl_Position.w+1.)/2.*vec2(1583.*1.,946.*1.);\n}\n",fragmentSource:"precision mediump float;\nuniform vec4 u_color;\nvarying vec2 v_pos;\n// uniform float u_opacity;\n\nvoid main(){\n    // float dist=length(v_pos-gl_FragCoord.xy);\n    // float alpha=1.-smoothstep(0.,1.,dist);\n    gl_FragColor=u_color;\n    // gl_FragColor=vec4(0.8, 0.8, 0.8, 0.5);\n\n    #ifdef OVERDRAW_INSPECTOR\n    gl_FragColor=vec4(1.);\n    #endif\n}\n"},line:{uniforms:{u_skyHeight:"float",u_viewHeight:"float",u_width:"float",u_border:"float",u_matrix:"mat4",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},vertexSource:"precision highp float;\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform float u_meter_per_pixel;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform float u_width;\n\nvarying float v_distance;\nvarying vec2 v_normal;\nvarying float v_width;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n    float width = u_width + 0.0;\n    float cosValue = dot(a_normal , a_dir);\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width * 0.5);\n\n    vec2 pos=a_pos;\n    pos.x+=u_localDeltaCenter.x;\n    pos.y+=u_localDeltaCenter.y;\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    v_normal = normalize(a_normal*sign(width*u_meter_per_pixel*.5));\n    v_width = width;\n    v_pos = gl_Position;\n}",fragmentSource:"precision highp float;\n\nuniform vec4 u_color;\n// uniform float u_opacity;\nuniform vec4 u_dash;\nuniform float u_border;\nuniform float u_skyHeight;\nuniform float u_viewHeight;\n\nvarying highp float v_distance;\nvarying vec2 v_normal;\nvarying float v_width;\nvarying vec4 v_pos;\n\nvoid main() {\n    float offset = mod(v_distance, u_dash.r + u_dash.g + u_dash.b + u_dash.a);\n    if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\n        discard;\n    }else if(offset> u_dash.r + u_dash.g + u_dash.b){\n        discard;\n    }\n\n    float startBlur = 0.0;\n    float endBlur = 1.0;\n    // float dist = length(v_normal) * 0.8;\n\n    // if(v_width < 4.0 && u_border == 1.0) {\n    //     startBlur = 0.0;\n    // } else {\n    //     // 线主体\n    //     if(v_width < 4.0 && u_border == 0.0) {\n    //         startBlur = 0.0;\n    //     } else {\n    //         startBlur = 0.4;\n    //     }\n    // }\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\n\n    // startBlur = 0.0;\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\n    gl_FragColor = u_color;\n    // gl_FragColor.a *= opacity;\n\n    // gl_FragColor = vec4(1, 0, 0, 1);\n\n\n    // 雾化\n    float y = v_pos.y / v_pos.w;\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\n    if(u_skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        gl_FragColor.a *= fogFactor;\n    }\n\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},combineText:{uniforms:{u_sourceTexture:"sampler2D",u_sourceTextureSize:"vec2",u_targetTextureSize:"vec2"},attributes:{a_targetTexturePos:{Oe:"vec2",Me:"uint16"},a_sourceTexturePos:{Oe:"vec2",Me:"uint16"}},vertexSource:"precision highp float;\n\nattribute vec2 a_targetTexturePos;\nattribute vec2 a_sourceTexturePos;\n\nuniform vec2 u_targetTextureSize;\nuniform vec2 u_sourceTextureSize;\n\nvarying vec2 v_textureCoord;\n\n\nvoid main() {\n  v_textureCoord = a_sourceTexturePos / u_sourceTextureSize;\n  // v_textureCoord = vec2(a_sourceTexturePos.x / u_sourceTextureSize.x, a_sourceTexturePos.y / u_sourceTextureSize.y);\n\n  vec2 pos = (a_targetTexturePos / u_targetTextureSize) *2.0 -vec2(1.0,1.0);\n  // vec2 pos = vec2(a_targetTexturePos.x / u_targetTextureSize.x, a_targetTexturePos.y / u_targetTextureSize.y);\n  // pos.x = (pos.x - 0.5)*2.0;\n  // pos.y = (pos.y - 0.5)*2.0;\n\n  gl_Position = vec4(pos, 0, 1.0);\n  // gl_Position = vec4(a_targetTexturePos,0,1.0);\n}",fragmentSource:"precision highp float;\n\nuniform sampler2D u_sourceTexture; \n\nvarying vec2 v_textureCoord;\n\n\nvoid main(){\n  gl_FragColor = texture2D(u_sourceTexture, v_textureCoord);\n  // gl_FragColor = vec4(1,0, 0, 0 ,1.0);\n    // gl_FragColor = vec4(0,0,1.0,1.0);\n}"},debugImage:{uniforms:{u_texture:"sampler2D"},attributes:{a_pos:{Oe:"vec2",Me:"uint16"},a_coord:{Oe:"vec2",Me:"uint16"}},vertexSource:"precision highp float;\n\nattribute vec2 a_pos;\nattribute vec2 a_coord;\n\nvarying vec2 v_coord;\n\nvoid main() {\n  v_coord = vec2(a_coord.x,1.0 - a_coord.y) ;\n  vec2 pos = a_pos *2.0 -vec2(1.0,1.0);\n  // vec2 pos = a_pos -vec2(,1.0);\n  gl_Position = vec4(pos,0,1.0);\n}",fragmentSource:"precision highp float;\n\nvarying vec2 v_coord;\n\nuniform sampler2D u_texture;\n\nvoid main(){\n  gl_FragColor = texture2D(u_texture, v_coord);\n  // gl_FragColor = vec4(1.0,0,0,1.0);\n}\n"},circle:{uniforms:{u_color:"vec4",u_borderColor:"vec4",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_offset:"vec2",u_radius:"float",u_range:"vec2",u_retinaRatio:"float",u_skyHeight:"float",u_viewHeight:"float"},attributes:{a_pos:{Me:"float32",Oe:"vec2"}},vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nuniform mat4 u_matrix;\nuniform float u_radius;\nuniform vec2 u_localDeltaCenter;\nuniform vec2 u_offset;\nuniform float u_retinaRatio;\nvarying vec4 v_pos;\n\nvoid main(){\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\n    gl_Position=u_matrix * vec4(pos,0,1);\n    gl_PointSize = u_radius * u_retinaRatio * 2.0;\n    v_pos = gl_Position;\n}\n",fragmentSource:"\n\nprecision highp float;\n#define GLSLIFY 1\nuniform  float u_radius;\nuniform  vec2 u_range;\nuniform highp vec4 u_color;\nuniform highp vec4 u_borderColor;\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\n\nvarying vec4 v_pos;\n\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;  // 10 像素高度作为模糊处理\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n  float offset = distance(gl_PointCoord, vec2(0.5,0.5))*2.0;\n  float flag = step(offset, u_range[0]) + step(u_range[1], offset);\n\n  if(flag > 0.0){\n    discard;\n  }\n  float opacity_t = 1.-smoothstep(u_range[1] -1./u_radius, u_range[1], offset);\n  gl_FragColor = mix(u_borderColor, u_color, opacity_t);\n\n  gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n}"},polyline:{uniforms:{u_width:"float",u_dashType:"int",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec3",u_localDeltaCenter:"vec2",u_skyHeight:"float",u_viewHeight:"float"},attributes:{a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform float u_meter_per_pixel;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nuniform  mediump float u_width;\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\nvarying float v_distance;\nvarying float v_width;\nvarying vec2 v_normal;\nvarying float v_flag;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n\n    float width = u_width;\n    float cosValue = dot(a_normal , a_dir);\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\n    sinValue = step(0.0, sinValue);\n    sinValue = (sinValue - 0.5)* 2.0;\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\n\n    vec2 pos = a_pos;\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\n//    gl_PointSize = 3.0;\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    v_width = width;\n    v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\n    v_flag = sinValue;\n    v_pos = gl_Position;\n\n}",fragmentSource:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 u_color;\nuniform vec4 u_outLinecolor;\n// uniform float u_opacity;\nuniform vec3 u_dash;\nuniform int u_dashType;\nuniform sampler2D u_texture;\nuniform  mediump float u_width;\n\nvarying highp float v_distance;\nvarying float v_width;\nvarying vec2 v_normal;\nvarying float v_flag;\nvarying vec4 v_pos;\n\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;  // 10 像素高度作为模糊处理\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n    // vec2 icon_offset = vec2(80.0, 0.0);\n    // vec2 icon_size = vec2(40.0, 40.0);\n    // vec2 icon_offset = vec2(0.0, 0.0);\n    // vec2 icon_size = vec2(44.0, 32.0);\n    // vec2 texture_size = vec2(512.0, 2048.0);\n    float offset = 0.0;\n    if( u_dashType == 2 ){\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\n            discard;\n        }\n    }else if(u_dashType == 3) {\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\n        offset = mod(v_distance, all);\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\n\n        if (offset > solidBound.x && offset <= dashBound.x\n            || offset > solidBound.y && offset <= dashBound.y\n            || offset > solidBound.z && offset <= dashBound.z) {\n            discard;\n        }\n    }\n\n    float startBlur = 0.0;\n    float endBlur = 1.0;\n    // float dist = length(v_normal) * 0.8;\n\n    // if(v_width < 4.0 && u_border == 1.0) {\n    //     startBlur = 0.0;\n    // } else {\n    //     // 线主体\n    //     if(v_width < 4.0 && u_border == 0.0) {\n    //         startBlur = 0.0;\n    //     } else {\n    //         startBlur = 0.4;\n    //     }\n    // }\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\n\n    // startBlur = 0.0;\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\n\n    gl_FragColor = u_color;\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},"polyline-pattern":{uniforms:{u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_meter_per_pixel_optimal:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_iconsize:"vec2",u_dir_color:"vec3",u_custom_img_flag:"bool",u_skyHeight:"float",u_viewHeight:"float"},attributes:ie,vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform highp float u_meter_per_pixel;\nuniform highp float u_meter_per_pixel_optimal;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nuniform  highp float u_width;\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\nvarying highp float v_distance;\n// varying mediump float v_width;\n// varying vec2 v_normal;\nvarying highp float v_flag;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n\n    float width = u_width + 0.0;\n    float cosValue = dot(a_normal , a_dir);\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\n    sinValue = step(0.0, sinValue);\n    // sinValue = (sinValue - 0.5)* 2.0;\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\n\n    vec2 pos = a_pos;\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\n//    gl_PointSize = 3.0;\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    // v_width = width;\n    // v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\n    v_flag = sinValue;\n    v_pos = gl_Position;\n\n}",fragmentSource:"precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\nuniform  highp vec2 u_iconsize;\nuniform  mediump vec3 u_dir_color;\nuniform  bool u_custom_img_flag;\nuniform  highp float u_width;\nuniform highp float u_meter_per_pixel;\nuniform highp float u_meter_per_pixel_optimal;\n\nvarying highp float v_distance;\n// varying float v_width;\n// varying vec2 v_normal;\nvarying highp float v_flag;\nvarying vec4 v_pos;\n\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;  // 10 像素高度作为模糊处理\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n    // if(abs(v_flag)>=1.0){\n    //     discard;\n    // }\n    vec2 icon_size = u_iconsize * vec2(u_width/u_iconsize.y, 1.0 );\n    float offset = 0.0;\n    float text_offset_x = mod(v_distance, (icon_size.x*4.0)*u_meter_per_pixel_optimal/u_meter_per_pixel);\n    // float text_offset_x = mod(v_distance, 120.0);\n\n    if(text_offset_x<=0.0){\n        discard;\n    }\n    if(text_offset_x>=icon_size.x){\n        discard;\n    }\n\n    text_offset_x = 1.0 - clamp(0.0,1.0,text_offset_x/icon_size.x);\n\n    // float  text_offset_y  = (v_flag+1.0)/2.0  ;\n    float  text_offset_y  = v_flag  ;\n\n    if(u_custom_img_flag){\n        gl_FragColor = texture2D(u_texture, vec2(text_offset_y, text_offset_x));\n    }else{\n        vec4 color = texture2D(u_texture, vec2(text_offset_y,text_offset_x));\n        if(color.a>0.0){\n            gl_FragColor = vec4(u_dir_color,1.0);\n        }\n    }\n   gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},"polyline-gradient":{uniforms:{u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_total_distance:"float",u_skyHeight:"float",u_viewHeight:"float"},attributes:ie,vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform float u_meter_per_pixel;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nuniform  mediump float u_width;\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\n\nvarying float v_distance;\nvarying float v_width;\nvarying vec2 v_normal;\nvarying float v_flag;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n\n    float width = u_width;\n    float cosValue = dot(a_normal , a_dir);\n\n    v_distance = a_distance + (cosValue * width *0.5)*u_meter_per_pixel;\n    // v_distance = a_distance;\n\n    vec2 pos = a_pos;\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    v_pos = gl_Position;\n}",fragmentSource:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 u_outLinecolor;\n// uniform float u_opacity;\nuniform vec3 u_dash;\nuniform int u_dashType;\nuniform sampler2D u_texture;\nuniform  mediump float u_width;\nuniform  highp float u_total_distance;\n\nvarying highp float v_distance;\nvarying vec4 v_pos;\n\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;  // 10 像素高度作为模糊处理\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n\n    float offset = 0.0;\n    if( u_dashType == 2 ){\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\n            discard;\n        }\n    }else if(u_dashType == 3) {\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\n        offset = mod(v_distance, all);\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\n\n        if (offset > solidBound.x && offset <= dashBound.x\n            || offset > solidBound.y && offset <= dashBound.y\n            || offset > solidBound.z && offset <= dashBound.z) {\n            discard;\n        }\n    }\n    float texture_x = v_distance/u_total_distance;\n    gl_FragColor = texture2D(u_texture, vec2(texture_x,0.5));\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"}},ne=(oe.prototype.Un=function(){return this.Bn("circle")},oe.prototype.rS=function(){return this.Bn("sky")},oe.prototype.aS=function(){return this.Bn("mask")},oe.prototype.Wn=function(){return this.Bn("fill")},oe.prototype.k_=function(){return this.Bn("fillExtrusion")},oe.prototype.Gn=function(){return this.Bn("raster")},oe.prototype.Zn=function(){var t=this.context.gl,i="labelsLayer";if(!this.qn[i]){for(var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),n=Math.min(e,16),o=ee[i],r=[],a=0;a<n;a++)r.push((0<a?"else ":" ")+"if(texIdx=="+a+"){ distColor = texture2D(u_texture["+a+"], v_texcoord); }");o.vertexSource=o.vertexSource.replace(/_TotalTextureLenTwice/g,(2*n).toString()).replace(/_TotalTextureLen/g,n.toString()),o.fragmentSource=o.fragmentSource.replace(/_TotalTextureLen/g,n.toString()).replace(/__SmpColorLoop__/g,r.join("\n"))}return this.Bn(i)},oe.prototype.Yn=function(){return this.Bn("fillOutline")},oe.prototype.Vn=function(){return this.Bn("line")},oe.prototype.Xn=function(){return this.Bn("polyline")},oe.prototype.M_=function(){return this.Bn("polyline-pattern")},oe.prototype.sS=function(){return this.Bn("polyline-gradient")},oe.prototype.Hn=function(){return this.Bn("combineText")},oe.prototype.Jn=function(){return this.Bn("debugImage")},oe.prototype.destroy=function(){for(var t in this.qn)this.qn.hasOwnProperty(t)&&(this.qn[t].destroy(),delete this.qn[t])},oe.prototype.Bn=function(t){if(this.qn[t])return this.qn[t];var i=ee[t];return i&&(this.qn[t]=new ki(this.context,i.vertexSource,i.fragmentSource,i.attributes,i.uniforms)),this.qn[t]},oe);function oe(t){this.context=t,this.context=t,this.qn={}}var re=(ae.prototype.destroy=function(){},ae);function ae(){this.hS=_t.Util.stamp(this)}var se,he=(se=re,_t.Ei(le,se),le.prototype.Kn=function(t,i,e,n,o){},le);function le(){var t=se.call(this)||this;return t.CLASS_NAME="AMap.Land",t.e_=[0,0,0,0],t.Qn={color:[.9882352941176471,.9764705882352941,.9490196078431372,1]},t}var fe=(ue.prototype.lS=function(t,i){var e=this.map.fS(),n=e.uS(),o={};for(var r in n)if(n.hasOwnProperty(r)){var a=n[r],s=(a.ro(),i.uo.getData(a.co(),i.$n,this.context||null));o[r]=s}e.cS(t,i,o)},ue);function ue(t){this.map=t}var ce,de=_t._.scale,pe=(ce=fe,_t.Ei(ve,ce),ve.prototype.getMapState=function(){return this.map&&this.map.getMapState()||{}},ve.prototype.getMap=function(){return this.map},ve.prototype.to=function(){this.map&&this.map.setNeedUpdate(!0)},ve.prototype.Kn=function(t){t.size[0]*de!==this.io.width&&(this.io.width=t.size[0]*de,this.io.style.width=t.size[0]+"px"),t.size[1]*de!==this.io.height&&(this.io.height=t.size[1]*de,this.io.style.height=t.size[1]+"px"),this.context.be.set([0,0,this.io.width,this.io.height]),this.context.clear({stencil:!0,color:!0,depth:!0});var i,e=t.$n.zoom,n=t.layers.sort(function(t,i){return t.eo().zIndex-i.eo().zIndex});this.no.Kn(this.oo,this.map.options.backgroundColor,t,{},this),this.map.ao.update(this.oo),this.map.so.update(this.oo),this.lS(this.oo,t);for(var o=!0,r=0,a=n.length;r<a;r+=1){var s=(i=n[r]).ro(),h=i.eo().zooms,l=0<s.opacity;if("AMap.IndoorMap"===i.CLASS_NAME&&(l=0<=s.opacity),s.visible&&l&&_t.Util.dS(e,h)||"AMap.CustomLayer"===i.CLASS_NAME){var f=i.ho();if(f){i.lo()||(o=!1);var u=t.uo.getData(n[r].co(),t.$n,this.context);u&&f.Kn(this.oo,u,t,s,this,n[r],u.fo)}}}!this.map.complete&&o&&(this.map.emit("complete"),this.map.complete=!0),this.map.getView().h_()||(this.map.getView().aD(),this.map.emit("viewchange",{zoom:t.$n.zoom,center:t.$n.center,pitch:t.$n.pitch,rotation:t.$n.rotation}))},ve.prototype.destroy=function(){this.oo.destroy(),this.po.destroy()},ve);function ve(t){var i=ce.call(this,t)||this;i.map=t,i.io=P.create("canvas",t.do,"amap-layer"),i.io.width=0,i.io.height=0;var e=_t._.getContext(i.io,!1);return(i.gl=e).getExtension("OES_standard_derivatives"),e.getExtension("OES_element_index_uint"),i.context=new vi(e),i.oo=new ne(i.context),i.z_=t.z_,i.R_=t.R_,i.po=new _t.vo,i.no=new he,i}var me,ye=(me=_t.Event,_t.Ei(xe,me),xe.prototype.lo=function(){return this.Oo},xe.prototype.destroy=function(){},xe.prototype.Fo=function(t){t&&t!==this.Oo&&!this.pS&&(this.pS=!0,this.emit("complete")),this.Oo=t},xe.prototype.Eo=function(){this.map.setNeedUpdate(!0)},xe);function xe(t,i,e,n){var o=me.call(this)||this;return o.map=e,o.To=n,o.Oo=!1,o.pS=!1,o.No=t.id,o.Wt=t.type,o.Be=t.tileUrl,t.url&&(o.$o=t.url),o}var ge,be=_t._.scale,_e=0,we=(ge=ye,_t.Ei(ke,ge),ke.prototype.oa=function(t,i,e,n){var o=this;this.aa=t,this.sa=[];for(var r=t.bounds,a=this.ra(t.optimalZoom),s=this.ha(r,a),h=[],l=t.optimalZoom,f=_t.map(s,function(t){var i=o.fa(t.x,t.z);return t.z+","+i+","+t.y}),u=[],c=[],d=0,p=this.bD;d<p.length;d++)for(var v=p[d],m=0;m<v.gD.length;m++){var y=v.gD[m];if(-1<f.indexOf(y)){Array.prototype.push.apply(u,v.gD);break}m===v.gD.length-1&&c.push(v)}for(var x=0,g=c;x<g.length;x++){var b=g[x];b.wD&&b.wD.cancel();var _=this.bD.indexOf(b);this.bD.splice(_,1),delete this._D[b.id];for(var w=0,k=b.gD;w<k.length;w++){var M=k[w];(z=this.ua.xf(M))&&z.status!==_t.Mo.LOADED&&this.ua.ea(z)}}var S=[];for(m=0;m<s.length;m++){var z,R=s[m],C=new _t.ca(R.z,this.fa(R.x,R.z),R.y),A=new _t.ca(R.z,R.x,R.y),I=_t.Util.kD(C.key,l);if(z=this.ua.ta(C,!0)){var L=this.ua.MD(z,I);L?(z.tag=I,S.push(R.key+","+_t.Util.SD(L))):z.status===_t.Mo.LOADED?this.sa.push(A):z.status!==_t.Mo.LOADING&&(z.tag=I,S.push(R.key+","+_t.Util.SD(L)))}else{var $=new _t.pa(C);$.status=_t.Mo.LOADING,this.ua.Jo($),$.tag=I,S.push($.zo.key+","+_t.Util.SD(I))}(!z||z&&z.status!==_t.Mo.LOADED)&&h.push(R)}if(this.da(t,this.sa,h,n),this.zD(S,t,a,n,e),n.showLabel&&0<S.length){var T=this.cP(),D={};T&&(D=T.ro().vS),D=_t.Ln(_t.Ln({},D),{buildingColor:_t.Ln({},n.getBuildingColor())}),this.map.gn.RD({url:this.AD(),optimalZoom:t.optimalZoom,projectionId:t.projectionId,mS:D,viewMode:t.viewMode,showBuildingBlock:this.map.yS(),CD:S,ZL:t.zoom})}},ke.prototype.getData=function(i){var e=this,t=i.bounds,n=this.ra(i.optimalZoom),o=this.ha(t,n),r=[],a={};14===n&&(a=this.ha(t,15,!0));var s=this.map.qF();if(this.ua.QF(s),this.sa.sort(function(t){return e.ra(i.optimalZoom)===t.z?1:-1}),0<this.sa.length)for(var h=0;h<this.sa.length;h++){var l=this.sa[h],f=this.ua.ta(l,!0),u=0,c=0,d=[0,0],p=i.centerCoord;if(f){var v=_t.lcs.getLocalByCoord([p[0],p[1]]);if(i.optimalZoom>=_t.Ra){var m=_t.lcs.getSize();u=f.Ma.x-v.x,c=f.Ma.y-v.y,0!==u&&(u*=m[0],d[0]=u),0!==c&&(c*=m[1],d[1]=c),i.optimalZoom>=_t.Ra&&_t.za>=f.zo.z&&(d[0]=-v.center[0],d[1]=-v.center[1])}else i.optimalZoom<_t.Ra&&_t.za<f.zo.z&&(d[0]=v.center[0],d[1]=v.center[1])}else{var y=new _t.ca(l.z,this.fa(l.x,l.z),l.y),x=this.ua.ta(y,!0);if(x){if(f=new _t.pa(l),m=1<<l.z,l.x<0){var g=Math.floor(l.x/m);d[0]+=20037508.342789244*g*2}else l.x>=m&&(g=Math.floor(l.x/m),d[0]+=20037508.342789244*g*2);var b=x.tag;f.Ro=x.Ro,f.ID(x),f.Sa=d,f.status=x.status,f.tag=b}}f&&(f.stamp=s,f.Sa=d,r.push(f))}var _=i.optimalZoom,w=_t.every(o,function(a){return _t.some(r,function(t){var i=t.zo.key,e=t.zo.z,n=_t.Util.VF(e,_),o=t.tag,r=_t.Util.LD(o,n);return i===a.key&&r})});this.Fo(w);var k=_t.every(o,function(t){return _t.some(r,function(t){return _t.every(t.data,function(t){return t&&t.labels})})});return w&&(this.a_=!0),{s_:this.a_,fo:!!w&&!!k,tiles:r,Ca:a}},ke.prototype.dynamicTextVerticeLoaded=function(t){var i=t.data;if(i instanceof _t.ca){var e=this.ua.ta(i);if(!e)return;return e.data||e.xa({},t.tag),void e.rO({},t.tag)}var n=i[Object.keys(i)[0]],o=this.ua.ta(n.zo,!0);if(o){o.data||o.xa({},t.tag);var r={};for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];r[a]=new _t.La(s.zo,s)}o.rO({labels:r},t.tag),this.Eo()}},ke.prototype.dynamicTextVerticeLoadedByTile=function(t){for(var i=0,e=t.data;i<e.length;i++){var n=e[i];this.dynamicTextVerticeLoaded({data:n.data,tag:n.tag})}},ke.prototype.ra=function(t){return{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:10,11:10,12:10,13:12,14:12,15:14,16:14,17:14,18:14,19:14,20:14,21:14,22:14}[t]},ke.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==_t.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[]},ke.prototype.reload=function(){this.ua.forEach(function(t){t.status!==_t.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.la=[]},ke.prototype.Aa=function(t){if(t.zo){var i=this.ua.ta(t.zo);i&&i.rO({Ta:!0},t.tag)}},ke.prototype.Ks=function(t){t=t||(_t._.$e?50:200),this.ua.Xo(t)},ke.prototype.Ia=function(){this.map.gn.on("dynamicTextVerticeLoaded",this.dynamicTextVerticeLoaded.bind(this)),this.map.gn.on("dynamicTextVerticeLoadedByTile",this.dynamicTextVerticeLoadedByTile.bind(this)),this.map.on("tileSdfInfoFinished",this.Aa.bind(this))},ke.prototype.zD=function(o,r,a,s,f){var u=this,t=this.cP(),h={};t&&(h=t.ro().vS),h=_t.Ln(_t.Ln({},h),{buildingColor:_t.Ln({},s.getBuildingColor())});for(var i=function(t){var i=o.slice(t,t+5),l=_e++,e=c.map.gn.va({url:c.AD(),zoom:a,optimalZoom:r.optimalZoom,projectionId:r.projectionId,mS:h,viewMode:r.viewMode,showBuildingBlock:c.map.yS(),ya:i,ZL:r.zoom},function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i],o=n&&u.ua.ta(n.zo);if(o){delete o.request,o.xa(n.ba,n.tag),o.status=_t.Mo.LOADED;var r=_t.wa.ga(o.zo.x,o.zo.y,o.zo.z,"EPSG:3857"),a=_t.lcs.getLocalByCoord([r[0],r[1]]);o.Ma=a,o.Ro=r}}var s=u._D[l];if(delete u._D[l],s){var h=u.bD.indexOf(s);u.bD.splice(h,1)}f()},s.showLabel);if(e){var n={wD:e,gD:_t.map(i,function(t){return t.slice(0,-2)}),id:l};c.bD.push(n),c._D[l]=n}},c=this,e=0;e<o.length;e+=5)i(e)},ke.prototype.cP=function(){for(var t,i=this.map.getLayers(),e=0;e<i.length;e++)if("AMap.Buildings"===(n=i[e]).CLASS_NAME&&!n.ro().u$){t=n;break}if(!t)for(e=0;e<i.length;e++){var n;if("AMap.Buildings"===(n=i[e]).CLASS_NAME){t=n;break}}return t},ke.prototype.ma=function(t,i){var e=new RegExp(/\{(\w|\,)+\}/g);if(e.test(this.Be)){var n=this.Be.match(e)[0].replace(/[\{|\}]/g,"").split(",");return this.Be.replace(e,n[(t+i)%4])}return this.Be},ke.prototype.AD=function(){var t=new RegExp(/\{(\w|\,)+\}/g),i=this.Be.match(t)[0].replace(/[\{|\}]/g,"").split(","),e=i.length,n=this.Be.replace(t,i[this.$D%e]);return this.$D=(this.$D+1)%e,n},ke.prototype.Da=function(t){if(t.length){var a=this.Pa.z,s=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2;t.sort(function(t,i){var e=(t.x<<a-t.z)-s,n=(t.y<<a-t.z)-h,o=(i.x<<a-i.z)-s,r=(i.y<<a-i.z)-h;return e*e+n*n<=o*o+r*r?-1:1})}},ke.prototype.Ga=function(t,i){var e=Math.pow(2,i),n=360/e,o=180/e;return[Math.floor(t[0]/n)+e/2,e/2-Math.ceil(t[1]/o)]},ke.prototype.ha=function(t,i,e){void 0===e&&(e=!1);var n=[t[0],t[3]],o=[t[2],t[1]],r=this.Ga(n,i),a=this.Ga(o,i),s=r[0],h=r[1],l=a[0],f=a[1];if(e)return{ja:s,Fa:h,Oa:l,Ea:f,z:i};this.Pa={ja:s,Fa:h,Oa:l,Ea:f,z:i};for(var u=[],c=s;c<=l;c+=1)for(var d=h;d<=f;d+=1)u.push(new _t.ca(i,c,d));return this.Da(u),u},ke.prototype.da=function(t,i,e,n){var o,r,a,s=[3,6,8,10,12,14],h=this.ra(t.optimalZoom);if(this.Za){var l=Math.min(14,h+3);for(r=h+1;e.length&&r<=l;r+=1)if(-1!==s.indexOf(r)){var f=r-h,u=[];for(a=[],o=e.length-1;0<=o;--o)for(var c=e[o].x<<f,d=e[o].y<<f,p=1<<f;0<=p;--p)for(var v=1<<f;0<=v;--v){var m=new _t.ca(r,this.fa(c+p,r),d+v),y=new _t.ca(r,c+p,d+v);(M=this.ua.ta(m,!0))&&M.status===_t.Mo.LOADED?a.push(y):u.push(y)}a.length&&i.push.apply(i,a),e=u}}if(this.qa){var x=this.xt[0];for(r=h-1;e.length&&x<=r;--r)if(-1!==s.indexOf(r)){a=[],u=[];var g={};for(o=e.length-1;0<=o;--o){var b=e[o],_=(f=r,b.z-f),w=(p=b.x>>_,v=b.y>>_,(m=new _t.ca(f,p,v)).key);if(!g[w]){var k=new _t.ca(f,this.fa(p,f),v),M=(y=new _t.ca(f,p,v),this.ua.ta(k,!0));g[w]=!0,M&&M.status===_t.Mo.LOADED?a.push(y):u.push(y)}}a.length&&i.push.apply(i,a),e=u}}return i},ke.prototype.fa=function(t,i){for(var e=1<<(i=i||this.aa.optimalZoom);t<0||e<=t;)t=e<=t?t-e:t<0?e+t:t;return t},ke.prototype.sD=function(){var o=this,r=this.hD,a=this.z_;a.loadImages(r,{type:"icon",cb:function(){for(var t=[],i=0;i<r.length;i++){var e=r[i],n=a.getImage(e);t.push({img:n.img,name:e,hv:i})}o.map.so.sv(t)}})},ke);function ke(t,i,e,n){var o=ge.call(this,t,i,e,n)||this;o.Ya=!1,o.Va=!1,o.xt=[2,22],o.sa=[],o.la=[],o.qa=!0,o.Za=!0,o.a_=!1,o.$D=0,o.bD=[],o._D={},o.hD=["https://vdata.amap.com/style_icon/2.0/icon-normal-big.png","https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],o.Xa=t.tileSize,o.Be=t.tileUrl;var r=_t._.$e?50:200;return o.ua=new _t.TD(r),e.gn.Ha({scale:be,showLabel:e.showLabel,DD:-1!==location.search.indexOf("forceAll")}),o.R_=e.R_,o.z_=e.z_,e.gn.Ja(AMap.getConfig().protocol),o.mapStyle=e.mapStyle,o.mapStyle.pn(function(){e.gn.Ka(o.mapStyle.vn)}),o.Ia(),o.sD(),o}function Me(){}var Se=(Me.prototype.Qa=function(t){for(var i=this.createEmpty(),e=0,n=t.length;e<n;e+=1)this.extendCoordinate(i,t[e]);return i},Me.prototype.ns=function(t,i,e){var n=Math.min.apply(null,t),o=Math.max.apply(null,t),r=Math.min.apply(null,i),a=Math.max.apply(null,i);return this.os(n,o,r,a,e)},Me.prototype.buffer=function(t,i){t[0]-=i,t[1]-=i,t[2]+=i,t[3]+=i},Me.prototype.clone=function(t){return t.slice()},Me.prototype.ss=function(t,i){return t[0]<=i[0]&&i[0]<=t[2]&&t[1]<=i[1]&&i[1]<=t[3]},Me.prototype.rs=function(t,i){return t[0]<=i[0]&&i[2]<=t[2]&&t[1]<=i[1]&&i[3]<=t[3]},Me.prototype.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]},Me.prototype.os=function(t,i,e,n,o){return void 0!==o?(o[0]=t,o[2]=i,o[1]=e,o[3]=n,o):[t,e,i,n]},Me.prototype.empty=function(t){return t[0]=t[1]=1/0,t[2]=t[3]=-1/0,t},Me.prototype.equals=function(t,i){return t[0]===i[0]&&t[2]===i[2]&&t[1]===i[1]&&t[3]===i[3]},Me.prototype.extend=function(t,i){i[0]<t[0]&&(t[0]=i[0]),i[2]>t[2]&&(t[2]=i[2]),i[1]<t[1]&&(t[1]=i[1]),i[3]>t[3]&&(t[3]=i[3])},Me.prototype.extendCoordinate=function(t,i){i[0]<t[0]&&(t[0]=i[0]),i[0]>t[2]&&(t[2]=i[0]),i[1]<t[1]&&(t[1]=i[1]),i[1]>t[3]&&(t[3]=i[1])},Me.prototype.hs=function(t){return[t[0],t[1]]},Me.prototype.ls=function(t){return[t[2],t[1]]},Me.prototype.getCenter=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},Me.prototype.us=function(t,i,e,n,o){var r,a,s,h=i*n[0]/2,l=i*n[1]/2,f=Math.cos(e),u=Math.sin(e),c=[-h,-h,h,h],d=[-l,l,-l,l];for(r=0;r<4;r+=1)a=c[r],s=d[r],c[r]=t[0]+a*f-s*u,d[r]=t[1]+a*u+s*f;return this.ns(c,d,o)},Me.prototype.getHeight=function(t){return t[3]-t[1]},Me.prototype.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},Me.prototype.cs=function(t){return[t[0],t[3]]},Me.prototype.fs=function(t){return[t[2],t[3]]},Me.prototype.getWidth=function(t){return t[2]-t[0]},Me.prototype.intersects=function(t,i){return t[0]<=i[2]&&t[2]>=i[0]&&t[1]<=i[3]&&t[3]>=i[1]},Me.prototype.isEmpty=function(t){return t[2]<t[0]||t[3]<t[1]},Me.prototype.normalize=function(t,i){return[(i[0]-t[0])/(t[2]-t[0]),(i[1]-t[1])/(t[3]-t[1])]},Me.prototype.ps=function(t,i){var e=(t[2]-t[0])/2*(i-1),n=(t[3]-t[1])/2*(i-1);t[0]-=e,t[2]+=e,t[1]-=n,t[3]+=n},Me.prototype.touches=function(t,i){return this.intersects(t,i)&&(t[0]===i[2]||t[2]===i[0]||t[1]===i[3]||t[3]===i[1])},Me.prototype.transform=function(t,i,e){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];i(n,n,2);var o=[n[0],n[2],n[4],n[6]],r=[n[1],n[3],n[5],n[7]];return this.ns(o,r,e)},new Me),ze=(Re.from=function(t){for(var i=1/0,e=1/0,n=-1/0,o=-1/0,r=0,a=t;r<a.length;r++){var s=a[r];i=Math.min(i,s.southWest.KL),e=Math.min(e,s.southWest.kT),n=Math.max(n,s.northEast.KL),o=Math.max(o,s.northEast.kT)}return new Re(new _t.LngLat(i,e),new _t.LngLat(n,o))},Re.xS=function(t){if(t){var i=_t.jsonLngLatData(t);return new Re(Se.Qa(i))}},Re.bS=function(t){if(t&&t.length){for(var i,e=0,n=_t.jsonLngLatData(t);e<n.length;e++){var o=n[e];if(i){var r=Re.ds(o);r&&i.union(r)}else i=Re.xS(o)}return i}},Re.ds=function(t){if(t){var i=_t.jsonLngLatData(t);return _t.ys(i)?Re.xS(i):Re.xS(i[0])}},Re.ms=function(t){if(t&&t.length){for(var i,e=0,n=_t.jsonLngLatData(t);e<n.length;e++){var o=n[e];if(i){var r=Re.ds(o);r&&i.union(r)}else i=Re.ds(o)}return i}},Re.prototype.getSouthWest=function(){return this.southWest},Re.prototype.getNorthEast=function(){return this.northEast},Re.prototype.getNorthWest=function(){return new _t.LngLat(this.southWest.KL,this.northEast.kT,!0)},Re.prototype.getSouthEast=function(){return new _t.LngLat(this.northEast.KL,this.southWest.kT,!0)},Re.prototype.contains=function(t){var i=this.southWest,e=this.northEast;if(_t.xs(t))return!1;t=_t.parseLngLatData(t);var n=i.KL,o=e.KL;return o<n&&(o+=360),t.KL>=n&&t.kT>=i.kT&&t.KL<=o&&t.kT<=e.kT},Re.prototype.intersects=function(t){var i=this.southWest,e=this.northEast,n=t.southWest,o=t.northEast,r=o.kT>=i.kT&&n.kT<=e.kT,a=o.KL>=i.KL&&n.KL<=e.KL;return r&&a},Re.prototype.getCenter=function(){var t=this.southWest.KL>this.northEast.KL?(this.southWest.KL+this.northEast.KL+360)/2%360:(this.southWest.KL+this.northEast.KL)/2,i=(this.southWest.kT+this.northEast.kT)/2;return new _t.LngLat(t,i)},Re.prototype.extend=function(t){return this.southWest.setLng(Math.min(this.southWest.KL,t.KL)),this.southWest.setLat(Math.min(this.southWest.kT,t.kT)),this.northEast.setLng(Math.max(this.northEast.KL,t.KL)),this.northEast.setLat(Math.max(this.northEast.kT,t.kT)),this},Re.prototype.union=function(t){return this.extend(t.southWest).extend(t.northEast)},Re.prototype.toString=function(){return this.southWest.toString()+";"+this.northEast.toString()},Re.prototype.toJSON=function(){return[this.southWest.lng,this.southWest.lat,this.northEast.lng,this.northEast.lat]},Re.prototype.getWidth=function(){return Math.abs(this.northEast.lng-this.southWest.lng)},Re.prototype.getHeight=function(){return Math.abs(this.southWest.lat-this.northEast.lat)},Re.prototype.clone=function(){return Re.from([this])},Re);function Re(){for(var t,i,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.className="AMap.Bounds";var o="function"==typeof Float64Array;if(1===arguments.length&&(arguments[0]instanceof Array||o&&arguments[0]instanceof Float64Array))t=new _t.LngLat(arguments[0][0],arguments[0][1],!0),i=new _t.LngLat(arguments[0][2],arguments[0][3],!0);else if(2===arguments.length)t=_t.parseLngLatData(arguments[0]),i=_t.parseLngLatData(arguments[1]),t=new _t.LngLat(t.KL,t.kT),i=new _t.LngLat(i.KL,i.kT);else if(4===arguments.length)t=new _t.LngLat(arguments[0],arguments[1]),i=new _t.LngLat(arguments[2],arguments[3]);else{if(0!==arguments.length)throw Error("Invalid Object: Bounds("+arguments+")");t=new _t.LngLat(-180,-90),i=new _t.LngLat(180,90)}if(t.KL>i.KL||t.kT>i.kT){console.warn("error bounds, please use southWest and northEast");var r=Math.max(t.KL,i.KL),a=Math.min(t.KL,i.KL),s=Math.max(t.kT,i.kT),h=Math.min(t.kT,i.kT);t=new _t.LngLat(a,h),i=new _t.LngLat(r,s)}this.southWest=t,this.northEast=i}var Ce,Ae=(Ce=ye,_t.Ei(Ie,Ce),Ie.prototype.oa=function(t,r,a){var s=this;if(this.ze=r,!this.Oo||this.io){var h=t.projectionId,i=new Image;i.crossOrigin="",i.onload=function(t){if(!s.Oo||s.io){s.Fo(!0);var i=s.gs.getBounds();i instanceof ze&&(i=i.toJSON());var e=_t.at.getProjection(h),n=e.project(i[0],i[1]),o=e.project(i[2],i[3]);s.ws=[n[0],n[1],o[0],o[1]],r&&(s._s=r.createTexture(t.target,{}),s._s.bind(r.gl.CLAMP_TO_EDGE,r.gl.LINEAR,r.gl.LINEAR),s.ks=r.fe(new Float32Array([s.ws[0],s.ws[1],0,1,s.ws[2],s.ws[1],1,1,s.ws[0],s.ws[3],0,0,s.ws[2],s.ws[1],1,1,s.ws[2],s.ws[3],1,0,s.ws[0],s.ws[3],0,0]),16)),a()}},this.io?i.src=this.io.toDataURL():i.src=this.gs.getImageUrl(),this.Rs=i}},Ie.prototype.getData=function(t){if(this.Oo){var i=this.gs.getBounds();i instanceof ze&&(i=i.toJSON());var e=_t.lcs.getLocalByCoord([t.centerCoord[0],t.centerCoord[1]]),n=_t.at.getProjection(t.projectionId),o=n.project(i[0],i[1]),r=n.project(i[2],i[3]),a=[0,0,0,0];if(t.optimalZoom>=_t.Ra){var s=_t.lcs.getLocalByCoord([o[0],o[1]]),h=_t.lcs.getLocalByCoord([r[0],r[1]]),l=_t.lcs.getSize();a=[s.x-e.x,s.y-e.y,h.x-e.x,h.y-e.y];for(var f=0;f<a.length;f++)0!==a[f]&&(a[f]*=l[0]);a=[a[0]-s.center[0],a[1]-s.center[1],a[2]-h.center[0],a[3]-h.center[1]]}return this.ze&&(this.ks=this.ze.fe(new Float32Array([o[0]+a[0],o[1]+a[1],0,1,r[0]+a[2],o[1]+a[1],1,1,o[0]+a[0],r[1]+a[3],0,0,r[0]+a[2],o[1]+a[1],1,1,r[0]+a[2],r[1]+a[3],1,0,o[0]+a[0],r[1]+a[3],0,0]),16)),{Ro:this.ws,image:this.Rs,qi:this._s,zs:this.ks,Sa:[0,0]}}},Ie);function Ie(t,i,e,n){var o=Ce.call(this,t,i,e,n)||this;return o.gs=n,o.io=n.canvas,o}var Le,$e=(Le=ye,_t.Ei(Te,Le),Te.prototype.add=function(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),Object.keys(t).length&&(this.Ls=t,this.As(i,e))},Te.prototype.remove=function(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),this.Ls=t,this.As(i,e)},Te.prototype.update=function(t,i){void 0===t&&(t={}),this.As(t,i)},Te.prototype.clear=function(){this.Ls={},this.Ts=[],this.gS=null},Te.prototype.getData=function(){return this.gS},Te.prototype.Ds=function(t){return this.Ls[t]||null},Te.prototype.zL=function(t){return this.CL&&this.CL.zL(t)},Te.prototype.oa=function(t,i,e){this.Fo(!0)},Te.prototype.As=function(i,e){var n=this;void 0===i&&(i={});var o=this.R_,t=this.z_,r=this.Ls;for(var a in this.Ts=[],r)if(r.hasOwnProperty(a)){var s=r[a],h=this.Ps(s);this.Ts.push(h)}if(!this.Ts.length)return this.clear(),void e();var l=this.Ts[0].data.position;this.Os(l),t.loadImages(Object.keys(this.Fs),{cb:function(){if(o){var t=Object.keys(n.Es);o.getData(t,function(t){n.qL(i,e)})}else n.qL(i,e)}})},Te.prototype.qL=function(t,i){var e=this;void 0===t&&(t={});var n=this.R_,o=this.z_,r=this.CL=new _t.$s({R_:n,z_:o}),a=this.Us,s={from:"labelsLayer",zoom:this._map.getView().getOptions().zoom,center:a.center};_t.assign(s,t),r.Ns(this.Ts,function(t){e._map&&e._map.isDOMMode()?e.gS=t:e.gS=new _t.La(t.zo,t),e.gS.zo=a,i&&i(t)},s)},Te.prototype.Ps=function(t){if(!t||"AMap.LabelMarker"===t.type){var i=this._map.getProjection();this.AL={};var e=t.getOptions(),n=t.getPosition();if(!n)return null;var o=[_t.tc.Mp,_t.tc.Rp],r=e.zooms,a=void 0===r?o:r,s=e.opacity,h=e.rank,l=e.icon,f=e.text,u=e.zIndex,c=e.visible,d=void 0===c||c,p=_t.Bs(n)?n.toJSON():n,v=f&&f.content||"",m=f&&f.style;l&&l.image&&(this.Fs[l.image]=1),f&&f.content&&this.Ws(f.content);var y,x,g=l&&l.image?[{type:"image",image:l.image||"",size:l.size,clipOrigin:l.clipOrigin,clipSize:l.clipSize,anchor:l.anchor,retina:l.retina}]:{},b=0,_=0;m&&(b=!m.strokeWidth&&m.strokeColor?1:m.strokeWidth||0,y=!m.strokeColor&&m.strokeWidth?"#fcfcfc":m.strokeColor,_=!m.borderWidth&&m.borderColor?1:m.borderWidth||0,x=!m.borderColor&&m.strokeWidth?"#ccc":m.borderColor);var w=m?{fontFamily:m.fontFamily,fontSize:m.fontSize,fontWeight:m.fontWeight,fillColor:m.fillColor,strokeColor:y,strokeWidth:b,borderColor:x,borderWidth:_,padding:this.Gs(m.padding||[3]),backgroundColor:m.backgroundColor,fold:m.fold}:{},k=_t.bf.Jj(a,f&&f.zooms||o),M=f&&v?{txt:f.content||"",direction:f.direction,offset:f.offset,zooms:k,style:w}:{},S=i.project(p[0],p[1]);return{data:{id:t.hS,name:v,txt:v,position:S,positionType:"lnglat",extData:{id:t.hS},rank:h,zooms:a},opts:{visible:d,opacity:s,zooms:a,zIndex:u,icon:g,text:M}}}},Te.prototype.Ws=function(t){void 0===t&&(t="");for(var i=0;i<t.length;i++)this.Es[t.substr(i,1)]=1},Te.prototype.Os=function(t){_t.Bs(t)?this.Us=_t.lcs.getLocalByCoord([t.KL,t.kT]):this.Us=_t.lcs.getLocalByCoord(t)},Te.prototype.Gs=function(t){if("string"==typeof t&&(t=(t=t.trim()).split(" ")),"[object Array]"!==Object.prototype.toString.apply(t))return[3,3,3,3];for(var i=t.length,e=0;e<i;e++){var n=t[e];n="string"==typeof n?parseInt(n,10):n,isNaN(n)?t[e]=3:t[e]=n}switch(i){case 0:t=[3,3,3,3];break;case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return t},Te);function Te(t,i,e,n){var o=Le.call(this,t,i,e,n)||this;o.Fs={},o.Es={},o.Ts=[],o.Ls={},o.AL={};var r=e.R_,a=e.z_;return o.R_=r,o.z_=a,o._map=e,o}var De,Fe=(De=ye,_t.Ei(Pe,De),Pe.prototype.setTileUrl=function(t){void 0===t&&(t=""),this.Be=t},Pe.prototype.oa=function(t,i,e,n){var a=this;this.aa=t,this.ze=i,this.Zs=[],this.sa=[];var o=t.projectionId,r=[],s=t.boundsCoord,h=t.optimalZoom,l=t.optimalResolution,f=this.ha(s,h,l);this.ua.forEach(function(t){var i=t.zo,e=!1;if(t.status!==_t.Mo.LOADED){for(var n=f.ja;n<=f.Oa;n+=1)for(var o=f.Fa;o<=f.Ea;o+=1){var r=a.fa(n,f.z);i.z===f.z&&i.y===o&&r===i.x&&(e=!0)}e||(t.data.src="",a.ua.ea(t))}});var u=this.qs(t,this.Zs,r);this.Ys(u,i,o,e),this.da(t,this.sa,r,n),this.sa=this.sa.concat(this.Zs)},Pe.prototype.getData=function(){var t=this.aa,i=[],e=this.map.qF();if(this.ua.QF(e),0<this.sa.length)for(var n=0;n<this.sa.length;n++){for(var o=this.sa[n],r=[],a=0;a<o.length;a++){var s=0,h=0,l=[0,0],f=t.centerCoord,u=this.ua.ta(o[a]),c=_t.lcs.getLocalByCoord([f[0],f[1]]);if(!u){var d=this.ua.ta(new _t.ca(o[a].z,this.fa(o[a].x,o[a].z),o[a].y));if(u=new _t.Vs(o[a]),d){var p=this.aa.projectionId,v=_t.at.getProjection(p).getResolution(u.zo.z),m=u.zo.x*this.Xa*v,y=m+this.Xa*v,x=u.zo.y*this.Xa*v,g=x+this.Xa*v,b=_t.V[p].Xs(m,x),_=_t.V[p].Xs(y,g);m=b[0],y=_[0],x=_[1],g=b[1],u.Ro=[m,x,y,g];var w=_t.lcs.getLocalByCoord([u.Ro[0],u.Ro[1]]);this.aa.optimalZoom>=_t.Ra&&(u.Ro[0]-=w.center[0],u.Ro[1]-=w.center[1],u.Ro[2]-=w.center[0],u.Ro[3]-=w.center[1]),this.ze?u.data={Hs:w,qi:d.data.qi,Js:d.data.Js,zs:this.ze.fe(new Float32Array([u.Ro[0],u.Ro[1],0,1,u.Ro[2],u.Ro[1],1,1,u.Ro[0],u.Ro[3],0,0,u.Ro[2],u.Ro[1],1,1,u.Ro[2],u.Ro[3],1,0,u.Ro[0],u.Ro[3],0,0]),16)}:(u.data=d.data,u.data.Hs=w),u.data&&(u.status=_t.Mo.LOADED)}}if(u.data){if(t.optimalZoom>=_t.Ra&&u.data.Hs){var k=_t.lcs.getSize();s=u.data.Hs.x-c.x,h=u.data.Hs.y-c.y,0!==s&&(s*=k[0],l[0]=s),0!==h&&(h*=k[1],l[1]=h),t.optimalZoom>=_t.Ra&&_t.za>=u.zo.z&&(l[0]=-c.center[0],l[1]=-c.center[1])}else t.optimalZoom<_t.Ra&&_t.za<u.zo.z&&(l[0]=c.center[0],l[1]=c.center[1]);u.data.Sa=l,u.stamp=e,r.push(u)}}i.push(r)}return{tiles:i}},Pe.prototype.Ks=function(t){t=t||(_t._.$e?50:200),this.ua.Xo(t)},Pe.prototype.reload=function(){this.ua.forEach(function(t){t.status!==_t.Mo.LOADED&&t.request&&t.request.cancel&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.pS=!1,this.Fo(!1)},Pe.prototype.wS=function(){return this.ua},Pe.prototype.Da=function(t,i){if(t.length){var a=this.Pa.z,s=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2;t.sort(function(t,i){var e=(t.x<<a-t.z)-s,n=(t.y<<a-t.z)-h,o=(i.x<<a-i.z)-s,r=(i.y<<a-i.z)-h;return e*e+n*n<=o*o+r*r?-1:1})}},Pe.prototype.ha=function(t,i,e){var n=this.aa.projectionId,o=_t.at.getProjection(n);this.KF()&&(i++,e=o.getResolution(i)),i<this.Qs[0]?(i=this.Qs[0],e=o.getResolution(i)):i>this.Qs[1]&&(i=this.Qs[1],e=o.getResolution(i));var r=this.Xa,a=20037508.342789244,s=t[0]+a,h=-(t[3]-a),l=s/e,f=(t[2]+a)/e,u=h/e,c=-(t[1]-a)/e;return{Oa:Math.floor(f/r),Ea:Math.min((1<<i)-1,Math.floor(c/r)),ja:Math.floor(l/r),Fa:Math.max(Math.floor(u/r),0),z:i}},Pe.prototype.qs=function(t,i,e){this.Oo=!1;var n=t.optimalZoom,o=t.optimalResolution,r=t.boundsCoord,a=_t.at.getProjection(t.projectionId),s=this.ha(r,n,o);this.KF()&&n++,n<this.Qs[0]?n=this.Qs[0]:n>this.Qs[1]&&(n=this.Qs[1]),o=a.getResolution(n);for(var h=[],l=[],f=!0,u=s,c=u.ja;c<=u.Oa;c+=1)for(var d=u.Fa;d<=u.Ea;d+=1){var p=new _t.ca(n,this.fa(c,n),d),v=this.ua.ta(p);this.PF(p,t.projectionId);var m=new _t.ca(n,c,d);v?v.status===_t.Mo.LOADED?l.push(m):(f=!1,e.push(m)):(f=!1,h.push(p),e.push(m))}return l.length&&i.push(l),this.Pa=s,this.Fo(f),h},Pe.prototype.da=function(t,i,e,n){var o,r,a,s=t.optimalZoom;if(this.Za="overlay"!==this.To.type,this.qa="overlay"!==this.To.type,this.Za){var h=Math.min(this.xt[1],s+2);for(r=s+1;e.length&&r<=h;r+=1){var l=[];a=[];var f=r;for(o=e.length-1;0<=o;--o)for(var u=e[o],c=u.x<<1,d=u.y<<1,p=1;0<=p;--p)for(var v=1;0<=v;--v){var m=new _t.ca(f,this.fa(c+p,f),d+v),y=this.ua.ta(m),x=new _t.ca(f,c+p,d+v);y&&y.status===_t.Mo.LOADED?a.push(x):l.push(x)}a.length&&i.push(a),e=l}}if(this.qa){var g=this.xt[0];for(r=s-1;e.length&&g<=r;--r){a=[],l=[];var b={};for(o=e.length-1;0<=o;--o){var _=e[o],w=(f=r,_.z-f),k=(p=_.x>>w,v=_.y>>w,(m=new _t.ca(f,this.fa(p,f),v)).key);b[k]||(y=this.ua.ta(m),b[k]=!0,y&&y.status===_t.Mo.LOADED?a.push(new _t.ca(f,p,v)):l.push(new _t.ca(f,p,v)))}a.length&&i.push(a),e=l}}return i},Pe.prototype.ma=function(){var t=new RegExp(/\{(\w|\,)+\}/g);if(t.test(this.Be)){var i=this.Be.match(t)[0].replace(/[\{|\}]/g,"").split(",");return this.tr++,i&&this.tr>=i.length&&(this.tr=0),this.Be.replace(t,i[this.tr])}return this.Be},Pe.prototype.Ys=function(v,m,y,x){var g;if(!(this.aa.optimalZoom<this.xt[0]||this.aa.optimalZoom>this.xt[1])){this.Da(v);for(var t=function(t,i){var e=b.To.eo(),n=v[t],o=b.ma().replace("[z]",n.z+"").replace("[x]",n.x+"").replace("[y]",n.y+""),s=new _t.Vs(n);b.ua.Qo(s),e.getTileUrl&&(o=e.getTileUrl(n.x,n.y,n.z));var r=_t.at.getProjection(y).getResolution(n.z),a=n.x*b.Xa*r,h=a+b.Xa*r,l=n.y*b.Xa*r,f=l+b.Xa*r,u=_t.V[y].Xs(a,l),c=_t.V[y].Xs(h,f);if(a=u[0],h=c[0],l=c[1],f=u[1],s.Ro=[a,l,h,f],s.status=_t.Mo.LOADING,"AMap.TileLayer.Flexible"===b.To.CLASS_NAME||"AMap.TileLayer.WMTS"===b.To.CLASS_NAME||"AMap.TileLayer.WMS"===b.To.CLASS_NAME)e.createTile(n.x,n.y,n.z,function(t){m?p(t):(s.data=t,s.status=_t.Mo.LOADED)}.bind(b),function(){});else{var d=new Image;"w"===(null===(g=b.map)||void 0===g?void 0:g.baseRender)&&(d.crossOrigin="anonymous"),d.onload=p.bind(b),d.src=o,(s.data=d).addEventListener("dragstart",function(t){return t.preventDefault(),!1})}function p(t){if(m){var i=m.createTexture(t.target||t,{Zi:!0});i.bind(m.gl.CLAMP_TO_EDGE,m.gl.LINEAR,m.gl.LINEAR);var e=_t.lcs.getLocalByCoord([s.Ro[0],s.Ro[1]]);s.zo.z>_t.za&&(s.Ro[0]-=e.center[0],s.Ro[1]-=e.center[1],s.Ro[2]-=e.center[0],s.Ro[3]-=e.center[1]);var n=m.fe(new Float32Array([s.Ro[0],s.Ro[1],0,1,s.Ro[2],s.Ro[1],1,1,s.Ro[0],s.Ro[3],0,0,s.Ro[2],s.Ro[1],1,1,s.Ro[2],s.Ro[3],1,0,s.Ro[0],s.Ro[3],0,0]),16),o=document.createElement("canvas"),r=o.getContext("2d");r&&(o.height=o.width=256,o.style.height="512px",o.style.width="512px",r.beginPath(),r.moveTo(0,0),r.lineTo(256,0),r.lineTo(256,256),r.lineTo(0,256),r.lineTo(0,0),r.lineWidth=1,r.font="25px Verdana",r.fillStyle="#ff0000",r.strokeStyle="#FF0000",r.strokeRect(0,0,256,256),r.fillText(s.zo.z+"/"+s.zo.x+"/"+s.zo.y,50,50),r.stroke());var a=m.createTexture(o,{Zi:!0});a.bind(m.gl.MIRRORED_REPEAT,m.gl.LINEAR,m.gl.LINEAR_MIPMAP_NEAREST),s.data={qi:i,zs:n,Js:a,Hs:e}}s.status=_t.Mo.LOADED,x()}},b=this,i=0,e=v.length;i<e;i+=1)t(i)}},Pe.prototype.fa=function(t,i){for(var e=1<<(i=i||this.aa.optimalZoom);t<0||e<=t;)t=e<=t?t-e:t<0?e+t:t;return t},Pe.prototype.PF=function(t,i){var e=_t.at.getProjection(i).getResolution(t.z),n=t.x*this.Xa*e,o=n+this.Xa*e,r=t.y*this.Xa*e,a=r+this.Xa*e,s=_t.V[i].Xs(n,r),h=_t.V[i].Xs(o,a);n=s[0],o=h[0],r=h[1],a=s[1];var l=this.map.getView().getStatus().boundsCoord;return!(o<l[0]&&a<l[1]||n>l[2]&&o>l[3])},Pe.prototype.KF=function(){var t=!1;return this.To.ro().xl&&(t=!0),"d"===_t._.baseRender&&_t._.Ue&&_t._.$e&&this.To.getTileUrl&&"http://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x=[x]&y=[y]&z=[z]"===this.To.getTileUrl()&&(t=!0),t},Pe);function Pe(t,i,e,n){var o=De.call(this,t,i,e,n)||this;return o.ua=new _t.OD(_t._.$e?200:400),o.Xa=256,o.sa=[],o.Zs=[],o.tr=-1,o.qa=!0,o.Za=!0,o.xt=t.zooms,o.Qs=t.dataZooms,o.Xa=t.tileSize,o.Be=t.tileUrl,o}var Oe,Be=(Oe=ye,_t.Ei(He,Oe),He.prototype.oa=function(t,i,e){this.ze=i,this.Oo||(this.Fo(!0),e())},He.prototype.getData=function(t){if(this.ir=t.bounds,this.Oo){var i=_t.lcs.getLocalByCoord([t.centerCoord[0],t.centerCoord[1]]),e=_t.at.getProjection(t.projectionId),n=e.project(this.ir[0],this.ir[1]),o=e.project(this.ir[2],this.ir[3]),r=[0,0,0,0];if(t.optimalZoom>=_t.Ra){var a=_t.lcs.getLocalByCoord([n[0],n[1]]),s=_t.lcs.getLocalByCoord([o[0],o[1]]),h=_t.lcs.getSize();r=[a.x-i.x,a.y-i.y,s.x-i.x,s.y-i.y];for(var l=0;l<r.length;l++)0!==r[l]&&(r[l]*=h[0]);r=[r[0]-a.center[0],r[1]-a.center[1],r[2]-s.center[0],r[3]-s.center[1]]}return this.ze&&(this._s=this.ze.createTexture(this.io,{Zi:!0}),this.ks=this.ze.fe(new Float32Array([n[0]+r[0],n[1]+r[1],0,1,o[0]+r[2],n[1]+r[1],1,1,n[0]+r[0],o[1]+r[3],0,0,o[0]+r[2],n[1]+r[1],1,1,o[0]+r[2],o[1]+r[3],1,0,n[0]+r[0],o[1]+r[3],0,0]),16)),{qi:this._s,zs:this.ks,Sa:[0,0]}}},He);function He(t,i,e,n){var o=Oe.call(this,t,i,e,n)||this;return o.ir=e.getView().getStatus().bounds,o.io=n.canvas,o}var je,Ee=(je=ye,_t.Ei(Ne,je),Ne.prototype.hasOverlay=function(t){return-1<this._overlays.indexOf(t)},Ne.prototype.getAllOverlays=function(){return this._overlays},Ne.prototype.add=function(t){this.hasOverlay(t)||_t.er(t)&&(this._overlays.push(t),t.Zx(this.map),t.init(),t._bindEvents&&t._bindEvents(),t._afterSetMap&&t._afterSetMap(this.map),this.map.setNeedUpdate(!0))},Ne.prototype.remove=function(t){this.hasOverlay(t)&&_t.er(t)&&(t._beforeRemoveMap&&t._beforeRemoveMap(),this.ar(t),this.map.setNeedUpdate(!0),t.Zx(null))},Ne.prototype.getData=function(){return this.nr(),{sr:this._overlays}},Ne.prototype.oa=function(){},Ne.prototype.destroy=function(){for(var t=0,i=this._overlays.slice(0);t<i.length;t++){var e=i[t];this.remove(e)}this._overlays=[]},Ne.prototype.rr=function(t){for(var i=t.lnglat,e=t.pixel,n=this._overlays.length-1;0<=n;n--){var o=this._overlays[n];if(!o._opts.noSelect&&o.visible)if(_t.sB(o)&&e){if(o.containsWithPixel(e))return o}else if(o.contains(i))return o}},Ne.prototype.nr=function(){this._overlays.sort(function(t,i){return t._opts.zIndex-i._opts.zIndex})},Ne.prototype.ar=function(t){var i=this._overlays.indexOf(t);-1<i&&this._overlays.splice(i,1)},Ne);function Ne(t,i,e,n){var o=je.call(this,t,i,e,n)||this;return o._overlays=[],o.Fo(!0),o}var We={_r:{},kr:{"pedestrian-polygon":{width:128,height:128,x:0,y:0,pixelRatio:2,visible:!0},"turning-circle-outline":{width:92,height:92,x:128,y:0,pixelRatio:2,visible:!0},"turning-circle":{width:84,height:84,x:0,y:128,pixelRatio:2,visible:!0},"us-interstate-truck-2":{width:40,height:80,x:84,y:128,pixelRatio:2,visible:!0},"us-interstate-truck-3":{width:52,height:80,x:124,y:128,pixelRatio:2,visible:!0},"us-highway-alternate-2":{width:40,height:76,x:176,y:128,pixelRatio:2,visible:!0},"us-highway-alternate-3":{width:52,height:76,x:216,y:128,pixelRatio:2,visible:!0},"us-highway-business-2":{width:40,height:76,x:268,y:128,pixelRatio:2,visible:!0},"us-highway-business-3":{width:52,height:76,x:308,y:128,pixelRatio:2,visible:!0},"us-highway-bypass-2":{width:40,height:76,x:360,y:128,pixelRatio:2,visible:!0},"us-highway-bypass-3":{width:52,height:76,x:400,y:128,pixelRatio:2,visible:!0},"us-highway-truck-2":{width:40,height:76,x:452,y:128,pixelRatio:2,visible:!0},"us-highway-truck-3":{width:52,height:76,x:220,y:0,pixelRatio:2,visible:!0},"pe-national-2":{width:36,height:52,x:272,y:0,pixelRatio:2,visible:!0},"pe-national-3":{width:44,height:52,x:308,y:0,pixelRatio:2,visible:!0},"za-provincial-2":{width:48,height:48,x:352,y:0,pixelRatio:2,visible:!0},"br-federal-3":{width:52,height:44,x:400,y:0,pixelRatio:2,visible:!0},"in-national-2":{width:32,height:44,x:452,y:0,pixelRatio:2,visible:!0},"in-national-3":{width:40,height:44,x:0,y:212,pixelRatio:2,visible:!0},"in-national-4":{width:48,height:44,x:40,y:212,pixelRatio:2,visible:!0},"in-state-2":{width:32,height:44,x:88,y:212,pixelRatio:2,visible:!0},"in-state-3":{width:40,height:44,x:120,y:212,pixelRatio:2,visible:!0},"mx-federal-2":{width:36,height:44,x:160,y:212,pixelRatio:2,visible:!0},"mx-federal-3":{width:46,height:44,x:196,y:212,pixelRatio:2,visible:!0},"mx-federal-4":{width:56,height:44,x:242,y:212,pixelRatio:2,visible:!0},"mx-state-2":{width:36,height:44,x:298,y:212,pixelRatio:2,visible:!0},"mx-state-3":{width:46,height:44,x:334,y:212,pixelRatio:2,visible:!0},"mx-state-4":{width:56,height:44,x:380,y:212,pixelRatio:2,visible:!0},"pe-regional-3":{width:46,height:44,x:436,y:212,pixelRatio:2,visible:!0},"pe-regional-4":{width:58,height:44,x:0,y:256,pixelRatio:2,visible:!0},"ro-communal-4":{width:56,height:44,x:58,y:256,pixelRatio:2,visible:!0},"ro-communal-5":{width:46,height:44,x:114,y:256,pixelRatio:2,visible:!0},"ro-communal-6":{width:68,height:44,x:160,y:256,pixelRatio:2,visible:!0},"us-interstate-2":{width:40,height:44,x:228,y:256,pixelRatio:2,visible:!0},"us-interstate-3":{width:52,height:44,x:268,y:256,pixelRatio:2,visible:!0},"us-interstate-4":{width:64,height:44,x:320,y:256,pixelRatio:2,visible:!0},"us-interstate-duplex-4":{width:64,height:44,x:384,y:256,pixelRatio:2,visible:!0},"us-interstate-duplex-5":{width:76,height:44,x:0,y:300,pixelRatio:2,visible:!0},"airfield-15":{width:42,height:42,x:448,y:256,pixelRatio:2,visible:!0},"airport-15":{width:42,height:42,x:76,y:300,pixelRatio:2,visible:!0},"alcohol-shop-15":{width:42,height:42,x:118,y:300,pixelRatio:2,visible:!0},"amusement-park-15":{width:42,height:42,x:160,y:300,pixelRatio:2,visible:!0},"aquarium-15":{width:42,height:42,x:202,y:300,pixelRatio:2,visible:!0},"art-gallery-15":{width:42,height:42,x:244,y:300,pixelRatio:2,visible:!0},"attraction-15":{width:42,height:42,x:286,y:300,pixelRatio:2,visible:!0},"bakery-15":{width:42,height:42,x:328,y:300,pixelRatio:2,visible:!0},"bank-15":{width:42,height:42,x:370,y:300,pixelRatio:2,visible:!0},"bar-15":{width:42,height:42,x:412,y:300,pixelRatio:2,visible:!0},"beer-15":{width:42,height:42,x:454,y:300,pixelRatio:2,visible:!0},"bicycle-15":{width:42,height:42,x:0,y:344,pixelRatio:2,visible:!0},"bicycle-share-15":{width:42,height:42,x:42,y:344,pixelRatio:2,visible:!0},"bus-15":{width:42,height:42,x:84,y:344,pixelRatio:2,visible:!0},"cafe-15":{width:42,height:42,x:126,y:344,pixelRatio:2,visible:!0},"campsite-15":{width:42,height:42,x:168,y:344,pixelRatio:2,visible:!0},"car-15":{width:42,height:42,x:210,y:344,pixelRatio:2,visible:!0},"castle-15":{width:42,height:42,x:252,y:344,pixelRatio:2,visible:!0},"cemetery-15":{width:42,height:42,x:294,y:344,pixelRatio:2,visible:!0},"cinema-15":{width:42,height:42,x:336,y:344,pixelRatio:2,visible:!0},"circle-15":{width:42,height:42,x:378,y:344,pixelRatio:2,visible:!0},"circle-stroked-15":{width:42,height:42,x:420,y:344,pixelRatio:2,visible:!0},"clothing-store-15":{width:42,height:42,x:462,y:344,pixelRatio:2,visible:!0},"college-15":{width:42,height:42,x:0,y:386,pixelRatio:2,visible:!0},"dentist-15":{width:42,height:42,x:42,y:386,pixelRatio:2,visible:!0},"doctor-15":{width:42,height:42,x:84,y:386,pixelRatio:2,visible:!0},"dog-park-15":{width:42,height:42,x:126,y:386,pixelRatio:2,visible:!0},"drinking-water-15":{width:42,height:42,x:168,y:386,pixelRatio:2,visible:!0},"embassy-15":{width:42,height:42,x:210,y:386,pixelRatio:2,visible:!0},"entrance-15":{width:42,height:42,x:252,y:386,pixelRatio:2,visible:!0},"fast-food-15":{width:42,height:42,x:294,y:386,pixelRatio:2,visible:!0},"ferry-15":{width:42,height:42,x:336,y:386,pixelRatio:2,visible:!0},"fire-station-15":{width:42,height:42,x:378,y:386,pixelRatio:2,visible:!0},"fuel-15":{width:42,height:42,x:420,y:386,pixelRatio:2,visible:!0},"garden-15":{width:42,height:42,x:462,y:386,pixelRatio:2,visible:!0},"golf-15":{width:42,height:42,x:0,y:428,pixelRatio:2,visible:!0},"grocery-15":{width:42,height:42,x:42,y:428,pixelRatio:2,visible:!0},"harbor-15":{width:42,height:42,x:84,y:428,pixelRatio:2,visible:!0},"heliport-15":{width:42,height:42,x:126,y:428,pixelRatio:2,visible:!0},"hospital-15":{width:42,height:42,x:168,y:428,pixelRatio:2,visible:!0},"ice-cream-15":{width:42,height:42,x:210,y:428,pixelRatio:2,visible:!0},"information-15":{width:42,height:42,x:252,y:428,pixelRatio:2,visible:!0},"laundry-15":{width:42,height:42,x:294,y:428,pixelRatio:2,visible:!0},"library-15":{width:42,height:42,x:336,y:428,pixelRatio:2,visible:!0},"lodging-15":{width:42,height:42,x:378,y:428,pixelRatio:2,visible:!0},"monument-15":{width:42,height:42,x:420,y:428,pixelRatio:2,visible:!0},"mountain-15":{width:42,height:42,x:462,y:428,pixelRatio:2,visible:!0},"museum-15":{width:42,height:42,x:0,y:470,pixelRatio:2,visible:!0},"music-15":{width:42,height:42,x:42,y:470,pixelRatio:2,visible:!0},"park-15":{width:42,height:42,x:84,y:470,pixelRatio:2,visible:!0},"pharmacy-15":{width:42,height:42,x:126,y:470,pixelRatio:2,visible:!0},"picnic-site-15":{width:42,height:42,x:168,y:470,pixelRatio:2,visible:!0},"place-of-worship-15":{width:42,height:42,x:210,y:470,pixelRatio:2,visible:!0},"playground-15":{width:42,height:42,x:252,y:470,pixelRatio:2,visible:!0},"police-15":{width:42,height:42,x:294,y:470,pixelRatio:2,visible:!0},"post-15":{width:42,height:42,x:336,y:470,pixelRatio:2,visible:!0},"prison-15":{width:42,height:42,x:378,y:470,pixelRatio:2,visible:!0},"rail-15":{width:42,height:42,x:420,y:470,pixelRatio:2,visible:!0},"rail-light-15":{width:42,height:42,x:462,y:470,pixelRatio:2,visible:!0},"rail-metro-15":{width:42,height:42,x:504,y:344,pixelRatio:2,visible:!0},"religious-christian-15":{width:42,height:42,x:546,y:344,pixelRatio:2,visible:!0},"religious-jewish-15":{width:42,height:42,x:588,y:344,pixelRatio:2,visible:!0},"religious-muslim-15":{width:42,height:42,x:630,y:344,pixelRatio:2,visible:!0},"restaurant-15":{width:42,height:42,x:672,y:344,pixelRatio:2,visible:!0},"rocket-15":{width:42,height:42,x:714,y:344,pixelRatio:2,visible:!0},"school-15":{width:42,height:42,x:756,y:344,pixelRatio:2,visible:!0},"shop-15":{width:42,height:42,x:798,y:344,pixelRatio:2,visible:!0},"square-15":{width:42,height:42,x:840,y:344,pixelRatio:2,visible:!0},"square-stroked-15":{width:42,height:42,x:882,y:344,pixelRatio:2,visible:!0},"stadium-15":{width:42,height:42,x:924,y:344,pixelRatio:2,visible:!0},"star-15":{width:42,height:42,x:966,y:344,pixelRatio:2,visible:!0},"star-stroked-15":{width:42,height:42,x:504,y:386,pixelRatio:2,visible:!0},"suitcase-15":{width:42,height:42,x:546,y:386,pixelRatio:2,visible:!0},"swimming-15":{width:42,height:42,x:588,y:386,pixelRatio:2,visible:!0},"theatre-15":{width:42,height:42,x:630,y:386,pixelRatio:2,visible:!0},"toilet-15":{width:42,height:42,x:672,y:386,pixelRatio:2,visible:!0},"town-hall-15":{width:42,height:42,x:714,y:386,pixelRatio:2,visible:!0},"triangle-15":{width:42,height:42,x:756,y:386,pixelRatio:2,visible:!0},"triangle-stroked-15":{width:42,height:42,x:798,y:386,pixelRatio:2,visible:!0},"veterinary-15":{width:42,height:42,x:840,y:386,pixelRatio:2,visible:!0},"volcano-15":{width:42,height:42,x:882,y:386,pixelRatio:2,visible:!0},"zoo-15":{width:42,height:42,x:924,y:386,pixelRatio:2,visible:!0},"br-state-2":{width:40,height:40,x:966,y:386,pixelRatio:2,visible:!0},"br-state-3":{width:56,height:40,x:504,y:428,pixelRatio:2,visible:!0},"hu-main-2":{width:40,height:40,x:560,y:428,pixelRatio:2,visible:!0},"hu-main-3":{width:52,height:40,x:600,y:428,pixelRatio:2,visible:!0},"hu-main-4":{width:64,height:40,x:652,y:428,pixelRatio:2,visible:!0},"hu-main-5":{width:76,height:40,x:716,y:428,pixelRatio:2,visible:!0},"hu-motorway-2":{width:40,height:40,x:792,y:428,pixelRatio:2,visible:!0},"hu-motorway-3":{width:52,height:40,x:832,y:428,pixelRatio:2,visible:!0},"nz-state-2":{width:36,height:40,x:884,y:428,pixelRatio:2,visible:!0},"nz-state-3":{width:46,height:40,x:920,y:428,pixelRatio:2,visible:!0},"ro-communal-2":{width:40,height:40,x:966,y:428,pixelRatio:2,visible:!0},"ro-communal-3":{width:52,height:40,x:504,y:470,pixelRatio:2,visible:!0},"ro-county-3":{width:52,height:40,x:556,y:470,pixelRatio:2,visible:!0},"ro-county-4":{width:64,height:40,x:608,y:470,pixelRatio:2,visible:!0},"ro-national-2":{width:40,height:40,x:672,y:470,pixelRatio:2,visible:!0},"ro-national-3":{width:52,height:40,x:712,y:470,pixelRatio:2,visible:!0},"us-highway-2":{width:40,height:40,x:764,y:470,pixelRatio:2,visible:!0},"us-highway-3":{width:52,height:40,x:804,y:470,pixelRatio:2,visible:!0},"us-highway-4":{width:64,height:40,x:856,y:470,pixelRatio:2,visible:!0},"us-highway-duplex-3":{width:52,height:40,x:920,y:470,pixelRatio:2,visible:!0},"us-highway-duplex-4":{width:64,height:40,x:482,y:212,pixelRatio:2,visible:!0},"us-highway-duplex-5":{width:76,height:40,x:546,y:212,pixelRatio:2,visible:!0},"us-interstate-business-2":{width:40,height:40,x:972,y:470,pixelRatio:2,visible:!0},"us-interstate-business-3":{width:52,height:40,x:622,y:212,pixelRatio:2,visible:!0},"us-state-2":{width:40,height:40,x:674,y:212,pixelRatio:2,visible:!0},"us-state-3":{width:52,height:40,x:714,y:212,pixelRatio:2,visible:!0},"us-state-4":{width:64,height:40,x:766,y:212,pixelRatio:2,visible:!0},"za-national-2":{width:40,height:40,x:830,y:212,pixelRatio:2,visible:!0},"za-national-3":{width:48,height:40,x:870,y:212,pixelRatio:2,visible:!0},"barcelona-metro":{width:38,height:38,x:918,y:212,pixelRatio:2,visible:!0},"boston-t":{width:38,height:38,x:956,y:212,pixelRatio:2,visible:!0},"de-s-bahn":{width:38,height:38,x:490,y:256,pixelRatio:2,visible:!0},"de-s-bahn.de-u-bahn":{width:70,height:38,x:528,y:256,pixelRatio:2,visible:!0},"delhi-metro":{width:38,height:38,x:598,y:256,pixelRatio:2,visible:!0},"kiev-metro":{width:38,height:38,x:636,y:256,pixelRatio:2,visible:!0},"madrid-metro":{width:38,height:38,x:674,y:256,pixelRatio:2,visible:!0},"new-york-subway":{width:38,height:38,x:712,y:256,pixelRatio:2,visible:!0},"oslo-metro":{width:38,height:38,x:750,y:256,pixelRatio:2,visible:!0},"paris-metro":{width:38,height:38,x:788,y:256,pixelRatio:2,visible:!0},"paris-metro.paris-rer":{width:74,height:38,x:826,y:256,pixelRatio:2,visible:!0},"paris-rer":{width:38,height:38,x:900,y:256,pixelRatio:2,visible:!0},"paris-rer.paris-transilien":{width:70,height:38,x:938,y:256,pixelRatio:2,visible:!0},"stockholm-metro":{width:38,height:38,x:496,y:300,pixelRatio:2,visible:!0},"taipei-metro":{width:38,height:38,x:534,y:300,pixelRatio:2,visible:!0},"vienna-u-bahn":{width:38,height:38,x:572,y:300,pixelRatio:2,visible:!0},"airfield-11":{width:34,height:34,x:610,y:300,pixelRatio:2,visible:!0},"airport-11":{width:34,height:34,x:644,y:300,pixelRatio:2,visible:!0},"alcohol-shop-11":{width:34,height:34,x:678,y:300,pixelRatio:2,visible:!0},"amusement-park-11":{width:34,height:34,x:712,y:300,pixelRatio:2,visible:!0},"aquarium-11":{width:34,height:34,x:746,y:300,pixelRatio:2,visible:!0},"art-gallery-11":{width:34,height:34,x:780,y:300,pixelRatio:2,visible:!0},"attraction-11":{width:34,height:34,x:814,y:300,pixelRatio:2,visible:!0},"bakery-11":{width:34,height:34,x:848,y:300,pixelRatio:2,visible:!0},"bank-11":{width:34,height:34,x:882,y:300,pixelRatio:2,visible:!0},"bar-11":{width:34,height:34,x:916,y:300,pixelRatio:2,visible:!0},"beer-11":{width:34,height:34,x:950,y:300,pixelRatio:2,visible:!0},"bicycle-11":{width:34,height:34,x:984,y:300,pixelRatio:2,visible:!0},"bicycle-share-11":{width:34,height:34,x:492,y:128,pixelRatio:2,visible:!0},"bus-11":{width:34,height:34,x:526,y:128,pixelRatio:2,visible:!0},"cafe-11":{width:34,height:34,x:560,y:128,pixelRatio:2,visible:!0},"campsite-11":{width:34,height:34,x:594,y:128,pixelRatio:2,visible:!0},"car-11":{width:34,height:34,x:628,y:128,pixelRatio:2,visible:!0},"castle-11":{width:34,height:34,x:662,y:128,pixelRatio:2,visible:!0},"cemetery-11":{width:34,height:34,x:696,y:128,pixelRatio:2,visible:!0},"chongqing-rail-transit":{width:50,height:34,x:730,y:128,pixelRatio:2,visible:!0},"cinema-11":{width:34,height:34,x:780,y:128,pixelRatio:2,visible:!0},"circle-11":{width:34,height:34,x:814,y:128,pixelRatio:2,visible:!0},"circle-stroked-11":{width:34,height:34,x:848,y:128,pixelRatio:2,visible:!0},"clothing-store-11":{width:34,height:34,x:882,y:128,pixelRatio:2,visible:!0},"college-11":{width:34,height:34,x:916,y:128,pixelRatio:2,visible:!0},"de-u-bahn":{width:34,height:34,x:950,y:128,pixelRatio:2,visible:!0},"dentist-11":{width:34,height:34,x:984,y:128,pixelRatio:2,visible:!0},"doctor-11":{width:34,height:34,x:484,y:0,pixelRatio:2,visible:!0},"dog-park-11":{width:34,height:34,x:518,y:0,pixelRatio:2,visible:!0},"drinking-water-11":{width:34,height:34,x:552,y:0,pixelRatio:2,visible:!0},"embassy-11":{width:34,height:34,x:586,y:0,pixelRatio:2,visible:!0},entrance:{width:34,height:34,x:620,y:0,pixelRatio:2,visible:!0},"entrance-11":{width:34,height:34,x:654,y:0,pixelRatio:2,visible:!0},"fast-food-11":{width:34,height:34,x:688,y:0,pixelRatio:2,visible:!0},"ferry-11":{width:34,height:34,x:722,y:0,pixelRatio:2,visible:!0},"fire-station-11":{width:34,height:34,x:756,y:0,pixelRatio:2,visible:!0},"fuel-11":{width:34,height:34,x:790,y:0,pixelRatio:2,visible:!0},"garden-11":{width:34,height:34,x:824,y:0,pixelRatio:2,visible:!0},"golf-11":{width:34,height:34,x:858,y:0,pixelRatio:2,visible:!0},"grocery-11":{width:34,height:34,x:892,y:0,pixelRatio:2,visible:!0},"harbor-11":{width:34,height:34,x:926,y:0,pixelRatio:2,visible:!0},"heliport-11":{width:34,height:34,x:960,y:0,pixelRatio:2,visible:!0},"hong-kong-mtr":{width:38,height:34,x:0,y:512,pixelRatio:2,visible:!0},"hospital-11":{width:34,height:34,x:38,y:512,pixelRatio:2,visible:!0},"ice-cream-11":{width:34,height:34,x:72,y:512,pixelRatio:2,visible:!0},"information-11":{width:34,height:34,x:106,y:512,pixelRatio:2,visible:!0},"laundry-11":{width:34,height:34,x:140,y:512,pixelRatio:2,visible:!0},"library-11":{width:34,height:34,x:174,y:512,pixelRatio:2,visible:!0},"lodging-11":{width:34,height:34,x:208,y:512,pixelRatio:2,visible:!0},"mexico-city-metro":{width:34,height:34,x:242,y:512,pixelRatio:2,visible:!0},"milan-metro":{width:34,height:34,x:276,y:512,pixelRatio:2,visible:!0},"monument-11":{width:34,height:34,x:310,y:512,pixelRatio:2,visible:!0},"moscow-metro":{width:34,height:34,x:344,y:512,pixelRatio:2,visible:!0},"mountain-11":{width:34,height:34,x:378,y:512,pixelRatio:2,visible:!0},"museum-11":{width:34,height:34,x:412,y:512,pixelRatio:2,visible:!0},"music-11":{width:34,height:34,x:446,y:512,pixelRatio:2,visible:!0},"osaka-subway":{width:40,height:34,x:480,y:512,pixelRatio:2,visible:!0},"paris-transilien":{width:34,height:34,x:520,y:512,pixelRatio:2,visible:!0},"park-11":{width:34,height:34,x:554,y:512,pixelRatio:2,visible:!0},"pharmacy-11":{width:34,height:34,x:588,y:512,pixelRatio:2,visible:!0},"philadelphia-septa":{width:38,height:34,x:622,y:512,pixelRatio:2,visible:!0},"picnic-site-11":{width:34,height:34,x:660,y:512,pixelRatio:2,visible:!0},"place-of-worship-11":{width:34,height:34,x:694,y:512,pixelRatio:2,visible:!0},"playground-11":{width:34,height:34,x:728,y:512,pixelRatio:2,visible:!0},"police-11":{width:34,height:34,x:762,y:512,pixelRatio:2,visible:!0},"post-11":{width:34,height:34,x:796,y:512,pixelRatio:2,visible:!0},"prison-11":{width:34,height:34,x:830,y:512,pixelRatio:2,visible:!0},rail:{width:34,height:34,x:864,y:512,pixelRatio:2,visible:!0},"rail-11":{width:34,height:34,x:898,y:512,pixelRatio:2,visible:!0},"rail-light":{width:34,height:34,x:932,y:512,pixelRatio:2,visible:!0},"rail-light-11":{width:34,height:34,x:966,y:512,pixelRatio:2,visible:!0},"rail-metro":{width:34,height:34,x:0,y:546,pixelRatio:2,visible:!0},"rail-metro-11":{width:34,height:34,x:34,y:546,pixelRatio:2,visible:!0},"religious-christian-11":{width:34,height:34,x:68,y:546,pixelRatio:2,visible:!0},"religious-jewish-11":{width:34,height:34,x:102,y:546,pixelRatio:2,visible:!0},"religious-muslim-11":{width:34,height:34,x:136,y:546,pixelRatio:2,visible:!0},"restaurant-11":{width:34,height:34,x:170,y:546,pixelRatio:2,visible:!0},"rocket-11":{width:34,height:34,x:204,y:546,pixelRatio:2,visible:!0},"san-francisco-bart":{width:34,height:34,x:238,y:546,pixelRatio:2,visible:!0},"school-11":{width:34,height:34,x:272,y:546,pixelRatio:2,visible:!0},"shop-11":{width:34,height:34,x:306,y:546,pixelRatio:2,visible:!0},"singapore-mrt":{width:34,height:34,x:340,y:546,pixelRatio:2,visible:!0},"square-11":{width:34,height:34,x:374,y:546,pixelRatio:2,visible:!0},"square-stroked-11":{width:34,height:34,x:408,y:546,pixelRatio:2,visible:!0},"stadium-11":{width:34,height:34,x:442,y:546,pixelRatio:2,visible:!0},"star-11":{width:34,height:34,x:476,y:546,pixelRatio:2,visible:!0},"star-stroked-11":{width:34,height:34,x:510,y:546,pixelRatio:2,visible:!0},"suitcase-11":{width:34,height:34,x:544,y:546,pixelRatio:2,visible:!0},"swimming-11":{width:34,height:34,x:578,y:546,pixelRatio:2,visible:!0},"theatre-11":{width:34,height:34,x:612,y:546,pixelRatio:2,visible:!0},"toilet-11":{width:34,height:34,x:646,y:546,pixelRatio:2,visible:!0},"tokyo-metro":{width:34,height:34,x:680,y:546,pixelRatio:2,visible:!0},"town-hall-11":{width:34,height:34,x:714,y:546,pixelRatio:2,visible:!0},"triangle-11":{width:34,height:34,x:748,y:546,pixelRatio:2,visible:!0},"triangle-stroked-11":{width:34,height:34,x:782,y:546,pixelRatio:2,visible:!0},"veterinary-11":{width:34,height:34,x:816,y:546,pixelRatio:2,visible:!0},"volcano-11":{width:34,height:34,x:850,y:546,pixelRatio:2,visible:!0},"washington-metro":{width:34,height:34,x:884,y:546,pixelRatio:2,visible:!0},"zoo-11":{width:34,height:34,x:918,y:546,pixelRatio:2,visible:!0},"ch-motorway-2":{width:44,height:32,x:952,y:546,pixelRatio:2,visible:!0},"ch-motorway-3":{width:56,height:32,x:0,y:580,pixelRatio:2,visible:!0},"ch-motorway-4":{width:68,height:32,x:56,y:580,pixelRatio:2,visible:!0},"de-motorway-2":{width:44,height:32,x:124,y:580,pixelRatio:2,visible:!0},"de-motorway-3":{width:56,height:32,x:168,y:580,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr":{width:72,height:32,x:224,y:580,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-overground.london-tfl-rail.london-underground":{width:186,height:32,x:296,y:580,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-overground.london-underground":{width:148,height:32,x:482,y:580,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-underground":{width:110,height:32,x:630,y:580,pixelRatio:2,visible:!0},"gb-national-rail.london-overground":{width:72,height:32,x:740,y:580,pixelRatio:2,visible:!0},"gb-national-rail.london-overground.london-tfl-rail.london-underground":{width:148,height:32,x:812,y:580,pixelRatio:2,visible:!0},"gb-national-rail.london-overground.london-underground":{width:110,height:32,x:0,y:612,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail":{width:72,height:32,x:110,y:612,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail.london-overground":{width:110,height:32,x:182,y:612,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail.london-underground":{width:110,height:32,x:292,y:612,pixelRatio:2,visible:!0},"gb-national-rail.london-underground":{width:72,height:32,x:402,y:612,pixelRatio:2,visible:!0},"gr-motorway-2":{width:44,height:32,x:960,y:580,pixelRatio:2,visible:!0},"gr-motorway-3":{width:56,height:32,x:474,y:612,pixelRatio:2,visible:!0},"gr-motorway-4":{width:68,height:32,x:530,y:612,pixelRatio:2,visible:!0},"hr-motorway-3":{width:56,height:32,x:598,y:612,pixelRatio:2,visible:!0},"hr-motorway-4":{width:68,height:32,x:654,y:612,pixelRatio:2,visible:!0},"london-dlr":{width:40,height:32,x:722,y:612,pixelRatio:2,visible:!0},"london-dlr.london-tfl-rail":{width:78,height:32,x:762,y:612,pixelRatio:2,visible:!0},"london-dlr.london-tfl-rail.london-underground":{width:116,height:32,x:840,y:612,pixelRatio:2,visible:!0},"london-dlr.london-underground":{width:78,height:32,x:0,y:644,pixelRatio:2,visible:!0},"london-overground":{width:40,height:32,x:956,y:612,pixelRatio:2,visible:!0},"london-overground.london-tfl-rail":{width:78,height:32,x:78,y:644,pixelRatio:2,visible:!0},"london-overground.london-tfl-rail.london-underground":{width:116,height:32,x:156,y:644,pixelRatio:2,visible:!0},"london-overground.london-underground":{width:78,height:32,x:272,y:644,pixelRatio:2,visible:!0},"london-tfl-rail":{width:40,height:32,x:350,y:644,pixelRatio:2,visible:!0},"london-tfl-rail.london-underground":{width:78,height:32,x:390,y:644,pixelRatio:2,visible:!0},"london-underground":{width:40,height:32,x:468,y:644,pixelRatio:2,visible:!0},"si-motorway-2":{width:44,height:32,x:508,y:644,pixelRatio:2,visible:!0},"level-crossing":{width:30,height:30,x:552,y:644,pixelRatio:2,visible:!0},"at-expressway-2":{width:40,height:28,x:582,y:644,pixelRatio:2,visible:!0},"at-expressway-3":{width:52,height:28,x:622,y:644,pixelRatio:2,visible:!0},"at-motorway-2":{width:40,height:28,x:674,y:644,pixelRatio:2,visible:!0},"at-motorway-3":{width:52,height:28,x:714,y:644,pixelRatio:2,visible:!0},"at-state-b-2":{width:40,height:28,x:766,y:644,pixelRatio:2,visible:!0},"at-state-b-3":{width:52,height:28,x:806,y:644,pixelRatio:2,visible:!0},"at-state-b-4":{width:64,height:28,x:858,y:644,pixelRatio:2,visible:!0},"bg-motorway-2":{width:40,height:28,x:922,y:644,pixelRatio:2,visible:!0},"bg-national-2":{width:40,height:28,x:962,y:644,pixelRatio:2,visible:!0},"ch-main-2":{width:40,height:28,x:0,y:676,pixelRatio:2,visible:!0},"ch-main-3":{width:52,height:28,x:40,y:676,pixelRatio:2,visible:!0},"cz-expressway-2":{width:40,height:28,x:92,y:676,pixelRatio:2,visible:!0},"cz-expressway-3":{width:52,height:28,x:132,y:676,pixelRatio:2,visible:!0},"cz-motorway-2":{width:40,height:28,x:184,y:676,pixelRatio:2,visible:!0},"cz-road-2":{width:40,height:28,x:224,y:676,pixelRatio:2,visible:!0},"cz-road-3":{width:52,height:28,x:264,y:676,pixelRatio:2,visible:!0},"de-federal-2":{width:40,height:28,x:316,y:676,pixelRatio:2,visible:!0},"de-federal-3":{width:52,height:28,x:356,y:676,pixelRatio:2,visible:!0},"de-federal-4":{width:64,height:28,x:408,y:676,pixelRatio:2,visible:!0},"default-2":{width:40,height:28,x:472,y:676,pixelRatio:2,visible:!0},"default-3":{width:52,height:28,x:512,y:676,pixelRatio:2,visible:!0},"default-4":{width:64,height:28,x:564,y:676,pixelRatio:2,visible:!0},"default-5":{width:76,height:28,x:628,y:676,pixelRatio:2,visible:!0},"default-6":{width:88,height:28,x:704,y:676,pixelRatio:2,visible:!0},"dk-primary-2":{width:40,height:28,x:792,y:676,pixelRatio:2,visible:!0},"dk-secondary-2":{width:40,height:28,x:832,y:676,pixelRatio:2,visible:!0},"dk-secondary-3":{width:52,height:28,x:872,y:676,pixelRatio:2,visible:!0},"e-road-2":{width:40,height:28,x:924,y:676,pixelRatio:2,visible:!0},"e-road-3":{width:52,height:28,x:964,y:676,pixelRatio:2,visible:!0},"e-road-4":{width:64,height:28,x:0,y:704,pixelRatio:2,visible:!0},"fi-main-2":{width:40,height:28,x:64,y:704,pixelRatio:2,visible:!0},"fi-regional-3":{width:52,height:28,x:104,y:704,pixelRatio:2,visible:!0},"fi-trunk-2":{width:40,height:28,x:156,y:704,pixelRatio:2,visible:!0},"gb-national-rail":{width:34,height:28,x:196,y:704,pixelRatio:2,visible:!0},"gr-national-2":{width:40,height:28,x:230,y:704,pixelRatio:2,visible:!0},"gr-national-3":{width:52,height:28,x:270,y:704,pixelRatio:2,visible:!0},"gr-national-4":{width:64,height:28,x:322,y:704,pixelRatio:2,visible:!0},"hr-county-4":{width:64,height:28,x:386,y:704,pixelRatio:2,visible:!0},"hr-state-2":{width:40,height:28,x:450,y:704,pixelRatio:2,visible:!0},"hr-state-3":{width:52,height:28,x:490,y:704,pixelRatio:2,visible:!0},"marker-15":{width:12,height:28,x:542,y:704,pixelRatio:2,visible:!0},"motorway-exit-1":{width:40,height:28,x:554,y:704,pixelRatio:2,visible:!0},"motorway-exit-2":{width:40,height:28,x:594,y:704,pixelRatio:2,visible:!0},"motorway-exit-3":{width:52,height:28,x:634,y:704,pixelRatio:2,visible:!0},"motorway-exit-4":{width:64,height:28,x:686,y:704,pixelRatio:2,visible:!0},"motorway-exit-5":{width:76,height:28,x:750,y:704,pixelRatio:2,visible:!0},"motorway-exit-6":{width:88,height:28,x:826,y:704,pixelRatio:2,visible:!0},"motorway-exit-7":{width:100,height:28,x:914,y:704,pixelRatio:2,visible:!0},"motorway-exit-8":{width:112,height:28,x:0,y:732,pixelRatio:2,visible:!0},"motorway-exit-9":{width:124,height:28,x:112,y:732,pixelRatio:2,visible:!0},"pl-expressway-2":{width:40,height:28,x:236,y:732,pixelRatio:2,visible:!0},"pl-expressway-3":{width:52,height:28,x:276,y:732,pixelRatio:2,visible:!0},"pl-motorway-2":{width:40,height:28,x:328,y:732,pixelRatio:2,visible:!0},"pl-motorway-3":{width:52,height:28,x:368,y:732,pixelRatio:2,visible:!0},"pl-national-2":{width:40,height:28,x:420,y:732,pixelRatio:2,visible:!0},"pl-voivodeship-3":{width:52,height:28,x:460,y:732,pixelRatio:2,visible:!0},"ro-motorway-2":{width:40,height:28,x:512,y:732,pixelRatio:2,visible:!0},"ro-motorway-3":{width:52,height:28,x:552,y:732,pixelRatio:2,visible:!0},"rs-motorway-3":{width:52,height:28,x:604,y:732,pixelRatio:2,visible:!0},"rs-state-1b-2":{width:40,height:28,x:656,y:732,pixelRatio:2,visible:!0},"rs-state-2a-3":{width:52,height:28,x:696,y:732,pixelRatio:2,visible:!0},"rs-state-2b-3":{width:52,height:28,x:748,y:732,pixelRatio:2,visible:!0},"se-main-2":{width:40,height:28,x:800,y:732,pixelRatio:2,visible:!0},"se-main-3":{width:52,height:28,x:840,y:732,pixelRatio:2,visible:!0},"si-expressway-3":{width:52,height:28,x:892,y:732,pixelRatio:2,visible:!0},"si-main-2":{width:40,height:28,x:944,y:732,pixelRatio:2,visible:!0},"si-main-3":{width:52,height:28,x:0,y:760,pixelRatio:2,visible:!0},"sk-highway-2":{width:40,height:28,x:984,y:732,pixelRatio:2,visible:!0},"sk-road-2":{width:40,height:28,x:52,y:760,pixelRatio:2,visible:!0},"sk-road-3":{width:52,height:28,x:92,y:760,pixelRatio:2,visible:!0},"sk-road-4":{width:64,height:28,x:144,y:760,pixelRatio:2,visible:!0},"sk-road-5":{width:76,height:28,x:208,y:760,pixelRatio:2,visible:!0},"za-metropolitan-2":{width:40,height:28,x:284,y:760,pixelRatio:2,visible:!0},"za-regional-3":{width:52,height:28,x:324,y:760,pixelRatio:2,visible:!0},"dot-11":{width:22,height:22,x:376,y:760,pixelRatio:2,visible:!0},"marker-11":{width:12,height:22,x:398,y:760,pixelRatio:2,visible:!0},"dot-10":{width:20,height:20,x:410,y:760,pixelRatio:2,visible:!0},"dot-9":{width:18,height:18,x:430,y:760,pixelRatio:2,visible:!0},"oneway-large":{width:28,height:12,x:448,y:760,pixelRatio:2,visible:!0},"oneway-white-large":{width:28,height:12,x:476,y:760,pixelRatio:2,visible:!0},"oneway-small":{width:22,height:10,x:504,y:760,pixelRatio:2,visible:!0},"oneway-white-small":{width:22,height:10,x:526,y:760,pixelRatio:2,visible:!0}},layers:[],styles:{},Mr:!0,Rr:function(){var k=this,M=[{id:"background",type:"background",layout:{},paint:{"background-color":"hsl(42, 63%, 97%)"}},{id:"national_park",type:"fill",source:"composite","source-layer":"landuse_overlay",filter:["==","class","national_park"],layout:{},paint:{"fill-color":"hsl(100, 58%, 76%)","fill-opacity":{base:1,stops:[[5,0],[6,.5]]}}},{id:"hospital",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","hospital"],layout:{},paint:{"fill-color":{base:1,stops:[[15.5,"hsl(340, 37%, 87%)"],[16,"hsl(340, 63%, 89%)"]]}}},{id:"school",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","school"],layout:{},paint:{"fill-color":{base:1,stops:[[15.5,"hsl(50, 47%, 81%)"],[16,"hsl(50, 63%, 84%)"]]}}},{id:"park",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","park"],layout:{},paint:{"fill-color":"hsl(100, 58%, 76%)","fill-opacity":{base:1,stops:[[5,0],[6,1]]}}},{id:"pitch",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","pitch"],layout:{},paint:{"fill-color":"hsl(100, 57%, 72%)"}},{minzoom:15,layout:{"line-join":"miter"},filter:["==","class","pitch"],type:"line",source:"composite",id:"pitch-line",paint:{"line-color":"hsl(75, 57%, 84%)"},"source-layer":"landuse"},{id:"cemetery",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","cemetery"],layout:{},paint:{"fill-color":"hsl(75, 37%, 81%)"}},{id:"industrial",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","industrial"],layout:{},paint:{"fill-color":{base:1,stops:[[15.5,"hsl(230, 15%, 86%)"],[16,"hsl(230, 29%, 89%)"]]}}},{id:"sand",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","sand"],layout:{},paint:{"fill-color":"hsl(60, 46%, 87%)"}},{id:"water",paint:{"fill-color":"#a3ccff"},layout:{},type:"fill",source:"composite","source-layer":"water"},{id:"barrier_line-land-polygon",type:"fill",source:"composite","source-layer":"barrier_line",filter:["all",["==","$type","Polygon"],["==","class","land"]],layout:{},paint:{"fill-color":"hsl(35, 12%, 89%)"}},{id:"barrier_line-land-line",type:"line",source:"composite","source-layer":"barrier_line",filter:["all",["==","$type","LineString"],["==","class","land"]],layout:{"line-cap":"round"},paint:{"line-width":{base:1.99,stops:[[14,.75],[20,40]]},"line-color":"hsl(35, 12%, 89%)"}},{minzoom:11,layout:{},metadata:{"mapbox:group":"1444934828655.3389"},filter:["all",["!=","type","apron"],["==","$type","Polygon"]],type:"fill",source:"composite",id:"aeroway-polygon",paint:{"fill-color":{base:1,stops:[[15,"hsl(230, 23%, 82%)"],[16,"hsl(230, 37%, 84%)"]]},"fill-opacity":{base:1,stops:[[11,0],[11.5,1]]}},"source-layer":"aeroway"},{minzoom:9,layout:{},metadata:{"mapbox:group":"1444934828655.3389"},filter:["all",["==","$type","LineString"],["==","type","runway"]],type:"line",source:"composite",id:"aeroway-runway",paint:{"line-color":{base:1,stops:[[15,"hsl(230, 23%, 82%)"],[16,"hsl(230, 37%, 84%)"]]},"line-width":{base:1.5,stops:[[9,1],[18,80]]}},"source-layer":"aeroway"},{minzoom:9,layout:{},metadata:{"mapbox:group":"1444934828655.3389"},filter:["all",["==","$type","LineString"],["==","type","taxiway"]],type:"line",source:"composite",id:"aeroway-taxiway",paint:{"line-color":{base:1,stops:[[15,"hsl(230, 23%, 82%)"],[16,"hsl(230, 37%, 84%)"]]},"line-width":{base:1.5,stops:[[10,.5],[18,20]]}},"source-layer":"aeroway"},{minzoom:15,layout:{},filter:["all",["!=","type","building:part"],["==","underground","false"]],type:"line",source:"composite",id:"building-line",paint:{"line-color":"hsl(35, 11%, 80%)","line-width":{base:1.5,stops:[[15,.75],[20,3]]},"line-opacity":{base:1,stops:[[15.5,0],[16,1]]}},"source-layer":"building"},{minzoom:15,layout:{},filter:["all",["!=","type","building:part"],["==","underground","false"]],type:"fill",source:"composite",id:"building",paint:{"fill-color":{base:1,stops:[[15,"hsl(35, 15%, 90%)"],[16,"hsl(35, 15%, 90%)"]]},"fill-opacity":{base:1,stops:[[15.5,0],[16,1]]},"fill-outline-color":"hsl(35, 6%, 79%)"},"source-layer":"building"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-street-low",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-street_limited-low",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]}},"source-layer":"road"},{minzoom:14,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","tunnel"],["in","class","link","service","track"]]],type:"line",source:"composite",id:"tunnel-service-link-track-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 19%, 75%)","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-dasharray":[3,3]},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-street_limited-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 19%, 75%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-dasharray":[3,3],"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-street-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 19%, 75%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-dasharray":[3,3],"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{id:"tunnel-secondary-tertiary-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["in","class","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.2,stops:[[10,.75],[18,2]]},"line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":"hsl(230, 19%, 75%)"}},{id:"tunnel-primary-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(230, 19%, 75%)"}},{minzoom:13,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk_link"]]],type:"line",source:"composite",id:"tunnel-trunk_link-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-dasharray":[3,3]},"source-layer":"road"},{minzoom:13,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-motorway_link-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-dasharray":[3,3]},"source-layer":"road"},{id:"tunnel-trunk-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":1,"line-dasharray":[3,3]}},{id:"tunnel-motorway-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","tunnel"]]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":1,"line-dasharray":[3,3]}},{minzoom:14,layout:{"line-join":"miter"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","construction"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-construction",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]}},"source-layer":"road"},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!=","type","steps"],["==","class","path"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[1,.5]]]},"line-color":"hsl(35, 26%, 95%)","line-opacity":{base:1,stops:[[14,0],[14.25,1]]}}},{id:"tunnel-steps",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[16,1.6],[18,6]]},"line-color":"hsl(35, 26%, 95%)","line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[.3,.3]]]},"line-opacity":{base:1,stops:[[14,0],[14.25,1]]}}},{minzoom:13,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk_link"]]],type:"line",source:"composite",id:"tunnel-trunk_link",paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(46, 77%, 78%)","line-opacity":1,"line-dasharray":[1,0]},"source-layer":"road"},{minzoom:13,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-motorway_link",paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(26, 100%, 78%)","line-opacity":1,"line-dasharray":[1,0]},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-pedestrian",paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,.4]],[16,[1,.2]]]}},"source-layer":"road"},{minzoom:14,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","tunnel"],["in","class","link","service","track"]]],type:"line",source:"composite",id:"tunnel-service-link-track",paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":[1,0]},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-street_limited",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(35, 14%, 93%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","tunnel"]]],type:"line",source:"composite",id:"tunnel-street",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{id:"tunnel-secondary-tertiary",metadata:{"mapbox:group":"1444855769305.6016"},paint:{"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":[1,0],"line-blur":0},layout:{"line-cap":"round","line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["in","class","secondary","tertiary"]]],source:"composite","source-layer":"road"},{id:"tunnel-primary",metadata:{"mapbox:group":"1444855769305.6016"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":[1,0],"line-blur":0},layout:{"line-cap":"round","line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","tunnel"]]],source:"composite","source-layer":"road"},{minzoom:16,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[17,"oneway-small"],[18,"oneway-large"]]},"symbol-spacing":200,"icon-padding":2},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","oneway","true"],["==","structure","tunnel"],["in","class","link","path","pedestrian","service","track"]]],type:"symbol",source:"composite",id:"tunnel-oneway-arrows-blue-minor",paint:{},"source-layer":"road"},{minzoom:15,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-small"],[17,"oneway-large"]]},"symbol-spacing":200,"icon-padding":2},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","oneway","true"],["==","structure","tunnel"],["in","class","primary","secondary","street","street_limited","tertiary"]]],type:"symbol",source:"composite",id:"tunnel-oneway-arrows-blue-major",paint:{},"source-layer":"road"},{id:"tunnel-trunk",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":["interpolate",["exponential",1],["zoom"],8,"hsl(26, 87%, 62%)",9,"hsl(26, 100%, 68%)"]}},{id:"tunnel-motorway",metadata:{"mapbox:group":"1444855769305.6016"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-dasharray":[1,0],"line-opacity":1,"line-color":"hsl(26, 100%, 68%)","line-blur":0},layout:{"line-cap":"round","line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","tunnel"]]],source:"composite","source-layer":"road"},{minzoom:16,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-white-small"],[17,"oneway-white-large"]]},"symbol-spacing":200,"icon-padding":2},metadata:{"mapbox:group":"1444855769305.6016"},filter:["all",["==","$type","LineString"],["all",["!in","type","primary_link","secondary_link","tertiary_link"],["==","oneway","true"],["==","structure","tunnel"],["in","class","link","motorway","motorway_link","trunk"]]],type:"symbol",source:"composite",id:"tunnel-oneway-arrows-white",paint:{},"source-layer":"road"},{id:"ferry",type:"line",source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["==","type","ferry"]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[15,"hsl(205, 73%, 63%)"],[17,"hsl(230, 73%, 63%)"]]},"line-opacity":1,"line-width":{base:1.5,stops:[[14,.5],[20,1]]},"line-dasharray":{base:1,stops:[[12,[1,0]],[13,[12,4]]]}}},{id:"ferry_auto",type:"line",source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["==","type","ferry_auto"]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[15,"hsl(205, 73%, 63%)"],[17,"hsl(230, 73%, 63%)"]]},"line-opacity":1,"line-width":{base:1.5,stops:[[14,.5],[20,1]]}}},{id:"road-path-bg",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["!in","type","crossing","sidewalk","steps"],["==","class","path"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[18,7]]},"line-dasharray":[1,0],"line-color":"hsl(230, 17%, 82%)","line-blur":0,"line-opacity":{base:1,stops:[[14,0],[14.25,.75]]}}},{id:"road-steps-bg",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[17,4.6],[18,7]]},"line-color":"hsl(230, 17%, 82%)","line-dasharray":[1,0],"line-opacity":{base:1,stops:[[14,0],[14.25,.75]]}}},{minzoom:16,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","type","crossing","sidewalk"]]],type:"line",source:"composite",id:"road-sidewalk-bg",paint:{"line-width":{base:1.5,stops:[[15,2],[18,7]]},"line-dasharray":[1,0],"line-color":"hsl(230, 17%, 82%)","line-blur":0,"line-opacity":{base:1,stops:[[16,0],[16.25,.75]]}},"source-layer":"road"},{minzoom:15,layout:{"icon-image":"turning-circle-outline","icon-size":{base:1.5,stops:[[14,.122],[18,.969],[20,1]]},"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-padding":0,"icon-rotation-alignment":"map"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","Point"],["in","class","turning_circle","turning_loop"]],type:"symbol",source:"composite",id:"turning-features-outline",paint:{},"source-layer":"road"},{minzoom:12,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","none"]]],type:"line",source:"composite",id:"road-pedestrian-case",paint:{"line-width":{base:1.5,stops:[[14,2],[18,14.5]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":0,"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{minzoom:14,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["in","class","link","service","track"]]],type:"line",source:"composite",id:"road-service-link-track-case",paint:{"line-width":{base:1.5,stops:[[8,0],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","none"]]],type:"line",source:"composite",id:"road-street_limited-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","none"]]],type:"line",source:"composite",id:"road-street-case",paint:{"line-width":{base:1.5,stops:[[8,0],[20,2]]},"line-color":"#d6d9e6","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-opacity":["interpolate",["exponential",1],["zoom"],13.99,0,14,1]},"source-layer":"road"},{id:"road-secondary-tertiary-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.2,stops:[[10,.5],[18,2]]},"line-color":"#d6d9e6","line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-opacity":["interpolate",["exponential",1],["zoom"],10.5,0,11,1]}},{id:"road-primary-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","primary"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[8,.4],[16,2]]},"line-color":["interpolate",["exponential",1],["zoom"],10,"hsl(53, 50%, 81%)",12,"hsl(228, 12%, 92%)"],"line-gap-width":{base:1.5,stops:[[0,.5],[18,32]]}}},{minzoom:10,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway_link"]]],type:"line",source:"composite",id:"road-motorway_link-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[10,.5],[18,24]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","trunk_link"]]],type:"line",source:"composite",id:"road-trunk_link-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},"source-layer":"road"},{id:"road-trunk-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","trunk"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":{base:1,stops:[[6,0],[6.1,1]]}}},{id:"road-motorway-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}}},{minzoom:14,layout:{"line-join":"miter"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["==","class","construction"],["==","structure","none"]]],type:"line",source:"composite",id:"road-construction",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]}},"source-layer":"road"},{minzoom:16,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","type","crossing","sidewalk"]]],type:"line",source:"composite",id:"road-sidewalks",paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[1,.5]]]},"line-opacity":{base:1,stops:[[16,0],[16.25,1]]}},"source-layer":"road"},{id:"road-path",metadata:{"mapbox:group":"1444855786460.0557"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[1,.5]]]},"line-opacity":{base:1,stops:[[14,0],[14.25,1]]}},layout:{"line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["!in","type","crossing","sidewalk","steps"],["==","class","path"]]],source:"composite","source-layer":"road"},{id:"road-steps",metadata:{"mapbox:group":"1444855786460.0557"},paint:{"line-width":{base:1.5,stops:[[15,1],[16,1.6],[18,6]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[.3,.3]]]},"line-opacity":{base:1,stops:[[14,0],[14.25,1]]}},layout:{"line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","steps"]]],source:"composite","source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","trunk_link"]]],type:"line",source:"composite",id:"road-trunk_link",paint:{"line-width":{base:1.5,stops:[[10,.5],[18,24]]},"line-color":["interpolate",["exponential",1],["zoom"],8,"hsl(26, 87%, 62%)",9,"hsl(26, 100%, 68%)"],"line-opacity":1},"source-layer":"road"},{minzoom:10,layout:{"line-join":"round","line-cap":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway_link"]]],type:"line",source:"composite",id:"road-motorway_link",paint:{"line-width":{base:1.5,stops:[[10,.5],[18,24]]},"line-color":"hsl(26, 100%, 68%)","line-opacity":1},"source-layer":"road"},{minzoom:12,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","none"]]],type:"line",source:"composite",id:"road-pedestrian",paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,.4]],[16,[1,.2]]]}},"source-layer":"road"},{minzoom:12,layout:{},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","Polygon"],["all",["==","structure","none"],["in","class","path","pedestrian"]]],type:"fill",source:"composite",id:"road-pedestrian-polygon-fill",paint:{"fill-color":{base:1,stops:[[16,"hsl(230, 16%, 94%)"],[16.25,"hsl(230, 16%, 94%)"]]},"fill-outline-color":"hsl(230, 26%, 88%)","fill-opacity":1,"fill-antialias":!1},"source-layer":"road"},{minzoom:12,layout:{},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","Polygon"],["all",["!in","class","motorway","path","pedestrian","trunk"],["!in","structure","bridge","tunnel"]]],type:"fill",source:"composite",id:"road-polygon",paint:{"fill-color":"hsl(0, 0%, 100%)","fill-outline-color":"#d6d9e6"},"source-layer":"road"},{minzoom:14,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["in","class","link","service","track"]]],type:"line",source:"composite",id:"road-service-link-track",paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)"},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","none"]]],type:"line",source:"composite",id:"road-street_limited",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(35, 14%, 93%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","none"]]],type:"line",source:"composite",id:"road-street",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{id:"road-secondary-tertiary",metadata:{"mapbox:group":"1444855786460.0557"},paint:{"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":{base:1,stops:[[5,"hsl(35, 32%, 91%)"],[8,"hsl(0, 0%, 100%)"]]},"line-opacity":{base:1.2,stops:[[10.5,0],[11,1]]}},layout:{"line-cap":"round","line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","secondary","tertiary"]]],source:"composite","source-layer":"road"},{id:"road-primary",metadata:{"mapbox:group":"1444855786460.0557"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":{base:1,stops:[[5,"hsl(48, 86%, 93%)"],[13,"hsl(46, 98%, 86%)"]]},"line-opacity":1},layout:{"line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","primary"]]],source:"composite","source-layer":"road"},{minzoom:16,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[17,"oneway-small"],[18,"oneway-large"]]},"icon-rotation-alignment":"map","icon-padding":2,"symbol-spacing":200},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["==","oneway","true"],["in","class","link","path","pedestrian","service","track"]]],type:"symbol",source:"composite",id:"road-oneway-arrows-blue-minor",paint:{},"source-layer":"road"},{minzoom:15,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-small"],[17,"oneway-large"]]},"icon-rotation-alignment":"map","icon-padding":2,"symbol-spacing":200},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["==","oneway","true"],["in","class","primary","secondary","street","street_limited","tertiary"]]],type:"symbol",source:"composite",id:"road-oneway-arrows-blue-major",paint:{},"source-layer":"road"},{id:"road-trunk",metadata:{"mapbox:group":"1444855786460.0557"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":{base:1,stops:[[8,"hsl(26, 87%, 62%)"],[9,"hsl(26, 100%, 68%)"]]}},layout:{"line-cap":"round","line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","trunk"]]],source:"composite","source-layer":"road"},{id:"road-motorway",metadata:{"mapbox:group":"1444855786460.0557"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":{base:1,stops:[[8,"hsl(26, 87%, 62%)"],[9,"hsl(26, 100%, 68%)"]]}},layout:{"line-cap":"round","line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway"]]],source:"composite","source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","major_rail","minor_rail"]]],type:"line",source:"composite",id:"road-rail",paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","major_rail","minor_rail"]]],type:"line",source:"composite",id:"road-rail-tracks",paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,4],[20,8]]},"line-dasharray":[.1,15],"line-opacity":{base:1,stops:[[13.75,0],[14,1]]}},"source-layer":"road"},{minzoom:16,layout:{"icon-size":1,"icon-image":"level-crossing","icon-allow-overlap":!0},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","Point"],["==","class","level_crossing"]],type:"symbol",source:"composite",id:"level-crossings",paint:{},"source-layer":"road"},{minzoom:16,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-white-small"],[17,"oneway-white-large"]]},"icon-padding":2,"symbol-spacing":200},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["!in","type","primary_link","secondary_link","tertiary_link"],["==","oneway","true"],["in","class","link","motorway","motorway_link","trunk"]]],type:"symbol",source:"composite",id:"road-oneway-arrows-white",paint:{},"source-layer":"road"},{minzoom:15,layout:{"icon-image":"turning-circle","icon-size":{base:1.5,stops:[[14,.095],[18,1]]},"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-padding":0,"icon-rotation-alignment":"map"},metadata:{"mapbox:group":"1444855786460.0557"},filter:["all",["==","$type","Point"],["in","class","turning_circle","turning_loop"]],type:"symbol",source:"composite",id:"turning-features",paint:{},"source-layer":"road"},{id:"bridge-path-bg",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!=","type","steps"],["==","class","path"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[18,7]]},"line-dasharray":[1,0],"line-color":"hsl(230, 17%, 82%)","line-blur":0,"line-opacity":{base:1,stops:[[15,0],[15.25,1]]}}},{id:"bridge-steps-bg",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[17,4.6],[18,7]]},"line-color":"hsl(230, 17%, 82%)","line-dasharray":[1,0],"line-opacity":{base:1,stops:[[14,0],[14.25,.75]]}}},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-pedestrian-case",paint:{"line-width":{base:1.5,stops:[[14,2],[18,14.5]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":0,"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{minzoom:14,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","bridge"],["in","class","link","service","track"]]],type:"line",source:"composite",id:"bridge-service-link-track-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]}},"source-layer":"road"},{minzoom:11,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-street_limited-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]}},"source-layer":"road"},{minzoom:11,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-street-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]}},"source-layer":"road"},{id:"bridge-secondary-tertiary-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","secondary","tertiary"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.2,stops:[[10,.75],[18,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-translate":[0,0]}},{id:"bridge-primary-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[8,.4],[16,2]]},"line-color":"#e8e9ed","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-translate":[0,0]}},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","structure","bridge"],["==","type","trunk_link"]]],type:"line",source:"composite",id:"bridge-trunk_link-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway_link"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-motorway_link-case",paint:{"line-width":{base:1.5,stops:[[10,.75],[18,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[18,24]]},"line-opacity":1},"source-layer":"road"},{id:"bridge-trunk-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","trunk"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}}},{id:"bridge-motorway-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}}},{minzoom:14,layout:{"line-join":"miter"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","construction"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-construction",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]}},"source-layer":"road"},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!=","type","steps"],["==","class","path"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[18,5]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[1,.5]]]},"line-opacity":{base:1,stops:[[14,0],[14.25,1]]}}},{id:"bridge-steps",metadata:{"mapbox:group":"1444855799204.86"},paint:{"line-width":{base:1.5,stops:[[15,1],[16,1.6],[18,6]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.75,1]],[16,[1,.75]],[17,[.3,.3]]]},"line-opacity":{base:1,stops:[[14,0],[14.25,1]]}},layout:{"line-join":"round"},type:"line",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","steps"]]],source:"composite","source-layer":"road"},{minzoom:13,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","structure","bridge"],["==","type","trunk_link"]]],type:"line",source:"composite",id:"bridge-trunk_link",paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(46, 85%, 67%)"},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway_link"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-motorway_link",paint:{"line-width":{base:1.5,stops:[[10,.5],[18,24]]},"line-color":"hsl(26, 100%, 68%)"},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-pedestrian",paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,.4]],[16,[1,.2]]]}},"source-layer":"road"},{minzoom:14,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","bridge"],["in","class","link","service","track"]]],type:"line",source:"composite",id:"bridge-service-link-track",paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)"},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-street_limited",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(35, 14%, 93%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{minzoom:11,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","bridge"]]],type:"line",source:"composite",id:"bridge-street",paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},"source-layer":"road"},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","type","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]}}},{id:"bridge-primary",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","primary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":1,"line-color":"hsl(46, 97%, 86%)"}},{minzoom:16,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[17,"oneway-small"],[18,"oneway-large"]]},"symbol-spacing":200,"icon-rotation-alignment":"map","icon-padding":2},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","oneway","true"],["==","structure","bridge"],["in","class","link","path","pedestrian","service","track"]]],type:"symbol",source:"composite",id:"bridge-oneway-arrows-blue-minor",paint:{},"source-layer":"road"},{minzoom:15,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-small"],[17,"oneway-large"]]},"symbol-spacing":200,"icon-rotation-alignment":"map","icon-padding":2},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","oneway","true"],["==","structure","bridge"],["in","class","primary","secondary","street","street_limited","tertiary"]]],type:"symbol",source:"composite",id:"bridge-oneway-arrows-blue-major",paint:{},"source-layer":"road"},{id:"bridge-trunk",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","trunk"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":["interpolate",["exponential",1],["zoom"],8,"hsl(26, 87%, 62%)",9,"hsl(26, 100%, 68%)"],"line-opacity":1}},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(26, 100%, 68%)"}},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","major_rail","minor_rail"]]],type:"line",source:"composite",id:"bridge-rail",paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","major_rail","minor_rail"]]],type:"line",source:"composite",id:"bridge-rail-tracks",paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,4],[20,8]]},"line-dasharray":[.1,15],"line-opacity":{base:1,stops:[[13.75,0],[20,1]]}},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","trunk_link"],[">=","layer",2]]],type:"line",source:"composite",id:"bridge-trunk_link-2-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","bridge"],[">=","layer",2]]],type:"line",source:"composite",id:"bridge-motorway_link-2-case",paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":1},"source-layer":"road"},{id:"bridge-trunk-2-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}}},{id:"bridge-motorway-2-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}}},{minzoom:13,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","trunk_link"],[">=","layer",2]]],type:"line",source:"composite",id:"bridge-trunk_link-2",paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(46, 85%, 67%)"},"source-layer":"road"},{minzoom:13,layout:{"line-cap":"round","line-join":"round"},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","bridge"],[">=","layer",2]]],type:"line",source:"composite",id:"bridge-motorway_link-2",paint:{"line-width":{base:1.5,stops:[[10,.5],[18,24]]},"line-color":"hsl(26, 100%, 68%)"},"source-layer":"road"},{id:"bridge-trunk-2",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":["interpolate",["exponential",1],["zoom"],8,"hsl(26, 87%, 62%)",9,"hsl(26, 100%, 68%)"]}},{id:"bridge-motorway-2",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(26, 100%, 68%)"}},{minzoom:16,layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-white-small"],[17,"oneway-white-large"]]},"symbol-spacing":200,"icon-padding":2},metadata:{"mapbox:group":"1444855799204.86"},filter:["all",["==","$type","LineString"],["all",["!in","type","primary_link","secondary_link","tertiary_link"],["==","oneway","true"],["==","structure","bridge"],["in","class","link","motorway","motorway_link","trunk"]]],type:"symbol",source:"composite",id:"bridge-oneway-arrows-white",paint:{},"source-layer":"road"},{minzoom:13,layout:{"line-join":"round"},filter:["all",["==","$type","LineString"],["==","class","aerialway"]],type:"line",source:"composite",id:"aerialway",paint:{"line-color":"hsl(230, 10%, 74%)","line-width":{base:1.5,stops:[[14,.5],[20,1]]}},"source-layer":"road"},{id:"admin-3-4-boundaries-bg",type:"line",metadata:{"mapbox:group":"1444934295202.7542"},source:"composite","source-layer":"admin",filter:["all",["==","maritime",0],[">=","admin_level",3]],layout:{"line-join":"bevel"},paint:{"line-color":{base:1,stops:[[8,"hsl(35, 12%, 89%)"],[16,"hsl(230, 49%, 90%)"]]},"line-width":{base:1,stops:[[7,.75],[12,1.5]]},"line-opacity":{base:1,stops:[[7,0],[8,.75]]},"line-dasharray":[1,0],"line-translate":[0,0],"line-blur":0}},{minzoom:1,layout:{"line-join":"miter"},metadata:{"mapbox:group":"1444934295202.7542"},filter:["all",["==","admin_level",2],["==","maritime",0]],type:"line",source:"composite",id:"admin-2-boundaries-bg",paint:{"line-width":{base:1,stops:[[3,3.5],[10,6]]},"line-color":{base:1,stops:[[6,"hsl(35, 12%, 89%)"],[8,"hsl(230, 49%, 90%)"]]},"line-opacity":{base:1,stops:[[3,0],[4,.5]]},"line-translate":[0,0],"line-blur":0},"source-layer":"admin"},{id:"admin-3-4-boundaries",type:"line",metadata:{"mapbox:group":"1444934295202.7542"},source:"composite","source-layer":"admin",filter:["all",["==","maritime",0],[">=","admin_level",3]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-dasharray":{base:1,stops:[[6,[2,0]],[7,[2,2,6,2]]]},"line-width":{base:1,stops:[[7,.75],[12,1.5]]},"line-opacity":{base:1,stops:[[2,0],[3,1]]},"line-color":{base:1,stops:[[3,"hsl(230, 14%, 77%)"],[7,"hsl(230, 8%, 62%)"]]}}},{minzoom:1,layout:{"line-join":"round","line-cap":"round"},metadata:{"mapbox:group":"1444934295202.7542"},filter:["all",["==","admin_level",2],["==","disputed",0],["==","maritime",0]],type:"line",source:"composite",id:"admin-2-boundaries",paint:{"line-color":"hsl(230, 8%, 51%)","line-width":{base:1,stops:[[3,.5],[10,2]]},"line-opacity":1},"source-layer":"admin"},{minzoom:1,layout:{"line-join":"round"},metadata:{"mapbox:group":"1444934295202.7542"},filter:["all",["==","admin_level",2],["==","disputed",1],["==","maritime",0]],type:"line",source:"composite",id:"admin-2-boundaries-dispute",paint:{"line-dasharray":[1.5,1.5],"line-color":"hsl(230, 8%, 51%)","line-width":{base:1,stops:[[3,.5],[10,2]]}},"source-layer":"admin"},{id:"housenum-label",type:"symbol",source:"composite","source-layer":"housenum_label",minzoom:17,layout:{"text-field":"{house_num}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-padding":4,"text-max-width":7,"text-size":9.5},paint:{"text-color":"hsl(35, 2%, 69%)","text-halo-color":"hsl(35, 8%, 85%)","text-halo-width":.5,"text-halo-blur":0}},{minzoom:12,layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-pitch-alignment":"viewport","text-max-angle":30,"text-size":{base:1,stops:[[13,12],[18,16]]}},filter:["in","class","canal","river"],type:"symbol",source:"composite",id:"waterway-label",paint:{"text-halo-width":.5,"text-halo-color":"hsl(196, 80%, 70%)","text-color":"hsl(230, 48%, 44%)","text-halo-blur":.5,"text-opacity":0},"source-layer":"waterway_label"},{minzoom:17,layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},metadata:{"mapbox:group":"1444933456003.5437"},filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",4],[">=","localrank",15]],type:"symbol",source:"composite",id:"poi-scalerank4-l15",paint:{"text-color":"hsl(26, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},"source-layer":"poi_label"},{minzoom:15,layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":1,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},metadata:{"mapbox:group":"1444933456003.5437"},filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["<=","localrank",14],["==","scalerank",4]],type:"symbol",source:"composite",id:"poi-scalerank4-l1",paint:{"text-color":"hsl(26, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},"source-layer":"poi_label"},{minzoom:15,layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":1,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},metadata:{"mapbox:group":"1444933456003.5437"},filter:["all",["==","scalerank",4],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],type:"symbol",source:"composite",id:"poi-parks_scalerank4",paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},"source-layer":"poi_label"},{id:"poi-scalerank3",type:"symbol",metadata:{"mapbox:group":"1444933372896.5967"},source:"composite","source-layer":"poi_label",filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",3]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":1,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(26, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5}},{id:"poi-parks-scalerank3",type:"symbol",metadata:{"mapbox:group":"1444933372896.5967"},source:"composite","source-layer":"poi_label",filter:["all",["==","scalerank",3],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5}},{minzoom:15,layout:{"text-size":{base:1,stops:[[15,10],[20,13]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01},metadata:{"mapbox:group":"1444933721429.3076"},filter:["all",["!in","class","golf","link","motorway","pedestrian","primary","secondary","street","street_limited","tertiary","trunk"],["==","$type","LineString"]],type:"symbol",source:"composite",id:"road-label-small",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"text-halo-blur":1},"source-layer":"road_label"},{minzoom:11,layout:{"text-size":{base:1,stops:[[11,10],[20,14]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01},metadata:{"mapbox:group":"1444933721429.3076"},filter:["all",["==","$type","LineString"],["in","class","link","pedestrian","street","street_limited"]],type:"symbol",source:"composite",id:"road-label-medium",paint:{"text-color":"hsl(229, 50%, 61%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-opacity":["interpolate",["exponential",1],["zoom"],13.99,0,14,1]},"source-layer":"road_label"},{id:"road-label-large",type:"symbol",metadata:{"mapbox:group":"1444933721429.3076"},source:"composite","source-layer":"road_label",filter:["in","class","motorway","primary","secondary","tertiary","trunk"],layout:{"text-size":{base:1,stops:[[9,10],[20,16]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01},paint:{"text-color":"hsl(234, 31%, 47%)","text-halo-color":"hsla(203, 3%, 98%, 0.75)","text-halo-width":1,"text-halo-blur":0}},{id:"road-shields-black",type:"symbol",metadata:{"mapbox:group":"1444933575858.6992"},source:"composite","source-layer":"road_label",filter:["all",["!in","shield","at-expressway","at-motorway","at-state-b","bg-motorway","bg-national","ch-main","ch-motorway","cz-motorway","cz-road","de-motorway","e-road","fi-main","gr-motorway","gr-national","hr-motorway","hr-state","hu-main","hu-motorway","nz-state","pl-expressway","pl-motorway","pl-national","ro-county","ro-motorway","ro-national","rs-motorway","rs-state-1b","se-main","si-expressway","si-motorway","sk-highway","sk-road","us-interstate","us-interstate-business","us-interstate-duplex","us-interstate-truck","za-metropolitan","za-national","za-provincial","za-regional"],["<=","reflen",6]],layout:{"text-size":9,"icon-image":"{shield}-{reflen}","icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":{base:1,stops:[[11,150],[14,200]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-padding":2,"text-rotation-alignment":"viewport","text-field":"{ref}","text-letter-spacing":.05,"icon-padding":2},paint:{"text-color":"hsl(0, 0%, 7%)","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-opacity":1,"icon-color":"white","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0}},{id:"road-shields-white",type:"symbol",metadata:{"mapbox:group":"1444933575858.6992"},source:"composite","source-layer":"road_label",filter:["all",["<=","reflen",6],["in","shield","at-expressway","at-motorway","at-state-b","bg-motorway","bg-national","ch-main","ch-motorway","cz-motorway","cz-road","de-motorway","e-road","fi-main","gr-motorway","gr-national","hr-motorway","hr-state","hu-main","hu-motorway","nz-state","pl-expressway","pl-motorway","pl-national","ro-county","ro-motorway","ro-national","rs-motorway","rs-state-1b","se-main","si-expressway","si-motorway","sk-highway","sk-road","us-interstate","us-interstate-business","us-interstate-duplex","us-interstate-truck","za-metropolitan","za-national","za-provincial","za-regional"]],layout:{"text-size":9,"icon-image":"{shield}-{reflen}","icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":{base:1,stops:[[11,150],[14,200]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-padding":2,"text-rotation-alignment":"viewport","text-field":"{ref}","text-letter-spacing":.05,"icon-padding":2},paint:{"text-color":"hsl(0, 0%, 100%)","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-opacity":1,"icon-color":"white","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0}},{minzoom:14,layout:{"text-field":"{ref}","text-size":9,"icon-image":"motorway-exit-{reflen}","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"]},metadata:{"mapbox:group":"1444933575858.6992"},filter:["all",["<=","reflen",9],[">","reflen",0]],type:"symbol",source:"composite",id:"motorway-junction",paint:{"text-color":"hsl(0, 0%, 100%)","text-translate":[0,0]},"source-layer":"motorway_junction"},{id:"poi-scalerank2",type:"symbol",metadata:{"mapbox:group":"1444933358918.2366"},source:"composite","source-layer":"poi_label",filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",2]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{stops:[[14,"{maki}-11"],[15,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(26, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5}},{id:"poi-parks-scalerank2",type:"symbol",metadata:{"mapbox:group":"1444933358918.2366"},source:"composite","source-layer":"poi_label",filter:["all",["==","scalerank",2],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{stops:[[14,"{maki}-11"],[15,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5}},{minzoom:12,layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{network}","symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.85],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":{base:1,stops:[[0,""],[13,"{name_en}"]]},"text-letter-spacing":.01,"icon-padding":0,"text-max-width":7},filter:["!=","maki","entrance"],type:"symbol",source:"composite",id:"rail-label",paint:{"text-color":"hsl(230, 48%, 44%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"icon-halo-width":4,"icon-halo-color":"#fff","text-opacity":{base:1,stops:[[13.99,0],[14,1]]},"text-halo-blur":.5},"source-layer":"rail_station_label"},{minzoom:15,layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[16,13],[20,16]]}},metadata:{"mapbox:group":"1444933808272.805"},filter:["<=","area",1e4],type:"symbol",source:"composite",id:"water-label-sm",paint:{"text-color":"hsl(230, 48%, 44%)"},"source-layer":"water_label"},{minzoom:5,layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[13,13],[18,18]]}},metadata:{"mapbox:group":"1444933808272.805"},filter:[">","area",1e4],type:"symbol",source:"composite",id:"water-label",paint:{"text-color":"hsl(230, 48%, 44%)"},"source-layer":"water_label"},{layout:{"text-line-height":1.2,"text-size":{base:1,stops:[[10,11],[18,14]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-rotation-alignment":"viewport","text-field":"{name_en}","text-max-width":7},maxzoom:18,filter:["all",["all",["<=","localrank",10],["==","type","residential"]],["in","$type","LineString","Point","Polygon"]],type:"symbol",source:"composite",id:"place-residential",paint:{"text-color":"hsl(26, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-halo-blur":.5},"source-layer":"place_label"},{id:"poi-parks-scalerank1",type:"symbol",metadata:{"mapbox:group":"1444933322393.2852"},source:"composite","source-layer":"poi_label",filter:["all",["<=","scalerank",1],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":{stops:[[13,"{maki}-11"],[14,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5}},{id:"poi-scalerank1",type:"symbol",metadata:{"mapbox:group":"1444933322393.2852"},source:"composite","source-layer":"poi_label",filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["<=","scalerank",1]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":{stops:[[13,"{maki}-11"],[14,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(26, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5}},{minzoom:9,layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,12],[18,18]]},"icon-image":{stops:[[12,"{maki}-11"],[13,"{maki}-15"]]},"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.75],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":{stops:[[11,"{ref}"],[12,"{name_en}"]]},"text-letter-spacing":.01,"text-max-width":9},filter:["<=","scalerank",2],type:"symbol",source:"composite",id:"airport-label",paint:{"text-color":"hsl(230, 48%, 44%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},"source-layer":"airport_label"},{layout:{"text-line-height":1.2,"text-size":{base:1,stops:[[10,11],[18,16]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-rotation-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},maxzoom:16,filter:["in","type","aboriginal_lands","archipelago","islet"],type:"symbol",source:"composite",id:"place-islet-archipelago-aboriginal",paint:{"text-color":"hsl(230, 29%, 35%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},"source-layer":"place_label"},{minzoom:10,layout:{"text-field":"{name_en}","text-transform":"uppercase","text-letter-spacing":.1,"text-max-width":7,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":3,"text-size":{base:1,stops:[[12,11],[16,16]]}},maxzoom:16,filter:["==","type","neighbourhood"],type:"symbol",source:"composite",id:"place-neighbourhood",paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-color":"hsl(230, 29%, 35%)","text-halo-blur":.5},"source-layer":"place_label"},{minzoom:10,layout:{"text-field":"{name_en}","text-transform":"uppercase","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":.15,"text-max-width":7,"text-padding":3,"text-size":{base:1,stops:[[11,11],[15,18]]}},maxzoom:16,filter:["==","type","suburb"],type:"symbol",source:"composite",id:"place-suburb",paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-color":"hsl(230, 29%, 35%)","text-halo-blur":.5},"source-layer":"place_label"},{minzoom:10,layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[12,11.5],[15,16]]}},maxzoom:16,filter:["==","type","hamlet"],type:"symbol",source:"composite",id:"place-hamlet",paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"text-color":"hsl(0, 0%, 0%)"},"source-layer":"place_label"},{minzoom:8,layout:{"text-field":"{name}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[10,11.5],[16,18]]}},maxzoom:15,filter:["==","type","village"],type:"symbol",source:"composite",id:"place-village",paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"text-color":"hsl(0, 0%, 0%)"},"source-layer":"place_label"},{minzoom:6,layout:{"icon-image":"dot-9","text-font":{base:1,stops:[[11,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[12,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7,[0,-.15]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name}","text-max-width":7,"text-size":{base:1,stops:[[7,11.5],[15,16]]}},maxzoom:15,filter:["==","type","town"],type:"symbol",source:"composite",id:"place-town",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]}},"source-layer":"place_label"},{layout:{"text-line-height":1.2,"text-size":{base:1,stops:[[10,11],[18,16]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-rotation-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":7},maxzoom:16,filter:["==","type","island"],type:"symbol",source:"composite",id:"place-island",paint:{"text-color":"hsl(230, 29%, 35%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},"source-layer":"place_label"},{layout:{"text-size":{base:1,stops:[[6,12],[14,15]]},"icon-image":"dot-9","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.2]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name}","text-max-width":7},metadata:{"mapbox:group":"1444862510685.128"},maxzoom:14,filter:["all",["!in","scalerank",0,1,2,3,4,5],["==","type","city"]],type:"symbol",source:"composite",id:"place-city-sm",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]}},"source-layer":"place_label"},{layout:{"text-field":"{name_en}","icon-image":"dot-10","text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-offset":{base:1,stops:[[7.99,[0,.1]],[8,[0,0]]]},"text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-size":{base:.9,stops:[[5,12],[12,22]]}},metadata:{"mapbox:group":"1444862510685.128"},maxzoom:14,filter:["all",["==","type","city"],["in","ldir","E","S","SE","SW"],["in","scalerank",3,4,5]],type:"symbol",source:"composite",id:"place-city-md-s",paint:{"text-halo-width":1,"text-halo-color":"hsl(0, 0%, 100%)","text-color":"hsl(0, 0%, 0%)","text-halo-blur":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]}},"source-layer":"place_label"},{layout:{"icon-image":"dot-10","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7,"text-size":{base:.9,stops:[[5,12],[12,22]]}},metadata:{"mapbox:group":"1444862510685.128"},maxzoom:14,filter:["all",["==","type","city"],["in","ldir","N","NE","NW","W"],["in","scalerank",3,4,5]],type:"symbol",source:"composite",id:"place-city-md-n",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-halo-blur":1},"source-layer":"place_label"},{minzoom:1,layout:{"icon-image":"dot-11","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,.15]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7,"text-size":{base:.9,stops:[[4,12],[10,18]]}},metadata:{"mapbox:group":"1444862510685.128"},maxzoom:14,filter:["all",["<=","scalerank",2],["==","type","city"],["in","ldir","E","S","SE","SW"]],type:"symbol",source:"composite",id:"place-city-lg-s",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-halo-blur":1},"source-layer":"place_label"},{minzoom:1,layout:{"icon-image":"dot-11","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name}","text-max-width":7,"text-size":{base:.9,stops:[[4,12],[10,22]]}},metadata:{"mapbox:group":"1444862510685.128"},maxzoom:14,filter:["all",["<=","scalerank",2],["==","type","city"],["in","ldir","N","NE","NW","W"]],type:"symbol",source:"composite",id:"place-city-lg-n",paint:{"text-color":"hsl(0, 0%, 0%)","text-opacity":1,"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-halo-blur":1},"source-layer":"place_label"},{minzoom:3,layout:{"text-size":{base:1,stops:[[6,10],[9,14]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":{base:1,stops:[[0,"{abbr}"],[6,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":5},metadata:{"mapbox:group":"1444856151690.9143"},maxzoom:9,filter:["<","area",2e4],type:"symbol",source:"composite",id:"state-label-sm",paint:{"text-opacity":1,"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},"source-layer":"state_label"},{minzoom:3,layout:{"text-size":{base:1,stops:[[5,10],[8,16]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":{base:1,stops:[[0,"{abbr}"],[5,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":6},metadata:{"mapbox:group":"1444856151690.9143"},maxzoom:8,filter:["all",["<","area",8e4],[">=","area",2e4]],type:"symbol",source:"composite",id:"state-label-md",paint:{"text-opacity":1,"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},"source-layer":"state_label"},{minzoom:3,layout:{"text-size":{base:1,stops:[[4,10],[7,18]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-padding":1,"text-field":{base:1,stops:[[0,"{abbr}"],[4,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":6},metadata:{"mapbox:group":"1444856151690.9143"},maxzoom:7,filter:[">=","area",8e4],type:"symbol",source:"composite",id:"state-label-lg",paint:{"text-opacity":1,"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},"source-layer":"state_label"},{minzoom:1,layout:{"text-field":"{name_en}","text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:.9,stops:[[5,14],[9,22]]}},metadata:{"mapbox:group":"1444856144497.7825"},maxzoom:10,filter:[">=","scalerank",5],type:"symbol",source:"composite",id:"country-label-sm",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"hsl(0, 0%, 100%)"]]},"text-halo-width":1.25,"text-opacity":1},"source-layer":"country_label"},{minzoom:1,layout:{"text-field":{base:1,stops:[[0,"{code}"],[2,"{name_en}"]]},"text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[3,10],[8,24]]}},metadata:{"mapbox:group":"1444856144497.7825"},maxzoom:8,filter:["in","scalerank",3,4],type:"symbol",source:"composite",id:"country-label-md",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"hsl(0, 0%, 100%)"]]},"text-halo-width":1.25},"source-layer":"country_label"},{minzoom:1,layout:{"text-field":"{name_en}","text-max-width":{base:1,stops:[[0,5],[3,6]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[1,10],[6,20]]}},metadata:{"mapbox:group":"1444856144497.7825"},maxzoom:7,filter:["in","scalerank",1,2],type:"symbol",source:"composite",id:"country-label-lg",paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"hsl(0, 0%, 100%)"]]},"text-halo-width":1.25},"source-layer":"country_label"}];this.styles.zr=[];for(var t=function(t,i){var n,o,r,a,s,h,e=M[t];if(e.zIndex=t,e.paint["line-width"]){var f,l=e.paint["line-width"],u=0,c=0,d=null,p=null,v=null,m=null;if("number"!=typeof l){if(l.stops)d=l.base||1,v=l.stops;else if("interpolate"===l[0]){var y=l.slice(3);v=[];for(var x=0;x<y.length;x+=2)v.push([y[x],y[x+1]]);d=1}}else u=l;if(e.paint["line-gap-width"]){var g=e.paint["line-gap-width"];if("number"!=typeof g){if(g.stops)p=g.base||1,m=g.stops;else if("interpolate"===g[0]){for(y=g.slice(3),m=[],x=0;x<y.length;x+=2)m.push([y[x],y[x+1]]);p=1}}else c=g}n=u,o=c,r=d,a=p,s=v,h=m,f=function(t){var i=0,e=0;return h&&a?i=k.Sr(a,h,t):o&&(i=o),s&&r?e=k.Sr(r,s,t):n&&(e=n),i?2*e+i:e},S.styles.zr.push(f),e.paint["line-width"]=f,e.paint["line-width"].Cr=S.styles.zr.length-1,delete e.paint["line-gap-width"]}var b=e["source-layer"];if(b){S.styles[b]||(S.styles[b]=[]);var _=e.filter;if(_){e.filters=[];var w=function(t){if("all"!==t[0])"in"===t[0]||"!in"===t[0]?e.filters.push([t[0],t[1],t.slice(2)]):e.filters.push(t);else for(var i=1;i<t.length;i+=1)w(t[i])};w(_)}S.styles[b].push(e)}else S.styles[e.id]=e},S=this,i=0,e=M.length;i<e;i+=1)t(i);this.backgroundColor=this.Lr(this.styles.background.paint["background-color"])},Ar:function(t,i,e,n){var o=n-e,r=t-e;return 0==o?0:1===i?r/o:(Math.pow(i,r)-1)/(Math.pow(i,o)-1)},Sr:function(t,i,e){if(e<i[0][0])return i[0][1];if(e>=i[i.length-1][0])return i[i.length-1][1];for(var n=1,o=i.length;n<o;n+=1)if(e<i[n][0]){if(i[n][1]instanceof Array){for(var r=new Array(i[n][1].length),a=0;a<i[n][1].length;a+=1)r[a]=i[n-1][1][a]+this.Ar(e,t,i[n-1][0],i[n][0])*(i[n][1][a]-i[n-1][1][a]);return r}if("number"==typeof i[n][1])return i[n-1][1]+this.Ar(e,t,i[n-1][0],i[n][0])*(i[n][1]-i[n-1][1])}},Lr:function(t,i){if(t){var e=void 0;if("string"==typeof t)e=t;else if(t.stops)for(var n=0,o=t.stops.length;n<o;n+=1){if(t.stops[n][0]>i){e=t.stops[n][1];break}e=t.stops[o-1][1]}else if("interpolate"===t[0]){for(var r=t.slice(3),a=[],s=0;s<r.length;s+=2)a.push([r[s],r[s+1]]);for(n=0,o=a.length;n<o;n+=1){if(a[n][0]>i){e=a[n][1];break}e=a[o-1][1]}}return e}},Tr:function(t,i){if(t){var e=void 0;if(t.stops)for(var n=0,o=t.stops.length;n<o;n+=1){if(t.stops[n][0]>i){e=t.stops[n][1];break}e=t.stops[o-1][1]}else e=t;return e}},Ir:function(t,i){var e;if(void 0===t)return 0;if("function"==typeof t)return t(i);if("number"!=typeof t){if(t.stops)e=this.Sr(t.base||1,t.stops,i);else if("interpolate"===t[0]){for(var n=t.slice(3),o=[],r=0;r<n.length;r+=2)o.push([n[r],n[r+1]]);e=this.Sr(1,o,i)}}else e=t;return e},Dr:function(t,i,e){var n;if(void 0===t)return t;t instanceof Array?n=t:t.stops&&(n=this.Sr(t.base||1,t.stops,i));var o=new Array(n.length);this.Mr&&(e*=2);for(var r=0;r<n.length;r++){var a=n[r];o[r]=a*e}return o},Pr:function(t,i){for(var e,n,o,r,a,s,h,l,f,u,c,d="butt",p="butt",v="solid",m="solid",y=0,x=0,g=0;g<t.length;g+=1)if("line"===t[g].type){var b=t[g];if(b.minzoom&&b.minzoom>i)continue;var _=b.paint,w=b.layout,k=this.Ir(_["line-opacity"]||1,i);if(!k)continue;if(_t.Util.endsWith(t[g].id,"-low")){s=k;var M=_["line-color"];r=this.Lr(M,i),d=this.Tr(w["line-cap"]||d,i),n=this.Ir(_["line-width"],i),f=_["line-width"].Cr,(l=this.Dr(_["line-dasharray"],i,n))&&(v="dashed"),x=Math.max(x,t[g].zIndex)}else _t.Util.endsWith(t[g].id,"-case")||_t.Util.endsWith(t[g].id,"-tracks")?(a=!0,h=k,M=_["line-color"],o=this.Lr(M,i),e=this.Ir(_["line-width"],i),u=_["line-width"].Cr,p=this.Tr(w["line-cap"]||p,i),(c=this.Dr(_["line-dasharray"],i,e))&&(m="dashed"),y=Math.max(y,t[g].zIndex)):_t.Util.endsWith(t[g].id,"-bg")?(a=!0,h=k,M=_["line-color"],o=this.Lr(M,i),p=this.Tr(w["line-cap"]||p,i),e=this.Ir(_["line-width"],i),u=_["line-width"].Cr,(c=this.Dr(_["line-dasharray"],i,e))&&(m="dashed"),y=Math.max(y,t[g].zIndex)):(s=k,M=_["line-color"],r=this.Lr(M,i),d=this.Tr(w["line-cap"]||d,i),n=this.Ir(_["line-width"],i),f=_["line-width"].Cr,this.Dr(_["line-dasharray"],i,n)&&(v="dashed"),x=Math.max(x,t[g].zIndex))}return n?{jr:x,Or:y,Fr:v,Er:s,Nr:l,$r:n,faceColor:r,Ur:d,Br:p,isOutline:a,Wr:h,Gr:m,Zr:c,borderColor:o,borderWidth:e,qr:f,Yr:u}:void 0},Vr:function(t,i){for(var e,n,o,r,a=0,s=0;s<t.length;s+=1){var h=t[s];if("line"===t[s].type){if(h.minzoom&&h.minzoom>i)continue;a=Math.max(a,h.zIndex);var l=(f=h.paint)["line-color"];o=this.Lr(l,i),e=this.Ir(f["line-width"],i),n=this.Ir(f["line-opacity"]||1,i)}else if("fill"===t[s].type){if(h.minzoom&&h.minzoom>i)continue;a=Math.max(a,h.zIndex);var f,u=(f=h.paint)["fill-color"];r=this.Lr(u,i)}}return{zIndex:a,fillColor:r,fillOpacity:1,strokeWeight:e,strokeColor:o,strokeOpacity:n}},Xr:function(t,i){var e=t[0],n=e.paint,o=e.layout;if("symbol"===e.type){if(e.minzoom&&e.minzoom>i)return;var r=this.Lr(n["text-color"],i),a=this.Lr(n["text-halo-color"],i),s=this.Ir(n["text-halo-width"],i),h=this.Ir(n["icon-opacity"]||1,i),l=void 0;0==+s&&(a=""),o["icon-image"]&&(l=this.Tr(o["icon-image"]));var p,f=this.Tr(o["icon-rotation-alignment"],i),u=o["text-max-width"],c=this.Tr(o["text-anchor"]||"center",i),d=this.Tr(o["text-font"],i)||"Microsoft YaHei";p=o["text-offset"]?this.Tr(o["text-offset"],i):[0,0];var v=this.Ir(o["text-size"],i),m=this.Tr(o["text-field"],i);return m=m&&(m=m.replace("{name}",this.Hr)).substr(1,m.length-2),{zIndex:e.zIndex,Jr:f,Kr:r,Qr:a,th:(e.minzoom||1)+1,ih:(e.maxzoom||20)+1,eh:h,nh:l,oh:u,textAnchor:c,ah:d,sh:p,rh:v,hh:m}}},lh:function(t,i){var e=[],n=this.Pr(t,i);n&&(n.type="line",e.push(n));var o=this.uh(t,i);return o.length&&e.push.apply(e,o),e},uh:function(t,i){for(var e=[],n=0;n<t.length;n+=1){var o=this.Xr([t[n]],i);o&&e.push(o)}return e},n_:function(h,l,t,i){var f=h.type;h.properties.class,h.properties.type;var n,u=this.styles[l];return h.properties.iso_3166_1&&-1!==h.properties.iso_3166_1.indexOf("CN")?{}:u&&(n=function(){for(var t=[],i=0,e=u.length;i<e;i+=1){var n=u[i];if(n.filters){for(var o=!0,r=0;r<n.filters.length;r+=1){var a=n.filters[r],s=void 0;switch(a[1]){case"$type":s=3===f?"Polygon":2===f?"LineString":"Point";break;default:s=h.properties[a[1]]}switch(a[0]){case"==":s!==a[2]&&(o=!1);break;case"!=":s===a[2]&&(o=!1);break;case">":s<=a[2]&&(o=!1);break;case"<":s>=a[2]&&(o=!1);break;case">=":s<a[2]&&(o=!1);break;case"<=":s>a[2]&&(o=!1);break;case"in":-1===a[2].indexOf(s)&&(o=!1);break;case"!in":-1!==a[2].indexOf(s)&&(o=!1)}}o&&t.push(n)}else n.id===l&&t.push(n)}return t}()).length?1===f?this.Xr(n,i):2===f?this.lh(n,i):3===f?this.Vr(n,i):void 0:void 0},fh:function(t,i){for(var e=1<<20-i.z,n=t.extent/256,o=0;o<t.style.length;o+=1){var r=t.style[o];if("line"!==r.type){var a="";r.hh&&(a=t.properties[r.hh]);for(var s=this.Mr,h=s?1.8*r.rh:r.rh,l=t.lines[0],f=1;f<t.lines.length;f+=1)l.length<t.lines[f].length&&(l=t.lines[f]);for(var u=[],c=0;c<l.length;c+=1){var d=[i.x*e*256+l[c][0]/n*e,256*i.y*e+l[c][1]/n*e];u.push(d)}var p=r.textAnchor;this._r.font=r.rh+"px "+r.ah;var v=this._r.measureText(a).width,m=0,y=0,x=r.nh&&"viewport"===r.Jr;if(r.nh){m=(-t.properties.dh||0)-100;var g=_t.kS._S(u,_t.kS.distanceOfLine(u)/2)||[],b=g[2];"viewport"!==r.Jr&&1<u.length&&(y=360-(new _t.Pixel(u[b+1][0]-u[b][0],u[b+1][1]-u[b][1]).direction()||0)),u=[g[0],g[1]]}else{if(this.vh(l))continue;var _=new _t.Pixel(l[1][0]-l[0][0],l[1][1]-l[0][1]).direction()||0;if(90<_&&_<270&&(u.reverse(),l.reverse()),m=-t.properties.dh-1e6,_t.kS.distanceOfLine(u)/e<1.5*v)continue}var w={margin:this.mh,foreign:!0,zIndex:r.zIndex,yh:y,rank:m,font:r.ah,Kr:r.Kr,Qr:r.Qr,rh:h,id:t.id,xh:u,name:a,textAlign:"center",textBaseline:"center"===p?"middle":"top",bh:[],gh:new Array,wh:x,_h:!x,kh:!r.nh,th:r.th,Mh:!0,Rh:new Array,zh:!1,zoom:i.z};if(r.nh){var k=0,M=r.nh.replace("{maki}",t.properties.maki).replace("{shield}",t.properties.shield).replace("{reflen}",t.properties.reflen).replace("{network}",t.properties.network),S=this.kr[M];if(S&&r.eh){k=S.height;var z=[-S.width/2,-S.height/2,S.width,S.height,S.x,S.y,S.width,S.height];w.gh.push(z)}if(a){var C,R=void 0;C="center"===p?(R=0,-h/2):R=o*(h+2)+k/2,w.Rh.push([a,r.ah,h,r.Kr,r.Qr,0,0,!1,[0,R,s?1.8*v:v,h]]),z=[-v/2,C,v,h],w.gh.push(z)}(k||a)&&(a?w.id="mapbox_guideboard_"+_t.Util.stamp(w):(w.id="mapbox_singleway_"+_t.Util.stamp(w),w.zh=!0),i.labels.push(w))}else a&&(w.id="mapbox_roadname_"+_t.Util.stamp(w),i.labels.push(w))}}},Sh:function(t,i){var e=1<<20-i.z,n=t.extent/256,o=t.Ch.xh[0][0],r=t.properties[t.style.hh];if(r){var a=this.Mr?2*t.style.rh:t.style.rh,s=[i.x*e*256+o[0]/n*e,256*i.y*e+o[1]/n*e],h=t.style.textAnchor,l={foreign:!0,margin:this.mh,zIndex:t.style.zIndex,rank:-t.properties.dh||0,id:t.id,xh:s,name:r,textAlign:"center",textBaseline:"center"===h?"middle":"top",bh:[],gh:new Array,yh:0,pos:[o[0]/n,o[1]/n],wh:!0,th:t.style.th,Mh:!0,Rh:new Array},f=0;if(t.style.nh){var u=t.style.nh.replace("{maki}",t.properties.maki).replace("{shield}",t.properties.shield).replace("{reflen}",t.properties.reflen).replace("{network}",t.properties.network),c=this.kr[u];if(c&&t.style.eh){f=c.height;var d=[-c.width/2,-c.height/2,c.width,c.height,c.x,c.y,c.width,c.height];l.gh=[d]}}var p=[],v=r.indexOf("(");if(0<v)p=[r.substr(0,v),r.substr(v)];else if(20<r.length){var m=r.split(" ");if(1<m.length){var y=Math.floor(m.length/2);p=[m.slice(0,y).join(" "),m.slice(y).join(" ")]}else p=[r]}else p=[r];this._r.font=a+"px "+t.style.ah;for(var x=0;x<p.length;x+=1){var _,g=p[x],b=this._r.measureText(g).width;_="center"===h?(-.5*p.length+x)*(a+2):x*(a+2)+f/2,l.Rh.push([g,t.style.ah,a,t.style.Kr,t.style.Qr,0,0,!1,[0,_,b,a]]),d=[-b/2,_,b,a],l.gh.push(d)}return i.labels.push(l),l}},Lh:function(t){var i=[],e=[];for(var n in t.layers)if(t.layers.hasOwnProperty(n)){for(var o=t.layers[n],r=[],a=0;a<o.Ah.length;a+=1)3==+(s=o.Ah[a]).type?i.push(s):2==+s.type&&r.push(s);for(a=0;a<r.length;a+=1){var s,h=(s=r[a]).style;h.isOutline&&e.push([s,{zIndex:h.Or,Th:h.Yr,strokeStyle:h.Gr,strokeOpacity:h.Wr,strokeDasharray:h.Zr,lineCap:h.Br,strokeWeight:h.borderWidth,strokeColor:h.borderColor}]),e.push([s,{zIndex:h.jr,Th:h.qr,strokeStyle:h.Fr,strokeOpacity:h.Er,strokeDasharray:h.Nr,lineCap:h.Ur,strokeWeight:h.$r,strokeColor:h.faceColor}])}}e.sort(function(t,i){return t[1].zIndex>i[1].zIndex?1:-1}),t.polygons=i,t.Dh=e,delete t.layers},Ph:function(t){t.type,t.lines},jh:function(t,i,e,n){this.mh=3;var o=i.vt;o.labels=[];var r=[];for(var a in o.layers)if(o.layers.hasOwnProperty(a)){var s=o.layers[a],h=s.Ah;r.push(a);for(var l=0,f=h.length;l<f;l++){var u=h[l];u.Fh=s.name,u.style=this.n_(u,s.name,!0,o.z-1),u.style,this.Ph(u),u.style&&(1==+u.type||2==+u.type&&u.style.length&&(this.fh(u,o),"line"===u.style[0].type&&(u.style=u.style[0])))}}this.Lh(o),this.Eh||(this.Eh=!0),e.features=o.labels,o.labels=null,r.length>this.layers.length&&(this.layers=r),n(null,{vt:o})}};We.Rr();var Ue,Ge=(Ue=ye,_t.Ei(Ve,Ue),Ve.prototype.oa=function(i,t,o,e){var r=this;this.ze=t,this.aa=i,this.sa=[];var n=i.boundsCoord,a=i.optimalZoom,s=i.optimalResolution;a<this.Qs[0]?(a=this.Qs[0],s=_t.at.getProjection(i.projectionId).getResolution(a)):a>this.Qs[1]&&(a=this.Qs[1],s=_t.at.getProjection(i.projectionId).getResolution(a));for(var h=this.ha(n,a,s),l=[],f=_t.map(h,function(t){return t.key}),u=this.la,c=[],d=0,p=u;d<p.length;d++){var v=p[d];if(f.indexOf(v.key)<0){var m=this.ua.ta(v);m&&m.status!==_t.Mo.LOADED&&m.request&&(m.request.cancel(),delete m.request,this.ua.ea(m))}}var y=[];if(_t.forEach(h,function(t){var i=new _t.ca(t.z,r.fa(t.x,t.z),t.y),e=new _t.ca(t.z,t.x,t.y),n=r.ua.ta(i);if(n)n&&n.status===_t.Mo.LOADED?r.sa.push(e):c.push(t);else{var o=new _t.Gh(i);o.status=_t.Mo.LOADING,r.ua.Jo(o),y.push(i),c.push(t)}(!n||n&&n.status!==_t.Mo.LOADED)&&l.push(t)}),this.da(i,this.sa,l,e),this.la=c,0===y.length)return!1;_t.map(y,function(n){var t=r.ua.ta(n);t&&(t.request=r.Uh.send("loadMVTSourceTile",{url:r.Be.replace("[x]",n.x+"").replace("[y]",n.y+"").replace("[z]",n.z+""),Zh:n,projectionId:i.projectionId,tileSize:r.Xa,styles:r.To.MS()},function(t,i){if(i){var e=i&&r.ua.ta(n);e&&(e.data=i,e.status=_t.Mo.LOADED,o())}}))})},Ve.prototype.getData=function(i){var t=i.boundsCoord,e=i.optimalZoom,n=this.ha(t,e,i.resolution),o=[];if(this.sa.sort(function(t){return i.optimalZoom===t.z?1:-1}),0<this.sa.length)for(var r=0;r<this.sa.length;r++){var a=this.sa[r],s=this.ua.ta(a),h=0,l=0,f=[0,0],u=i.centerCoord;if(s){var c=_t.lcs.getLocalByCoord([u[0],u[1]]);if(i.optimalZoom>=_t.Ra){var d=_t.lcs.getSize();h=s.Ma.x-c.x,l=s.Ma.y-c.y,0!==h&&(h*=d[0],f[0]=h),0!==l&&(l*=d[1],f[1]=l),i.optimalZoom>=_t.Ra&&_t.za>=s.zo.z&&(f[0]=-c.center[0],f[1]=-c.center[1])}else i.optimalZoom<_t.Ra&&_t.za<s.zo.z&&(f[0]=c.center[0],f[1]=c.center[1])}else{var p=this.ua.ta(new _t.ca(a.z,this.fa(a.x,a.z),a.y));if(p){if(s=new _t.Gh(a),d=(1<<a.z)-1,a.x<0){var v=Math.floor(a.x/d);f[0]+=20037508.342789244*v*2}else a.x>d&&(v=Math.floor(a.x/d),f[0]+=20037508.342789244*v*2);s.Ro=p.Ro,s.data=p.data,s.Sa=f,s.status=p.status}}s&&(s.Sa=f,o.push(s))}var m=_t.every(n,function(i){return _t.some(o,function(t){return t.zo.key===i.key})});return this.Fo(m),{fo:!!m,tiles:o}},Ve.prototype.Ks=function(t){this.ua.Xo(t)},Ve.prototype.Da=function(t,i){if(t.length){var a=this.Pa.z,s=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2;t.sort(function(t,i){var e=(t.x<<a-t.z)-s,n=(t.y<<a-t.z)-h,o=(i.x<<a-i.z)-s,r=(i.y<<a-i.z)-h;return e*e+n*n<=o*o+r*r?-1:1})}},Ve.prototype.ha=function(t,i,e){for(var n=20037508.342789244,o=t[0]+n,r=-(t[3]-n),a=o/e,s=(t[2]+n)/e,h=r/e,l=-(t[1]-n)/e,f=this.Xa,u=Math.floor(s/f),c=Math.min((1<<i)-1,Math.floor(l/f)),d=Math.floor(a/f),p=Math.floor(h/f),v=this.Pa={Oa:u,Ea:c,ja:d,Fa:p,z:i},m=[],y=v.ja;y<=v.Oa;y+=1)for(var x=v.Fa;x<=v.Ea;x+=1)m.push(new _t.ca(i,y,x));return this.Da(m),m},Ve.prototype.da=function(t,i,e,n){var o,r,a,s=t.optimalZoom;if(this.Za){var h=Math.min(this.xt[1],s+2);for(r=s+1;e.length&&r<=h;r+=1){var l=[];a=[];var f=r;for(o=e.length-1;0<=o;--o)for(var u=e[o],c=u.x<<1,d=u.y<<1,p=1;0<=p;--p)for(var v=1;0<=v;--v){var m=new _t.ca(f,this.fa(c+p,f),d+v),y=this.ua.ta(m),x=new _t.ca(f,c+p,d+v);y&&y.status===_t.Mo.LOADED?a.push(x):l.push(x)}a.length&&i.push.apply(i,a),e=l}}if(this.qa){var g=this.xt[0];for(r=s-1;e.length&&g<=r;--r){a=[],l=[];var b={};for(o=e.length-1;0<=o;--o){var _=e[o],w=(f=r,_.z-f),k=(p=_.x>>w,v=_.y>>w,(m=new _t.ca(f,this.fa(p,f),v)).key);b[k]||(y=this.ua.ta(m),b[k]=!0,y&&y.status===_t.Mo.LOADED?a.push(new _t.ca(f,p,v)):l.push(new _t.ca(f,p,v)))}a.length&&i.push.apply(i,a),e=l}}return i},Ve.prototype.fa=function(t,i){var e=(1<<(i=i||this.aa.optimalZoom))-1;return e<t?t-e-1:t<0?e+t+1:t},Ve);function Ve(t,i,e,n){var o=Ue.call(this,t,i,e,n)||this;return o.ua=new _t.OD(300),o.Xa=256,o.sa=[],o.Zs=[],o.la=[],o.qa=!0,o.Za=!0,o.xt=t.zooms,o.Qs=t.dataZooms,o.Xa=t.tileSize||o.Xa,o.Be=t.tileUrl,o.$h=We,o.Uh=new _t.Bh(e.gn.Wh,o),o}var Ye,Ze=_t._.scale,Xe=(Ye=ye,_t.Ei(Je,Ye),Je.prototype.oa=function(n,t,o,i){var r=this;this.aa=n,this.sa=[];for(var e=n.optimalResolution,a=n.optimalZoom,s=n.boundsCoord,h=n.zoom,l=this.ha(s,a,e,n),f=[],u=_t.map(l,function(t){return t.key}),c=[],d=0,p=this.la;d<p.length;d++){var v=p[d];u.indexOf(v.key)<0&&(_=this.ua.ta(v))&&_.status!==_t.Mo.LOADED&&_.request&&(_.request.cancel(),delete _.request,this.ua.ea(_))}for(var m=[],y=i.getMapState(),x=y.panning,g=y.zooming,b=0;b<l.length;b++){var _,w=l[b],k=new _t.ca(w.z,this.fa(w.x,w.y,w.z),w.y),M=new _t.ca(w.z,w.x,w.y);if((_=this.ua.ta(k))||!x||g){if(_)_&&_.status===_t.Mo.LOADED?this.sa.push(M):c.push(w);else{var S=new _t.Sw(k);S.status=_t.Mo.LOADING,this.ua.Jo(S),m.push(k),c.push(w)}(!_||_&&_.status!==_t.Mo.LOADED)&&f.push(w)}}if(this.da(n,this.sa,f,i),this.la=c,0===m.length)return!1;var z=this.To.SS().adcode;_t.map(m,function(t){var i=r.ua.ta(t);if(i){var e=r.Be.replace("[z]",t.z+"").replace("[x]",t.x+"").replace("[y]",t.y+"");r.map.gn.RS(i,{url:e,ya:t.key,zoom:h,optimalZoom:n.optimalZoom,projectionId:n.projectionId,Zh:t,tileSize:r.Xa,styles:{},adcode:z},function(t){var i=t&&r.ua.ta(t.zo);if(i){delete i.request,i.status=_t.Mo.LOADED,i.Ma=t.zS,i.Ro=t.Ro;var e=_t.lcs.getLocalByCoord([i.Ro[0],i.Ro[1]]);i.data=_t.Ln(_t.Ln({},t),{Hs:e}),o()}})}})},Je.prototype.getData=function(t){var i=t.optimalResolution,e=t.optimalZoom,n=t.boundsCoord,o=t.centerCoord,r=this.ha(n,e,i,t),a=this.aa.projectionId,s=_t.at.getProjection(a),h=[],l=this.map.qF();if(this.ua.QF(l),this.sa.sort(function(t){return e===t.z?1:-1}),0<this.sa.length)for(var f=0;f<this.sa.length;f++){var u=this.sa[f],c=this.ua.ta(u),d=[0,0],p=_t.lcs.getLocalByCoord([o[0],o[1]]),v=0,m=0;if(!c){var y=this.ua.ta(new _t.ca(u.z,this.fa(u.x,u.y,u.z),u.y));if(y){c=new _t.Sw(u);var x=s.getResolution(u.z),g=u.x-y.zo.x;d[0]+=x*this.Xa*g,c.Ro=y.Ro,c.Ma=y.Ma,c.data=y.data,c.Sa=d,c.status=y.status}}if(c)if(e>=_t.Ra&&c.data.Hs){var b=_t.lcs.getSize();v=c.data.Hs.x-p.x,m=c.data.Hs.y-p.y,0!==v&&(v*=b[0],d[0]=v),0!==m&&(m*=b[1],d[1]=m),e>=_t.Ra&&_t.za>=c.zo.z+1&&(d[0]=-p.center[0],d[1]=-p.center[1])}else e<_t.Ra&&_t.za<c.zo.z+1&&(d[0]=p.center[0],d[1]=p.center[1]);c&&(c.Sa=d,c.stamp=l,h.push(c))}var _=_t.every(r,function(i){return _t.some(h,function(t){return t.zo.key===i.key})});return this.Fo(_),_&&(this.a_=!0),{s_:this.a_,fo:!!_,tiles:h}},Je.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==_t.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[]},Je.prototype.reload=function(){this.ua.forEach(function(t){t.status!==_t.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.la=[]},Je.prototype.setTileUrl=function(t){this.Be=t||this.Be},Je.prototype.wS=function(){return this.ua},Je.prototype.Ks=function(t){t=t||(_t._.$e?50:200),this.ua.Xo(t)},Je.prototype.Da=function(t,i){if(t.length){var a=this.Pa.z,s=(this.Pa.ja+this.Pa.Oa)/2,h=(this.Pa.Fa+this.Pa.Ea)/2;t.sort(function(t,i){var e=(t.x<<a-t.z)-s,n=(t.y<<a-t.z)-h,o=(i.x<<a-i.z)-s,r=(i.y<<a-i.z)-h;return e*e+n*n<=o*o+r*r?-1:1})}},Je.prototype.ha=function(t,i,e,n){var o=this.To.Lo().dataZooms;i=Math.max(Math.min(i,o[1]),o[0])-1,e=_t.at.getProjection(n.projectionId).getResolution(i);var r=this.Xa,a=20037508.342789244,s=t[0]+a,h=-(t[3]-a),l=s/e,f=(t[2]+a)/e,u=h/e,c=-(t[1]-a)/e,d=Math.floor(f/r),p=Math.min((1<<i)-1,Math.floor(c/r)),v=Math.floor(l/r),m=Math.max(Math.floor(u/r),0);this.Pa={Oa:d,Ea:p,ja:v,Fa:m,z:i};for(var y=[],x=v;x<=d;x+=1)for(var g=m;g<=p;g+=1)y.push(new _t.ca(i,x,g));return this.Da(y),y},Je.prototype.da=function(t,i,e,n){var o,r,a,s=t.optimalZoom-1;if(this.Za="overlay"!==this.To.type,this.qa="overlay"!==this.To.type,this.Za){var h=Math.min(this.xt[1]-1,2+s);for(r=1+s;e.length&&r<=h;r+=1){var l=[];a=[];var f=r;for(o=e.length-1;0<=o;--o)for(var u=e[o],c=u.x<<1,d=u.y<<1,p=1;0<=p;--p)for(var v=1;0<=v;--v){var m=new _t.ca(f,this.fa(c+p,v,f),d+v),y=this.ua.ta(m),x=new _t.ca(f,c+p,d+v);y&&y.status===_t.Mo.LOADED?a.push(x):l.push(x)}a.length&&i.push.apply(i,a),e=l}}if(this.qa){var g=this.xt[0]-1;for(r=s-1;e.length&&g<=r;--r){a=[],l=[];var b={};for(o=e.length-1;0<=o;--o){var _=e[o],w=(f=r,_.z-f),k=(p=_.x>>w,v=_.y>>w,(m=new _t.ca(f,this.fa(p,v,f),v)).key);b[k]||(y=this.ua.ta(m),b[k]=!0,y&&y.status===_t.Mo.LOADED?a.push(new _t.ca(f,p,v)):l.push(new _t.ca(f,p,v)))}a.length&&i.push.apply(i,a),e=l}}return i},Je.prototype.fa=function(t,i,e){for(var n=1<<(e=e||this.aa.optimalZoom);t<0||n<=t;)t=n<=t?t-n:t<0?n+t:t;return t},Je);function Je(t,i,e,n){var o=Ye.call(this,t,i,e,n)||this;return o.Ya=!1,o.Va=!1,o.Xa=256,o.xt=[2,22],o.sa=[],o.la=[],o.qa=!0,o.Za=!0,o.a_=!1,o.Xa=t.tileSize,o.Be=t.tileUrl,o.ua=new _t.OD(_t._.$e?50:200),e.gn.Ha({scale:Ze,showLabel:e.showLabel}),o.R_=e.R_,o.z_=e.z_,e.gn.Ja(AMap.getConfig().protocol),e.mapStyle.pn(function(){e.gn.Ka(e.mapStyle.vn)}),o}var qe,Qe=(qe=ye,_t.Ei(Ke,qe),Ke.prototype.oa=function(t,i,e){this.ze=i,this.Oo||(this.Fo(!0),e())},Ke.prototype.getData=function(t){return this.ir=t.bounds,{Sa:[0,0]}},Ke);function Ke(t,i,e,n){var o=qe.call(this,t,i,e,n)||this;return o.ir=e.getView().getStatus().bounds,o.io=n.canvas,o}var tn,en=(tn=ye,_t.Ei(nn,tn),nn.prototype.oa=function(t,i,e){return!0},nn.prototype.getData=function(t){return!0},nn);function nn(t,i,e,n){var o=tn.call(this,t,i,e,n)||this;return o.gs=n,o}var on,rn=(on=ye,_t.Ei(an,on),an.prototype.CS=function(){this.AS=!1},an.prototype.oa=function(t,i,e){return!0},an.prototype.getData=function(t){var s=this,i=this.gs.ro().path;if(this.AS)return this.AS;if(i){var e=_t.GeometryUtil.typePolygon(i),h={type:"Polygon",$S:new Array,polygons:new Array,BM:new Array,LS:{x:0,y:0}};if(e&&"Polygon"===e){i[0][0]instanceof _t.LngLat?h.LS=_t.lcs.getLocalByLnglat(i[0][0].toString()):h.LS=_t.lcs.getLocalByLnglat(i[0][0]);var n=h.LS,a=n.x,l=n.y;_t.forEach(i,function(t,i){if(0===i)_t.forEach(t,function(t){t instanceof _t.LngLat&&(t=t.toArray());var i=_t.lcs.getLocalByLnglat(t),e=s.DS(a,l,i.x,i.y),n=e[0],o=e[1];h.$S.push(i.Sa[0]+n,i.Sa[1]+o)});else{var r=[];_t.forEach(t,function(t){t instanceof _t.LngLat&&(t=t.toArray());var i=_t.lcs.getLocalByLnglat(t),e=s.DS(a,l,i.x,i.y),n=e[0],o=e[1];r.push(i.Sa[0]+n,i.Sa[1]+o)}),h.BM.push(r)}})}else if(e&&"MultiPolygon"===e){h.type="MultiPolygon",i[0][0][0]instanceof _t.LngLat?h.LS=_t.lcs.getLocalByLnglat(i[0][0][0].toArray()):h.LS=_t.lcs.getLocalByLnglat(i[0][0][0]);var o=h.LS,f=o.x,u=o.y;_t.forEach(i,function(t){var a=[],e=[];_t.forEach(t,function(t,i){if(0===i)_t.forEach(t,function(t){t instanceof _t.LngLat&&(t=t.toArray());var i=_t.lcs.getLocalByLnglat(t),e=s.DS(f,u,i.x,i.y),n=e[0],o=e[1];a.push(i.Sa[0]+n,i.Sa[1]+o)});else{var r=[];_t.forEach(t,function(t){t instanceof _t.LngLat&&(t=t.toArray());var i=_t.lcs.getLocalByLnglat(t),e=s.DS(f,u,i.x,i.y),n=e[0],o=e[1];r.push(i.Sa[0]+n,i.Sa[1]+o)}),e.push(r)}}),h.BM.push(e),h.polygons.push(a)})}return this.AS=this.zw(h),this.AS}return!0},an.prototype.zw=function(t){if(t.Oc=new _t._w,!t.Dc){t.Dc=new _t.K_;var i=[],e=[];"Polygon"===t.type?(i=[t.$S],e=[t.BM]):"MultiPolygon"===t.type&&(i=t.polygons,e=t.BM);for(var n=0;n<i.length;n++){for(var o=i[n],r=[],a=0;a<e[n].length;a++){var s=e[n][a];r.push(o.length/2),o.push.apply(o,s)}var h=t.Dc.Nx(o,r);0<h&&t.Oc.add(99,99,h,2,22)}return t}},an.prototype.DS=function(t,i,e,n){var o=e-t,r=n-i,a=_t.lcs.getSize();return[o*a[0],r*a[1]]},an);function an(t,i,e,n){var o=on.call(this,t,i,e,n)||this;return o.gs=n,o}function sn(t){var D={TS:function(){this.PS=0}};D.TS.prototype.create=function(t){this.OS&&this.PS===t||(this.OS=[]),this.PS=t,this.FS=0,this.BS=0},D.TS.prototype.flush=function(){var t=this.FS-this.BS;if(0!==t){for(;t--;)this.ES.jS(this.OS[this.BS++]);this.FS>=this.PS&&(this.FS=0),this.BS=this.FS}},D.TS.prototype.NS=function(){this.flush(),this.ES=null},D.TS.prototype.US=function(t){this.NS(),this.ES=t},D.TS.prototype.init=function(t){t||(this.BS=0,this.FS=0)},D.TS.prototype.WS=function(t,i){var e=this.FS-t-1;for(e<0&&(e+=this.PS);i--;)e>=this.PS&&(e=0),this.OS[this.FS++]=this.OS[e++],this.FS>=this.PS&&this.flush()},D.TS.prototype.GS=function(t){this.OS[this.FS++]=t,this.FS>=this.PS&&this.flush()},D.TS.prototype.HS=function(t){var i=this.FS-t-1;return i<0&&(i+=this.PS),this.OS[i]},D.VS=function(){},D.VS.prototype.US=function(t){this.ES=t},D.VS.prototype.NS=function(){this.ES=null},D.VS.prototype.init=function(){var t=5;for(this.ZS=0,this.YS=-1;t--;)this.ZS=this.ZS<<8|this.ES.JS()},D.VS.prototype.XS=function(t){for(var i,e=0,n=t;n--;)this.YS>>>=1,i=this.ZS-this.YS>>>31,this.ZS-=this.YS&i-1,e=e<<1|1-i,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8);return e},D.VS.prototype.qS=function(t,i){var e=t[i],n=(this.YS>>>11)*e;return(2147483648^this.ZS)<(2147483648^n)?(this.YS=n,t[i]+=2048-e>>>5,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8),0):(this.YS-=n,this.ZS-=n,t[i]-=e>>>5,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8),1)},D.QS=function(t,i){for(;i--;)t[i]=1024},D.KS=function(t){this.tR=[],this.iR=t},D.KS.prototype.init=function(){D.QS(this.tR,1<<this.iR)},D.KS.prototype.decode=function(t){for(var i=1,e=this.iR;e--;)i=i<<1|t.qS(this.tR,i);return i-(1<<this.iR)},D.KS.prototype.eR=function(t){for(var i,e=1,n=0,o=0;o<this.iR;++o)e=e<<1|(i=t.qS(this.tR,e)),n|=i<<o;return n},D.nR=function(t,i,e,n){for(var o,r=1,a=0,s=0;s<n;++s)r=r<<1|(o=e.qS(t,i+r)),a|=o<<s;return a},D.oR=function(){this.rR=[],this.aR=[],this.sR=[],this.hR=new D.KS(8),this.lR=0},D.oR.prototype.create=function(t){for(;this.lR<t;++this.lR)this.aR[this.lR]=new D.KS(3),this.sR[this.lR]=new D.KS(3)},D.oR.prototype.init=function(){var t=this.lR;for(D.QS(this.rR,2);t--;)this.aR[t].init(),this.sR[t].init();this.hR.init()},D.oR.prototype.decode=function(t,i){return 0===t.qS(this.rR,0)?this.aR[i].decode(t):0===t.qS(this.rR,1)?8+this.sR[i].decode(t):16+this.hR.decode(t)},D.fR=function(){this.uR=[]},D.fR.prototype.init=function(){D.QS(this.uR,768)},D.fR.prototype.cR=function(t){for(var i=1;(i=i<<1|t.qS(this.uR,i))<256;);return 255&i},D.fR.prototype.dR=function(t,i){var e,n,o=1;do{if(e=i>>7&1,i<<=1,o=o<<1|(n=t.qS(this.uR,(1+e<<8)+o)),e!==n){for(;o<256;)o=o<<1|t.qS(this.uR,o);break}}while(o<256);return 255&o},D.pR=function(){},D.pR.prototype.create=function(t,i){var e;if(!this.vR||this.mR!==i||this.yR!==t)for(this.yR=t,this.xR=(1<<t)-1,this.mR=i,this.vR=[],e=1<<this.mR+this.yR;e--;)this.vR[e]=new D.fR},D.pR.prototype.init=function(){for(var t=1<<this.mR+this.yR;t--;)this.vR[t].init()},D.pR.prototype.bR=function(t,i){return this.vR[((t&this.xR)<<this.mR)+((255&i)>>>8-this.mR)]},D.gR=function(){this.wR=new D.TS,this._R=new D.VS,this.kR=[],this.MR=[],this.SR=[],this.RR=[],this.zR=[],this.CR=[],this.AR=[],this.IR=[],this.$R=new D.KS(4),this.LR=new D.oR,this.DR=new D.oR,this.TR=new D.pR,this.PR=-1,this.OR=-1,this.AR[0]=new D.KS(6),this.AR[1]=new D.KS(6),this.AR[2]=new D.KS(6),this.AR[3]=new D.KS(6)},D.gR.prototype.FR=function(t){return!(t<0||(this.PR!==t&&(this.PR=t,this.OR=Math.max(this.PR,1),this.wR.create(Math.max(this.OR,4096))),0))},D.gR.prototype.BR=function(t,i,e){var n=1<<e;return!(8<t||4<i||4<e||(this.TR.create(i,t),this.LR.create(n),this.DR.create(n),this.jR=n-1,0))},D.gR.prototype.init=function(){var t=4;for(this.wR.init(!1),D.QS(this.kR,192),D.QS(this.CR,192),D.QS(this.MR,12),D.QS(this.SR,12),D.QS(this.RR,12),D.QS(this.zR,12),D.QS(this.IR,114),this.TR.init();t--;)this.AR[t].init();this.LR.init(),this.DR.init(),this.$R.init(),this._R.init()},D.gR.prototype.decode=function(t,i,e){var n,o,r,a,s,h,l=0,f=0,u=0,c=0,d=0,p=0,v=0;for(this._R.US(t),this.wR.US(i),this.init();e<0||p<e;)if(n=p&this.jR,0===this._R.qS(this.kR,(l<<4)+n))o=this.TR.bR(p++,v),v=7<=l?o.dR(this._R,this.wR.HS(f)):o.cR(this._R),this.wR.GS(v),l=l<4?0:l-(l<10?3:6);else{if(1===this._R.qS(this.MR,l))(r=0)===this._R.qS(this.SR,l)?0===this._R.qS(this.CR,(l<<4)+n)&&(l=l<7?9:11,r=1):(0===this._R.qS(this.RR,l)?a=u:(0===this._R.qS(this.zR,l)?a=c:(a=d,d=c),c=u),u=f,f=a),0===r&&(r=2+this.DR.decode(this._R,n),l=l<7?8:11);else if(d=c,c=u,u=f,r=2+this.LR.decode(this._R,n),l=l<7?7:10,4<=(s=this.AR[r<=5?r-2:3].decode(this._R))){if(f=(2|1&s)<<(h=(s>>1)-1),s<14)f+=D.nR(this.IR,f-s-1,this._R,h);else if(f+=this._R.XS(h-4)<<4,(f+=this.$R.eR(this._R))<0){if(-1===f)break;return!1}}else f=s;if(p<=f||f>=this.OR)return!1;this.wR.WS(f,r),p+=r,v=this.wR.HS(0)}return this.wR.flush(),this.wR.NS(),this._R.NS(),!0},D.gR.prototype.ER=function(t){var i,e,n,o,r;return!(t.size<5)&&(e=(i=t.JS())%9,n=(i=~~(i/9))%5,o=~~(i/5),!!this.BR(e,n,o)&&(r=t.JS(),r|=t.JS()<<8,r|=t.JS()<<16,r+=16777216*t.JS(),this.FR(r)))},D.NR=function(t,i){var e,n=new D.gR;if(!n.ER(t))throw new Error("Incorrect stream properties");if(e=t.JS(),e|=t.JS()<<8,e|=t.JS()<<16,e+=16777216*t.JS(),t.JS(),t.JS(),t.JS(),t.JS(),!n.decode(t,i,e))throw new Error("Error in data stream");return!0};var Zt=1e-9;function Xt(t,i,e){return function(t){var e=0,n="",o=0,r=0;for(e=0;e<t.length;)if((r=t[e])>>>7==0)"0"!==(a=String.fromCharCode(t[e])).charCodeAt(0).toString(16)&&(n+=a),e+=1;else if(252==(252&r))o=(3&t[e])<<30,o|=(63&t[e+1])<<24,o|=(63&t[e+2])<<18,o|=(63&t[e+3])<<12,o|=(63&t[e+4])<<6,o|=63&t[e+5],n+=String.fromCharCode(o),e+=6;else if(248==(248&r))o=(7&t[e])<<24,o|=(63&t[e+1])<<18,o|=(63&t[e+2])<<12,o|=(63&t[e+3])<<6,o|=63&t[e+4],n+=String.fromCharCode(o),e+=5;else if(240==(240&r))o=(15&t[e])<<18,o|=(63&t[e+1])<<12,o|=(63&t[e+2])<<6,o|=63&t[e+3],n+=String.fromCharCode(o),e+=4;else if(224==(224&r))o=(31&t[e])<<12,o|=(63&t[e+1])<<6,o|=63&t[e+2],n+=String.fromCharCode(o),e+=3;else if(192==(192&r))o=(63&t[e])<<6,o|=63&t[e+1],n+=String.fromCharCode(o),e+=2;else{var a;"0"!==(a=String.fromCharCode(t[e])).charCodeAt(0).toString(16)&&(n+=a),e+=1}return n.trim()}(t.subarray(i,e))}var r=new RegExp("^[+\\-]?[0-1]*[.]?[0-1]*$","gi");function Jt(t,i){t=t.toString(),i=i.toString(),t=new Array(32-t.length+1).join("0")+t,i=new Array(32-i.length+1).join("0")+i;var e=r;e.lastIndex=0;var n=(i+t).toString().match(e);if(n){var o=0;return-1===n[0].indexOf(".")&&(o=parseInt(n,2)),o.toString(36).toUpperCase()}return"error"}function F(t){var i,e={},n={},o=new Uint8Array(t),r=new DataView(t),a=0;a+=4,a+=4;var s=r.getInt32(a,!0);a+=4,a+=4,a+=4+r.getInt32(a,!0),a+=4;var h=Jt(r.getUint32(a,!0).toString(2),r.getUint32(a+4,!0).toString(2)),l=Xt(o,a+=8,a+64),f=Xt(o,a+=64,a+64);a+=64;var u=r.getInt8(a),c=Xt(o,a+=1,a+8);a+=8;var d=r.getInt16(a,!0),p=r.getInt16(a+2,!0);a+=4;var v=r.getFloat32(a,!0),m=r.getFloat32(a+4,!0);a+=8;var y=r.getFloat32(a,!0),x=r.getFloat32(a+4,!0);a+=8;var g=r.getFloat32(a,!0),b=r.getFloat32(a+4,!0);a+=8;var _=r.getInt32(a,!0);a+=4;var w=r.getInt32(a,!0);a+=4;var k=r.getInt32(a,!0);a+=4;for(var M=[],S=0;S<_;S++)M.push(r.getInt32(a,!0)),a+=4;var z=[];for(S=0;S<k;S++)z.push(r.getInt32(a,!0)),a+=4;var R=[];for(S=0;S<_;S++){var C=Xt(o,a,a+48);R.push(C),a+=48}var A=[];for(S=0;S<_;S++){var I=Xt(o,a,a+8);A.push(I),a+=8}var L=[];for(S=0;S<w;S++){var $=r.getInt32(a,!0)*Zt+m,T=r.getInt32(a+4,!0)*Zt+v;L.push([$,T]),a+=8}i={type:"Feature",geometry:{type:"Polygon",coordinates:[L]},properties:{pid:h,name_cn:l,name_en:f,default_floor:u,buildingtype:c,building_poi_style:[d,p],centerPoint:[m,v],left_bottom_Point:[y,x],width:g,height:b,numberofFloor:_,numberofGeoPoints:w,park_floor_count:k,floor_indexs:M,park_floors:z,floor_names:R,floor_nonas:A}};for(var D=0;D<s;D++){var F=Xt(o,a,a+8);a+=8;var P=r.getInt8(a);a+=1,n[P]={floor:{},shops:[],pubs:[],cons:[]};var O=r.getInt16(a,!0),B=r.getInt16(a+2,!0);a+=4;var H=r.getInt16(a,!0),j=r.getInt16(a+2,!0);a+=4;var E=r.getInt16(a,!0),N=r.getInt16(a+2,!0);a+=4;var W=r.getInt32(a,!0);a+=4;var U=r.getInt32(a,!0);a+=4;var G=r.getInt32(a,!0);a+=4;var V=r.getInt32(a,!0);a+=4;for(var Y=[],Z=0;Z<V;Z++){var X=r.getInt32(a,!0);a+=4;for(var J=[],q=0;q<X;q++)$=r.getInt32(a,!0)*Zt+m,T=r.getInt32(a+4,!0)*Zt+v,J.push([$,T]),a+=8;Y.push(J)}var Q="Polygon",K=Y[0];1<V&&(Q="MultiPolygon",K=Y);var tt={type:"Feature",geometry:{type:Q,coordinates:[K]},properties:{namecode:F,index:P,floor_region_type:[O,B],unhighlighted_floor_line_style:[H,j],highlighted_floor_line_style:[E,N],numberofShopCount:W,numberofPubCount:U,numberofConCount:G,floor_area_count:V}};n[P].floor=tt;for(var it=[],et=0;et<W;et++){var nt=Xt(o,a,a+128);a+=128;var ot=Jt(r.getUint32(a,!0).toString(2),r.getUint32(a+4,!0).toString(2)),rt=Xt(o,a+=8,a+24),at=Xt(o,a+=24,a+12);a+=12;var st=r.getInt32(a,!0);a+=4;var ht=r.getFloat32(a,!0);a+=4;var lt=r.getInt8(a);a+=1;var ft=r.getInt16(a,!0),ut=r.getInt16(a+2,!0);a+=4;var ct=r.getInt16(a,!0),dt=r.getInt16(a+2,!0);a+=4;var pt=r.getInt32(a,!0)*Zt+m,vt=r.getInt32(a+4,!0)*Zt+v;a+=8;var mt=r.getInt32(a,!0);a+=4;var yt=[];for(Z=0;Z<mt;Z++)$=r.getInt32(a,!0)*Zt+m,T=r.getInt32(a+4,!0)*Zt+v,yt.push([$,T]),a+=8;var xt={type:"Feature",geometry:{type:"Polygon",coordinates:[yt]},properties:{name:nt,pid:ot,cpid:rt,logo:at,area:st,rank:ht,height:lt,poitype:[ft,ut],regiontype:[ct,dt],font_anthor_point:[pt,vt],shop_point_number:mt}};it.push(xt)}n[P].shops=it;for(var gt=[],bt=0;bt<U;bt++){var _t=Xt(o,a,a+24);a+=24;var wt=Jt(r.getUint32(a,!0).toString(2),r.getUint32(a+4,!0).toString(2)),kt=Xt(o,a+=8,a+48);a+=48;var Mt=r.getFloat32(a,!0);a+=4;var St=r.getInt16(a,!0),zt=r.getInt16(a+2,!0);a+=4,$=r.getInt32(a,!0)*Zt+m,T=r.getInt32(a+4,!0)*Zt+v,a+=8;var Rt={type:"Feature",geometry:{type:"Point",coordinates:[$,T]},properties:{cpid:_t,pid:wt,name:kt,rank:Mt,poitype:[St,zt]}};gt.push(Rt)}n[P].pubs=gt;for(var Ct=[],At=0;At<G;At++){var It=Xt(o,a,a+24);a+=24;var Lt=Jt(r.getUint32(a,!0).toString(2),r.getUint32(a+4,!0).toString(2)),$t=Xt(o,a+=8,a+48);a+=48;var Tt=r.getFloat32(a,!0);a+=4;var Dt=r.getInt16(a,!0),Ft=r.getInt16(a+2,!0);a+=4,$=r.getInt32(a,!0)*Zt+m,T=r.getInt32(a+4,!0)*Zt+v,a+=8;var Pt={type:"Feature",geometry:{type:"Point",coordinates:[$,T]},properties:{cpid:It,pid:Lt,name:$t,rank:Tt,poitype:[Dt,Ft]}};Ct.push(Pt)}n[P].cons=Ct}a+=4,a+=4+r.getInt32(a,!0);var Ot=r.getInt32(a,!0);a+=4;var Bt=[];for(S=0;S<Ot;S++)$=r.getInt32(a,!0)*Zt+m,T=r.getInt32(a+4,!0)*Zt+v,Bt.push([$,T]),a+=8;i.properties.outside_outline=Bt;var Ht={};for(var jt in n)if(n.hasOwnProperty(jt)){for(Ht.floor=n[jt].floor,q=0;q<n[jt].shops.length;q++){var Et=r.getInt16(a,!0);a+=2;var Nt=r.getInt16(a,!0);a+=2,n[jt].shops[q].properties.zoom_min=Et,n[jt].shops[q].properties.zoom_max=Nt}for(Ht.shops=n[jt].shops,q=0;q<n[jt].pubs.length;q++){var Wt=r.getInt16(a,!0);a+=2;var Ut=r.getInt16(a,!0);a+=2,n[jt].pubs[q].properties.zoom_min=Wt,n[jt].pubs[q].properties.zoom_max=Ut}for(Ht.pubs=n[jt].pubs,q=0;q<n[jt].cons.length;q++){var Gt=r.getInt16(a,!0);a+=2;var Vt=r.getInt16(a,!0);a+=2,n[jt].cons[q].properties.zoom_min=Gt,n[jt].cons[q].properties.zoom_max=Vt}Ht.cons=n[jt].cons,e.floor=Ht}a+=4,a+=4+r.getInt32(a,!0);var Yt=r.getInt8(a);return a+=1,i.properties.UR=Yt,e.building=i,e}t.getUnifyJson=function(t){var i=[];if(!(t instanceof ArrayBuffer)){var e={status:3,building:{},floor:{},id:""};return i.push(e),i}var n=new DataView(t),o=0;o+=4;var r=n.getInt16(o,!1);o+=2;try{for(;0<r;){o+=4;var a=n.getUint8(o);o+=1;for(var s=new ArrayBuffer(a),h=new Uint8Array(s),l=0;l<a;l++)h[l]=n.getUint8(o),o+=1;var f=Xt(h,0,a);o+=2;var u=n.getInt8(o);o+=1,0!==u&&((e={}).status=u,e.building={},e.floor={},e.id=f,i.push(e));var c=n.getInt32(o,!1);o+=4;var d=n.getInt32(o,!0);o+=4;var p=c-d;if(0!==d){for(var v=2078870821,m=8*Math.ceil(d/8),y=d%8,x=new ArrayBuffer(m),g=new Int32Array(x),b=0;8<=d;){var _=n.getInt32(o,!0),w=n.getInt32(o+4,!0),k=_^v,M=292664^w;g[b]=k,g[b+1]=M,b+=2,o+=8,d-=8}0!==d&&(_=n.getInt32(o,!0),w=n.getInt32(o+4,!0),k=_^v,M=292664^w,g[b]=k,g[b+1]=M,o+=d);var S=new Uint8Array(x),z=S.length,R=z-8+y,C=new Uint8Array(R);for(l=0;l<R;l++)C[l]=S[l];for(l=0;l<y;l++)C[R-y+l]=S[z-1-l];var A={data:C,offset:0,JS:function(){return this.data[this.offset++]}},I={data:[],offset:0,jS:function(t){this.data[this.offset++]=t}};D.NR(A,I);var L=I.data;R=L.length;var $=new ArrayBuffer(R),T=new Int8Array($);for(l=0;l<R;l++)T[l]=L[l];(e=F($)).status=u,e.id=f,i.push(e)}o+=p,--r}}catch(t){}return i}}var hn={WR:sn};sn(hn);var ln,fn=hn,un=(ln=ye,_t.Ei(cn,ln),cn.prototype.oa=function(t,i,e,n,o){var r=o.Vh("nebula");if(!r){if(this.gs){var a=this.gs.VR.showId;a&&this.GR([a])}return!1}for(var s=r.getData(t).tiles,h=s.length,l=[],f=0;f<h;f++)for(var u=0,c=s[f].data||[];u<c.length;u++){var d=c[u];if(d.indoorInfo)for(var p=d.indoorInfo,v=p.length,m=0;m<v;m++){for(var y=p[m],x=!1,g=0;g<l.length;g++)y===l[g]&&(x=!0);x||l.push(y)}}return this.GR(l),!0},cn.prototype.getData=function(){return this._indoorData},cn.prototype.lo=function(){return!0},cn.prototype.GR=function(t,i){if(!t||t.length<1)return null;for(var e=this.gs,n=e.VR,o=(e._map,[]),r=this._config.server+"/v3/indoor/indoormaps?",a=t,s=a.length,h=[],l=[],f=[],u=!1,c=0;c<s;c++){var d=a[c],p=1;if(this._indoorData.data[d]||(this._indoorData.data[d]={}),n.floorInfo&&n.floorInfo[d]){var v=n.floorInfo[d];v&&(p=v)}var m=this._indoorData.data[d];m&&m.data&&m.data[p]||(u=!0,h.push(p),l.push(0),o.push(d))}this.LL=o,f.push("poiid="+o.join(";")),f.push("floor="+h.join(";")),f.push("version="+l.join(";")),f.push("s=rsv3"),f.push("from=indoorH5Map"),f.push("servicetype=unify"),f.push("key="+this._config.key);var y=r+f.join("&");u&&this.ZR.url!==y?(this.ZR.url=y,this.YR(y,this.jF)):(this.jF(),i&&i())},cn.prototype.JR=function(t,i,e){var n=this;if(!t||!i)return!1;var o=[t];this.GR(o,function(){n.gs&&n.gs._map&&n.gs._map.setNeedUpdate(!0),e&&e()})},cn.prototype.YR=function(t,f){var u=this;try{var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4===c.readyState&&200===c.status){var t=c.response,i=fn.getUnifyJson(t);if(!i)return!1;for(var e=0;e<i.length;e++)if(0===i[e].status){var n=i[e],o=n.floor,r=n.building,a=n.status,s=n.id,h=o.floor.properties.index;u._indoorData.data[s]||(u._indoorData.data[s]={}),u._indoorData.data[s].building=r,u._indoorData.data[s].data||(u._indoorData.data[s].data={});var l={floor:o,status:a,id:s,building:r};u._indoorData.data[s].data[h]=l}f&&f()}},c.open("GET",t,!0),c.responseType="arraybuffer",c.send()}catch(t){}},cn);function cn(t,i,e,n){var o=ln.call(this,t,i,e,n)||this;return o.jF=function(){if(o.gs){var t=o.gs.ho();t&&t.render(o._indoorData)}},o.gs=n,o._config=AMap.getConfig(),o._indoorData={extData:{},data:{}},o.LL=[],o.ZR={url:null,status:!1},o}var dn={ielt9:"ActiveXObject"in window&&!document.addEventListener,opts:{callback:"callback",type:"json",charset:"utf-8"},setOptions:function(t){this.opts=_t.assign(this.opts,t)},bv:function(){},gv:function(){this.emit("error",{info:"TIME_OUT_A"})},JSONP:function(i,e,t){void 0===t&&(t={}),i=encodeURI(i);var n=_t.Util.getGuid("jsonp_",6)+"_",o=document.createElement("script");function r(){window[n]=null,o.onerror=null,o.parentNode&&o.parentNode.removeChild(o)}o.type="text/javascript",o.charset="utf-8",o.async=!0,t=_t.assign({},this.opts,t),o.onerror=function(t){r(),e&&e("error",{url:i,info:"Request Error"})},window[n]=function(t){r(),e&&e("complete",{info:"ok",url:i,data:t})};var a="?";-1!==i.indexOf("?")&&(a="&");var s=i+a+t.callback+"="+n;o.src=s,(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(o)},Ajax:function(i,t,e){if(void 0===window.XMLHttpRequest&&window.wv){var n=this._v=new window.wv;return n.onerror=function(t){e("error",{info:"Request Error",url:i,data:""})},n.onload=function(){e("complete",{url:i,data:n.responseText})},n.open(t.type||"GET",i),setTimeout(function(){n.send(t.content||null)},0),n}if(window.XMLHttpRequest){var o=new XMLHttpRequest;return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t;t="arraybuffer"===o.responseType?o.response:o.responseText,e("complete",{info:"ok",url:i,data:t})}else o.abort(),e("error",{info:o.status,url:i,data:""})},o.onerror=function(t){o.abort(),e("error",{info:"Request Error",url:i,data:""})},o.open(t.type||"GET",i),"POST"===t.type&&o.setRequestHeader("Content-Type",t.requestContentType||"application/x-www-form-urlencoded"),o.responseType=t.responseType||"text",o.send(t.content||null),o}e("error",{info:"Not Support Ajax",url:i,data:""})}},pn=(vn.prototype.add=function(t,i,e,n,o){yn.getKey(t,i,o,n)!==(this.WM?this.WM.getKey():"-1")&&(this.XR=t,this.qR=i,this.VM+=this.WM?this.WM.length:0,this.WM=new yn(t,i,this.VM,n,o),this.jc.push(this.WM)),this.WM.add(e)},vn);function vn(){this.jc=[],this.XR=[],this.qR=0,this.VM=0}var mn,yn=(xn.getKey=function(t,i,e,n){return t+":"+i+":"+e+":"+n},xn.prototype.add=function(t){this.length+=t},xn.prototype.getKey=function(){return this.color+":"+this.width+":"+this.maxzoom+":"+this.minzoom},xn);function xn(t,i,e,n,o){this.color=t,this.width=i,this.offset=e,this.minzoom=n,this.maxzoom=o,this.length=0}function gn(t,i,e,n){var o=mn.call(this,t,i,e,n)||this;return o.Qs=[3,17],o.Xa=256,o.Za=o.qa=!1,o.ll=function(t){return AMap.getConfig().protocol+"://vdata.amap.com/traffic?key="+AMap.getConfig().key+"&v="+AMap.getConfig().version+"&t="+t+"&w="+(new Date).getTime()},o}var bn={nebula:we,sky:en,mask:rn,"nebula.labelsLayer":we,image:Ae,custom:Be,gl_custom:Qe,raster:Fe,overlay:Ee,labelsLayer:$e,vectorTile:Ge,districtVectorTile:Xe,indoor:un,vectortraffic:(mn=Fe,_t.Ei(gn,mn),gn.prototype.oa=function(t,i,e,n){var r=this;this.aa=t,this.ze=i,this.Zs=[],this.sa=[];var o=t.projectionId,a=[],s=t.boundsCoord,h=t.optimalZoom,l=t.optimalResolution,f=this.ha(s,h,l);this.ua.forEach(function(t){var i=t.zo,e=!1;if(t.status!==_t.Mo.LOADED){for(var n=f.ja;n<=f.Oa;n+=1)for(var o=f.Fa;o<=f.Ea;o+=1)i.z===f.z&&i.y===o&&n===i.x&&(e=!0);e||(t.request&&t.request.abort&&t.request.abort(),r.ua.ea(t))}});var u=this.qs(t,this.Zs,a);this.Ys(u,i,o,e),this.da(t,this.sa,a,n),this.sa=this.sa.concat(this.Zs)},gn.prototype.Ys=function(f,R,C,A){if(!(this.aa.optimalZoom<this.xt[0]||this.aa.optimalZoom>this.xt[1])){this.Da(f);var I={0:"fff93a43",1:"fffcac19",2:"ff20a962",3:"ff83171c",4:"ffadadad"};if(this.map.QR&&this.map.QR.traffic){var t=this.map.QR.traffic.KR;if(t){var i=t;i.congested&&(I[0]=i.congested),i.slow&&(I[1]=i.slow),i.smooth&&(I[2]=i.smooth),i.seriousCongested&&(I[3]=i.seriousCongested),i.unknown&&(I[4]=i.unknown)}}for(var e=function(t,i){u.To.eo();var e=f[t],w=_t.Util.Rg(e.x,e.y,e.z),n=u.ll(w),k=new _t.Sw(e);u.ua.Qo(k);var M=_t.at.getProjection(C).getResolution(e.z),o=e.x*u.Xa*M,r=o+u.Xa*M,a=e.y*u.Xa*M,s=a+u.Xa*M,h=_t.V[C].Xs(o,a),l=_t.V[C].Xs(r,s);o=h[0],r=l[0],a=l[1],s=h[1],k.Ro=[o,a,r,s],k.status=_t.Mo.LOADING;var S=_t.lcs.getLocalByCoord([k.Ro[0],k.Ro[1]]),z=k.zo.z>_t.za;z&&(k.Ro[0]-=S.center[0],k.Ro[1]-=S.center[1],k.Ro[2]-=S.center[0],k.Ro[3]-=S.center[1]),k.request=dn.Ajax(n,{},function(t,i){if(k.data={},R){try{i=JSON.parse(i.data)}catch(t){return k.status=_t.Mo.LOADED,void A()}if(i=i.data[w.join("_")],"complete"===t&&i){for(var e=new pn,n=new _t.J_,o=0,r=i.length;o<r;o++)for(var a=i[o],s=_t.Util.qg(I[o]),h=0,l=a.length;h<l;h++)for(var f=a[h],u=.6*f[0],c=0,d=f[1].length;c<d;c++){for(var p=[],v=_t.Util.Eg(f[1][c]),m=0,y=v.length;m<y;m+=2){var x=M*(256*k.zo.x+v[m]),g=M*(256*k.zo.y+v[m+1]),b=_t.V[C].Xs(x,g);z&&(b[0]-=S.center[0],b[1]-=S.center[1]),p.push(_t.Bu(b[0],b[1]))}var _=n.hb(p).Iw;e.add(s,u,_,8,20)}k.data={$c:n,Uc:e,Hs:S}}}k.status=_t.Mo.LOADED,A()})},u=this,n=0,o=f.length;n<o;n+=1)e(n)}},gn)},_n=(wn.prototype.qh=function(t,i,e){return("nebula"===t.id||"indoor"===t.id)&&this.Yh[t.id]||this.Yh[t.id]||(this.Yh[t.id]=new bn[t.type](t,i,this.map,e),e.source=this.Yh[t.id]),this.Yh[t.id]},wn.prototype.Vh=function(t){return this.Yh[t]},wn.prototype.Xh=function(t){delete this.Yh[t]},wn.prototype.getData=function(t,i,e){return this.Yh[t].getData(i)},wn.prototype.oa=function(t,i,e){for(var n=0,o=i.getLayers()||[];n<o.length;n++){var r=o[n],a=r.getOptions(),s=r.Vh();s&&a.visible&&0<a.opacity&&_t.Util.dS(i.getZoom(),a.zooms)&&s.oa(t,e,function(){i.setNeedUpdate(!0)},i,this)}},wn.prototype.destroy=function(){for(var t in this.Yh)this.Yh[t]&&this.Yh[t].destroy();this.Yh={}},wn);function wn(t){this.map=t,this.Yh={}}var kn,Mn=(kn=_t.lw,_t.Ei(Sn,kn),Sn.prototype.ro=function(){return{ol:!0,al:!0,visible:this._visible,opacity:this.tl,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF,cacheSize:this.wl}},Sn.prototype.eo=function(){var t=kn.prototype.eo.call(this);return t.mapNumber="GS(2019)6379",t},Sn.prototype.Lo=function(){return{id:"nebula",type:"nebula",tileUrl:AMap.getConfig().protocol+"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2",tileSize:0,zooms:[2,22]}},Sn.prototype.co=function(){return"nebula"},Sn.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},Sn.prototype.show=function(){kn.prototype.show.call(this);var t=this.iP();t&&t.show();var i=this.map&&this.map.getLayerByClass("AMap.Nebula.LabelsLayer");i&&i.oP()&&i.show()},Sn.prototype.hide=function(){kn.prototype.hide.call(this);var t=this.iP();t&&t.hide(),this.rP()},Sn.prototype.v$=function(){kn.prototype.v$.call(this);var t=this.iP();t&&this.map.removeLayer(t),this.rP()},Sn.prototype.Hh=function(t){this.uo=t,this.uo.Vh(this.co()).Ks(this.wl)},Sn.prototype.rP=function(){var t=this.map&&this.map.getLayerByClass("AMap.Nebula.LabelsLayer");t&&t.aP()&&t.hide()},Sn.prototype.iP=function(){var t;if(this.map)for(var i=null===(t=this.map)||void 0===t?void 0:t.getLayers(),e=0;e<i.length;e++){var n=i[e];if("AMap.Buildings"===n.CLASS_NAME&&n.ro().u$)return n}},Sn);function Sn(){var t=null!==kn&&kn.apply(this,arguments)||this;return t.CLASS_NAME="AMap.NebulaLayer",t}var zn,Rn="nebula.labelsLayer",An="nebula",In=(zn=_t.lw,_t.Ei(Ln,zn),Ln.prototype.ro=function(){return _t.assign({},{To:this,rejectMapMask:this.lz},zn.prototype.eo.call(this))},Ln.prototype.Lo=function(){return{id:An,type:An,tileUrl:AMap.getConfig().protocol+"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2",tileSize:0,zooms:[2,22]}},Ln.prototype.co=function(){return An},Ln.prototype.sl=function(){this.source.destroy(),this.Jh&&this.Jh.reset()},Ln.prototype.vi=function(t){return this.fz?this.fz.vi(t,this.hS):null},Ln.prototype.Do=function(t){var i=zn.prototype.Do.call(this,t);return this.map&&this.uz(this.map),i},Ln.prototype.aP=function(){var t=this.map;if(t){var i=t&&t.getLayerByClass("AMap.TileLayer.RoadNet"),e=t&&t.getLayerByClass("AMap.NebulaLayer"),n=i&&i.getVisible(),o=e&&e.getVisible();return!n&&!o}return!1},Ln.prototype.oP=function(){var t=this.map;if(t){var i=t&&t.getLayerByClass("AMap.TileLayer.RoadNet"),e=t&&t.getLayerByClass("AMap.NebulaLayer"),n=i&&i.getVisible(),o=e&&e.getVisible();return t.showLabel&&(n||o)}return!1},Ln.prototype.uz=function(t){(this.fz=t.fS()).add(this)},Ln);function Ln(t){void 0===t&&(t={});var i=zn.call(this,t)||this;return i.CLASS_NAME="AMap.Nebula.LabelsLayer",i._opts={id:Rn,type:Rn,opacity:1,visible:1,collision:!0,allowCollision:!1},i._opts=_t.assign({},i._opts,t),i.Qh=t.labelzIndex||100,i._visible=!1!==t.showLabel,i.tl=void 0===t.opacity?1:t.opacity,i}var $n=(Tn.prototype.Tl=function(t){var i,n,o,r,a,s,h,l,f,u,c,d,p=_t.Il(),v=_t.Dl();_t.Pl(this.jl,t[0],t[0],t[2]),v=_t.Ol(v,this.Fl),p=_t.Tl(p,v,t,this.El),i=this.Nl,o=p[0],r=p[4],a=p[8],s=p[1],h=p[5],l=p[9],f=p[2],u=p[6],0<(d=o+h+(c=p[10]))?(n=.5/Math.sqrt(d+1),i[3]=.25/n,i[0]=(u-l)*n,i[1]=(a-f)*n,i[2]=(s-r)*n):h<o&&c<o?(n=2*Math.sqrt(1+o-h-c),i[3]=(u-l)/n,i[0]=.25*n,i[1]=(r+s)/n,i[2]=(a+f)/n):c<h?(n=2*Math.sqrt(1+h-o-c),i[3]=(a-f)/n,i[0]=(r+s)/n,i[1]=.25*n,i[2]=(l+u)/n):(n=2*Math.sqrt(1+c-o-h),i[3]=(s-r)/n,i[0]=(a+f)/n,i[1]=(l+u)/n,i[2]=.25*n),this.$l()},Tn.prototype.setPosition=function(t){_t.Pl(this._position,t[0],t[1],t[2]),this.$l()},Tn.prototype.getPosition=function(){return this._position},Tn.prototype.$l=function(){var t,i,e,n,o,r,a,s,h,l,f,u,c,d,p,v,m,y,x,g;t=this.Fl,i=this._position,n=t,u=(o=(e=this.Nl)[0])*(h=o+o),c=o*(l=(r=e[1])+r),d=o*(f=(a=e[2])+a),p=r*l,v=r*f,m=a*f,y=(s=e[3])*h,x=s*l,g=s*f,n[0]=1-(p+m),n[1]=c+g,n[2]=d-x,n[3]=0,n[4]=c-g,n[5]=1-(u+m),n[6]=v+y,n[7]=0,n[8]=d+x,n[9]=v-y,n[10]=1-(u+p),n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,_t.Ul(this.Bl,this.Fl)},Tn);function Tn(){this.Wl=!0,this._position=_t.Dl(),_t.Pl(this._position,0,0,10),this.Gl=_t.Dl(),_t.Pl(this.Gl,0,0,-1),this.jl=_t.Dl(),_t.Pl(this.jl,0,0,-1),this.El=_t.Dl(),_t.Pl(this.El,0,1,0),this.Nl=_t.Zl(),this.Fl=_t.Il(),this.Bl=_t.Il(),this.ql=_t.Il(),this.Yl=_t.Il()}var Dn,Fn=(Dn=$n,_t.Ei(Pn,Dn),Pn.prototype.Vl=function(){var t=_t.Il();return _t.multiply(t,this.ql,this.Xl),_t.multiply(t,t,this.Bl),t},Pn.prototype.setOptions=function(t,i,e,n,o,r){this.Hl=void 0!==t?t:-1,this.Jl=void 0!==i?i:1,this.Kl=void 0!==e?e:1,this.Ql=void 0!==n?n:-1,this.tu=void 0!==o?o:.1,this.iu=void 0!==r?r:1,this.eu()},Pn.prototype.scale=function(t){void 0===t&&(t=1);var i=_t.Il();i.set([t,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]),_t.multiply(this.Xl,this.Xl,i)},Pn.prototype.setRotation=function(t){var i=_t.Il(),e=(t-this.nu)/180*Math.PI;0!==(this.nu=t)&&(i.set([Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1,0,0,0,0,1]),_t.multiply(this.Xl,this.Xl,i))},Pn.prototype.kt=function(t,i,e){if(void 0!==t){var n=t.Rt,o=t.zt,r=t.center,a=t.scale,s=_t.Il(),h=_t.Il(),l=_t.Il();s.set([1,0,0,0,0,1,0,0,0,0,1,0,o[0],o[1],0,1]),h.set([a,0,0,0,0,a,0,0,0,0,1,0,0,0,0,1]),l.set([1,0,0,0,0,1,0,0,0,0,1,0,-n[0],-n[1],0,1]),_t.multiply(s,s,h),_t.multiply(s,s,l),_t.multiply(this.Xl,this.Xl,s);var f=_t.at.getProjection(i).project(r[0],r[1]),u=[f[0]-o[0]+n[0],f[1]-o[1]+n[1]];e(_t.at.getProjection(i).unproject(u[0],u[1]))}},Pn.prototype.Cu=function(){return this.Yl},Pn.prototype.eu=function(){var t=(this.Jl-this.Hl)/(2*this.bt),i=(this.Kl-this.Ql)/(2*this.bt),e=(this.Jl+this.Hl)/2,n=(this.Kl+this.Ql)/2,o=e-t,r=e+t,a=n+i,s=n-i;_t.ou(this.ql,o,r,s,a,this.tu,this.iu),_t.Ul(this.Yl,this.ql)},Pn);function Pn(t,i,e,n,o,r){var a=Dn.call(this)||this;return a.type="OthoCamera",a.bt=1,a.nu=0,a.Xl=_t.Il(),a.Hl=void 0!==t?t:-1,a.Jl=void 0!==i?i:1,a.Kl=void 0!==e?e:1,a.Ql=void 0!==n?n:-1,a.tu=void 0!==o?o:.1,a.iu=void 0!==r?r:1,a.eu(),a}var On,Bn=(On=_t.Event,_t.Ei(Hn,On),Hn.prototype.au=function(){return this.su},Hn.prototype.ru=function(){return _t.at.getProjection(this.su)},Hn.prototype.setOptions=function(t){t.projectionId&&(this.su=t.projectionId);var i=_t.at.getProjection(this.su);if(t.center){this.hu=t.center;var e=this.lu(i),n=i.unproject(e[0],e[1]);this.hu=n,_t.Pl(this.uu,e[0],e[1],0),this.cu.setPosition(this.fu())}if(void 0!==t.zoom&&(t.zoom=Math.min(Math.max(t.zoom,this.map.getZooms()[0]),this.map.getZooms()[1]),this.pu=Math.pow(2,t.zoom-this.bt),this.bt=t.zoom,this.du=i.getResolution(this.bt),this.vu(),this.cu.setPosition(this.fu())),t.size&&(this.map.emit("resize"),this._size=t.size,this.vu()),void 0!==t.rotation&&"w"===_t._.baseRender&&(360<t.rotation?t.rotation-=360:t.rotation<-360&&(t.rotation+=360),this.cu.setRotation(t.rotation),this.nu=t.rotation),t.kt){if(!this.map.getStatus().zoomEnable)return;var o=t.kt.Mt;if(this.mu=t.kt,o<this.map.getZooms()[1]&&o>this.map.getZooms()[0]){this.bt=o,this.du=i.getResolution(this.bt);var r=this.mu,a=r.Rt,s=r.zt;(e=this.lu(i))[0]=e[0]-s[0]+a[0],e[1]=e[1]-s[1]+a[1],n=i.unproject(e[0],e[1]),this.hu=n,_t.Pl(this.uu,e[0],e[1],0),this.vu(),this.cu.setPosition(this.fu()),this.mu=void 0}}this.h_()||this.map.setNeedUpdate(!0)},Hn.prototype.getOptions=function(){return{zoom:this.bt,center:this.hu,rotation:this.nu,projectionId:this.su,pitch:0}},Hn.prototype.getStatus=function(){var t=_t.Zl(),i=_t.Zl(),e=_t.Zl();this.xu(t,i,e);var n=_t.Util.getOptimalZoom(this.bt);return{pitch:this.Pu,size:this._size,rotation:this.nu,zoom:this.bt,optimalZoom:n,resolution:this.du,optimalResolution:_t.at.getProjection(this.su).getResolution(n),center:this.hu,bounds:t,boundsCoord:i,transformedBoundsCoord:e,centerCoord:this.uu,projectionId:this.su,mvpMatrix:this.cu.Vl(),viewMode:this.type,skyHeight:this.EF()}},Hn.prototype.bu=function(t){this.hu=[t[0],t[1]];var i=_t.at.getProjection(this.su).project(this.hu[0],this.hu[1]);_t.Pl(this.uu,i[0],i[1],0)},Hn.prototype.containerTolnglat=function(t,i,e){var n=this.getStatus(),o=n.centerCoord,r=n.rotation,a=_t.V[this.su].transform(o[0],o[1],e);if(0!==r){var s=r/180*Math.PI,h=t-this._size[0]/2,l=-(i-this._size[1]/2),f=Math.sqrt(h*h+l*l),u=Math.atan(h/l)-s;l<0&&(u+=Math.PI);var c=f*Math.sin(u),d=f*Math.cos(u);a=[a[0]+c*this.du,a[1]-d*this.du]}else a=[a[0]+(t-this._size[0]/2)*this.du,a[1]+(i-this._size[1]/2)*this.du];a=_t.V[this.su].Xs(a[0],a[1]);var p=_t.at.getProjection(this.su).unproject(a[0],a[1]);return p[0]=180<p[0]?p[0]-360:p[0]<-180?p[0]+360:p[0],p},Hn.prototype.lnglatToContainer=function(t,i,e){e=e||this.bt;var n=this.getStatus(),o=n.rotation,r=n.centerCoord,a=_t.at.getProjection(this.su).project(t,i),s=[a[0],a[1]],h={center:r,rotation:o,size:this._size};return _t.V[this.su].wu(s[0],s[1],e,h)},Hn.prototype._u=function(t,i){var e=this.getStatus(),n=(e.optimalZoom,e.zoom),o=e.rotation,r={center:e.centerCoord,rotation:o,size:this._size};return _t.V[this.su].wu(t,i,n,r)},Hn.prototype.ku=function(t,i){var e,n=this.getStatus(),o=(n.optimalZoom,n.centerCoord,n.zoom,n.rotation,this.containerTolnglat(t,i));return(e=_t.at.getProjection(this.su)).project.apply(e,o)},Hn.prototype.h_=function(){return _t.Ru(this.Xl,this.cu.Vl())},Hn.prototype.aD=function(){return this.Xl=this.cu.Vl(),this.Xl},Hn.prototype.EF=function(){return 1},Hn.prototype.xu=function(t,i,e){var n=this.nu/180*Math.PI,o=this._size,r=[(Math.abs(o[0]*Math.cos(n))+Math.abs(o[1]*Math.sin(n)))/2*this.du,(Math.abs(o[0]*Math.sin(n))+Math.abs(o[1]*Math.cos(n)))/2*this.du],a=_t.at.getProjection(this.su),s=this.uu[0]-r[0],h=this.uu[0]+r[0],l=this.uu[1]-r[1],f=this.uu[1]+r[1],u=a.unproject(s,l),c=a.unproject(h,f);i[0]=s,i[1]=l,i[2]=h,i[3]=f,t[0]=u[0],t[1]=u[1],t[2]=c[0],t[3]=c[1];var d=_t.V[this.su].transform(i[0],i[3]),p=_t.V[this.su].transform(i[2],i[1]);return e[0]=d[0],e[1]=d[1],e[2]=p[0],e[3]=p[1],t},Hn.prototype.vu=function(){var t=this._size,i=t[0]*this.du,e=t[1]*this.du;this.cu.setOptions(-i/2,i/2,e/2,-e/2,0,1)},Hn.prototype.fu=function(){if(_t.Util.getOptimalZoom(this.bt)<_t.Ra)return this.uu;var t=_t.lcs.getDeltaCoord([this.uu[0],this.uu[1]]),i=_t.Dl();return _t.Pl(i,t[0],t[1],this.uu[2]),i},Hn.prototype.lu=function(t){return this.hu[0]=180<this.hu[0]?this.hu[0]-360:this.hu[0]<-180?this.hu[0]+360:this.hu[0],t.project(this.hu[0],this.hu[1])},Hn);function Hn(t,i){var e=On.call(this)||this;return e.type="2D",e.Pu=0,e.hu=[0,0],e.bt=12,e._size=[0,0],e.pu=1,e.nu=0,e.cu=new Fn(-1,1,1,-1,0,1e3),e.su="EPSG:3857",e.uu=_t.Dl(),e.du=_t.at.getProjection(e.su).getResolution(12),e.Xl=_t.Il(),e.bt=void 0!==t.zoom?t.zoom:12,e.map=i,e.setOptions(t),e.vu(),e.Xl=e.cu.Vl(),e}var jn,En=(jn=$n,_t.Ei(Nn,jn),Nn.prototype.Vl=function(){var t=_t.Il();return _t.multiply(t,this.ql,this.zu),t},Nn.prototype.Su=function(){return this.ql},Nn.prototype.Cu=function(){return this.Yl},Nn.prototype.Lu=function(){return this.zu},Nn.prototype.Au=function(){return this.cu},Nn.prototype.setOptions=function(t,i,e,n,o){void 0===t&&(t=[1,1]),void 0===i&&(i=60),void 0===e&&(e=1),void 0===n&&(n=1),void 0===o&&(o=10),this.Tu=this.Iu(i),this.tu=n,this.iu=o,this.Du=e,this._size=t,this.eu()},Nn.prototype.setPitch=function(t){this.Pu=void 0!==t?t:this.Pu;var i=this._size[1]/2/Math.tan(this.Tu/2),e=this.Iu(this.Pu),n=this.Iu(this.nu),o=i*Math.sin(e),r=this.jl[0]-o*Math.sin(n),a=this.jl[1]-o*Math.cos(n),s=i*Math.cos(e);_t.Pl(this._position,r,a,s),this.ju()},Nn.prototype.setRotation=function(t){this.nu=void 0!==t?-t:this.nu;var i=this.Iu(this.nu),e=Math.sin(i),n=Math.cos(i);_t.Pl(this.El,e,n,0),this.Ou()},Nn.prototype.Fu=function(t,i,e){_t.Pl(this.jl,t,i,e),this.ju()},Nn.prototype.Ou=function(t,i,e){if(void 0!==t&&void 0!==i)_t.Pl(this._position,t,i,void 0===e?this._position[2]:e),this.ju();else{var n=this._size[1]/2/Math.tan(this.Tu/2);_t.Pl(this._position,this.jl[0],this.jl[1],n),this.setPitch()}},Nn.prototype.Eu=function(t){var i=this._size;this.cz=t||i[1]/2/Math.tan(this.Tu/2)||0,_t.Pl(this._position,this._position[0],this._position[1],this.cz),this.setPitch()},Nn.prototype.Nu=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=1),void 0===e&&(e=0),_t.Pl(this.El,t,i,e),this.ju()},Nn.prototype.dz=function(){return this.cz},Nn.prototype.eu=function(){_t.perspective(this.ql,this.Tu,this.Du,this.tu,this.iu),_t.Ul(this.Yl,this.ql)},Nn.prototype.ju=function(){_t.Tl(this.zu,this._position,this.jl,this.El),_t.Ul(this.cu,this.zu)},Nn.prototype.Iu=function(t){return t*Math.PI/180},Nn);function Nn(t,i,e,n,o){void 0===t&&(t=[1,1]),void 0===i&&(i=60),void 0===e&&(e=1),void 0===n&&(n=10),void 0===o&&(o=2e4);var r=jn.call(this)||this;return r.Wt="PerspectiveCamera",r.Pu=0,r.nu=0,r.cu=_t.Il(),r.zu=_t.Il(),r.cz=0,r.Tu=r.Iu(i),r.tu=n,r.iu=o,r.Du=e,_t.Pl(r.El,0,1,0),r._size=t,r.eu(),r}var Wn,Un=(Wn=_t.Event,_t.Ei(Gn,Wn),Gn.prototype.setOptions=function(t){var i=_t.at.getProjection(this.su);if(t.projectionId&&(this.su=t.projectionId),t.size&&(this.map.emit("resize"),this._size=t.size,this.vu(),this.cu.Ou()),void 0!==t.rotation&&"w"===_t._.baseRender&&(360<t.rotation?t.rotation-=360:t.rotation<-360&&(t.rotation+=360),this.cu.setRotation(t.rotation),this.nu=t.rotation),void 0!==t.zoom){t.zoom=Math.min(Math.max(t.zoom,this.map.getZooms()[0]),this.map.getZooms()[1]);var e=this.bt;this.bt=t.zoom,this.du=i.getResolution(this.bt);var n=this.fu();if(_t.Util.getOptimalZoom(t.zoom)<_t.Ra&&_t.Util.getOptimalZoom(e)>=_t.Ra||_t.Util.getOptimalZoom(t.zoom)>=_t.Ra&&_t.Util.getOptimalZoom(e)<_t.Ra){var o=this.fu();this.cu.Fu(o[0],o[1],0),this.cu.Ou(),this.vu()}this.cu.Fu(n[0],n[1],0),this.cu.Ou(),this.vu()}if(void 0!==t.pitch&&"w"===_t._.baseRender&&(t.pitch>this.$u()||this.Pu>this.$u()?t.pitch=this.$u():(t.pitch<0||this.Pu<0)&&(t.pitch=0),this.Pu=Math.min(t.pitch,this.$u()),this.cu.setPitch(t.pitch)),t.center){this.hu=t.center;var r=this.lu(i);_t.Pl(this.uu,r[0],r[1],0),n=this.fu();var a=i.unproject(r[0],r[1]);this.hu=a,this.cu.Fu(n[0],n[1],0),this.cu.Ou()}if(t.kt){if(!this.map.getStatus().zoomEnable)return;if(e=this.bt,this.bt=Math.min(Math.max(t.kt.Mt,this.map.getZooms()[0]),this.map.getZooms()[1]),this.du=i.getResolution(this.bt),_t.Util.getOptimalZoom(t.kt.Mt)<_t.Ra&&_t.Util.getOptimalZoom(e)>=_t.Ra||_t.Util.getOptimalZoom(t.kt.Mt)>=_t.Ra&&_t.Util.getOptimalZoom(e)<_t.Ra){var s=this.fu();this.cu.Fu(s[0],s[1],0),this.cu.Ou()}var h=this.lu(i),l=t.kt.pos,f=this.X(l[0],l[1]),u=_t.lcs.getLocalByCoord([h[0],h[1]]);this.vu(),n=this.fu(),this.cu.Fu(n[0],n[1],0),this.cu.Ou();var c=this.X(l[0],l[1]),d=[c[0]-f[0],c[1]-f[1]],p=[n[0]-d[0],n[1]-d[1]],v=(r=[h[0]-d[0],h[1]-d[1]],_t.lcs.getLocalByCoord(r));if(this.bt>=_t.Ra&&(v.x!==u.x||u.y!==v.y)){var m=v.x-u.x,y=v.y-u.y;p[0]-=m*_t.lcs.getSize()[0],p[1]-=y*_t.lcs.getSize()[1]}this.cu.Fu(p[0],p[1],0),this.cu.Ou(),this.bu(r)}this.h_()||this.map.setNeedUpdate(!0)},Gn.prototype.bu=function(t){var i=_t.at.getProjection(this.su);_t.Pl(this.uu,t[0],t[1],0);var e=i.unproject(t[0],t[1]);this.hu=e},Gn.prototype.getOptions=function(){return{size:this._size,zoom:this.bt,center:this.hu,rotation:this.nu,projectionId:this.su,pitch:this.Pu,resolution:this.du}},Gn.prototype.au=function(){return this.su},Gn.prototype.ru=function(){return _t.at.getProjection(this.su)},Gn.prototype.getStatus=function(){var t=_t.Zl(),i=_t.Zl(),e=_t.Zl();this.xu(t,i,e);var n=_t.Util.getOptimalZoom(this.bt);return{size:this._size,pitch:this.Pu,rotation:this.nu,zoom:this.bt,optimalZoom:n,resolution:this.du,optimalResolution:_t.at.getProjection(this.su).getResolution(n),center:this.hu,bounds:t,boundsCoord:i,transformedBoundsCoord:e,centerCoord:this.uu,projectionId:this.su,mvpMatrix:this.cu.Vl(),modelMatrix:this.cu.Au(),viewMode:this.type,skyHeight:this.EF()}},Gn.prototype.$u=function(t){return 65},Gn.prototype.Uu=function(t){var i=void 0!==t?t:this.Pu,e=this.bt,n=Math.max(i/100-.4,0),o=Math.max(4*(e-16),0)/100;return this._size[1]*(n-o)-10},Gn.prototype.EF=function(){var t=1;return 0<(t=this.Uu())?1-t/this._size[1]*2:1},Gn.prototype.X=function(t,i){var e=this.cu.Cu(),n=this.cu.Au(),o=this._size;if(t=t/o[0]*2-1,i=1-i/o[1]*2,!e)return[0,0];var r=_t.xd(t,i,-1,1);this.Wu(r,this.tu);var a=_t.Zl();_t.Gu(a,r,e);var s=_t.xd(t,i,1,1);this.Wu(s,this.iu);var h=_t.Zl();_t.Gu(h,s,e);var l=_t.Zl();_t.Gu(l,a,n);var f=_t.Zl();_t.Gu(f,h,n);var u=l[2]/(l[2]-f[2]);return[l[0]-u*(l[0]-f[0]),l[1]-u*(l[1]-f[1])]},Gn.prototype.ku=function(t,i){var e,n=this.getStatus(),o=n.optimalZoom,r=n.centerCoord;if(t=(e=this.X(t,i))[0],i=e[1],o>=_t.Ra){var a=_t.lcs.getLocalByCoord([r[0],r[1]]);t+=a.center[0],i+=a.center[1]}return[t,i]},Gn.prototype.H=function(t,i){var e=this.cu.Su(),n=this.cu.Lu(),o=_t.xd(t,i,0,1),r=_t.Zl(),a=_t.Zl();return _t.Gu(r,o,n),_t.Gu(a,r,e),_t.scale(a,a,1/a[3]),[(a[0]+1)/2*this._size[0],(1-a[1])/2*this._size[1]]},Gn.prototype._u=function(t,i){var e=this.getStatus(),n=e.optimalZoom,o=e.centerCoord;if(n>=_t.Ra){var r=_t.lcs.getLocalByCoord([o[0],o[1]]);t-=r.center[0],i-=r.center[1]}return this.H(t,i)},Gn.prototype.containerTolnglat=function(t,i){var e=this.X(t,i),n=0,o=0;if(_t.Util.getOptimalZoom(this.bt)>=_t.Ra){var r=_t.lcs.getLocalByCoord([this.uu[0],this.uu[1]]).center;n=r[0],o=r[1]}e[0]+=n,e[1]+=o;var a=_t.at.getProjection(this.su).unproject(e[0],e[1]);return a[0]=180<a[0]?a[0]-360:a[0]<-180?a[0]+360:a[0],a},Gn.prototype.lnglatToContainer=function(t,i){var e=_t.at.getProjection(this.su).project(t,i);if(_t.Util.getOptimalZoom(this.bt)>=_t.Ra){var n=_t.lcs.getLocalByCoord([this.uu[0],this.uu[1]]);e[0]-=n.center[0],e[1]-=n.center[1]}return this.H(e[0],e[1])},Gn.prototype.pz=function(){return this.cu},Gn.prototype.h_=function(){return _t.Ru(this.Xl,this.cu.Vl())},Gn.prototype.aD=function(){return this.Xl=this.cu.Vl(),this.Xl},Gn.prototype.xu=function(t,i,e){var n=0,o=0,r=this.Uu();if(_t.Util.getOptimalZoom(this.bt)>=_t.Ra){var a=_t.lcs.getLocalByCoord([this.uu[0],this.uu[1]]).center;n=a[0],o=a[1]}var s=_t.at.getProjection(this.su),h=this.X(0,r),l=this.X.apply(this,this._size),f=this.X(this._size[0],r),u=this.X(0,this._size[1]),c=Math.min(h[0],u[0],f[0],l[0])+n,d=Math.max(h[0],u[0],f[0],l[0])+n,p=Math.min(h[1],u[1],f[1],l[1])+o,v=Math.max(h[1],u[1],f[1],l[1])+o,m=s.unproject(c,p),y=s.unproject(d,v);i[0]=c,i[1]=p,i[2]=d,i[3]=v,t[0]=m[0],t[1]=m[1],t[2]=y[0],t[3]=y[1];var x=_t.V[this.su].transform(i[0],i[3]),g=_t.V[this.su].transform(i[2],i[1]);return e[0]=x[0],e[1]=x[1],e[2]=g[0],e[3]=g[1],t},Gn.prototype.vu=function(){var t=this._size,i=t[0]*this.du,e=t[1]*this.du,n=this.cu.dz();this.tu=n/10,this.iu=50*n;var o=56-this.bt;this.cu.setOptions([i,e],o,t[0]/t[1],this.tu,this.iu),this.cu.Eu()},Gn.prototype.fu=function(){if(_t.Util.getOptimalZoom(this.bt)<_t.Ra)return[this.uu[0],this.uu[1]];var t=_t.lcs.getDeltaCoord([this.uu[0],this.uu[1]]);return[t[0],t[1]]},Gn.prototype.lu=function(t){return this.hu[0]=180<this.hu[0]?this.hu[0]-360:this.hu[0]<-180?this.hu[0]+360:this.hu[0],t.project(this.hu[0],this.hu[1])},Gn.prototype.Wu=function(t,i){t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i},Gn);function Gn(t,i){var e=Wn.call(this)||this;return e.type="3D",e.Pu=0,e.hu=[116.397128,39.916527],e.bt=12,e.tu=1e3,e.iu=1<<30,e._size=[0,0],e.nu=0,e.cu=new En,e.su="EPSG:3857",e.uu=_t.Dl(),e.du=_t.at.getProjection(e.su).getResolution(12),e.Xl=_t.Il(),e.map=i,e.setOptions(t),e.cu.Ou(e.uu[0],e.uu[1]),e.Xl=e.cu.Vl(),e}var Vn,Yn,Zn={Fe:["water","buildings","sky","atmosphere","bg","traffic"],Ee:{regions:{name:"区域面",subType:{land:{name:"陆地",styleMap:[{mainkey:30001,subkey:[1,4,5]}]},green:{name:"绿地",styleMap:[{mainkey:30001,subkey:[3,7,8,9,10,12]}]},edu:{name:"教育体育",styleMap:[{mainkey:30002,subkey:[3,31]}]},public:{name:"公共设施",styleMap:[{mainkey:30002,subkey:[4,12,22,32]}]},traffic:{name:"交通枢纽",styleMap:[{mainkey:30002,subkey:[6,14,40]},{mainkey:30004,subkey:[6,14,40]}]},scenicSpot:{name:"景区",styleMap:[{mainkey:30002,subkey:[5,33]}]},culture:{name:"文化",styleMap:[{mainkey:30002,subkey:[7,35]}]},health:{name:"医疗卫生",styleMap:[{mainkey:30002,subkey:[8,36]}]},sports:{name:"运动场所",styleMap:[{mainkey:30002,subkey:[9,10,13,19,20,21,34,37,39]}]},business:{name:"商业场所",styleMap:[{mainkey:30002,subkey:[11,23,24,25,26,27,28,29,30,38]}]},parkingLot:{name:"停车场",styleMap:[{mainkey:30002,subkey:[1]}]},subway:{name:"地铁设施",styleMap:[{mainkey:30003}]}}},water:{name:"水系",styleMap:[{mainkey:30001,subkey:[2,6,11,13]},{mainkey:20014,subkey:[1,2]},{mainkey:10002,subkey:[13,38]}]},buildings:{name:"建筑物",styleMap:[{mainkey:50001,subkey:[1,2]},{mainkey:50002,subkey:[1,2,3,4]},{mainkey:50003,subkey:[1]},{mainkey:50004,subkey:[1]},{mainkey:30002,subkey:[2,15,16,17,18]}]},roads:{name:"道路",subType:{highWay:{name:"高速公路",styleMap:[{mainkey:20001,subkey:[1,2,3,5,6]}]},ringRoad:{name:"城市环线",styleMap:[{mainkey:20002,subkey:[1,2,3]}]},nationalRoad:{name:"国道",styleMap:[{mainkey:20003,subkey:[1,2,3,5]}]},provincialRoad:{name:"省道",styleMap:[{mainkey:20004,subkey:[1,2,3]}]},secondaryRoad:{name:"二级公路",styleMap:[{mainkey:20007,subkey:[1,2,3]}]},levelThreeRoad:{name:"三级公路",styleMap:[{mainkey:20008,subkey:[1,2,4,5]}]},levelFourRoad:{name:"四级道路",styleMap:[{mainkey:20009,subkey:[1,2,3,5,6,7]}]},roadsBeingBuilt:{name:"在建道路",styleMap:[{mainkey:20018,subkey:[2,3,4,5,6,7,8,9,10,11]}]},railway:{name:"铁路",styleMap:[{mainkey:20010,subkey:[1]}]},highSpeedRailway:{name:"高铁",styleMap:[{mainkey:20010,subkey:[2]}]},subway:{name:"地铁",styleMap:[{mainkey:20015,allSubKey:!0,subkey0:[1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,44,45,46,47,48,50,51,52,54,55,56,57,58,59,60,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,89,90,91,92,93,94,95,96,97,98,99,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,131,132,133,143]}]},subwayBeingBuilt:{name:"在建地铁",styleMap:[{mainkey:20015,subkey:[1,2]},{mainkey:20019,subkey:[1]}]},overPass:{name:"天桥",styleMap:[{mainkey:20012,subkey:[1,2,3]}]},underPass:{name:"地道",styleMap:[{mainkey:20013,subkey:[1,2,3]}]},other:{name:"其他线条",styleMap:[{mainkey:20011,subkey:[1]},{mainkey:20017,subkey:[1,2,3,4,8]},{mainkey:20020,subkey:[1,2,3]},{mainkey:20024,subkey:[1,2]},{mainkey:20028,subkey:[1]}]},guideBoards:{name:"道路路牌",styleMap:[{mainkey:40001,subkey:[2800,110100,110101,110102,110103,110104,110105]}]}}},labels:{name:"标注",subType:{pois:{name:"兴趣点",subType:{hotel:{name:"住宿",isDetailedType:!0,detailedCode:0,styleMap:[{mainkey:10001,subkey:[9,133,134,135,136,155,156,157,158,159,160,161,162,186]},{mainkey:10007,subkey:[31,32,33,34,35,36,37,38,39,164,165]}]},restaurant:{name:"餐饮",isDetailedType:!0,detailedCode:1,styleMap:[{mainkey:10001,subkey:[19,20,21,22,114,115,116,117,118,119,183,187]},{mainkey:10007,subkey:[1,2,3,4,166,167,168,179,180,181,203,205,206,215]}]},shop:{name:"购物",isDetailedType:!0,detailedCode:2,styleMap:[{mainkey:10001,subkey:[7,8,68,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99]},{mainkey:10007,subkey:[5,6,7,8,9,10,11,12,13,175,200,201,202,204]}]},scenicSpot:{name:"风景名胜",isDetailedType:!0,detailedCode:3,styleMap:[{mainkey:10001,subkey:[4,12,14,38,69,100,101,102,103,104,105,106,107,108,109,110,111,112,120,167,171,188,189,190,191,192]},{mainkey:10008},{mainkey:10007,subkey:[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,187,188,190,192,193,194,195,196,198,216,217,218,219,220,221,223,224,225]}]},traffic:{name:"交通设施",isDetailedType:!0,detailedCode:4,styleMap:[{mainkey:10001,subkey:[23,24,25,26,31,36,148,154,168,172,175,176,177,178]},{mainkey:10002,subkey:[11,16]},{mainkey:10009}]},bank:{name:"金融保险",isDetailedType:!0,detailedCode:5,styleMap:[{mainkey:10001,subkey:[42,44,45,46,47,48,49,50,51,52,53,54,55,144,145,146,147]},{mainkey:10007,subkey:[14,15,16,17,18,19,20,21,22,23,24,25,26,27]}]},edu:{name:"科教文化",isDetailedType:!0,detailedCode:6,styleMap:[{mainkey:10001,subkey:[10,11,13,35,138,139,140,141,142,143,163,164,165,166,170]},{mainkey:10007,subkey:[43,44,45,46,47,176,177]}]},live:{name:"生活服务",isDetailedType:!0,detailedCode:7,styleMap:[{mainkey:10001,subkey:[58,63,64,65,66,67,121,122,123]},{mainkey:10007,subkey:[28,29,30]}]},hospital:{name:"医疗保健",isDetailedType:!0,detailedCode:8,styleMap:[{mainkey:10001,subkey:[32,33,57,70,131,132,169,193,206,207,208,209,210]},{mainkey:10007,subkey:[170,209]}]},pe:{name:"休闲体育",isDetailedType:!0,detailedCode:9,styleMap:[{mainkey:10001,subkey:[15,16,17,37,60,61,62,73,124,125,126,127,128,129,130,180,181,182,184,185,194,195,196,197,198,199,200,201,202,203,204,205,213,214]},{mainkey:10007,subkey:[169,171,172,173,174,178,197,207]}]},public:{name:"公共设施",isDetailedType:!0,detailedCode:10,styleMap:[{mainkey:10001,subkey:[59,173,215]}]},buidling:{name:"商务住宅",isDetailedType:!0,detailedCode:11,styleMap:[{mainkey:10001,subkey:[5,6,74,75,76,77,78,79,80,81,179]},{mainkey:10007,subkey:[189,191]}]},gov:{name:"政府机构及社会团体",isDetailedType:!0,detailedCode:12,styleMap:[{mainkey:10001,subkey:[3,34,43,137]}]},moto:{name:"摩托车服务",isDetailedType:!0,detailedCode:13,styleMap:[{mainkey:10001,subkey:[113]}]},vehicle:{name:"汽车服务",isDetailedType:!0,detailedCode:14,styleMap:[{mainkey:10001,subkey:[39,40,41,71,72,151,152,153]},{mainkey:10007,subkey:[40,41,42,182,183,184,185,186]}]},pass:{name:"通行设施",isDetailedType:!0,detailedCode:15,styleMap:[{mainkey:10001,subkey:[27,28,149,150,174]},{mainkey:10002,subkey:[21]}]},subway:{name:"地铁站",isDetailedType:!0,detailedCode:16,styleMap:[{mainkey:10005,subkey:[1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,54,55,56,57,59,86,87,88,89,90,91,92,93,94,95,96,97,98,99,103,104,105]},{mainkey:10006,subkey:[1,2]}]},roadFacilities:{name:"道路附属设施",isDetailedType:!0,detailedCode:17,styleMap:[{mainkey:10001,subkey:[2,29,30]},{mainkey:10017}]},address:{name:"地名",isDetailedType:!0,detailedCode:18,styleMap:[{mainkey:10001,subkey:[18]},{mainkey:10002,subkey:[10,12,14,15,23,36]}]},other:{name:"其他",isDetailedType:!0,detailedCode:19,styleMap:[{mainkey:10001,subkey:[1,211,212]},{mainkey:10002,subkey:[28]},{mainkey:10007,subkey:[208,210,211,212,213,214]},{mainkey:10010},{mainkey:10011},{mainkey:10012},{mainkey:10013},{mainkey:10014},{mainkey:10015},{mainkey:10016}]}}},aois:{name:"区域标注",styleMap:[{mainkey:10004,allSubKey:!0,subkey:[1,3,4,5,6,7,8,11,12,13,14,15,16,17,18,21,22,23]}]},continent:{name:"大洲",styleMap:[{mainkey:10002,subkey:[20]}]},country:{name:"国家",styleMap:[{mainkey:10002,subkey:[18,19,29]}]},province:{name:"省/直辖市/自治区/特别行政区",styleMap:[{mainkey:10002,subkey:[22,26,33]}]},city:{name:"城市",styleMap:[{mainkey:10002,subkey:[1,2,3,4,5,7,24,25,27,30,31,32,34,35]}]},district:{name:"区县",styleMap:[{mainkey:10002,subkey:[6,8,37]}]},town:{name:"乡镇",styleMap:[{mainkey:10002,subkey:[9]}]},village:{name:"村庄",styleMap:[{mainkey:10002,subkey:[17]}]}}},borders:{name:"行政区边界",subType:{China:{name:"中国国界",styleMap:[{mainkey:20016,subkey:[1,2,9]}]},foreign:{name:"外国国界/停火线/主张线",styleMap:[{mainkey:20016,subkey:[3,4,8,10,11,14,16]}]},provincial:{name:"省界线",styleMap:[{mainkey:20016,subkey:[5,6,7,12]}]}}}}},Xn=(Jn.prototype.pn=function(t){this.qe?t():this.Ye.push(t)},Jn.prototype.dn=function(t,i,e){return this.vn.dn(t,i,e)},Jn.prototype.mn=function(t,i){return this.vn.mn(t,i)},Jn.prototype.setStyle=function(t,i){var e=this.xn(t);this.vn.setStyle(e),this.vn.kF(t),i.gn.bn(e,function(){i.emit("styleChanged")})},Jn.prototype.w_=function(t){if(!this.Ze||!this.Ze[t])return null;var e=[];return Object.keys(this.Ze[t]).forEach(function(t){var i=parseFloat(t);e.push(i)}),e},Jn.prototype.xn=function(t){for(var i={},e=Object.keys(t),n=0;n<e.length;n++){var o=e[n],r=t[o];if(Zn.Ee[o]){var a=Zn.Ee[o];if(a.styleMap){for(var s=a.styleMap,h=0;h<s.length;h++)if(i[w=s[h].mainkey]||(i[w]={}),s[h].subkey)for(var l=0;l<s[h].subkey.length;l++){var f=s[h].subkey[l],u=_t.yn(r);if(r.styles)for(var c=Object.keys(r.styles),d=0;d<c.length;d++){var p=c[d],v=r.styles[p].transitional;u.styles[p]={nodes:{},transitional:v||void 0};for(var m=r.styles[p].nodes,y=0;y<m.length;y++){var x=m[y].zoom,g=m[y].value;u.styles[p].nodes[x]=g}}i[w][f]=u}}else if(a.subType&&r.subType){var b=Object.keys(r.subType);for(h=0;h<b.length;h++){var _=b[h];if(a.subType[_]&&a.subType[_].styleMap){for(s=a.subType[_].styleMap,l=0;l<s.length;l++)if(s[l].mainkey){var w;i[w=s[l].mainkey]||(i[w]={});var k=s[l].subkey;if(s[l].allSubKey&&(k=this.w_(w)),k)for(var M=0;M<k.length;M++){f=k[M];var S=r.subType[_];if((u=_t.yn(S)).styles)for(c=Object.keys(S.styles),d=0;d<c.length;d++)for(p=c[d],v=S.styles[p].transitional,u.styles[p]={nodes:{},transitional:v||void 0},m=S.styles[p].nodes,y=0;y<m.length;y++)x=m[y].zoom,g=m[y].value,u.styles[p].nodes[x]=g;i[w][f]=u}}}else if(a.subType[_]&&a.subType[_].subType)for(var z=a.subType[_].subType,R=Object.keys(z),C=(S=r.subType[_],u=_t.yn(S),0);C<R.length;C++){var A=R[C];if(z[A].styleMap)for(var I=0;I<z[A].styleMap.length;I++){var L=z[A].styleMap[I];if(L.mainkey&&L.subkey){i[L.mainkey]||(i[L.mainkey]={});for(var $=0;$<L.subkey.length;$++){var T=L.subkey[$];if(u.detailedType&&u.detailedType[A]){var D=u.detailedType[A],F=_t.yn(D);if(D.styles)for(c=Object.keys(D.styles),d=0;d<c.length;d++)for(p=c[d],F.styles[p]={nodes:{}},m=D.styles[p].nodes,y=0;y<m.length;y++)x=m[y].zoom,g=m[y].value,F.styles[p].nodes[x]=g;i[L.mainkey][T]=F}else i[L.mainkey][T]=u}}}}}}}}return i},Jn.prototype.wn=function(){for(var t=0,i=this.Ye.length;t<i;t+=1)(0,this.Ye[t])();this.Ye=[]},Jn.prototype.Je=function(t){return t&&"0"!==t?(8!==t.length||(t=t.slice(2)+t.slice(0,2)),_t._n.create(t)):null},Jn.prototype.fn=function(t){var i=this,e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status?i.kn(e.responseText):404===e.status&&e.abort()},e.open("GET",t),e.send()},Jn.prototype.kn=function(t){for(var i={},e=[],n=0,o=(t=t.replace(/\?/g,":").replace(/\//g,"&")).split(""),r=0,a=o.length;r<a;r++)void 0===i[o[r]]&&(i[o[r]]=n++,e.push(o[r]));for(e.reverse(),r=0,a=o.length;r<a;r++)o[r]=e[i[o[r]]];t=o.join("");var s=JSON.parse(t);this.Ze=this.Mn(s.stylemaps),this.Ze.Rn=_t._n.create("fcf9f2"),this.Ze.zn=24,this.qe=!0,this.wn()},Jn.prototype.Mn=function(t){var i={};for(var e in t)if(t.hasOwnProperty(e)){var n=t[e],o=void 0;switch(e[0]){case"1":o=this.Xe;break;case"2":o=this.rn,n.type="road";break;case"3":o=this.cn;break;case"4":o=this.un;break;case"5":o=this.ln,n.type="building"}if(!o){delete t[e];continue}var r=e.split(":"),a=r[0],s=r[1];void 0===i[a]&&(i[a]={});for(var h=(i[a][s]=n).browserStyle,l=0,f=h.length;l<f;l+=1){var u=h[l];if(h[l]=o(u),void 0===n.z)switch(e[0]){case"2":n.z=h[l]?h[l][0].z:n.z;break;case"1":case"3":case"4":case"5":n.z=h[l].z;break;default:n.z=-1}}this.Sn(n)}return this.vn=new _t.Cn(i),i},Jn.prototype.Sn=function(t){if(void 0!==t.levelStyleMapping[3]&&(t.levelStyleMapping[2]=t.levelStyleMapping[3]),void 0!==t.levelStyleMapping[20]&&(t.levelStyleMapping[21]=t.levelStyleMapping[20],t.levelStyleMapping[22]=t.levelStyleMapping[20]),"building"===t.type&&t.levelStyleMapping&&(delete t.levelStyleMapping[15],delete t.levelStyleMapping[16]),"road"===t.type&&void 0!==t.levelStyleMapping[18]){var i=t.browserStyle,e=t.levelStyleMapping[18],n=i[e];if(n)for(var o=1;o<=4;o++){var r=[];r.push(_t.Ln({},n[0])),r.push(_t.Ln({},n[1])),r[0].roadWidth=r[0].roadWidth*Math.pow(2,o),r[0].borderWidth=r[0].borderWidth*Math.pow(2,o),t.browserStyle.push(r),t.levelStyleMapping[o+18]=e+o}}},Jn);function Jn(){var s=this;this.vz=null,this.Ne=_t._.$e&&!_t._.Ue,this.Be=window.__AMapStyleSource||_t.Ge||"https://vdata.amap.com/style/2.0",this.Ze={},this.qe=!1,this.Ye=[],this.Ve=null,this.Xe=function(t){var i=t.split("&"),e={};return e.He=i[0],e.fontSize=parseInt(i[1],10),e.faceColor=s.Je(i[2]),e.borderColor=s.Je(i[3]),e.Ke=s.Je(i[4]),e.Qe=parseInt(i[6],10),e.tn=2===e.Qe?0:1,e.in=parseInt(i[7],10),e.en=parseInt(i[8],10),e.nn=parseInt(i[9],10),e.an=parseInt(i[10],10),e.sn=i[5],e},this.rn=function(t){var i,e,n=t[0].split("&");if(n.length<=2)return null;var o={};o.roadWidth=parseInt(n[0],10),o.roadColor=s.Je(n[1]),o.hn=n[2],o.borderWidth=parseInt(n[3],10),o.borderColor=s.Je(n[4]),o.borderStyle=n[5],o.z=parseInt(n[6],10),o.hn&&o.hn.indexOf&&(0===o.hn.indexOf("dash")?(o.roadDash=o.hn.substring(4).slice(1,-1).split(","),o.roadDash=_t.map(o.roadDash,function(t){return parseInt(t,10)}),2===o.roadDash.length&&(i=o.roadDash).push.apply(i,o.roadDash)):0<o.hn.indexOf("railway")||o.hn.indexOf("dash_crewel")),o.borderStyle&&o.borderStyle.indexOf&&(0===o.borderStyle.indexOf("dash")?(o.borderDash=o.borderStyle.substring(4).slice(1,-1).split(","),o.borderDash=_t.map(o.borderDash,function(t){return parseInt(t,10)}),2===o.borderDash.length&&(e=o.borderDash).push.apply(e,o.borderDash)):0<o.borderStyle.indexOf("railway")||o.borderStyle.indexOf("dash_crewel"));var r=t[1].split("&"),a={He:""};return a.fontSize=parseInt(r[1],10),a.faceColor=s.Je(r[2]),a.borderColor=s.Je(r[3]),a.z=parseInt(r[4],10),[o,a]},this.ln=function(t){var i=t.split("&"),e={};return e.faceColor=s.Je(i[0]),e.borderWidth=parseInt(i[1],10),e.borderColor=s.Je(i[2]),e.wallColor1=s.Je(i[3]),e.wallColor2=s.Je(i[4]),e.opacity=parseFloat(i[5]),e.z=parseInt(i[6],10),e},this.un=function(t){var i=t.split("&"),e={};return e.He=i[0],e.fontSize=parseInt(i[1],10),e.faceColor=s.Je(i[2]),e.borderColor=s.Je(i[3]),e.Ke=null,e.z=parseInt(i[5],10),e},this.cn=function(t){var i=t.split("&"),e={};return e.faceColor=s.Je(i[0]),e.borderWidth=0,e.borderColor=null,e.z=parseInt(i[3],10),e},this.fn(this.Be)}(Yn=Vn=Vn||{}).TEXTUREFINISH="TEXTUREFINISH",Yn.UNLOAD="unload",Yn.LOADING="loading",Yn.LOADED="loaded",Yn.FAIL="fail";var qn=(Qn.prototype.getData=function(t,i){for(var e=this,n=[],o=0,r=t;o<r.length;o++){var a=r[o];n.push(a.charCodeAt(0))}var s=this.Zu(n),h=this._map.gn;switch(s.status){case _t.qu.AllLoaded:i();break;case _t.qu.AllUnLoaded:var l=this.Yu(i);h.getSDFData(s.Vu,function(t){void 0===t&&(t={}),e.Xu[l]=t,e.Hu()});break;case _t.qu.SomeLoading:var f=this.Yu(i);h.getSDFData(s.Vu,function(t){void 0===t&&(t={}),e.Xu[f]=t,e.Hu()});break;case _t.qu.AllLoading:var u=this.Yu(i);this.Xu[u]=[],this.Hu()}},Qn.prototype.Ju=function(t){for(var i={},e=0,n=t;e<n.length;e++){var o=n[e],r=o.range,a=o.info,s=o.pos,h=this.info;h[r]||(h[r]={}),h[r].info=a.info,h[r].pos=s,this.range.push(r),i[r]=1}return i},Qn.prototype.mz=function(t){for(var i=this.Ku,e=this.info||[],n=this.SF,o=0,r=this.Ku;o<r.length;o++){var a=r[o];if(n.hasOwnProperty(a)&&(s=n[a]).info[t])return{key:a,index:i.indexOf(a),char:s.info[t],pos:s.pos}}for(var a in e){var s;if(e.hasOwnProperty(a)&&i.indexOf(a)<0&&(s=e[a]).pos&&s.info[t])return{key:a,index:_t.tc.Qu,char:s.info[t],pos:s.pos}}return null},Qn.prototype.measureText=function(t,i){for(var e=_t.tc.ic,n=_t.tc.ec,o=0,r=this.info,a=this.SF,s=i/this._size,h=this.nc,l=0,f=t;l<f.length;l++){var u=f[l],c=void 0,d=u;if(!(c=13312<=d&&d<=40959?n:h[d]))for(var p in a)if(a.hasOwnProperty(p)&&(v=a[p].info[d])){this.nc[u]=c=v[4];break}if(!c)for(var p in r){var v;if(r.hasOwnProperty(p)&&(v=r[p].info[d])){this.nc[u]=c=v[4];break}}o+=(c+e)*s}return o},Qn.prototype.oc=function(){for(var t=this.ac,i=this.Ku,e=this.sc,n=0;n<4;){if(!e[n]){var o=i[n],r=t.getImage(o);r&&r.img&&(e[n]=r)}n++}return e},Qn.prototype.rc=function(f,u){for(var c=this,d=f.Ku.length,p=0,t=function(t,i){var s=f.hc[t],h=f.Ku[t],l=new Image;l.src=s.lc,l.crossOrigin="",l.onload=function(){if(c.ac.addImageData(h,{ext:s.ext,type:"common",img:l,width:l.width,height:l.height,status:_t.uc.LOADED}),_t.cc.revokeObjectURL(s.lc),(p+=1)===d){c.Ku=f.Ku;for(var t=0,i=f.jm;t<i.length;t++){var e=i[t],n=e.range,o=e.info,r=e.pos,a=c.SF;a[n]||(a[n]={}),a[n].info=o.info,a[n].pos=r}c.kc=Vn.LOADED,u&&u()}}},i=0,e=f.hc.length;i<e;i++)t(i)},Qn.prototype.destroy=function(){this.range=[],this.Ku=[],this.info={},this.SF={},this.sc=[]},Qn.prototype.Qd=function(){this.kc=Vn.TEXTUREFINISH},Qn.prototype.fc=function(){var t=_t.tc.pc,i=t[this.dc];return this.dc=(this.dc+1)%t.length,i},Qn.prototype.vc=function(t){void 0===t&&(t={});var i=(Object.keys(t)||[]).sort(function(t,i){return t-i}),e=i.length;return 2<=e?i[0]+"-"+i[e-1]:1===e?i[0]:""},Qn.prototype.mc=function(){},Qn.prototype.Yu=function(t,i){void 0===i&&(i={});var e=this.yc+=1;return this.xc.push(e),this.bc[e]=t,this.bc[e]={cb:t,params:i},e},Qn.prototype.Hu=function(){var t=this.xc[0];if(t){var i=this.Xu[t];if(i){this.xc.shift();var e=this.bc[t];e?e.cb(i):console.error("sdf task error"),delete this.Xu[t],delete this.bc[t],this.Hu()}}},Qn.prototype.gc=function(t){var i=this.range||[],e=this.info||{},n=this.SF;if(this.kc===Vn.TEXTUREFINISH||this.kc===Vn.LOADED)for(var o=0,r=this.Ku;o<r.length;o++){var a=r[o];if(n.hasOwnProperty(a)){var s=a.split("-"),h=parseInt(s[0]||"",10),l=parseInt(s[1]||"",10);if(h<=t&&t<=l&&(n[a]&&n[a].info||{})[t])return!0}}for(var f=0,u=i;f<u.length;f++)if((a=u[f]).indexOf("-")<0){if(t===+a&&(e[a]&&e[a].info||{})[t])return!0}else if(s=a.split("-"),h=parseInt(s[0]||"",10),l=parseInt(s[1]||"",10),h<=t&&t<=l&&(e[a]&&e[a].info||{})[t])return!0;return!1},Qn.prototype.wc=function(t){return-1!==this._c.indexOf(t)},Qn.prototype.Zu=function(t){for(var i=[],e=(this.range,0),n=0,o=0,r=t;o<r.length;o++){var a=r[o];this.gc(a)||(this.wc(a)?n+=1:(e+=1,i.push(a)))}return 0===n&&0===e?{status:_t.qu.AllLoaded,Vu:i}:0<e&&0===n?{status:_t.qu.AllUnLoaded,Vu:i}:0===e&&0<n?{status:_t.qu.AllLoading,Vu:i}:{status:_t.qu.SomeLoading,Vu:i}},Qn);function Qn(t,i){this._map=i,this.range=[],this.Ku=[],this.info={},this.SF={},this.sc=[],this.dc=0,this.kc=Vn.UNLOAD,this._c=[],this._size=24,this.nc={},this.xc=[],this.bc={},this.Xu={},this.yc=1,this.ac=t}var Kn=(to.prototype.loadImage=function(t,i){var e=i.name,n=(i.type,i.cb),o=e||t,r=this.Fs[o];r&&r.status===_t.uc.LOADED?n(r,i):r&&r.status===_t.uc.LOADING?(this.Mc[o]||(this.Mc[o]=[]),this.Mc[o].push({cb:n,opts:i})):t?this.Rc(t,i):n(null,i)},to.prototype.loadImages=function(t,i){var e=t.length,n=i.cb,o=0;if(t.length)for(var r=function(){(o+=1)===e&&n()},a=0,s=t;a<s.length;a++){var h=s[a];this.loadImage(h,{cb:r})}else n()},to.prototype.imageLoaded=function(t,i){var e=i.data,n=i.cb,o=this.zc[n];o&&(o(e),delete this.zc[n])},to.prototype.addImageData=function(t,i){this.Fs[t]||(this.Fs[t]=i)},to.prototype.getImage=function(t){return void 0===t&&(t=""),this.Fs[t]||{}},to.prototype.Bi=function(){this.Fs={}},to.prototype.Rc=function(t,n){var o=this,i=n.name,r=n.ext,e=n.type,a=void 0===e?"other":e,s=n.cb,h=this.Fs,l=new Image,f=i||t;h[f]={type:a,img:l,ext:r,width:l.width,height:l.height,status:_t.uc.LOADING},l.crossOrigin="anonymous",l.onload=function(){if(h[f]={type:a,img:l,ext:r,width:l.width,height:l.height,status:_t.uc.LOADED},s(h[f],n),o.Mc[f])for(var t=0,i=o.Mc[f];t<i.length;t++){var e=i[t];e.cb(h[f],e.opts)}l.onload=null,l.onerror=null},l.onerror=function(){s(null,n),l.onload=null,l.onerror=null},l.src=t},to.prototype.Sc=function(t){var i,e;void 0===t&&(t={});var n=t.img;return e=n&&n.context?(i=n.width||0,n.height||0):(i=t.width||0,t.height||0),[i,e]},to);function to(){this.Fs={},this.Cc=16,this.zc={},this.Mc={}}var io,eo=(io=re,_t.Ei(no,io),no.prototype.Kn=function(t,i,e,n,o){if(i.s_){for(var r={},a=0,s=i.tiles;a<s.length;a++)if((R=s[a]).status===_t.Mo.LOADED){var h=R.zo.z;r[h]||(r[h]=[]),r[h].push(R)}var l=n.To,f=e.map.getStatus().features,u=l.uo.Vh(l.co()).ra(e.$n.optimalZoom),c=_t.map(Object.keys(r),function(t){return parseInt(t,10)});c.sort(function(t,i){return t-i});var d=c.indexOf(u);0<=d&&(c.splice(d,1),c.push(u)),"3D"===e.$n.viewMode&&(this.yz=e.map.getView().EF());for(var p=0,v=c;p<v.length;p++){var m=r[v[p]];if(!f||-1!==f.indexOf("bg"))for(var y=0,x=m;y<x.length;y++)(R=x[y]).status===_t.Mo.LOADED&&this.Lc(t,R,e,n,o);if(!f||-1!==f.indexOf("building"))for(var g=0,b=m;g<b.length;g++)(R=b[g]).status===_t.Mo.LOADED&&this.PD(t,R,e,n,o);if(!f||-1!==f.indexOf("building"))for(var _=0,w=m;_<w.length;_++)(R=w[_]).status===_t.Mo.LOADED&&this.Ac(t,R,e,n,o);if(!f||-1!==f.indexOf("road"))for(var k=0,M=m;k<M.length;k++)(R=M[k]).status===_t.Mo.LOADED&&this.Tc(t,R,e,n,o);if(!f||-1!==f.indexOf("road"))for(var S=0,z=m;S<z.length;S++){var R;(R=z[S]).status===_t.Mo.LOADED&&this.Ic(t,R,e,n,o)}}}},no.prototype.destroy=function(){},no.prototype.Lc=function(t,i,e,n,o){for(var r=t.Wn(),a=!0,s=0,h=i.data;s<h.length;s++){var l=h[s],f=l.Dc;if(f){f.upload(r.context,!0);var u=f.zs,c=f.Pc,d=l.Oc,p=a?0:1;a=!1;for(var v=p,m=d.jc.length;v<m;v++){var y=d.jc[v],x=Wi(e,y,i.Sa,o.map.mapStyle,this.yz);x&&r.Ce(x,{a_pos:{type:"vec2",Re:u.size,offset:0,buffer:u}},y.length,c,"TRIANGLES",!1,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,y.offset)}}}},no.prototype.PD=function(t,i,e,n,o){var r,a=t.Wn(),s=i.data,h=_t.find(e.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME});h&&(r=h.yD().show);for(var l=!0,f=0,u=s;f<u.length;f++){var c=u[f],d=c.FD;if(d){d.upload(a.context,!0);var p=d.zs,v=d.Pc,m=c.BD;if(m){var y=l?0:1;l=!1;for(var x=y,g=m.jc.length;x<g;x++){var b=m.jc[x];if(!h||!b.bz||"indoor_out_building"===b.bz||!r){var _=Wi(e,b,i.Sa,o.map.mapStyle,this.yz);_&&a.Ce(_,{a_pos:{type:"vec2",Re:p.size,offset:0,buffer:p}},b.length,v,"TRIANGLES",!1,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,b.offset)}}}}}},no.prototype.Ac=function(t,i,e,n,o){var r,a=t.Yn(),s=i.data,h=_t.find(e.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME});h&&(r=h.yD().show);for(var l=0,f=s;l<f.length;l++){var u=f[l],c=u.Dc;if(c){c.upload(a.context,!0);for(var d=u.Fc,p=c.Ec,v=c.Nc,m=0,y=d.jc.length;m<y;m++){var x=d.jc[m],g=Zi(e,x,i.Sa,o.map.mapStyle);h&&x.bz&&"indoor_out_building"!==x.bz&&r||g&&a.Ce(g,{a_pos:{type:"vec2",Re:0,offset:0,buffer:p}},x.length,v,"LINES",!1,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,x.offset)}}}},no.prototype.Ic=function(t,i,e,n,o){var r=t.Vn();if(i.data)for(var a=0,s=i.data;a<s.length;a++){var h=s[a],l=h.$c;if(l){r.context.getExtension("OES_element_index_uint"),l.upload(r.context,!0);for(var f=h.$c.zs.buffer,u=h.$c.Pc.buffer,c=h.Uc.jc,d=0,p=c.length;d<p;d++){var v=c[d],m=Xi(e,v,!1,i.Sa,o.map.mapStyle,this.yz);if(m&&m){var y=f.size;r.Ce(m,{a_pos:{type:"vec2",buffer:f,Re:y,offset:0},a_normal:{type:"vec2",buffer:f,Re:y,offset:8},a_distance:{type:"float",buffer:f,Re:y,offset:16},a_dir:{type:"vec2",buffer:f,Re:y,offset:20}},v.length,u,"TRIANGLES",!1,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,v.offset)}}}}},no.prototype.Tc=function(t,i,e,n,o){var r=t.Vn();if(i.data)for(var a=0,s=i.data;a<s.length;a++){var h=s[a],l=h.$c;if(l){r.context.getExtension("OES_element_index_uint"),l.upload(r.context,!0);for(var f=h.$c.zs.buffer,u=h.$c.Pc.buffer,c=h.Uc.jc,d=0,p=c.length;d<p;d++){var v=c[d],m=Xi(e,v,!0,i.Sa,o.map.mapStyle,this.yz);if(m){var y=f.size;r.Ce(m,{a_pos:{type:"vec2",buffer:f,Re:y,offset:0},a_normal:{type:"vec2",buffer:f,Re:y,offset:8},a_distance:{type:"float",buffer:f,Re:y,offset:16},a_dir:{type:"vec2",buffer:f,Re:y,offset:20}},v.length,u,"TRIANGLES",!1,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,v.offset)}}}}},no);function no(){var t=io.call(this)||this;return t.yz=1,t}var oo,ro=(oo=re,_t.Ei(ao,oo),ao.prototype.Kn=function(t,i,e,n,o){if(i.s_){for(var r={},a=0,s=i.tiles;a<s.length;a++)if((b=s[a]).status===_t.Mo.LOADED){var h=b.zo.z;r[h]||(r[h]=[]),r[h].push(b)}var l=n.To,f=l.uo.Vh(l.co()).ra(e.$n.optimalZoom),u=_t.map(Object.keys(r),function(t){return parseInt(t,10)});u.sort(function(t,i){return t-i});var c=u.indexOf(f);0<=c&&(u.splice(c,1),u.push(f)),n.ce&&t.context.clear({depth:!0});for(var d=0,p=u;d<p.length;d++){for(var v=r[p[d]],m=0,y=v;m<y.length;m++)(b=y[m]).status===_t.Mo.LOADED&&this.S_(t,b,e,n,!0);for(var x=0,g=v;x<g.length;x++){var b;(b=g[x]).status===_t.Mo.LOADED&&this.S_(t,b,e,n)}}}},ao.prototype.S_=function(t,i,e,n,o){void 0===o&&(o=!1);var r=t.k_(),a=i.data,s=e.map,h=e.$n,l=e.$n.size,f=s.getView(),u={roofColor:n.roofColor,wallColor:n.wallColor},c=s.getBuildingColor(),d=1;if("3D"===e.$n.viewMode){d=f.EF();for(var p=f.X(l[0]/2,f.Uu()+5),v=f.X(l[0]/2,f.Uu()-5),m=f.pz().getPosition(),y=p[0]-m[0],x=p[1]-m[1],g=v[0]-m[0],b=v[1]-m[1],_=[Math.sqrt(y*y+x*x),Math.sqrt(g*g+b*b)],w=0,k=a;w<k.length;w++){var M=k[w],S=M.A_;if(!S)break;var z=M.C_;S.upload(r.context,!0);var R=S.zs,C=_t.find(e.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME}),A=void 0;C&&(A=C.yD().show);for(var I=0,L=z.jc;I<L.length;I++){var $=L[I],T=s.mapStyle.vn.dn($.mainkey,$.subkey,Math.max(h.optimalZoom,17)),D={};if(D.roofColor=$.roofColor||u.roofColor||c.roofColor||T&&T.faceColor&&_t.Sp.Up(T.faceColor.rgba,255),D.wallColor=$.wallColor||u.wallColor||c.wallColor||T&&T.faceColor&&_t.Sp.Up(T.borderColor.rgba,255),!D.wallColor||!D.roofColor)return;var F=Ui(e,0,i.Sa,n,D,d,_);C&&$.bz&&A||F&&r.Ce(F,{a_pos:{type:"vec4",Re:R.size,offset:0,buffer:R},a_normal:{type:"vec3",Re:R.size,offset:16,buffer:R}},$.length,void 0,"TRIANGLES",n.depthTest,o?it.disabled:it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,yi._e,$.offset)}}}},ao.prototype.cP=function(t){for(var i,e=t.getLayers(),n=0;n<e.length;n++){var o=e[n];if("AMap.Buildings"===o.CLASS_NAME&&!o.ro().u$){i=o;break}}return i},ao);function ao(){return oo.call(this)||this}var so,ho=(so=re,_t.Ei(lo,so),lo.prototype.Kn=function(t,i,e,n){t.context;var o=t.Gn(),r=n.To.eo().zooms;if(!(e.$n.zoom<r[0]||e.$n.zoom>r[1])){var a=e.$n,s=e.map,h=1;"3D"===a.viewMode&&(h=s.getView().EF());var l=s.JF()||[1,1,1,0];n.ce&&t.context.clear({depth:!0}),o.Ce({u_skyColor:l,u_skyHeight:h,u_viewHeight:a.size[1],u_opacity:n.opacity,u_texture:i.qi,u_mvpMatrix:a.mvpMatrix,u_localDeltaCenter:i.Sa},{a_Position:{type:"vec4",buffer:i.zs,Re:0,offset:0}},6,void 0,void 0,n.depthTest,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti)}},lo);function lo(){return so.call(this)||this}var fo,uo=(fo=re,_t.Ei(co,fo),co.prototype.Kn=function(t,i,e,n,o,r){var a=e.$n,s=r.eo(),h=s.zooms;if(a.size,a.pitch,a.optimalZoom,!(a.optimalZoom<h[0]||a.optimalZoom>h[1])){var l=t.Gn(),f=e.map.JF()||[1,1,1,0],u=i.tiles,c=1;"3D"===e.$n.viewMode&&(c=e.map.getView().EF()),n.ce&&t.context.clear({depth:!0});for(var d=0,p=u.length;d<p;d+=1){for(var v=u[d],m=0,y=v.length;m<y;m+=1)(x=v[m]).status===_t.Mo.LOADED&&l.Ce({u_skyColor:f,u_viewHeight:a.size[1],u_skyHeight:c,u_opacity:s.opacity||1,u_texture:x.data.qi,u_mvpMatrix:a.mvpMatrix,u_localDeltaCenter:x.data.Sa},{a_Position:{type:"vec4",buffer:x.data.zs,Re:0,offset:0}},6,void 0,void 0,n.depthTest,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti);for(m=0,y=v.length;m<y;m+=1){var x;(x=v[m]).status===_t.Mo.LOADED&&e.debug&&l.Ce({u_skyColor:f,u_viewHeight:a.size[1],u_skyHeight:c,u_opacity:s.opacity||1,u_texture:x.data.Js,u_mvpMatrix:a.mvpMatrix,u_localDeltaCenter:x.data.Sa},{a_Position:{type:"vec4",buffer:x.data.zs,Re:0,offset:0}},6,void 0,"TRIANGLES",void 0,void 0,void 0)}}}},co);function co(){return fo.call(this)||this}var po,vo=(po=re,_t.Ei(mo,po),mo.prototype.Kn=function(t,i,e,n){if(!n.JD&&this.OF&&this.EI&&this.BF&&this.NF&&(_t.Ru(this.NF,e.$n.mvpMatrix)||e.map.TL())){var o=Math.pow(2,e.$n.zoom-this.EI);_t.subtract(this.VM,e.$n.centerCoord,this.OF),_t.Pl(this.VM,-(this.VM[0]/this.BF)*o,this.VM[1]/this.BF*o,0),1!==o&&(n.kv.style[P.kL]="scale3d("+o+","+o+",1)"),n.kv.style.top=this.VM[1]+"px",n.kv.style.left=this.VM[0]+"px"}else{var r=n.To;if(_t.eg(this.OF,e.$n.centerCoord),this.EI=e.$n.zoom,this.NF=e.$n.mvpMatrix,this.BF=e.$n.resolution,r.render){var a=r.eo().zooms;e.$n.zoom>=a[0]&&e.$n.zoom<=a[1]?(r.canvas.style.visibility="visible",r.render()):r&&r.canvas&&r.canvas&&(r.canvas.style.visibility="hidden")}n.kv.style[P.kL]="",n.kv.style.top="",n.kv.style.left="",n.kv.style.height="",n.kv.style.visibility=""}},mo);function mo(){var t=po.call(this)||this;return t.type="customLayer",t.OF=_t.Dl(),t.VM=_t.Dl(),t}var yo=_t._.scale,xo={getBounds:function(t,i){void 0===i&&(i={});var e=i.zoom,n=i.centerCoord,o=(i.view,[150*yo,150*yo,150*yo,150*yo]),r=t.boundsCoord,a=r[0],s=r[1],h=r[2],l=r[3],f=this.nt(0,0,e,i),u=_t.Sp.Ip(this.nt(o[0],o[1],e,i),f),c=_t.Sp.Ip(this.nt(o[2],o[3],e,i),f),d=e>=_t.Ra?n:[0,0],p=d[0],v=d[1];return[[a-p-Math.abs(c[1]),s-v-Math.abs(c[0])],[h-p+Math.abs(u[1]),l-v+Math.abs(u[0])]]},gz:function(t,i){var e=i[0],n=i[1],o=t[0],r=t[1],a=o-e[0],s=r-e[1],h=n[0]-o,l=n[1]-r;return 0<=a&&0<=s&&0<=h&&0<=l},getRank:function(t,i){void 0===i&&(i={});var e=i.in,n=void 0===e?0:e,o=i._z,r=void 0===o?0:o,a=(t.data||{}).rank||1;return n?a-1e5:r/100*2e5+a},wu:function(t,i,e,n){if(void 0===t&&(t=0),void 0===i&&(i=0),n){var o=n.$n,r=n.size,a=n.transform,s=n.view,h=n.viewMode,l=n.centerCoord;if("2D"!==h)return s.H(t,i);var f={center:o.centerCoord,rotation:o.rotation,size:r},u=o.optimalZoom>=_t.Ra?l:[0,0],c=u[0],d=u[1];return a.wu(t+c,i+d,e,f)}},kz:function(t,i,e,n){void 0===t&&(t=[]),void 0===n&&(n={});var o=n.centerCoord;if(i<_t.Ra&&e>=_t.Ra){for(var r=o[0],a=o[1],s=[],h=0,l=t;h<l.length;h++){var f=l[h];s.push([f[0]-r,f[1]-a])}return s}return t},nt:function(t,i,e,n){void 0===t&&(t=0),void 0===i&&(i=0);var o=n.view,r=n.transform;return"2D"===n.viewMode?r.nt(t,i,e):o.X(t,i)}},go=(bo.prototype.set=function(t){this.check(t)&&(t.length<this.uf?this.value.set(t):(this.cf(t.length),this.value.set(t),this.length=t.length))},bo.prototype.check=function(t){if(Array.isArray(t))return!0;var i=!1;switch(this.type){case"uint8":i=t instanceof Uint8Array;break;case"int8":i=t instanceof Int8Array;break;case"uint16":i=t instanceof Uint16Array;break;case"int16":i=t instanceof Int16Array;break;case"uint32":i=t instanceof Uint32Array;break;case"int32":i=t instanceof Int32Array;break;case"float32":i=t instanceof Float32Array;break;default:i=!1}return i},bo.prototype.subarray=function(t,i){return this.value.subarray(t,i)},bo.prototype.ff=function(t){this.uf<t&&this.cf(t),this.length=t},bo.prototype.cf=function(t){var i=this.pf();return this.value=new i(t),this.uf=t,this.value},bo.prototype.pf=function(){var t=Float32Array;switch(this.type){case"uint8":t=Uint8Array;break;case"int8":t=Int8Array;break;case"uint16":t=Uint16Array;break;case"int16":t=Int16Array;break;case"uint32":t=Uint32Array;break;case"int32":t=Int32Array;case"float32":t=Float32Array;default:t=Float32Array}return t},bo);function bo(t,i){void 0===i&&(i=1024),this.type=t,this.length=0,this.uf=0,this.value=this.cf(i)}var _o=_t._.scale,wo=(ko.prototype.Mz=function(t){var i=t.map,e=t.R_,n=t.z_,o=t.$i;this._map=i,this.Mf=e,this.ac=n,this._f=o},ko.prototype.Ce=function(t,i,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=_t.tc.ud,r=_t.tc.sp,a=this._f,s=t.$n,h=t.size;if(s){var l=s.mvpMatrix,f=s.zoom,u=s.viewMode,c=h[0],d=h[1],p=(n.oo,n.Sa),v=n.from,m=void 0===v?"nebula":v,y=n.opacity,x=void 0===y?1:y,g=n.offset,b=void 0===g?[0,0]:g,_=n.Sz,w=void 0!==_&&_,k=n.LF,M=void 0===k?{}:k,S=1;"3D"===u&&(S=t.map.getView().EF());var z=e.Rz,R=e.buffer,C=e.od,A=e.zz;i.bindFramebuffer.set(null),i.be.set([0,0,c*_o,d*_o]);var I=z.pp,L=R,$=this.fd(i,{from:m}),T=$.De,D=void 0===T?[]:T,F=$.sizes,P=void 0===F?[]:F,O=o*r,B=I.length;if(L&&C&&(w&&(this.Zf=0),B)){i.ge.set(a),a.Ae({a_vertex:{type:"vec2",buffer:L,Re:O,offset:0},a_texcoord:{type:"vec2",buffer:L,Re:O,offset:2*r},a_origin:{type:"vec2",buffer:L,Re:O,offset:4*r},a_texIndex:{type:"float",buffer:L,Re:O,offset:6*r},a_type:{type:"float",buffer:L,Re:O,offset:7*r},a_zooms:{type:"vec2",buffer:L,Re:O,offset:8*r},a_height:{type:"float",buffer:L,Re:O,offset:10*r},a_visible:{type:"float",buffer:C,Re:0,offset:A[this.Zf].start}});for(var H="nebula"===this.l_?it.Ri:it.Si,j=0;j<B;j++){var E=I[j],N=E.start,W=void 0===N?0:N,U=E.end,G=void 0===U?0:U;if(E.dp,this.Zf++,G-W){var V=void 0;if("labelsLayer"===m&&E.pd){var Y=this.ac.getImage(E.pd);if(Y.img){var Z=this.dd(i,Y),X=Z.qi,J=Z.size;X&&X.context&&(D[5]=X,V=_t.Pt(P.slice(0,10),J))}}var q=E.vd.slice(0,4),Q=E.vd.slice(4,8),K=E.vd.slice(11,15),tt=E.vd.slice(15,19);a.Le({u_matrix:l,u_texture:{De:D,count:7},u_gl_size:[c,d],u_texsize:V||P,u_color:q,u_strokeColor:Q,u_borderColor:tt,u_gamma:E.vd[8],u_borderBuffer:E.vd[9],u_buffer:E.vd[10],u_backgroundColor:K,u_opacity:E.opacity*x,u_zoom:f,u_event:0,u_delta_center:p,u_offset:b,u_transform:[0,0,1,0],u_skyHeight:S}),a.Pe((G-W)/o,W/o,void 0,void 0,M.depthTest,H)}}}}},ko.prototype.Cz=function(t,i,e,n,o){var r=this._f,a=_t.tc.sp,s=t.$n,h=t.size,l=s.zoom||20,f=s.mvpMatrix||null,u=h[0],c=h[1],d=o.Az,p=o.Iz,v=o.centerCoord,m={};if(f){var y=n.$z||{},x=y.pp,g=y.zs,b=y.od,_=g&&g.buffer,w=Math.pow(2,l-p);i.be.set([0,0,u*_o,c*_o]);var k,M,S,z,R,C=this.fd(i),A=C.De,I=void 0===A?[]:A,L=C.sizes,$=void 0===L?[]:L,T=x.length,D=12*a,F=[0,0,l<=p?w:1,0];if(_&&b){var P;T&&(i.ge.set(this._f),r.Ae({a_vertex:{type:"vec2",buffer:_,Re:D,offset:0},a_texcoord:{type:"vec2",buffer:_,Re:D,offset:2*a},a_origin:{type:"vec2",buffer:_,Re:D,offset:4*a},a_texIndex:{type:"float",buffer:_,Re:D,offset:6*a},a_type:{type:"float",buffer:_,Re:D,offset:7*a},a_zooms:{type:"vec2",buffer:_,Re:D,offset:8*a},a_height:{type:"float",buffer:_,Re:D,offset:10*a},a_angle:{type:"float",buffer:_,Re:D,offset:11*a},a_visible:{type:"float",buffer:b,Re:0,offset:0}}));for(var O=0;O<T;O++){var B=x[O];if(B[0],B[1],k=B[11],M=B[12],S=B[13],R=B[14],M-k){if(m[S])z=m[S];else for(var H=0,j=d;H<j.length;H++){var E=j[H];(P=e[E])&&E===S&&(z=P.Sa,m[S]=z)}!z||w<.6||(z=xo.kz([[-z[0],-z[1]]],R,l,{centerCoord:v})[0],r.Le({u_matrix:f,u_delta_center:z,u_transform:F,u_texture:{De:I,count:I.length},u_gl_size:h,u_texsize:$,u_color:B[3],u_strokeColor:B[4],u_gamma:B[5],u_borderBuffer:B[7],u_buffer:B[8],u_backgroundColor:B[9],u_opacity:1,u_zoom:l,u_event:0}),r.Pe((M-k)/12,k/12,void 0,void 0,void 0,it.Si))}}}}},ko.prototype.gp=function(t,i){var e=t.context,n=t.Jn(),o=i,r=e.fe(new Uint16Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]),8);o&&n.Ce({u_texture:o},{a_pos:{type:"vec2",buffer:r,Re:8,offset:0},a_coord:{type:"vec2",buffer:r,Re:8,offset:4}},4,void 0,"TRIANGLE_FAN",void 0,it.Mi)},ko.prototype.reset=function(){this.Df()},ko.prototype.destroy=function(){if(this.Lz){for(var t=0,i=this.Lz.De;t<i.length;t++)i[t].destroy();delete this.Lz}},ko.prototype.Dz=function(t,i,e){void 0===t&&(t=[]),void 0===e&&(e={});for(var n,o,r,a,s=e.start,h=void 0===s?0:s,l=e.dp,f=e.style,u=h,c=0,d=0,p=l;d<p.length;d++){var v=p[d];if(n=v.id,o=v.kd,i[n]){var m=(f[n]||{}).tn,y=void 0===m?1:m,x=0,g=1/0,b=-1/0;for(y||(r=v.icon,a=v.bg,g=6*r,b=6*(r+v.Rd+a));x<o;)!y&&g<=x&&x<=b||(t[u+c+x]=1),x+=1}c+=o}return u+c},ko.prototype.Df=function(){},ko.prototype.fd=function(t,i){var e=this.Lz,n=_t.tc.Qu,o=[],r=[],a=this._map.ao;a&&(o[0]=a.qi,r[0]=a.maxWidth,r[1]=a.maxHeight);var s=this._map.so.qi;if(s){o.push(s);var h=s.size;r.push(h[0],h[1])}var l=[],f=[];if(e.done)l=e.De,f=e.sizes;else{for(var u=this.Mf.oc(),c=void 0,d=[],p=0,v=0;p<n;){if(u[p]){var m=this.dd(t,u[p]);c=m.qi,d=m.size,v++}else c=o[0],d=r,e.done=!1;l[p]=c,f[2*p]=d[0],f[2*p+1]=d[1],p++}4===v&&(e.done=!0,e.De=l,e.sizes=f)}return{De:l.concat(o),sizes:f.concat(r)}},ko.prototype.dd=function(t,i){var e=t.gl,n=i.img,o=i.width,r=i.height,a=n;return n&&!n.context&&((a=t.createTexture(n)).bind(e.CLAMP_TO_EDGE,e.LINEAR,e.LINEAR),i.img=a),{qi:a,size:[o,r]}},ko);function ko(){this.Lz={De:[],sizes:[]},this._f=null,this.Zf=0}var Mo=(So.prototype.Ce=function(t,i,e,n,o){if(t){var r=(this.wf=t).size;this._size=r;var a=o.centerCoord,s=o.Uf,h=void 0===s?{}:s,l=(o.$f,o.Sa),f=void 0===l?[0,0]:l;this.Tz(),this.Pz();var u=t.$n,c=u.zoom,d=u.viewMode;if(this.Oz(c,i.zooms)){if(!this._map&&n){var p=u.projectionId;this._map=n,this.If=_t.V[p],this._view=n.getView(),this.ac=n.z_}var v=e.coords,m=e.style,y=e.Nf,x=e.Fz,g=void 0===x?[]:x,b={$n:u,size:this.wf.size,transform:this.If,view:this._view,viewMode:d,centerCoord:a};this.Bz(i);for(var _=0,w=g;_<w.length;_++)for(var k=w[_],M=0;M<k.length;M++){var S=k[M];if(h[S]){var z=y[S]||{},R=v[S]||{},C=m[S]||{},A=(z.data.extData||{}).Sa||f||[0,0],I=(z.data||{}).txt,L=z.opts||{},$=(C.icon||[])[0]||{},T=$.image,D=_t.jz(C.opacity)?1:L.opacity,F=C.text;if(T&&$&&this.Oz(c,C.icon&&C.icon.zooms)){var P=this.ac.getImage(T),O=P.img,B={size:[P.width,P.height],opacity:D},H=R.icon.origin,j=R.icon.anchorOffset,E=xo.wu(H[0]+A[0],H[1]+A[1],c,b),N=[E[0]+j[0],E[1]+j[1]];this.drawImage(O,$,N,B)}if(I&&F&&this.Oz(c,C.text&&C.text.zooms)){var W={opacity:D,padding:R.padding},U=(H=R.text.origin,j=R.text.offset,xo.wu(H[0]+A[0],H[1]+A[1],c,b)),G=F.style,V=G.fontSize||12,Y=[U[0]+j[0],U[1]+j[1]+V];this.Ez(C.text,U,W);for(var Z=I.length,X=!1===G.fold?100:6,J=Math.ceil(Z/X),q=Math.floor(Z/J),Q=0;Q<J;Q++){var K=Q===J-1?Z-Q*q:q,tt=I.substr(Q*q,K);this.gp(tt,F,Y,W);var it=5*V/4+3;Y[1]=Y[1]+it}}}}}}},So.prototype.Ez=function(t,i,e){var n=this.Nz,o=_t._.scale,r=void 0===o?1:o,a=t.style.backgroundColor,s=e.padding,h=s.offsetX,l=s.offsetY,f=s.w,u=s.h,c=i[0]+h,d=i[1]+l;n&&a&&(n.fillStyle=a,n.fillRect(c*r,d*r,f*r,u*r))},So.prototype.drawImage=function(t,i,e,n){var o=_t._.scale,r=this.Nz;if(r&&i){i.image;var a=i.size,s=i.clipOrigin,h=(i.angel,i.clipSize),l=n.opacity,f=void 0===l?1:l,u=a[0],c=a[1],d=t.width||u,p=t.height||c,v=h[0],m=h[1],y=s[0],x=s[1];_t.jz(v)&&(v=u),_t.jz(m)&&(m=c),d<v&&(v=d),p<m&&(m=p),r.globalAlpha=f*this.Wz,r.drawImage(t,y,x,v,m,e[0]*o,e[1]*o,u*o,c*o)}},So.prototype.gp=function(t,i,e,n){var o=_t._.scale,r=void 0===o?1:o,a=this.Nz;if(a){var s=i.style,h=void 0===s?{}:s,l=n.opacity,f=void 0===l?1:l,u=h.fontWeight,c=h.fontSize,d=h.fontFamily,p=void 0===d?"sans-serif":d,v=h.fillColor,m=h.strokeColor,y=h.strokeWidth,x=void 0===y?1:y,g=h.textAlign,b=void 0===g?"center":g,_=h.Gz,w=void 0===_?"Alphabetic":_;a.globalAlpha=f,a.globalAlpha=1,a.font=u+" "+c*r+"px "+p,a.textAlign=b,a.textBaseline=w;var k=e[0],M=e[1];a.lineJoin="round",m&&x&&(a.strokeStyle=m,a.lineWidth=x,a.strokeText(t,k*r,M*r)),a.fillStyle=v,a.fillText(t,k*r,M*r)}},So.prototype.Pz=function(){this.canvas,_t._.scale,this._size},So.prototype.Tz=function(){this.canvas.width=this.canvas.width},So.prototype.reset=function(){this.Pz()},So.prototype.destroy=function(){this.Pz()},So.prototype.Oz=function(t,i){void 0===i&&(i=[]);var e=i[0]||3,n=i[1]||20;return e<=t&&t<=n},So.prototype.Bz=function(t){var i=this._container;i=i||(this._container=this._createContainer(this._map));var e=_t._.scale,n=t.zIndex,o=void 0===n?100:n,r=t.opacity,a=t.visible,s=t.zooms,h=void 0===s?[2,20]:s,l=this.wf.$n.zoom,f=this.Oz(l,h);i.style.display=a&&f&&0!==r?"block":"none",this.Wz=r;var u=this._size;i.setAttribute("width",u[0]*e+"px"),i.setAttribute("height",u[1]*e+"px"),i.style.width=u[0]+"px",i.style.height=u[1]+"px",i.style.zIndex=o+""},So.prototype._createContainer=function(t){var i=t.getContainer().querySelector(".amap-layers");return i&&i.appendChild(this.canvas),AMap.DomUtil.addClass(this.canvas,"amap-labellayers"),this.canvas},So);function So(){this._size=[0,0],this.Wz=1;var t=this.canvas=document.createElement("canvas");this.Nz=t.getContext("2d")}var zo,Ro=(zo=re,_t.Ei(Co,zo),Co.prototype.Hz=function(t,i,e,n,o,r){this.ac||(this._map=o,this._view=o.getView(),this.ac=o.z_,this.Mf=o.R_,this._viewMode=i.$n.viewMode,this.fz=o.fS(),this._map.isDOMMode()?this.Vz||(this.Vz=new Mo):this.Zz||(this.Zz=new wo),this.Zz&&this.Zz.Mz({map:o,z_:o.z_,R_:o.R_,$i:t.Zn()}))},Co.prototype.Kn=function(t,i,e,n,o){this._map.isDOMMode()?this.Yz(e,n,i,this._map,{centerCoord:this.uu}):this.Jh(t,e,{},{})},Co.prototype.Jz=function(){return{centerCoord:this.uu}},Co.prototype.vi=function(t){return this.fz?this.fz.vi(t,""):null},Co.prototype.destroy=function(){this.Zz&&(this.Zz.destroy(),delete this.Zz),this.Vz&&(this.Vz.destroy(),delete this.Vz)},Co.prototype.reset=function(){this.Zz&&this.Zz.reset(),this.Vz&&this.Vz.reset()},Co.prototype.Jh=function(t,i,e,n){this.Zz.Ce(i,t.context,e,n)},Co.prototype.Yz=function(t,i,e,n,o){this.Vz.Ce(t,i,e,n,o)},Co);function Co(){var t=zo.call(this)||this;return t.type="labelsLayer",t.wf=null,t.Ps={},t._viewMode="2D",t.Wf={},t.Bf={},t.xp=null,t.uu=[0,0],"undefined"!=typeof Int8Array&&(t.fp=new go("int8",5e5)),t}function Ao(t,i,e,n,o){!function t(i,e,n,o,r){for(;n<o;){if(600<o-n){var a=o-n+1,s=e-n+1,h=Math.log(a),l=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*l*(a-l)/a)*(s-a/2<0?-1:1);t(i,e,Math.max(n,Math.floor(e-s*l/a+f)),Math.min(o,Math.floor(e+(a-s)*l/a+f)),r)}var d=i[e],p=n,v=o;for(Io(i,n,e),0<r(i[o],d)&&Io(i,n,o);p<v;){for(Io(i,p,v),p++,v--;r(i[p],d)<0;)p++;for(;0<r(i[v],d);)v--}0===r(i[n],d)?Io(i,n,v):Io(i,++v,o),v<=e&&(n=v+1),e<=v&&(o=v-1)}}(t,i,e||0,n||t.length-1,o||Lo)}function Io(t,i,e){var n=t[i];t[i]=t[e],t[e]=n}function Lo(t,i){return t<i?-1:i<t?1:0}var $o=Do,To=Do;function Do(t,i){if(!(this instanceof Do))return new Do(t,i);this.Bc=Math.max(4,t||9),this.Wc=Math.max(2,Math.ceil(.4*this.Bc)),i&&this.Gc(i),this.clear()}function Fo(t,i,e){if(!e)return i.indexOf(t);for(var n=0;n<i.length;n++)if(e(t,i[n]))return n;return-1}function Po(t,i){Oo(t,0,t.children.length,i,t)}function Oo(t,i,e,n,o){(o=o||Go(null)).ja=1/0,o.Fa=1/0,o.Oa=-1/0,o.Ea=-1/0;for(var r,a=i;a<e;a++)r=t.children[a],Bo(o,t.Zc?n(r):r);return o}function Bo(t,i){return t.ja=Math.min(t.ja,i.ja),t.Fa=Math.min(t.Fa,i.Fa),t.Oa=Math.max(t.Oa,i.Oa),t.Ea=Math.max(t.Ea,i.Ea),t}function Ho(t,i){return t.ja-i.ja}function jo(t,i){return t.Fa-i.Fa}function Eo(t){return(t.Oa-t.ja)*(t.Ea-t.Fa)}function No(t){return t.Oa-t.ja+(t.Ea-t.Fa)}function Wo(t,i){return t.ja<=i.ja&&t.Fa<=i.Fa&&i.Oa<=t.Oa&&i.Ea<=t.Ea}function Uo(t,i){return i.ja<=t.Oa&&i.Fa<=t.Ea&&i.Oa>=t.ja&&i.Ea>=t.Fa}function Go(t){return{children:t,height:1,Zc:!0,ja:1/0,Fa:1/0,Oa:-1/0,Ea:-1/0}}function Vo(t,i,e,n,o){for(var r,a=[i,e];a.length;)(e=a.pop())-(i=a.pop())<=n||(Ao(t,r=i+Math.ceil((e-i)/n/2)*n,i,e,o),a.push(i,r,r,e))}Do.prototype={all:function(){return this.qc(this.data,[])},search:function(t){var i=this.data,e=[],n=this.Yc;if(!Uo(t,i))return e;for(var o,r,a,s,h=[];i;){for(o=0,r=i.children.length;o<r;o++)a=i.children[o],Uo(t,s=i.Zc?n(a):a)&&(i.Zc?e.push(a):Wo(t,s)?this.qc(a,e):h.push(a));i=h.pop()}return e},Vc:function(t){var i=this.data,e=this.Yc;if(!Uo(t,i))return!1;for(var n,o,r,a,s=[];i;){for(n=0,o=i.children.length;n<o;n++)if(r=i.children[n],Uo(t,a=i.Zc?e(r):r)){if(i.Zc||Wo(t,a))return!0;s.push(r)}i=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this.Wc){for(var i=0,e=t.length;i<e;i++)this.Xc(t[i]);return this}var n=this.Hc(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this.Jc(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this.Kc(n,this.data.height-n.height-1,!0)}else this.data=n;return this},Xc:function(t){return t&&this.Kc(t,this.data.height-1),this},clear:function(){return this.data=Go([]),this},remove:function(t,i){if(!t)return this;for(var e,n,o,r,a=this.data,s=this.Yc(t),h=[],l=[];a||h.length;){if(a||(a=h.pop(),n=h[h.length-1],e=l.pop(),r=!0),a.Zc&&-1!==(o=Fo(t,a.children,i)))return a.children.splice(o,1),h.push(a),this.Qc(h),this;r||a.Zc||!Wo(a,s)?n?(e++,a=n.children[e],r=!1):a=null:(h.push(a),l.push(e),e=0,a=(n=a).children[0])}return this},Yc:function(t){return t},tf:Ho,if:jo,toJSON:function(){return this.data},ef:function(t){return this.data=t,this},qc:function(t,i){for(var e=[];t;)t.Zc?i.push.apply(i,t.children):e.push.apply(e,t.children),t=e.pop();return i},Hc:function(t,i,e,n){var o,r=e-i+1,a=this.Bc;if(r<=a)return Po(o=Go(t.slice(i,e+1)),this.Yc),o;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),(o=Go([])).Zc=!1,o.height=n;var s,h,l,f,u=Math.ceil(r/a),c=u*Math.ceil(Math.sqrt(a));for(Vo(t,i,e,c,this.tf),s=i;s<=e;s+=c)for(Vo(t,s,l=Math.min(s+c-1,e),u,this.if),h=s;h<=l;h+=u)f=Math.min(h+u-1,l),o.children.push(this.Hc(t,h,f,n-1));return Po(o,this.Yc),o},nf:function(t,i,e,n){for(var o,r,a,s,h,l,f,u,c,d;n.push(i),!i.Zc&&n.length-1!==e;){for(f=u=1/0,o=0,r=i.children.length;o<r;o++)h=Eo(a=i.children[o]),c=t,d=a,(l=(Math.max(d.Oa,c.Oa)-Math.min(d.ja,c.ja))*(Math.max(d.Ea,c.Ea)-Math.min(d.Fa,c.Fa))-h)<u?(u=l,f=h<f?h:f,s=a):l===u&&h<f&&(f=h,s=a);i=s||i.children[0]}return i},Kc:function(t,i,e){var n=this.Yc,o=e?t:n(t),r=[],a=this.nf(o,this.data,i,r);for(a.children.push(t),Bo(a,o);0<=i&&r[i].children.length>this.Bc;)this.af(r,i),i--;this.sf(o,r,i)},af:function(t,i){var e=t[i],n=e.children.length,o=this.Wc;this.rf(e,o,n);var r=this.hf(e,o,n),a=Go(e.children.splice(r,e.children.length-r));a.height=e.height,a.Zc=e.Zc,Po(e,this.Yc),Po(a,this.Yc),i?t[i-1].children.push(a):this.Jc(e,a)},Jc:function(t,i){this.data=Go([t,i]),this.data.height=t.height+1,this.data.Zc=!1,Po(this.data,this.Yc)},hf:function(t,i,e){var n,o,r,a,s,h,l,f,u,c,d,p,v,m;for(h=l=1/0,n=i;n<=e-i;n++)u=o=Oo(t,0,n,this.Yc),c=r=Oo(t,n,e,this.Yc),d=Math.max(u.ja,c.ja),p=Math.max(u.Fa,c.Fa),v=Math.min(u.Oa,c.Oa),m=Math.min(u.Ea,c.Ea),a=Math.max(0,v-d)*Math.max(0,m-p),s=Eo(o)+Eo(r),a<h?(h=a,f=n,l=s<l?s:l):a===h&&s<l&&(l=s,f=n);return f},rf:function(t,i,e){var n=t.Zc?this.tf:Ho,o=t.Zc?this.if:jo;this.lf(t,i,e,n)<this.lf(t,i,e,o)&&t.children.sort(n)},lf:function(t,i,e,n){t.children.sort(n);var o,r,a=this.Yc,s=Oo(t,0,i,a),h=Oo(t,e-i,e,a),l=No(s)+No(h);for(o=i;o<e-i;o++)r=t.children[o],Bo(s,t.Zc?a(r):r),l+=No(s);for(o=e-i-1;i<=o;o--)r=t.children[o],Bo(h,t.Zc?a(r):r),l+=No(h);return l},sf:function(t,i,e){for(var n=e;0<=n;n--)Bo(i[n],t)},Qc:function(t){for(var i,e=t.length-1;0<=e;e--)0===t[e].children.length?0<e?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():Po(t[e],this.Yc)},Gc:function(t){var i=["return a"," - b",";"];this.tf=new Function("a","b",i.join(t[0])),this.if=new Function("a","b",i.join(t[1])),this.Yc=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},$o.default=To;var Yo,Zo=(Yo=Ro,_t.Ei(Xo,Yo),Xo.prototype.Hz=function(t,i,e,n,o,r){if(n&&i){Yo.prototype.Hz.call(this,t,i,e,n,o,r);var a=i.$n.zoom;if(n&&n.tiles&&0<n.tiles.length&&i&&r.visible&&r.opacity&&_t.Util.dS(a,r.zooms)){for(var s={},h=!0,l=0,f=n.tiles;l<f.length;l++){var u=f[l],c=(s[u.zo.key]=u).data||[];if(h)for(var d=0,p=c;d<p.length;d++){var v=p[d];h=!!v.Ta&&!!v.labels}}this.Xz=h;var m=n.fo,y=n.Ca;m&&h&&(this.vf=Object.keys(s),this.mf=s,this.mf.yf=y);var x=this.vf;if(!x)return;for(var g=void 0,b=void 0,_=0,w=x;_<w.length;_++)for(var k=w[_],M=0,S=c=this.mf[k].data||[];M<S.length;M++)if((b=S[M])&&b.labels){if(g=_t.bf.xf(b.labels,this.mf.yf),!this._map.isDOMMode())for(var z=0,R=g;z<R.length;z++)R[z].upload(t.context);b.gf=g}var C=this._map.getMapState(),A=(C.zooming,C.panning,i.$n),I=A.projectionId,L=A.centerCoord;return this.If=_t.V[I],this.uu=_t.lcs.getLocalByCoord([L[0],L[1]]).center,this.Ps=this.Pf(this.mf)}return null}},Xo.prototype.Kn=function(t,i,e,n,o){var r=(this.wf=e).$n,a=this.vf,s=this.Zz;if(a&&r){var h=t.context,l=this.fz,f=this._map;if(f){var u=f.qz(),c=f.Qz(),d=this._map.isDOMMode();if(u&&(this.Bf=l.$f,this.Wf=l.Uf,d?this.Yz(e,n,i,this._map,{centerCoord:this.uu,Uf:this.Wf,$f:this.Bf}):this.Jh(t,e,a)),!d){this.Cf||(this.Cf=h.fe(this.Lf,1));var p=this._map.getMapState(),v=p.panning,m=p.zooming,y=this.Ps;if(this.Kz(),c){if(y.Vf&&!m){v||(this.Xf={});var x=xo.getBounds(r,{zoom:r.zoom,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode});this.bo=e.$n.zoom;var g=this.Jf(this.mf);this.Kf(g,{bounds:x}),this.Qf(this.Xf,{bounds:x}),this.tp=this.ip(h)}s.Cz(e,h,this.mf,{$z:this.tp},{Az:this.vf,Iz:this.bo,centerCoord:this.uu})}i.fo&&this.Xz&&this._map.np(),s.Lz.done&&this._map.commonWordTextureLoaded()}}}},Xo.prototype.destroy=function(){delete this.Xf,delete this.tp,delete this.kp,delete this.xp,delete this.vf,delete this.mf,this.mp&&(this.mp.destroy(),delete this.mp),this.Cf&&(this.Cf.context.deleteBuffer(this.Cf),delete this.Cf),Yo.prototype.destroy.call(this)},Xo.prototype.reset=function(){this.Xf={},this.tp.zs&&(this.tp.pp=[]),Yo.prototype.reset.call(this)},Xo.prototype.Jh=function(t,i,e){var n,o,r=this.Zz,a=t.context;this.qf(a,this.mf);var s=this.mp;if(s)for(var h,l=!0,f=0;f<e.length;f++){var u=e[f];if(h=this.mf[u])for(var c=0,d=h.data;c<d.length;c++){n=d[c],o=h.Sa;var p=n.gf;if(p)for(var v=0;v<p.length;v++){var m=p[v];r.Ce(i,t.context,{Rz:m.rp,buffer:m.buffer,od:s.buffer,zz:this.xp},{Sz:l,Sa:o,oo:t}),l=!1}}}},Xo.prototype.Pf=function(t){var i=this.wf,e=i&&i.$n;if(!e)return{};for(var n,o,r,a,s,h,l,f,u,c,d,p,v,m,y=e&&e.optimalZoom||20,x=e&&e.zoom||20,g=!1,b=0,_=xo.getBounds(e,{zoom:y,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode}),w=_t.tc.Mp,k=_t.tc.Rp,M=20<y?20:y<3?3:y,S=this.vf,z=S.length,R=[w,k],C={},A={},I={},L={},$=e.zoom,T=!0,D=0;D<z;D++)for(var F=0,P=(r=t[S[D]]).data;F<P.length;F++)if((m=P[F])&&m.gf)for(var O=0,B=m.gf;O<B.length;O++)if(s=(a=B[O]).coords){l=a.Nf,f=a.zp[M]||[],b+=a.rp.up;for(var H=0,j=f;H<j.length;H++){var E=j[H];T=!1,c=l[E],d=s[E],u=r.Sa,v=_t.Sp.add(d.origin,u),xo.gz(v,_)||C[E]?(n=l[E].data.extData,o=this._map.mapStyle.dn(n.Lp,n.Ap,x),p=(c.opts||{}).zooms||R,C[E]||!($<p[0]||p[1]<$)&&o?(L[E]&&delete this.Bf[E],h=a.style,C[E]=c,A[E]=d,I[E]=h[E],n.Sa=u,I[E].tn=o.tn,I[E].in=o.in,g=!0):(this.Bf[E]||(L[E]=1),this.Bf[E]=1)):(this.Bf[E]||(L[E]=1),this.Bf[E]=1)}}return T&&(g=!0),{Vf:g,lp:b,Nf:C,coords:A,style:I}},Xo.prototype.qf=function(t,i){var e=this.Zz,n=this.vf,o=(this.Ps.lp||0)/12;this.fp.ff(o);var r,a,s,h,l,f=this.fp.value.fill(0),u=[],c=0,d=0;if(o){for(var p=0,v=n;p<v.length;p++)if(r=i[v[p]])for(var m=0,y=r.data;m<y.length;m++){var x=y[m].gf,g=this.Ps.style||{};if(x)for(var b=0,_=x;b<_.length;b++){h=(s=(a=_[b].rp)&&a.pp).length;for(var w=0;w<h;w++)l=s[w].dp,c=d,d=e.Dz(f,this.Wf,{dp:l,start:c,style:g}),u.push({start:c,end:d})}}var k=this.mp;k?k.update(f):this.mp=new _t.yp(t,f,1),this.xp=u}},Xo.prototype.Jf=function(t){var i,e=_t.tc.Dp,n=_t.tc.Mp,o=_t.tc.Rp,r=_t.tc.Pp,a=_t.tc.jp,s=e.Op,h=this.wf;if(h){for(var l,f,u,c,d,p,v,m,y,x,g,b,_,w,k=h.$n,M=k&&k.zoom,S=[],z=this.vf,R=z.length,C=this.Xf,A=0,I=_&&_[1]||{},L=I.fontSize,$=I.faceColor,T=I.borderColor,D=0;D<R;D++)for(var F=t[z[D]],P=0,O=F.data;P<O.length;P++)if(w=O[P],M&&w&&w.road&&w.labels){if(l=w.road||[],f=F.Sa,u=F.zo.key,c=F.zo.z,C[u])continue;for(var B=0,H=l;B<H.length;B++){var j=H[B];if(d=j.path,p=j.name,v=j.rank,m=j.Fp,y=j.Ep,A=j.distance||0,x=j.minzoom||n,g=j.maxzoom||o,b=xo.wu(A,0,M,{$n:k,size:h.size,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu}),!(Math.abs(b[0]-b[1])<s)&&(L=(I=(_=this._map.mapStyle.dn(m,y,M))&&_[1]||{}).fontSize,$=I.faceColor,T=I.borderColor,x=(i=_t.bf.$p([x,g]))[0],g=i[1],p&&d&&L&&$)){var E={path:d,name:p,rank:v,zooms:[x-r,g+a],style:{fontSize:L,fillColor:_t.Sp.Up($.rgba,255),strokeColor:T&&_t.Sp.Up(T.rgba,255)},Sa:f,key:u,Bp:c};S.push(E)}}}return S}},Xo.prototype.Kf=function(t,i){void 0===i&&(i={});var e=this.wf&&this.wf.$n,n=(e||{}).zoom,o=void 0===n?20:n,r=this.If,a=this.Xf,s=_t.tc._n,h=i.bounds;if(e){for(var l={},f=e.rotation||0,u=0,c=t;u<c.length;u++){var d=c[u],p=d.rank;l[p]||(l[p]=[]),l[p].push(d)}for(var v,m,y,x,g,b,_,w,k,M,S,z,R,C,A,I=Object.keys(l),L=I.length,$=0,T=this._map.getMapState().panning,D=L-1;0<=D;D--)for(var F=0,P=l[I[D]];F<P.length;F++){var O=P[F];v=O.name,m=O.path,y=O.zooms,x=O.rank,g=O.style,w=O.Bp,b=xo.kz([[-O.Sa[0],-O.Sa[1]]],w,o,{centerCoord:this.uu})[0],_=O.key,k=g.fontSize,M=g.fillColor,S=g.strokeColor||s.Gp,z=1.3*k;for(var B=$=0,H=this.Zp(m,z,{zoom:o,transform:r,bounds:h,Bp:w});B<H.length;B++){var j=H[B];(j.length||0)<2||(R={transform:r,fontSize:k,qp:z,zoom:o,name:v,Sa:b,bounds:h,panning:T,nF:f},(C=this.Yp(j,R,$++<1)).pos.length&&C.pos[0].length&&(A={name:v,rank:x,fontSize:k,fillColor:M,strokeColor:S,zooms:y,Sa:b,key:_,Bp:w},this.Vp(C,a,A)))}}return a}},Xo.prototype.Qf=function(t,i){void 0===i&&(i={});var e=this.wf;if(e){var n,o,r=e.$n,a=this.fz,s=r.zoom,h=void 0===s?20:s,l=i.bounds,f=this.Gf,u=!1,c=0,d=[];for(var p in t)if(t.hasOwnProperty(p))for(var v=0,m=t[p];v<m.length;v++){for(var y=m[v],x=0,g=y;x<g.length;x++){var b=g[x],_=b.data,w=b.opts,k=_.txt,M=_.position,S=_.extData,z=S.Bp,R=xo.kz([_t.Sp.multiply(S.Sa,-1)],z,h,{centerCoord:this.uu})[0],C=w.text.style,A=C&&C.fontSize,I=_t.Sp.add(M,R),L=xo.gz(I,l);if(n=[],L){var $=xo.wu(I[0],I[1],h,{$n:r,size:e.size,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu}),T=this.Xp($,A);o=this.fz.iC(T,{padding:5,id:k,type:"road"}),(n=a.search(o)).length||(n=f.search(o))}if(!L){u=!0;break}for(var D=0,F=n.length;D<F;){if(this.Wf[n[D].id]||"road"===n[D].type){u=!0;break}D++}o&&d.push(o)}if(!u){c+=y.length;for(var P=0,O=d;P<O.length;P++){var B=O[P];f.Xc(B)}d=[]}y.hide=u,u=!1}this.Jp=c}},Xo.prototype.ip=function(t){var i=_t.tc.Qu,e=_t.tc.sp,n=_t.tc.Kp,o=this.Xf||{},r=this.wf,a=r&&r.$n,s=0;if(a&&this._map){var h=a.zoom,l=(this.If,this.bo),f=this._map.getMapState().zooming,u=this.Jp,c=void 0;1e5<72*u&&this.Qp.ff(72*u),c=this.Qp.value;var d=[],p=0,v=void 0,m=void 0,y=void 0,x=void 0,g=void 0,b=void 0,_=void 0,w=void 0,k=void 0,M=void 0,S=void 0,z=void 0,R=void 0,C=void 0,A=void 0,I=void 0,L=void 0,$=void 0,T=void 0,D=void 0,F=void 0,P=void 0,O=void 0,B=void 0,H=void 0,j=void 0,E=void 0,N=void 0,W=void 0,U=void 0,G=void 0,V=void 0,Y=void 0,Z=void 0,X=void 0,J=void 0,q=void 0,Q=void 0,K=void 0,tt=void 0,it=void 0,et=void 0,nt=void 0,ot=void 0,rt=void 0,at=void 0,st=void 0,ht=void 0,lt=0,ft=void 0,ut=void 0;for(var ct in o)if(o.hasOwnProperty(ct)){var dt=o[ct];p=dt.length;for(var pt=0;pt<p;pt++)if(!(ut=dt[pt]).hide)for(var vt=0,mt=ut;vt<mt.length;vt++){var yt=mt[vt];v=yt.data,m=yt.opts,y=v.txt,x=v.position,ft=(g=v.extData).Bp,b=m.angle||0,_=m.zooms,k=(w=m.text.style).fontSize,M=w.fillColor,S=w.strokeColor,z=w.strokeWidth||0,C=(R=this.td(k,z)).gamma,A=R.ed,L=R.backgroundColor,$=R.strokeWidth,I=R.nd,T=y.length;for(var xt=0;xt<T;xt++)if(D=y.charCodeAt(xt),(F=this.Mf.mz(D))&&(P=F.index,O=F.char,F.key,B=x[xt],H=x[xt+1],B&&H&&O)){j=_[0],E=_[1],N=k/n.size,W=1,f&&h<l&&(N/=Math.pow(2,l-h)),U=O[0],G=O[1],V=O[2],Y=O[3],Z=O[5],X=O[6];var gt={x:-k/2-n.buffer,y:k/2+n.buffer};J=n.buffer,0<U&&0<G&&(K=W*((q=gt.x)+(V+J)*N),tt=W*(q+(V+J+(U+=2*J))*N),it=W*((Q=gt.y)+(Y-(G+=2*J))*N),et=W*(Q+Y*N),ot=nt=0,i<=P&&(nt+=F.pos.startX,ot+=F.pos.startY),ht=[K,it,rt=nt+Z,at=ot+X,B,H,P,2,j,E,0,b,tt,it,rt+U,at,B,H,P,2,j,E,0,b,K,et,rt,at+G,B,H,P,2,j,E,0,b,K,et,rt,at+G,B,H,P,2,j,E,0,b,tt,it,rt+U,at,B,H,P,2,j,E,0,b,tt,et,rt+U,at+G,B,H,P,2,j,E,0,b],c.set(ht,lt),lt+=72,st=12*s*6,d.push([k,[B,H],b,M,S,C,J,I,A,L,$,st,st+72,g.key,ft]),s++)}}}var bt=this.u_;return bt?bt.update(c):bt=this.u_=new _t.yp(t,c,e),{pp:d,zs:bt,od:this.Cf}}return{pp:[],od:null,zs:null}},Xo.prototype.Zp=function(t,i,e){void 0===t&&(t=[]),void 0===i&&(i=20),void 0===e&&(e={});var n,o,r=_t.tc.Dp.Ad,a=e.zoom,s=e.Bp,h=0,l=0,f=t.length-1,u=[[]],c=a<12?10:r,d=this.wf;if(!d)return u;for(var p={$n:d.$n,size:d.size,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu},v=0;v<f-3;v+=2){var m=xo.kz([[t[v],t[v+1]],[t[v+2],t[v+3]]],s,a,{centerCoord:this.uu}),y=m[0],x=m[1];n=0===v?"2D"===this._viewMode?this.If.transform(y[0],y[1],a):xo.wu(y[0],y[1],a,p):o,o="2D"===this._viewMode?this.If.transform(x[0],x[1],a):xo.wu(x[0],x[1],a,p);var g=(l=_t.bf.Sd(n,o))/i;c<(h+=l)&&(1<g||a<12&&.6<=g?u[u.length-1].push(n):void 0!==u[u.length-1][0]&&u.push([]))}return u},Xo.prototype.Yp=function(t,i,e){void 0===t&&(t=[]),void 0===i&&(i={}),void 0===e&&(e=!1);for(var n,o,r,a,s,h,l,f=_t.tc.Dp.Td,u=i.transform,c=(i.fontSize,i.qp),d=void 0===c?20:c,p=i.zoom,v=void 0===p?20:p,m=i.name,y=void 0===m?"":m,x=(i.nF,{index:0,Id:0,pos:[],Dd:[],Pd:[],points:[]}),g=t.length,b=y.length,_=!1,w=0,k=0,M=!1,S={viewMode:this._viewMode,transform:u,view:this._view};w<g-1&&k<30;){k++;var z=x.index;x.pos[z]||(x.pos[z]=[],x.Pd[z]=[],x.points[z]=[],x.Dd[z]=[]);var R,C;R=M?n:t[w];var A=t[w+1];if(n=_?_t.bf.jd(n,t[w],t[w+1],d):(h=_t.bf.getAngle(R,A),_t.bf.Od(R,h,d)),o=x.index,!(x.Id<b&&e)){e=!0,x.index++,x.Id=0,w=this.zd(t,w+1,f),_=M=!1;break}if(a="2D"===this._viewMode?(r=u.Xs(R[0],R[1],v),u.Xs(n[0],n[1],v)):(r=xo.nt(R[0],R[1],v,S),xo.nt(n[0],n[1],v,S)),s=_t.bf.Fd(r,a,1)[0],C=_t.bf.Fd(R,n,1)[0],l=_t.bf.Ed([R,n])?_t.bf.Nd(n,R):_t.bf.Nd(R,n),x.pos[o].push(s),x.points[o].push(C),x.Pd[z].push(l),x.Id++,x.Id===b-1){var I=_t.bf.Ed(x.points[o]);x.pos[o].$d=I}_t.bf.Sd(n,A)<d?(w++,M=_=!0):_=!(M=!0)}return x},Xo.prototype.Vp=function(t,i,e){void 0===t&&(t={}),void 0===e&&(e={});for(var n,o,r,a,s=e.name,h=void 0===s?"":s,l=e.rank,f=void 0===l?1:l,u=e.fontSize,c=void 0===u?12:u,d=e.fillColor,p=e.strokeColor,v=e.zooms,m=e.Sa,y=e.key,x=e.Bp,g=h.length,b=t.pos.length,_=[],w=0,k=[],M=!1,S=0;S<b;S++)if(n=t.pos[S]||[],_=t.Pd[S]||[],o=n.$d,n.length===g){for(t.Dd[S],w=0;w<g;w++){if(!(a=n[r=o?g-1-w:w])||!this.Ud(_,w)){M=!0;break}var z={data:{id:_t.Util.stamp(this),position:a,name:h,extData:{Sa:m,key:y,Bp:x},txt:h.substr(w,1),rank:f},opts:{type:"normal",angle:_[r]||0,zooms:v,text:{direction:"center",offset:[0,0],style:{fontSize:c,fillColor:d,strokeColor:p,strokeWidth:2}}}},R=_t.find(this._map.getLayers(),function(t){return"AMap.MaskLayer"===t.CLASS_NAME});if(R){var C=R.ho();if(C&&!C.eC(z.data.position,this.wf))return!1}k.push(z)}M||(i[y]||(i[y]=[]),i[y].push(k))}},Xo.prototype.Xp=function(t,i){void 0===i&&(i=12);var e=1.3*i,n=1.3*i,o=[t[0]-e/2,t[1]-n/2];return{x:o[0],y:o[1],width:e,height:n}},Xo.prototype.td=function(t,i){void 0===t&&(t=12),void 0===i&&(i=0);var e=_t.tc.ec,n=_t.tc.Cd,o=_t.tc.Ld,r=_t.tc._n,a=0,s=t<12?n:o;i&&(a=s*(1-(i=10<i*_t._.scale?10:i)/10.1));var h=e<t||1<_t._.scale?1.7:1.5;return{gamma:h=1.4142*h/t,nd:a,ed:s-1/256*(_t._.scale-1),backgroundColor:r.Gp,strokeWidth:i}},Xo.prototype.zd=function(t,i,e){void 0===t&&(t=[]),void 0===i&&(i=0),void 0===e&&(e=0);for(var n=0,o=t.length-1,r=i;r<o;r++){var a=t[r],s=t[r+1];if(e<=(n+=_t.bf.Sd(a,s)))break}return r},Xo.prototype.Ud=function(t,i){void 0===t&&(t=[]),void 0===i&&(i=0);var e=_t.tc.Dp.Bd,n=i-1;if(n<0)return!0;var o=t[i],r=t[n];return!(Math.abs(o-r)>=e)},Xo.prototype.Kz=function(){this.Gf&&this.Gf.clear()},Xo);function Xo(){var t=Yo.call(this)||this;return t.type="nebula-labelslayer",t.Xz=!1,t.vf=[],t.mf={},t.Cf=null,t.u_=null,t.Jp=0,t.bo=20,t.Gf=$o(),t.Xf={},t.tp={pp:[],od:null,zs:null},t.kp={},t.Lf=new Uint8Array(1e5).fill(1),t.Qp=new go("float32",1e5),t}var Jo=(qo.prototype.render=function(t,i,e){t._map&&(this.Wx(t,i,e),this.Gx(t,i,e))},qo.prototype.qx=function(t,i){var e=t._getDetalLocal(i),n=t._opts;if(n.fillColor){var o=_t.Util.color2RgbaArray(n.fillColor);if(o)return(o=o.slice(0,3)).push(n.fillOpacity),{u_offset:t.zx,u_color:o,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}},qo.prototype.Vx=function(t,i){var e=t._getDetalLocal(i),n=t._opts;if(n.strokeColor){var o=_t.Util.color2RgbaArray(n.strokeColor);if(o){(o=o.slice(0,3)).push(n.strokeOpacity);var r=this.Xx(t);return{u_color:o,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_width:n.strokeWeight,u_offset:t.zx,u_meter_per_pixel:i.$n.resolution,u_dash:r.Hx,u_dashType:r.Jx,u_border:!1,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},qo.prototype.Wx=function(t,i,e){if(t.Dx){var n=t.Dx;if(n.upload(e.context),n.Kx&&n.zs&&t.visible){var o=n.zs,r=this.qx(t,i);if(r){var a=e.Wn();a.context.getExtension("OES_element_index_uint"),a.Ce(r,{a_pos:{buffer:o,type:"vec2",Re:o.size,offset:0}},3*n.Qx.length,n.Pc,void 0,void 0,it.Si,void 0,void 0,0)}}}},qo.prototype.Gx=function(t,i,e){if(t.Px){var n=t.Px;if(n.upload(e.context),n.Kx||n.zs){var o=n.zs.buffer;if(t.visible){var r=this.Vx(t,i);if(r){var a=e.Xn();a.context.getExtension("OES_element_index_uint"),a.Ce(r,{a_pos:{buffer:o,type:"vec2",Re:o.size,offset:0},a_normal:{type:"vec2",buffer:o,Re:o.size,offset:8},a_distance:{type:"float",buffer:o,Re:o.size,offset:16},a_dir:{type:"vec2",buffer:o,Re:o.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,it.Si,void 0,void 0,0),a.Ni()}}}}},qo.prototype.Xx=function(t){var i=t._opts,e=2,n=[1,0,0];return"dashed"===i.strokeStyle&&i.strokeDasharray&&(n=3<=i.strokeDasharray.length?(e=3,i.strokeDasharray.slice(0,3)):(e=2,_t.Pt(i.strokeDasharray.slice(0),[0]))),{Jx:e,Hx:n}},qo);function qo(){}var Qo=(Ko.prototype.render=function(t,i,e){if(t._map){var n=t._opts;this.Tc(t,i,e),this.Ic(t,i,e),n.lineGradient&&this.nC(t,i,e),n.showDir&&this.N_(t,i,e)}},Ko.prototype.fb=function(t,i){var e=t._getDetalLocal(i),n=t._opts,o=n.strokeWeight;if(!(o<=0)&&!(n.strokeOpacity<=0)&&n.strokeColor){var r=_t.Util.color2RgbaArray(n.strokeColor);if(r){r=r.slice(0,3);var a=this.Xx(t);return r.push(n.strokeOpacity),{u_color:r,u_matrix:i.$n.mvpMatrix,u_meter_per_pixel:i.$n.resolution,u_width:o,u_offset:t.zx,u_localDeltaCenter:e,u_dash:a.Hx,u_dashType:a.Jx,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},Ko.prototype.pb=function(t,i){var e=t._getDetalLocal(i),n=t._opts;if(n.outlineColor){var o=_t.Util.color2RgbaArray(n.outlineColor);if(o){(o=o.slice(0,3)).push(n.strokeOpacity);var r=n.strokeWeight+2*n.borderWeight;if(!(r<=0||n.strokeOpacity<=0)){var a=this.Xx(t);return{u_color:o,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_width:r,u_offset:t.zx,u_meter_per_pixel:i.$n.resolution,u_dash:a.Hx,u_dashType:a.Jx,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}}},Ko.prototype.B_=function(t,i,e){if(t._map){var n,o=t._getDetalLocal(i),r=t._opts,a=r.strokeWeight;if(!(a<=0)){var s=Boolean(r.dirImg);if(n=s?(t.U_(e),t.E_):t._map.getImage("AMapArrow")){var h=_t.Util.color2RgbaArray(r.dirColor).slice(0,3);return{u_matrix:i.$n.mvpMatrix,u_meter_per_pixel:i.$n.resolution,u_meter_per_pixel_optimal:i.$n.optimalResolution,u_width:a,u_offset:t.zx,u_localDeltaCenter:o,u_texture:n,u_iconsize:n.size,u_custom_img_flag:s,u_dir_color:h,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}}},Ko.prototype.oC=function(t,i,e){if(t._map){var n=t._getDetalLocal(i),o=t._opts;if(o.lineGradient){var r=o.strokeWeight;if(!(r<=0))return t.rC||t.aC(e,o.lineGradient),{u_matrix:i.$n.mvpMatrix,u_meter_per_pixel:i.$n.resolution,u_width:r,u_offset:t.zx,u_localDeltaCenter:n,u_texture:t.rC,u_total_distance:t.sC,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},Ko.prototype.U_=function(t,i){t.F_&&(t.E_||(t.E_=i.createTexture(t.F_,{Zi:!0}),t.E_.bind(i.gl.CLAMP_TO_EDGE,i.gl.LINEAR,i.gl.LINEAR)))},Ko.prototype.aC=function(t,i,e){if(!t.rC){var n=function(t){var i=document.createElement("canvas");i.height=1,i.width=4096;for(var e=i.getContext("2d"),n=e.createImageData(4096,1),o=0,r=0;r<4096;r++){for(var a=void 0;o<t.length;o++){if(o===t.length-1){a=t[o][1];break}if(!(4096*t[o+1][0]<r)){a=t[o][1];break}}a=t[o][1];var s=_t.Util.color2RgbaArray(a);n.data[4*r]=255*s[0],n.data[4*r+1]=255*s[1],n.data[4*r+2]=255*s[2],n.data[4*r+3]=255*s[3]}return e.putImageData(n,0,0),i}(e.values);t.rC=i.createTexture(n,{Zi:!0});var o=i.gl;t.rC.bind(o.CLAMP_TO_EDGE,o.NEAREST,o.NEAREST_MIPMAP_NEAREST)}},Ko.prototype.Xx=function(t){var i=t._opts,e=2,n=[1,0,0];return"dashed"===i.strokeStyle&&i.strokeDasharray&&(n=3<=i.strokeDasharray.length?(e=3,i.strokeDasharray.slice(0,3)):(e=2,_t.Pt(i.strokeDasharray.slice(0),[0]))),{Jx:e,Hx:n}},Ko.prototype.N_=function(t,i,e){if(t.Px){var n=t.Px;if(n.upload(e.context),n.Kx&&n.zs&&t.visible){var o=n.zs.buffer,r=this.B_(t,i,e.context);if(r){var a=e.M_();a.context.getExtension("OES_element_index_uint"),a.Ce(r,{a_pos:{buffer:o,type:"vec2",Re:o.size,offset:0},a_normal:{type:"vec2",buffer:o,Re:o.size,offset:8},a_distance:{type:"float",buffer:o,Re:o.size,offset:16},a_dir:{type:"vec2",buffer:o,Re:o.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,it.Si,void 0,void 0,0),a.Ni()}}}},Ko.prototype.Ic=function(t,i,e){if(t.Px){var n=t.Px;if(n.upload(e.context),n.Kx&&n.zs&&t.visible){var o=n.zs.buffer,r=this.fb(t,i);if(r){var a=e.Xn();a.context.getExtension("OES_element_index_uint"),a.Ce(r,{a_pos:{buffer:o,type:"vec2",Re:o.size,offset:0},a_normal:{type:"vec2",buffer:o,Re:o.size,offset:8},a_distance:{type:"float",buffer:o,Re:o.size,offset:16},a_dir:{type:"vec2",buffer:o,Re:o.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,it.Si,void 0,void 0,0),a.Ni()}}}},Ko.prototype.nC=function(t,i,e){if(t.Px){var n=t.Px;if(n.upload(e.context),n.Kx&&n.zs&&t.visible){var o=n.zs.buffer,r=this.oC(t,i,e.context);if(r){var a=e.sS();a.context.getExtension("OES_element_index_uint"),a.Ce(r,{a_pos:{buffer:o,type:"vec2",Re:o.size,offset:0},a_normal:{type:"vec2",buffer:o,Re:o.size,offset:8},a_distance:{type:"float",buffer:o,Re:o.size,offset:16},a_dir:{type:"vec2",buffer:o,Re:o.size,offset:20}},3*n.Qx.length,n.Pc.buffer,void 0,void 0,it.Si,void 0,void 0,0),a.Ni()}}}},Ko.prototype.Tc=function(t,i,e){var n=t._opts;if(n&&n.isOutline&&t.Px){var o=t.Px;if(o.upload(e.context),o.Kx||o.zs){var r=o.zs.buffer;if(t.visible){var a=this.pb(t,i);if(a){var s=e.Xn();s.context.getExtension("OES_element_index_uint"),s.Ce(a,{a_pos:{buffer:r,type:"vec2",Re:r.size,offset:0},a_normal:{type:"vec2",buffer:r,Re:r.size,offset:8},a_distance:{type:"float",buffer:r,Re:r.size,offset:16},a_dir:{type:"vec2",buffer:r,Re:r.size,offset:20}},3*o.Qx.length,o.Pc.buffer,void 0,void 0,it.Si,void 0,void 0,0),s.Ni()}}}}},Ko);function Ko(){}var tr=(ir.prototype.render=function(t,i,e){t._map&&t.getRadius()&&(this.Cb(t,i,e),this.Lb(t,i,e))},ir.prototype.Cb=function(t,i,e){var n=t.Sb;if(n&&(n.upload(e.context),n.upload&&t.visible)){var o=n.zs,r=this.Ab(t,i);r&&e.Un().Ce(r,{a_pos:{buffer:o,type:"vec2",Re:o.size,offset:0}},n._b.length,void 0,"POINTS",!1,it.Si,void 0,void 0,0)}},ir.prototype.Lb=function(t,i,e){var n=t.Sb;if(n&&(n.upload(e.context),n.upload&&t.visible)){var o=n.zs,r=this.Tb(t,i);r&&e.Un().Ce(r,{a_pos:{buffer:o,type:"vec2",Re:o.size,offset:0}},n._b.length,void 0,"POINTS",!1,it.Si,void 0,void 0,0)}},ir.prototype.Ab=function(t,i){var e=t._getDetalLocal(i),n=t._opts;if(n.fillColor){var o=_t.Util.color2RgbaArray(n.fillColor).slice(0,3);o.push(n.fillOpacity);var r=n.radius+(n.strokeWeight||0),a=[0,n.radius/r],s=[0,0,0,0];return n.strokeColor&&n.strokeWeight&&n.strokeOpacity&&(s=_t.Util.color2RgbaArray(n.strokeColor).slice(0,3)).push(n.strokeOpacity),{u_color:o,u_borderColor:s,u_offset:t.zx,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_radius:this.Ib(t),u_range:a,u_retinaRatio:_t._.Ue?2:1,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}},ir.prototype.Tb=function(t,i){var e=t._getDetalLocal(i),n=t._opts;if(n.strokeWeight&&n.strokeColor){var o=_t.Util.color2RgbaArray(n.strokeColor).slice(0,3);o.push(n.strokeOpacity);var r=n.radius+n.strokeWeight,a=[n.radius/r,1],s=o.slice(0,3);return s.push(0),{u_color:o,u_borderColor:s,u_offset:t.zx,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_radius:this.Ib(t),u_range:a,u_retinaRatio:_t._.Ue?2:1,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}},ir.prototype.Ib=function(t){var i=t._opts,e=i.radius+(i.strokeWeight||0);return Math.min(e,64)},ir);function ir(){}var er,nr=(er=re,_t.Ei(or,er),or.prototype.Kn=function(t,i,e,n,o){var r=e.$n.zoom;if(i.sr)for(var a=0,s=i.sr;a<s.length;a++){var h=s[a];if(!(r<h._opts.zooms[0]||r>h._opts.zooms[1]))switch(h.CLASS_NAME){case"Overlay.Polygon":this.hC(h,e,t);break;case"Overlay.Circle":case"Overlay.Rectangle":case"Overlay.Ellipse":h.ib&&this.hC(h.ib,e,t);break;case"Overlay.Polyline":this.lC(h,e,t);break;case"Overlay.BezierCurve":h.vb&&this.lC(h.vb,e,t);break;case"Overlay.CircleMarker":this.fC(h,e,t);default:h.render(e,t)}}},or.prototype.hC=function(t,i,e){this.uC.render(t,i,e)},or.prototype.lC=function(t,i,e){this.cC.render(t,i,e)},or.prototype.fC=function(t,i,e){this.dC.render(t,i,e)},or);function or(){var t=null!==er&&er.apply(this,arguments)||this;return t.uC=new Jo,t.cC=new Qo,t.dC=new tr,t}var rr,ar=0,sr=(rr=_t.lw,_t.Ei(hr,rr),hr.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var i=0,e=t;i<e.length;i++){var n=e[i];this.source.add(n)}},hr.prototype.remove=function(t){Array.isArray(t)||(t=[t]);for(var i=0,e=t;i<e.length;i++){var n=e[i];this.source.remove(n)}},hr.prototype.Lo=function(){return{id:this.zF,type:"overlay",url:""}},hr.prototype.co=function(){return this.zF},hr.prototype.ro=function(){return{visible:this._visible,opacity:1,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},hr.prototype.vi=function(t){return this.source.rr(t)||null},hr.prototype.getAllOverlays=function(i){var t=this.source.getAllOverlays();return t.filter(function(t){return!i||-1<t.className.toLocaleLowerCase().indexOf(i)})},hr.prototype.ho=function(){return this.pC||("d"===this.map.baseRender?(this.pC=!0,this.vC()):(this.pC=!0,this.mC())),this.Jh},hr.prototype.mC=function(){this.Jh=new nr},hr.prototype.vC=function(){var t=this,i=this.map.kv;this._parent=i.querySelector(".amap-layers"),this._container=this._createContainer(this._parent),_t.Module.module("DomRender",function(){t.Jh=new _t.Module.yC(t.map,t)})},hr.prototype._createContainer=function(t){var i=document.createElement("div");return t.appendChild(i),i},hr);function hr(t){void 0===t&&(t={});var i=rr.call(this,t)||this;return i.CLASS_NAME="AMap.VectorLayer",i.zF="AMap.VectorLayer"+ar++,i.pC=!1,i.Qh=t.zIndex||110,i}var lr,fr=(lr=re,_t.Ei(ur,lr),ur.prototype.Kn=function(t,i,e,n){t.context.gl},ur);function ur(){return lr.call(this)||this}var cr,dr=(cr=re,_t.Ei(pr,cr),pr.prototype.Kn=function(t,i,e,n,o){if(i.s_){var r=e.$n.optimalZoom;if(!(r<n.zooms[0]||r>n.zooms[1])){for(var a={},s=0,h=i.tiles;s<h.length;s++)if((b=h[s]).status===_t.Mo.LOADED){var l=b.zo.z;a[l]||(a[l]=[]),a[l].push(b)}var f=_t.map(Object.keys(a),function(t){return parseInt(t,10)});f.sort(function(t,i){return t-i});var u=f.indexOf(r);0<=u&&(f.splice(u,1),f.push(r));var c=n.To.SS().styles;n.ce&&t.context.clear({depth:!0});for(var d=0,p=f;d<p.length;d++){for(var v=a[p[d]],m=0,y=v;m<y.length;m++)(b=y[m]).status===_t.Mo.LOADED&&this.Lc(t,b,e,n,c);for(var x=0,g=v;x<g.length;x++){var b;(b=g[x]).status===_t.Mo.LOADED&&this.Ic(t,b,e,n,c)}}}}},pr.prototype.destroy=function(){},pr.prototype.i_=function(){this.xC={}},pr.prototype.Lc=function(t,i,e,n,o){var r=t.Wn(),a=i.data,s=a.Dc;if(s){s.upload(r.context,!0);var h=s.zs,l=s.Pc,f=a.Oc,u=e.$n.optimalZoom,c=n.opacity,d=[i.Sa[0],i.Sa[1]],p=1;if("3D"===e.$n.viewMode&&(p=e.map.getView().EF()),u<_t.Ra){var v=i.Ma.center;d[0]+=v[0],d[1]+=v[1]}for(var m=0,y=f.jc;m<y.length;m++){var x=y[m],g=JSON.parse(""+x.mainkey,void 0),b=this.Mn(o,g,"polygon").fill;if(b&&4===b.length){var _={u_matrix:e.$n.mvpMatrix,u_color:[b[0],b[1],b[2],b[3]*c],u_offset:[0,0],u_localDeltaCenter:d,u_viewHeight:e.$n.size[1],u_skyHeight:p};r.context.getExtension("OES_element_index_uint"),r.Ce(_,{a_pos:{type:"vec2",Re:h.size,offset:0,buffer:h}},x.length,l,"TRIANGLES",n.depthTest,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,x.offset)}}}},pr.prototype.Ic=function(t,i,e,n,o){var r=t.Vn();if(i.data){var a=i.data,s=a.$c;if(s){s.upload(r.context,!0);var h=s.zs.buffer,l=s.Pc.buffer,f=a.Uc.jc,u=e.$n.optimalZoom,c=[i.Sa[0],i.Sa[1]],d=n.opacity,p=1;if("3D"===e.$n.viewMode&&(p=e.map.getView().EF()),u<_t.Ra){var v=i.Ma.center;c[0]+=v[0],c[1]+=v[1]}for(var m=0,y=f.length;m<y;m++){var x=f[m],g=x.mainkey,b=JSON.parse(g,void 0),_=+b.bC,w=this.Mn(o,b,"line"),k=[];if(1==_||8==_?k=[8,8,8,8]:10==_?k=[2,2,2,2]:11==_?k=[4,4,4,4]:4==_&&(k=[3,3,8,3]),k&&_t._.Ue)for(var M=0;M<k.length;M+=1)k[M]*=2;var S=w[this.gC[b.type]];if(S&&4===S.length){var z={u_matrix:e.$n.mvpMatrix,u_meter_per_pixel:e.$n.resolution,u_width:w["stroke-width"],u_color:[S[0],S[1],S[2],S[3]*d],u_dash:k,u_border:0,u_localDeltaCenter:c,u_viewHeight:e.$n.size[1],u_skyHeight:p},R=h.size;r.context.getExtension("OES_element_index_uint"),r.Ce(z,{a_pos:{type:"vec2",buffer:h,Re:R,offset:0},a_normal:{type:"vec2",buffer:h,Re:R,offset:8},a_distance:{type:"float",buffer:h,Re:R,offset:16},a_dir:{type:"vec2",buffer:h,Re:R,offset:20}},x.length,l,"TRIANGLES",n.depthTest,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,x.offset)}}}}},pr.prototype.Mn=function(t,i,e){var n=JSON.stringify(i);if(this.xC[n])return this.xC[n];var o=["nation-stroke","coastline-stroke","province-stroke","city-stroke","county-stroke"],r={};if(!i)return r;if("line"===e){for(var a=0,s=o.length;a<s;a++){var h=o[a];t[h]&&(_t.Util.isFunction(t[h])?r[h]=_t.Util.color2RgbaArray(t[h](i)):r[h]=_t.Util.color2RgbaArray(t[h]))}_t.Util.isFunction(t["stroke-width"])?r["stroke-width"]=t["stroke-width"](i):r["stroke-width"]=t["stroke-width"]}else"polygon"===e&&(_t.Util.isFunction(t.fill)?r.fill=_t.Util.color2RgbaArray(t.fill(i)):r.fill=_t.Util.color2RgbaArray(t.fill),r["stroke-width"]=t["stroke-width"]);return this.xC[n]=r},pr);function pr(){var t=cr.call(this)||this;return t.gC={Nation_Border_China:"nation-stroke",Nation_Border_Foreign:"nation-stroke",Coastline_China:"coastline-stroke",Coastline_Foreign:"coastline-stroke",Province_Border_China:"province-stroke",Province_Border_Foreign:"province-stroke",City_Border_China:"city-stroke",County_Border_China:"county-stroke"},t.xC={},t}var vr,mr=(vr=_t.Event,_t.Ei(yr,vr),yr.prototype.va=function(t,e,i){return this.jD().send("loadNebulaSourceTile",t,function(t,i){i&&e(i)})},yr.prototype.RD=function(t){this.Uh.send("loadNebulaSourceTileSdf",t)},yr.prototype.wC=function(t,i,e){t.request=this.Uh.send("loadMVTSourceTile",i,function(t,i){i&&e(i)})},yr.prototype.RS=function(t,i,e){t.request=this.Uh.send("loadDistrictSourceTile",i,function(t,i){i&&e(i)})},yr.prototype._C=function(t){this.Uh.send("processLabels",{id:t})},yr.prototype.np=function(){this.Uh.send("loadCommonWords",!0)},yr.prototype.Ha=function(i){this.Uh.send("updateParams",i),_t.forEach(this.ED,function(t){t.send("updateParams",i)})},yr.prototype.Ka=function(i){this.Uh.send("updateMapStyle",{vn:i}),_t.forEach(this.ED,function(t){t.send("updateMapStyle",{vn:i})})},yr.prototype.bn=function(i,t){var e=this;function n(){++o===e.ND&&t()}this.Uh.send("updateUserStyle",{Kd:i},t);var o=0;_t.forEach(this.ED,function(t){t.send("updateUserStyle",{Kd:i},n)})},yr.prototype.Ja=function(i){this.Uh.send("sendHttp",{protocol:i}),_t.forEach(this.ED,function(t){t.send("sendHttp",{protocol:i})})},yr.prototype.Qd=function(){this.Uh.send("commonWordImageLoaded",!0)},yr.prototype.signal=function(t,i){},yr.prototype.dynamicTextTextureInfoLoaded=function(t,i){this.emit("dynamicTextTextureInfoLoaded",i)},yr.prototype.dynamicTextSDFInfoLoaded=function(t,i){this.emit("dynamicTextSDFInfoLoaded",{data:i})},yr.prototype.dynamicTextVerticeLoaded=function(t,i){this.emit("dynamicTextVerticeLoaded",i)},yr.prototype.dynamicTextVerticeLoadedByTile=function(t,i){this.emit("dynamicTextVerticeLoadedByTile",i)},yr.prototype.commonWordLoaded=function(t,i){this.emit("commonWordLoaded",i)},yr.prototype.iconImageLoaded=function(t,i){this.emit("iconImageLoaded",i)},yr.prototype.getSDFData=function(t,i){this.Uh.send("getSDFData",t,function(t){i&&i(t)})},yr.prototype.destroy=function(){this.Wh&&this.Wh.terminate();for(var t=0,i=this.HD;t<i.length;t++){var e=i[t];e&&e.terminate()}},yr.prototype.tv=function(){var t=this;this._map.on("movestart",function(){t.iv=!0,t.ev()}),this._map.on("moveend",function(){t.iv=!1,t.ev()}),this._map.on("dragstart",function(){t._dragging=!0,t.ev()}),this._map.on("dragend",function(){t._dragging=!1,t.ev()}),this._map.on("zoomstart",function(){t.lt=!0,t.ev()}),this._map.on("zoomend",function(){t.lt=!1,t.ev()})},yr.prototype.ev=function(){var i=!1;(this._dragging||this.lt||this.iv)&&(i=!0),this.nv!==i&&(this.Uh.send("setMainThreadBusy",i),_t.forEach(this.ED,function(t){t.send("setMainThreadBusy",i)})),this.nv=i},yr.prototype.jD=function(){return this.ED[0]},yr.prototype.WD=function(){for(var t=0;t<this.ND;t++)if(!this.ED[t].UD)return!1;return!0},yr);function yr(t){var n=vr.call(this)||this;n._map=t,n._dragging=!1,n.lt=!1,n.nv=!1,n.iv=!1,n.GD=0,n.ND=1,n.HD=[],n.ED=[],n.VD=[],n.ZD=[],n.YD=0;for(var i=function(t){var i=new Worker(AMap.getConfig().workerUrl),e=new _t.Bh(i,o);o.HD.push(i),o.ED.push(e),e.send("setId",t,function(){e.UD=!0,n.YD+=1,n.YD===n.ND&&(_t.forEach(n.VD,function(t){n[t.type].apply(n,t.data)}),n.VD=[])})},o=this,e=0;e<n.ND;e++)i(e);return n.Wh=new Worker(AMap.getConfig().workerUrl),n.Uh=new _t.Bh(n.Wh,n),n.tv(),n}var xr=(gr.prototype.ov=function(t){var i=t.gl;if(this.buffer||(this.buffer=new _t.yp(t,new Uint16Array(0),8)),this.qi||(this.qi=t.createTexture({height:512,width:1024,data:null},{Yi:!0}),this.qi.bind(i.CLAMP_TO_EDGE,i.NEAREST,i.LINEAR)),this.av||(this.av=t.createFramebuffer(512,1024)),!this.Pc){for(var e=new Uint16Array(192),n=0;n<32;n++){var o=6*n,r=4*n;e[o]=r,e[1+o]=1+r,e[2+o]=2+r,e[3+o]=r,e[4+o]=2+r,e[5+o]=3+r}this.Pc=t.ve(e)}},gr.prototype.sv=function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];this.rv[n.hv]=n.name,this.images[n.name]=n.img,this.lv.push(n.name)}},gr.prototype.update=function(t){this.ov(t.context),this.uv(t,this.lv),this.lv=[]},gr.prototype.uv=function(t,i){if(0!==i.length){for(var e=t.context,n=e.gl,o=0,r=i;o<r.length;o++){var a=r[o];if(!this.De[a]){var s=e.createTexture(this.images[a],{Yi:!0});s.bind(n.CLAMP_TO_EDGE,n.LINEAR,n.LINEAR),this.De[a]=s}}for(var h=[],l=0,f=this.rv.length;l<f;l++){var u=4*l*4,c=this.cv(l);h[u]=0,h[1+u]=0,h[2+u]=c[0],h[3+u]=c[1],h[4+u]=0,h[5+u]=1024,h[6+u]=c[0],h[7+u]=c[1]+1024,h[8+u]=512,h[9+u]=1024,h[10+u]=c[0]+512,h[11+u]=c[1]+1024,h[12+u]=512,h[13+u]=0,h[14+u]=c[0]+512,h[15+u]=c[1]}var d=e.fe(new Uint16Array(h),8),p=t.Hn();this.fv(),this.av.Wi.set(this.qi.qi);var v=this.getSize();e.bindFramebuffer.set(this.av.Ui);var m=e.be.Ii;for(e.be.set([0,0,v[0],v[1]]),l=0,f=this.rv.length;l<f;l++){var y=this.rv[l];y&&p.Ce({u_sourceTexture:this.De[y],u_sourceTextureSize:[512,1024],u_targetTextureSize:v},{a_sourceTexturePos:{buffer:d,type:"vec2",Re:8,offset:0},a_targetTexturePos:{buffer:d,type:"vec2",Re:8,offset:4}},6,this.Pc,void 0,void 0,it.Mi,void 0,void 0,6*l)}e.bindTexture.set(null),this.qi.bind(n.CLAMP_TO_EDGE,n.NEAREST,n.LINEAR),e.be.set(m),e.bindFramebuffer.set(null)}},gr.prototype.getSize=function(){return[512,1024*this.rv.length]},gr.prototype.destroy=function(){this.buffer&&(this.buffer.destroy(),delete this.buffer),this.qi&&(this.qi.destroy(),delete this.qi);for(var t=0,i=this.De;t<i.length;t++)i[t].destroy();this.av&&(this.av.destroy(),delete this.av),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.images={},this.lv=[],this.rv=[],this.De={}},gr.prototype.fv=function(){var t=this.getSize();this.qi.update({width:t[0],height:t[1],data:null},{resize:!0})},gr.prototype.cv=function(t){return[0,1024*t]},gr);function gr(){this.pv=0,this.lv=[],this.rv=[],this.images={},this.De={},this.dv=[256,256]}var br,_r="labelsLayer",kr={visible:!0,zIndex:120,opacity:1,collision:!0,animation:!0,allowCollision:!1,zooms:[2,22],VT:!1},Mr=(br=_t.lw,_t.Ei(Sr,br),Sr.prototype.Lo=function(){return{id:this.hS,type:_r}},Sr.prototype.ro=function(){return br.prototype.eo.call(this)},Sr.prototype.co=function(){return this.hS},Sr.prototype.vi=function(t){var i=this.fz,e=i&&i.vi(t,this.hS)||"";return e?this.Vh().Ds(e):null},Sr.prototype.Do=function(t){var i=br.prototype.Do.call(this,t);return this.map&&this.uz(this.map),i},Sr.prototype.v$=function(){this.fz&&this.fz.remove(this)},Sr.prototype.IL=function(t){var i=this.fz,e=this.source;if(t&&i&&e){var n=i.$f||{},o=e.zL(t);if(o)return!!n[o]}return!1},Sr.prototype.uz=function(t){(this.fz=t.fS()).add(this)},Sr);function Sr(t){void 0===t&&(t={});var i=br.call(this,t)||this;return i.CLASS_NAME="AMap.LabelsLayer",i._opts={id:_r,type:_r,opacity:1,visible:1},i._opts=_t.assign({},kr,t),i.xt=i._opts.zooms,i.Qh=void 0===t.zIndex?120:t.zIndex,i._visible=void 0===t.visible||t.visible,i.tl=void 0===t.opacity?1:t.opacity,i}var zr,Rr=(zr=Mr,_t.Ei(Cr,zr),Cr.prototype.getCollision=function(){return this._opts.collision},Cr.prototype.setCollision=function(t){void 0===t&&(t=!0),this._opts.collision=t,this.to({vv:!1})},Cr.prototype.getAllowCollision=function(){return this._opts.allowCollision},Cr.prototype.setAllowCollision=function(t){void 0===t&&(t=!0),this._opts.allowCollision=t,this.to({vv:!1})},Cr.prototype.getOpacity=function(){return this._opts.opacity},Cr.prototype.setOpacity=function(t){void 0!==t&&(this._opts.opacity=t,this.tl=t,this.to({vv:!0}))},Cr.prototype.getZooms=function(){return this._opts.zooms},Cr.prototype.setZooms=function(t){void 0!==t&&(this._opts.zooms=t,this.xt=t,this.to({vv:!0}))},Cr.prototype.getzIndex=function(){return this._opts.zIndex},Cr.prototype.setzIndex=function(t){void 0!==t&&(this._opts.zIndex=t,this.Qh=t,this.to({vv:!0}))},Cr.prototype.add=function(t){Array.isArray(t)||(t=[t]),this._add(t);var i=this.Vh();i&&i.add(this.mv,this._opts,this.to.bind(this))},Cr.prototype.remove=function(t){Array.isArray(t)||(t=[t]),this._remove(t);var i=this.Vh();i&&i.remove(this.mv,this._opts,this.to.bind(this))},Cr.prototype.clear=function(){this.mv={};var t=this.Vh();t&&(t.clear(),this.to({vv:!1}))},Cr.prototype.show=function(){zr.prototype.show.call(this)},Cr.prototype.hide=function(){zr.prototype.hide.call(this)},Cr.prototype.getAllOverlays=function(){var t=this.mv,i=[];for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n&&i.push(n)}return i},Cr.prototype.ro=function(){var t=this._opts;return{zIndex:this.Qh,zooms:this.xt,visible:this._visible,opacity:this.tl,collision:t.collision,animation:t.animation,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Cr.prototype.setTop=function(t,i){var e=this.Kl;t&&(i?(e&&e.hS!==t.hS&&e.setTop(!1),this.Kl=t):this.Kl=null)},Cr.prototype.Kh=function(t){zr.prototype.Kh.call(this,t);var i=this.mv;Object.keys(i).length&&t.add(i,this._opts,this.to.bind(this,{vv:!1}))},Cr.prototype.to=function(t){var i=this;void 0===t&&(t={});var e=t.vv,n=void 0===e||e;if(this.map)if(!0===n){var o=this.Vh();o&&o.update(this._opts,function(){i.map&&i.map.setNeedUpdate(!0)})}else this.map.setNeedUpdate(!0)},Cr.prototype.p$=function(){var t=this.mv;for(var i in t)t.hasOwnProperty(i)&&t[i].Cs(this)},Cr.prototype.v$=function(){zr.prototype.v$.call(this);var t=this.mv;for(var i in t)t.hasOwnProperty(i)&&t[i].Cs(null)},Cr.prototype._add=function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];(this.mv[n.hS]=n).Cs(this)}},Cr.prototype._remove=function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];delete this.mv[n.hS],n.Cs(null)}},Cr);function Cr(t){void 0===t&&(t={});var i=zr.call(this,t)||this;return i.mv={},i}var Ar,Ir=(Ar=Ro,_t.Ei(Lr,Ar),Lr.prototype.Hz=function(t,i,e,n,o,r){if(n&&i){Ar.prototype.Hz.call(this,t,i,e,n,o,r);var a=(this.wf=i).$n,s=a.projectionId;this.If=_t.V[s];var h=a.zoom;if(i&&r.visible&&r.opacity&&_t.Util.dS(h,r.zooms)){if(!n.Nf)return;if(!this._map.isDOMMode()){var l=t.context;n.upload(l)}var f=n.rp,u=(n.buffer,n.zo,a.centerCoord);this.uu=_t.lcs.getLocalByCoord([u[0],u[1]]).center||[0,0];var c=this.Ps=n;return this.Ps.lp=f.up,c}return null}},Lr.prototype.Kn=function(t,i,e,n,o){var r=this.fz;if(r&&(this.Wf=r.Uf,this.Bf=r.$f),this._map)if(this._map.isDOMMode()){var a=_t.Util.hp(i.zo,this.wf);this.Yz(e,n,i,this._map,{Sa:a,centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})}else this.Jh(t,e,i,n)},Lr.prototype.Jz=function(){var t=this.Ps.zo;return{Sa:_t.Util.hp(t,this.wf),from:"labelsLayer",opacity:1,offset:[0,0],centerCoord:this.uu}},Lr.prototype.Jh=function(t,i,e,n){var o=this.Zz,r=t.context,a=e.rp,s=e.buffer,h=e.zo,l=_t.Util.hp(h,i);if(a&&a.up){for(var f=this.fp.value.fill(0),u=_t.tc.sp,c=a&&a.pp,d=c.length,p=0,v=0,m=[],y=this.Ps.style||{},x=0;x<d;x++){var g=c[x].dp||[];p=v,v=o.Dz(f,this.Wf,{start:p,dp:g,style:y}),m.push({start:p,end:v})}var b=this.mp;b?b.update(f):b=this.mp=new _t.yp(r,f,u),this.xp=m,n.ce&&t.context.clear({depth:!0}),o.Ce(i,r,{Rz:a,buffer:s,od:b.buffer,zz:this.xp},{from:this.type,Sz:!0,Sa:l,oo:t,LF:n})}},Lr);function Lr(){var t=Ar.call(this)||this;return t.type="labelsLayer",t}var $r=(Tr.prototype.addImage=function(o,t){var r=this;if(this.getImage(o))throw new Error("there is already a image named "+o);this.map.z_.loadImage(t.url,{name:o,type:"userImage",cb:function(t,i){if(t)if(t.img){var e=r.map.getContext(),n=e.createTexture(t.img,{Zi:!0});n.bind(e.gl.CLAMP_TO_EDGE,e.gl.LINEAR,e.gl.LINEAR),r.De[o]=n}else console.error("no img");else console.error("no img")}})},Tr.prototype.getImage=function(t){return this.De[t]},Tr.prototype.L_=function(){var t=P.create("canvas",null);t.getContext||console.error("createArrowTexture error"),t.height=64,t.width=64;var i=t.getContext("2d");if(i){i.fillStyle="white",i.beginPath(),i.moveTo(8,56),i.lineTo(32,36),i.lineTo(58,56),i.lineTo(58,36),i.lineTo(32,14),i.lineTo(8,36),i.fill();var e=this.map.getContext(),n=e.createTexture(t,{Zi:!0});n.bind(e.gl.CLAMP_TO_EDGE,e.gl.LINEAR,e.gl.LINEAR),this.De.AMapArrow=n}else console.error("createArrowTexture error")},Tr);function Tr(t){this.map=t,this.De={},this.L_()}var Dr,Fr=(Dr=re,_t.Ei(Pr,Dr),Pr.prototype.Kn=function(t,i,e,n){if(t){var o=t.context,r=o.gl,a=n.To;if(this.kC&&(this.kC=!1,a.init(r)),a.render){var s=a.eo().zooms;e.$n.zoom>=s[0]&&e.$n.zoom<=s[1]&&(a.render(r,e,e.$n,o),o.Di())}}},Pr);function Pr(){var t=Dr.call(this)||this;return t.kC=!0,t}var Or,Br=(Or=re,_t.Ei(Hr,Or),Hr.prototype.Kn=function(t,i,e,n,o,r){var a=t.rS(),s=e.$n,h=t.context,l=e.map.getView(),f=(s.size,s.pitch),u=s.optimalZoom;if("2D"!==l.type){var c=l.Uu();if(!((c=this.yz(l.getStatus().pitch,c,l.getStatus().size[1],u))<=0||f<=0)){var d=e.map.JF(),p=this.WF(c,d,s,l),v=h.fe(new Float32Array(p),32);a.Ce({u_opacity:1,u_mvpMatrix:s.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:"vec4",buffer:v,Re:v.size,offset:0},a_color:{type:"vec4",buffer:v,Re:v.size,offset:16}},v.length,void 0,"TRIANGLES",void 0,it.Si,void 0)}}},Hr.prototype.WF=function(t,i,e,n){e.size[1],e.pitch;var o=e.zoom,r=n.X(0,t),a=n.X(e.size[0],t),s=n.X(0,t+0),h=n.X(e.size[0],t+0),l=.5*n.pz().dz();i[3]=1;var f=n.map.mapStyle.dn(30001,1,o),u=[.988,.976,.949,1];f&&f.faceColor&&(u=f.faceColor.normalize());var c=_t.Pt(u);c[3]=1;var d=_t.Pt(u)||[1,1,1,0];d[3]=0;var p=_t.Pt(u)||[1,1,1,Math.min(.1,1/o)];return p[3]=Math.min(.1,5/o),(_t.Pt(i)||[1,1,1,1])[3]=-.7,_t.Pt([r[0],r[1],0,0],c,[r[0],r[1],l,0],i,[a[0],a[1],0,0],c,[a[0],a[1],0,0],c,[a[0],a[1],l,0],i,[r[0],r[1],l,0],i,[s[0],s[1],0,0],p,[s[0],s[1],l/3,0],d,[h[0],h[1],0,0],p,[h[0],h[1],0,0],p,[h[0],h[1],l/3,0],d,[s[0],s[1],l/3,0],d)},Hr.prototype.yz=function(t,i,e,n){return e*(Math.max(t/100-.4,0)-Math.max(4*(n-16),0)/100)},Hr);function Hr(){return Or.call(this)||this}var jr,Er=(jr=re,_t.Ei(Nr,jr),Nr.prototype.eC=function(t,i){var e,n=(e=i.map.getView())._u.apply(e,t),o=Math.round(n[0]),r=Math.round(n[1]),a=i.size[0],s=i.size[1],h=4*((s-r)*a+o)+3;return!(o<0||r<0||a<=o||s<=r||this.SC[h])},Nr.prototype.Kn=function(t,i,e,n,o,r){var a=t.aS(),s=e.$n,h=a.context,l=[0,0];e.$n.optimalZoom<_t.Ra&&(l=i.LS.center),i.Dc.upload(a.context,!0);var f={data:i,$i:a,$n:s,Sa:l};this.RC(h,e,f),this.zC(h,f)},Nr.prototype.zC=function(t,i){var e=t.gl,n=i.$n,o=n.size[0],r=n.size[1];e.viewport(0,0,2*o,2*r);for(var a=i.data.Dc.zs,s=i.data.Dc.Pc,h=i.data.Oc.jc,l=0,f=h.length;l<f;l++){var u=h[l];i.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:i.Sa,u_mvpMatrix:i.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:a,Re:a.size,offset:0}},u.length,s,"TRIANGLES",void 0,it.disabled,O.Ai,void 0,u.offset)}t.stencilMask.set(0),t.stencilFunc.set({test:e.EQUAL,Li:1,mask:255}),t.stencilOp.set([e.KEEP,e.KEEP,e.REPLACE]),t.colorMask.set([!0,!0,!0,!0])},Nr.prototype.RC=function(t,i,e){var n=t.gl,o=i.size[0],r=i.size[1];if(this.CC){var a=this.CC.AC;o===a.w&&r===a.h||(n.bindRenderbuffer(n.RENDERBUFFER,a),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA,o,r))}else this.CC=this.IC(n,i);n.bindFramebuffer(n.FRAMEBUFFER,this.CC),n.viewport(0,0,o,r),t.clear({color:!0});for(var s=e.data.Dc.zs,h=e.data.Dc.Pc,l=e.data.Oc.jc,f=0,u=l.length;f<u;f++){var c=l[f];e.$i.Ce({u_color:[1,1,1,1],u_deltaCenter:e.Sa,u_mvpMatrix:e.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:s,Re:s.size,offset:0}},c.length,h,"TRIANGLES",void 0,it.Mi,void 0,void 0,c.offset)}var d=o*r*4;this.SC&&d===this.SC.length||(this.SC=new Uint8Array(d)),n.readPixels(0,0,o,r,n.RGBA,n.UNSIGNED_BYTE,this.SC),n.bindFramebuffer(n.FRAMEBUFFER,null)},Nr.prototype.IC=function(t,i){var e=t.createFramebuffer(),n=i.size[0],o=i.size[1],r=t.createRenderbuffer();(e.AC=r).w=n,r.h=o,t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,n,o),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,r);var a=t.checkFramebufferStatus(t.FRAMEBUFFER);if(t.FRAMEBUFFER_COMPLETE===a)return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),e;console.log("Frame buffer object is incomplete: "+a.toString())},Nr);function Nr(){var t=jr.call(this)||this;return t.SC=new Uint8Array(0),t}var Wr,Ur=(Wr=_t.lw,_t.Ei(Gr,Wr),Gr.prototype.Lo=function(){return{id:this.No,type:"sky"}},Gr.prototype.co=function(){return this.No},Gr.prototype.ro=function(){return{visible:this._visible,opacity:1,skyColor:this.$C,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Gr.prototype.lo=function(){return!0},Gr);function Gr(t){void 0===t&&(t={visible:!0});var i=Wr.call(this,t)||this;return i.CLASS_NAME="AMap.SkyLayer",i.No="sky_"+_t.Util.sx(),i._visible=void 0===t.visible||t.visible,i.$C=t.skyColor,i.$C=i.$C&&_t.Util.color2RgbaArray(i.$C),i.Qh=t.zIndex||500,i.lz=!0,i}var Vr,Yr=(Vr=re,_t.Ei(Zr,Vr),Zr.prototype.Kn=function(t,i,e,n){var o=e.$n.optimalZoom;if(!(o<n.zooms[0]||o>n.zooms[1])){n.ce&&t.context.clear({depth:!0});var r=i.tiles[0];if(r&&r.length)for(var a=0,s=r;a<s.length;a++){var h=s[a];h.status===_t.Mo.LOADED&&this.Ic(t,h,e,n)}}},Zr.prototype.destroy=function(){},Zr.prototype.Ic=function(t,i,e,n){var o=t.Vn();if(i.data){var r=i.data,a=r.$c;if(a){a.upload(o.context,!0);var s=a.zs.buffer,h=a.Pc.buffer,l=r.Uc;if(l){var f=l.jc,u=(e.$n.optimalZoom,r.Sa),c=n.opacity,d=1;"3D"===e.$n.viewMode&&(d=e.map.getView().EF());for(var p=0,v=f.length;p<v;p++){var m=f[p],y=m.color,x={u_matrix:e.$n.mvpMatrix,u_meter_per_pixel:e.$n.resolution,u_width:m.width,u_color:[y[0],y[1],y[2],y[3]*c],u_border:0,u_dash:void 0,u_localDeltaCenter:u,u_skyHeight:d,u_viewHeight:e.$n.size[1]},g=s.size;o.context.getExtension("OES_element_index_uint"),o.Ce(x,{a_pos:{type:"vec2",buffer:s,Re:g,offset:0},a_normal:{type:"vec2",buffer:s,Re:g,offset:8},a_distance:{type:"float",buffer:s,Re:g,offset:16},a_dir:{type:"vec2",buffer:s,Re:g,offset:20}},m.length,h,"TRIANGLES",n.depthTest,it.Si,n.rejectMapMask||!e.map.getMask()?void 0:O.Ti,void 0,m.offset)}}}}},Zr);function Zr(){return Vr.call(this)||this}var Xr=(Jr.prototype.cS=function(t,i,e){var n=(this.wf=i).$n,o=n.projectionId,r=n.viewMode;n.zoom,this.If=_t.V[o],this._viewMode=r,this.reset(),this.Of();for(var a={},s=0,h=this.Tw();s<h.length;s++){var l=h[s],f=l.eo(),u=l._opts,c=l.hS,d=l.ho().Hz(t,i,this,e[c],this._map,f);d&&(a[c]=d,(u.collision||u.allowCollision)&&(this.YL=!1),u.allowCollision&&(this.UT=!1))}this.Ps=a;var p=this._map.getMapState(),v=p.rotating,m=p.zooming,y=p.panning;m||y||this.reset(),this.YL&&this.UT&&(v||m||y)||this.Ff();var x=this.Ef(),g=x.Uf,b=void 0===g?{}:g,_=x.$f,w=void 0===_?{}:_;this.$f=w,this.Uf=b},Jr.prototype.uS=function(){return this.LC},Jr.prototype.add=function(t){this.LC[t.hS]=t},Jr.prototype.remove=function(t){t&&delete this.LC[t.hS]},Jr.prototype.vi=function(t,i){if(!this._map)return null;var e=this._map.getMapState(),n=e.zooming,o=void 0!==n&&n,r=e.panning,a=void 0!==r&&r,s=e.rotating;if(o||a||void 0!==s&&s)return null;if(t&&this._p){var h=P.mousePos(null,t,this._map),l=h[0],f=h[1],u={ja:l-1,Fa:f-1,Oa:l+1,Ea:f+1},c=this._p.search(u);if(c.length){var d=this.NL(c,i),p=this.sP(d);if(!p)return null;var v=p.id,m=this.DC(v);if(m&&m.Nf){var y=m.Nf[v],x=y&&y.data.extData||{};if(this.Uf[v]){if("poi"===x.type)return{type:x.type,id:x.id,lnglat:y.data.position,name:y.data.name};if(!x.type)return x.id}}}}return null},Jr.prototype.search=function(t){for(var i,e,n=[],o=0,r=this._p.search(t);o<r.length;o++){var a=r[o];i=a.id,!(e=this.FC(i))||"AMap.Nebula.LabelsLayer"!==e.CLASS_NAME||this.TC(i)&&n.push(a)}return n},Jr.prototype.reset=function(){this.Uf={},this.$f={}},Jr.prototype.tC=function(){return this._p},Jr.prototype.iC=function(t,i){void 0===t&&(t={}),void 0===i&&(i={});var e=t.x,n=void 0===e?0:e,o=t.y,r=void 0===o?0:o,a=t.width,s=void 0===a?0:a,h=t.height,l=void 0===h?0:h,f=i.id,u=i.rank,c=i.padding,d=i.type,p=void 0===d?"":d,v=i.name,m=_t.tc._d,y=c||m||0;return{id:f,name:v,type:p,rank:u||1,ja:n-y,Fa:r-y,Oa:n+s+y,Ea:r+l+y}},Jr.prototype.NL=function(t,i){void 0===t&&(t=[]);for(var e=[],n=0,o=t;n<o.length;n++){var r=o[n];if(r.id){var a=this.FC(r.id);a&&a.hS===i&&e.push(r)}}return e},Jr.prototype.sP=function(t){for(var i=this.Uf||{},e=[],n=0,o=t;n<o.length;n++){var r=o[n];i[r.id]&&e.push(r)}for(var a=-1/0,s=null,h=0,l=e;h<l.length;h++){var f=l[h],u=f.rank;a<u&&(a=u,s=f)}return s},Jr.prototype.Tw=function(){var t=this.LC,i=[];for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];i.push(n)}return i.sort(function(t,i){return i.Qh-t.Qh}),i},Jr.prototype.rd=function(t,i){var e=i.anchorOffset,n=i.size,o=void 0===n?[0,0]:n,r=_t.Sp.add(t,e);return{x:r[0],y:r[1],width:o[0],height:o[1]}},Jr.prototype.hd=function(t,i){var e=i.offsetX,n=void 0===e?0:e,o=i.offsetY,r=void 0===o?0:o,a=i.w,s=void 0===a?0:a,h=i.h,l=void 0===h?0:h;return{x:t[0]+n,y:t[1]+r,width:s,height:l}},Jr.prototype.Ff=function(){var t=this.Ps,i=this.wf&&this.wf.$n,e=this.ad,n=this.$f;if(i){var o={$n:i,size:this.wf.size,transform:this.If,view:this._view,viewMode:this._viewMode},r=i.zoom;for(var a in t)if(t.hasOwnProperty(a)){if(!t[a])continue;var s=t[a],h=s.coords,l=s.style,f=s.Nf,u=this.LC[a];if(!u)continue;var c=u.ho().Jz(),d=c.Sa,p=u.Qh;for(var v in h)if(h.hasOwnProperty(v)){var m=h[v],y=m.origin,x=m.icon,g=m.padding,b=l[v];if(b.in,this.TC(v)||(n[v]=1),n[v])continue;var _=f[v],w=_.data.extData||{},k=w.Sa||d||[0,0],M=_t.Sp.add(y,k),S=M[0],z=M[1];o.centerCoord=c.centerCoord;var R=xo.wu(S,z,r,o),C={id:v,rank:xo.getRank(_,{in:b.in,_z:p}),name:_.data.name,type:w.type||""},A=this.rd(R,x),I=this.PC(b)||[2,20];if(_t.Util.dS(r,I)&&A.width&&A.height){var L=this.iC(A,C);e.push(L)}var $=this.hd(R,g),T=this.OC(b)||[2,20],D=_t.Util.dS(r,T);if(b.tn&&D&&$.width&&$.height){var F=this.iC($,C);e.push(F)}}}this.ld(e)}},Jr.prototype.Ef=function(){var t,i={},e=this.$f;if(!this.wf)return{};var n=(this.wf&&this.wf.$n).zoom,o=this.Ps,r={};if(this.YL){for(var a in o)if(o.hasOwnProperty(a)){if(!o[a])continue;var s=o[a],h=s.Nf,l=void 0===h?{}:h;for(var f in s.coords,s.style,l)l.hasOwnProperty(f)&&(i[f]=1)}return{Uf:i,$f:e}}for(var a in o)if(o.hasOwnProperty(a)){if(!o[a])continue;var u=o[a],c=u.Nf,d=void 0===c?{}:c,p=(u.coords,u.style),v=void 0===p?{}:p,m=(q=this.LC[a]).Qh;for(var y in d)if(d.hasOwnProperty(y)){var x=v[y],g=xo.getRank(d[y],{in:x.in,_z:m});r[g]||(r[g]={}),r[g][y]=d[y]}}for(var b,_,w,k,M,S,z,R,C,A,I,L,$,T,D,F,P,O,B,H,j,E,N,W,U,G=_t.bf.rank(Object.keys(r)),V=G.length,Y=this.wf,Z={$n:Y.$n,size:Y.size,transform:this.If,view:this._view,viewMode:this._viewMode},X=V-1;0<=X;X--){b=r[G[X]];for(var J=(_=Object.keys(b)).length-1;0<=J;J--){var q;if(!e[w=_[J]]&&(q=this.FC(w))){var Q=q._opts||{};if(!Q.collision&&this.UT||Q.VT)i[w]=1;else{var K=q.ho().Jz(),tt=K.Sa;if(N=(E=this.DC(w)).style,W=E.coords,U=E.Nf,(k=N[w])&&k.in)i[w]=1;else{if(S=(M=W[w]).icon||{},z=M.padding||{},R=M.origin||{},C=(U[w].data.extData||{}).Sa||tt||[0,0],A=(t=_t.Sp.add(R,C))[0],I=t[1],Z.centerCoord=K.centerCoord,L=xo.wu(A,I,n,Z),($=S.size)[0]&&$[1]){T=this.rd(L,S),D=this.iC(T),P=(F=this._p.search(D)).length;for(var it=0;it<P;it++){var et=F[it];et.id===w?i[et.id]=1:this.BC(w,et.id)&&(e[et.id]=1)}}if((O=this.hd(L,z)).width&&O.height)for(B=this.iC(O),j=(H=this._p.search(B)).length,it=0;it<j;it++){var nt=H[it];nt.id===w?i[nt.id]=1:this.BC(w,nt.id)&&(e[nt.id]=1)}}}}}}return{Uf:i,$f:e}},Jr.prototype.ld=function(t){this._p&&(this._p.clear(),this._p.load(t))},Jr.prototype.Of=function(){this._p&&(this._p.clear(),this.ad=[])},Jr.prototype.DC=function(t){var i,e=this.Ps;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];if(o&&o.Nf&&o.Nf[t]){i=o;break}}return i||{}},Jr.prototype.jC=function(t){var i=this.Ps,e="";for(var n in i)if(i.hasOwnProperty(n)){var o=i[n]||{};if(o.Nf&&o.Nf[t]){e=n;break}}return e},Jr.prototype.FC=function(t){var i=this.jC(t);return i?this.LC[i]:null},Jr.prototype.TC=function(t){var i=this.DC(t),e=this._map.qz(),n=this._map.getLayerByClass("AMap.MaskLayer");if(i){var o=i.Nf,r=i.style[t];if(!r)return!1;var a=o[t].data.extData||{};if("poi"===a.type&&!1===e)return!1;if(!r.visible)return!1;var s=this.EC(r),h=this.wf.$n.zoom;if(!_t.Util.dS(h,s))return!1;var l=this._map.getLayerByClass("AMap.IndoorMap");if(o[t]&&a.bz&&l&&l.yD().show)return!1;if(n){var f=n.ho();if(f&&!f.eC(o[t].data.position,this.wf))return!1}return!0}return!1},Jr.prototype.BC=function(t,i,e){void 0===e&&(e=!1);var n=this.DC(i);if(n){var o=n.style,r=this.FC(t),a=r&&r._opts||{},s=this.FC(i),h=s&&s._opts||{};if(o[i].in)return e&&console.log("","   -1- ",1),!1;if(r&&s){if(r.hS!==s.hS&&!a.allowCollision&&!h.allowCollision)return e&&console.log("","   -2- ",1),!1;if(r.hS===s.hS&&!h.collision)return e&&console.log("","   -3- ",1),!1}}return e&&console.log("","   -4- ",1),!0},Jr.prototype.EC=function(t){var i=this.PC(t)||[],e=i[0],n=i[1],o=this.OC(t)||[],r=o[0],a=o[1];return[e&&r?e<=r?e:r:e||r||2,e&&r?n<=a?a:n:n||a||20]},Jr.prototype.PC=function(t){return t.icon&&t.icon[0]&&t.icon[0].zooms},Jr.prototype.OC=function(t){return t.text&&t.text.zooms},Jr);function Jr(t){this.LC={},this.Uf={},this.$f={},this.Ps={},this._p=$o(),this.ad=[],this.Gf=$o(),this._viewMode="2D",this.YL=!0,this.UT=!0,this._map=t,this._view=t.getView()}var qr,Qr="AMap.Overlay",Kr=(qr=_t.Event,_t.Ei(ta,qr),ta);function ta(){var t=null!==qr&&qr.apply(this,arguments)||this;return t.type=Qr,t.className=Qr,t}var ia,ea=(ia=_t.Event,_t.Ei(na,ia),na);function na(){var t=null!==ia&&ia.apply(this,arguments)||this;return t.type=Qr,t.className=Qr,t}var oa,ra={zooms:[2,20],opacity:1,rank:1,bubble:!1,visible:!0,zIndex:1,cursor:"pointer",icon:{clipOrigin:[0,0],anchor:[0,0],retina:!0},innerOverlay:!1,text:{content:"",direction:"right",offset:[0,0],zooms:[2,20],style:{fontSize:12,fontFamily:"sans-serif",fontWeight:"normal",fillColor:"#000",strokeWidth:0,padding:"3",fold:!1}}},aa={uy:"AMap.LabelMarker",gy:Math.pow(2,31)},sa=(oa=Kr,_t.Ei(ha,oa),ha.prototype.getName=function(){return this._opts.name},ha.prototype.setName=function(t){this._opts.name=t},ha.prototype.getBounds=function(){var t=this._position;return new ze(t,t)},ha.prototype.getPosition=function(){return new _t.LngLat(this._position[0],this._position[1])},ha.prototype.setPosition=function(t){t&&("string"==typeof t?t=_t.map(t.split(","),function(t){return parseFloat(t)}):_t.Bs(t)&&(t=t.toJSON()),this._position=t,this.to())},ha.prototype.getZooms=function(){return this._opts.zooms},ha.prototype.setZooms=function(t){void 0===t&&(t=[3,20]),this._opts.zooms=t,this.to()},ha.prototype.getOpacity=function(){return this._opts.opacity},ha.prototype.setOpacity=function(t){void 0!==t&&(this._opts.opacity=t,this.to())},ha.prototype.getzIndex=function(){return this._opts.zIndex},ha.prototype.setzIndex=function(t){this._opts.zIndex=t,this.to()},ha.prototype.getRank=function(){return this._opts.rank},ha.prototype.setRank=function(t){this._opts.rank=t,this.to()},ha.prototype.getText=function(){return this._originOpts.text&&this._opts.text||null},ha.prototype.setText=function(t){t&&(this._opts.text=_t.Ss(t,this._opts.text),this.to())},ha.prototype.getIcon=function(){return this._originOpts.icon&&this._opts.icon||null},ha.prototype.setIcon=function(t){t&&(this._opts.icon=_t.Ss(t,this._opts.icon),this.to())},ha.prototype.getOptions=function(){return this._opts},ha.prototype.getDraggable=function(){return!1},ha.prototype.getExtData=function(){return this._opts.extData||null},ha.prototype.setExtData=function(t){this._opts.extData=t},ha.prototype.setTop=function(t){if(void 0===t&&(t=!0),this._parent&&this._parent.setTop(this,t),t)this.vL=this._opts.zIndex||1,this.setzIndex(aa.gy);else{var i=this.vL||this._opts.zIndex||1;this.setzIndex(i)}},ha.prototype.setCursor=function(t){t&&(this._opts.cursor=t)},ha.prototype.getCursor=function(){return this._opts.cursor||"default"},ha.prototype.getVisible=function(){return this._opts.visible||!0},ha.prototype.getCollision=function(){var t=this.getVisible(),i=!1;if(this._parent&&t){var e=this.hS;i=this._parent.IL(e)}return t&&i},ha.prototype.show=function(){this._opts.visible=!0,this.to()},ha.prototype.hide=function(){this._opts.visible=!1,this.to()},ha.prototype.emit=function(t,i){var e=this._opts||{},n=e.icon,o=e.text,r=o&&o.content,a=this.getCursor();this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(a));var s={data:{name:r,txt:r,position:this._position,extData:{},rank:e.rank,zooms:e.zooms},opts:{visible:e.visible,opacity:e.opacity,zooms:e.zooms,zIndex:e.zIndex,icon:n,text:o}};return i.data=s,oa.prototype.emit.call(this,t,i),this},ha.prototype.remove=function(){this._parent&&this._parent.remove(this)},ha.prototype.to=function(){this._parent&&this._parent.to()},ha.prototype.Cs=function(t){(this._parent=t)&&t.map?this._map=t.map:this._map=null},ha);function ha(t){var i=oa.call(this)||this;return i.type=aa.uy,i.className=aa.uy,i.hS=_t.Util.stamp(i),i._originOpts=t,i._opts=_t.Ss({},t,ra),t.position&&i.setPosition(t.position),i}var la,fa={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"},StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19",desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"},StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"},StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20",desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20",desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20",desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}],RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]},{$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]},ua=["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","strokeStyle","strokeDasharray","fontSize"],ca={setOptions:function(t){},init:function(){return this.NC={},this.UC(fa),this.WC=[],this.NC},GC:function(t){return AMap.getConfig().protocol+"://webapi.amap.com/images/indoor_icon/36/"+t+"@2x.png"},HC:function(t){for(var i=!0,e=13;e<=22;e++){var n=this.VC(t,e);if(n&&(0<n.fontSize||n.iconId)){i=!1;break}}return i},VC:function(t,i){return this.Tn(t,i)},ZC:function(t,i){return this.Tn(t,i)},Pr:function(t,i){return this.Tn(t,i)},YC:function(t,i){var e=ua;if(i)for(var n in i)i.hasOwnProperty(n)&&0<=e.indexOf(n)&&void 0===t[n]&&(t[n]=i[n]);return t},JC:function(t,i){if(!t)return null;for(var e=ua,n={},o=0,r=e.length;o<r;o++){var a=e[o];t.hasOwnProperty(a)&&void 0!==t[a]&&(n[a]=t[a])}return this.YC(n,i),n},Tn:function(t,i){var e=t[0]+"_"+t[1];i=Math.round(i);var n=this.NC[e];if(!n)return this.WC.indexOf(e)<0&&this.WC.push(e),null;for(var o=0,r=n.length;o<r;o++)if(0<=n[o].levels.indexOf(""+i))return n[o].styleOpts;if(20<i){var a=n[n.length-1];if(0<=a.levels.indexOf("20"))return a.levels.push(""+i),a.styleOpts}return null},UC:function(t){for(var i in t)t.hasOwnProperty(i)&&this.XC(t[i],i)},XC:function(t,i){for(var e=0,n=t.length;e<n;e++)this.qC(t[e],i)},qC:function(t,i){var e=t.$;if(e){var n=e.mainkey,o=e.subkey,r=t.StyleItem,a=n+"_"+o;this.NC[a],this.NC[a]=this.QC(r,i)}},QC:function(t,i){for(var e=[],n=0,o=t.length;n<o;n++){var r=this.KC(t[n],i);r&&e.push(r)}return e},KC:function(t,i){var e=t.$;if(e){var n={};return n.levels=e.level.split(","),n.desc=e.desc.split(","),n.styleOpts=this.$I(n,n.desc,i),n.styleOpts.levels=n.levels,n}},BI:function(t){for(var i=[],e=0,n=t.length;e<n;e+=2)i.push(parseInt(t.substr(e,2),16));return i.push(i.shift()),"rgb("+(i=i.slice(0,3)).join(",")+")"},WI:function(t){return t.trim&&(t=t.trim()),this.BI(t.substr(2,8))},GI:function(){return this.HI++},$I:function(t,i,e){var n;switch(e){case"PoiStyle":1===(n={iconId:parseInt(i[1],10),fontSize:Math.min(15,parseInt(i[4],10)||0),fillColor:this.WI(i[5]),strokeColor:this.WI(i[6]),VI:0===parseInt(i[8],10)}).iconId&&(n.iconId=0);break;case"LineStyle":n={fillColor:"rgb(252, 249, 242)",strokeColor:this.WI(i[7]),strokeWeight:Math.max(2,Math.round(parseInt(i[2],10)/3))};break;case"RegionStyle":n={fillColor:this.WI(i[2])};break;case"BuildingStyle":n={fillColor:this.WI(i[1]),strokeColor:this.WI(i[2])};break;default:return null}return n._uid=this.GI(),n}},da_strokeColor="rgb(230,142,0)",pa_fillColor="rgb(252, 249, 242)",pa_strokeColor="rgb(171,171,171)",va=(la=re,_t.Ei(ma,la),ma.prototype.getContainer=function(){return document.createElement("div")},ma.prototype.Kn=function(t,i,e,n,o){},ma.prototype.render=function(t){var i=t.data;if(!i||i.length<1||!this.gs)return!1;this._map=this.gs.map;var e=this.gs.ZI(),n=e.indoor,o=e.floorInfo;if(e&&!1===e.visible)return!1;var r=this.qI(i);if(this.UL=i,!r)return!1;if(!e.changeFloor){var a={centerId:r};this.gs.setRenderData(a)}for(var s=Object.keys(i),h=0;h<s.length;h++){var l=s[h],f=i[l],u=f.building;if(u&&u.properties&&this.gs.getIntersect(u.properties.outside_outline))if(n[l])n[l].curFloor!==(c=o[l])&&this.gS(f,c);else{var c="1";o[l]&&(c=o[l]),this.gS(f,c)}}},ma.prototype.HF=function(t){this.gs=t},ma.prototype.t$=function(){var t=this;this.i$||(_t.Module&&_t.Module.module?_t.Module.module("AMap.IndoorMapFloorBar",function(){t.i$=!0}):M&&M.module)},ma.prototype.QI=function(t,i){var o=this,e=this.gs.ZI(),n=e.floorInfo,r=(e.showId,e.centerId),a=e.hideFloorBar,s=null,h=null,l=Number(n[i])||1,f=t.properties;if(f&&f.floor_nonas&&(s=f.floor_nonas,h=f.floor_indexs),!s||!h)return!1;if(1<h.length&&h[0]>h[1]&&(s=s.reverse(),h=h.reverse()),!this.e$&&this.i$){if(_t.Module&&_t.Module.module&&(this.e$=new _t.Module.IndoorMapFloorBar({floors:s,floorIndexs:h,currentFloor:l}),this.WL=r,this.gs.setBar(this.e$),this.gs.setRenderData({barCenterId:this.WL})),!this.e$)return!1;this._map.addControl(this.e$),this.e$.on("floorchange",function(t){o.pD=!0;var i=t.currentIndex,e=o.gs.ZI().centerId;o.gs.n$(e,i);var n=o._map.Mv.Vh(o.gs.co());e&&(o.gs.setRenderData({changeFloor:!0}),n.JR(e,i))})}else this.e$&&(this.WL=r,this.e$.setOption({floors:s,floorIndexs:h,currentFloor:l}),this.gs.setRenderData({barCenterId:this.WL}));a&&this.e$&&this.e$.hide(),!this.GL&&this._map&&(this.GL=!0,this._map.on("moveend",function(){var t=o.vD();if(t){var i={centerId:t};o.gs.setRenderData(i)}o.gs.setRenderData({changeFloor:!1}),o.setBarOpt(),o.gs.uD()}))},ma.prototype.setBarOpt=function(){var t=1,i=this.gs.ZI(),e=i.centerId;if(e===this.WL)return!1;if(i.floorInfo[e]&&(t=i.floorInfo[e]),this.UL&&this.UL[e]&&this.UL[e].building){var n=this.UL[e].building.properties,o=null,r=null;if(n&&n.floor_nonas&&(o=n.floor_nonas,r=n.floor_indexs),!o||!r)return!1;1<r.length&&r[0]>r[1]&&(o=o.reverse(),r=r.reverse()),this.e$&&(this.e$.setOption({floors:o,floorIndexs:r,currentFloor:Number(t)}),this.WL=e,this.gs.setRenderData({barCenterId:this.WL}))}},ma.prototype.qI=function(t){for(var i=this._map.getCenter().toJSON(),e=null,n="",o=Object.keys(t),r=0;r<o.length;r++){var a=o[r],s=t[a];if(s.building&&s.building.properties&&s.building.properties.centerPoint){var h=s.building.properties.centerPoint,l=new AMap.LngLat(h[0],h[1]),f=AMap.GeometryUtil.distance(i,l);(!e||f<e)&&(e=f,n=a)}}return n},ma.prototype.vD=function(){for(var t=this._map.getCenter().toJSON(),i=null,e="",n=this.gs.ZI().indoor,o=Object.keys(n),r=0;r<o.length;r++){var a=o[r],s=n[a];if(s.buildingCenter){var h=s.buildingCenter,l=new AMap.LngLat(h[0],h[1]),f=AMap.GeometryUtil.distance(t,l);(!i||f<i)&&(i=f,e=a)}}return e},ma.prototype.fD=function(t,i){var e=this.gs.ZI();e.floorInfo||(e.floorInfo={}),e.floorInfo[t]=i,this.gs.setRenderData(e)},ma.prototype.gS=function(t,i){var e=Object.keys(t.data)[0];if(i&&(e=i),!t.data[e])return!1;var n=t.data[e].floor,o=t.data[e].id;if(!n||!o)return!1;var r=this.gs.ZI();this.fD(o,i),r.centerId===o&&this.QI(t.building,o),this.o$(n,o,t.building,i),this.gs.mD(!0)},ma.prototype.ar=function(t){var i=this.gs.ZI().indoor;i&&i[t]&&(i[t].polygons&&this.gs.$F.remove(i[t].polygons),i[t]&&i[t].markers&&0<i[t].markers.length&&this.a$.remove(i[t].markers))},ma.prototype.h$=function(t){var i=this;if(!t||!t.properties)return null;var e=t.properties.poitype,n=t.position,o=e.join("_"),r=this.l$[o]&&this.l$[o][0],a=this.gs.ZI();if(r&&r.styleOpts&&r.styleOpts.iconId){var s=r.styleOpts.iconId,h=ca.GC(s),l={position:n,zooms:t.zooms,opacity:a.opacity,rank:3e5,icon:{size:[18,18],image:h,anchor:"center"},extData:t.properties,innerOverlay:!0};if(t.text){var f=r.styleOpts.fillColor||"rgb(132,99,142)",u=r.styleOpts.strokeColor||"#FFFFFF";l=_t.assign(l,{text:{content:t.text,direction:"bottom",style:{fillColor:f,strokeColor:u,fontSize:12}}})}var c=new sa(l);return c.on("click",function(t){i._map&&i._map.getStatus().isHotspot&&i.bi("click",t)}),c.on("mousemove",function(t){i._map&&i._map.getStatus().isHotspot&&i.bi("mousemove",t)}),c.on("mouseout",function(t){i._map&&i._map.getStatus().isHotspot&&i.bi("mousemove",t)}),c}return null},ma.prototype.bi=function(t,i){var e,n="hotspot",o=i.target.getExtData();switch(t){case"click":e=n+t;break;case"mouseover":e=n+"over";break;case"mouseout":e=n+"out"}if(e){var r=this._map.getProjection().unproject(i.lnglat.lng,i.lnglat.lat),a=(r[0],r[1],{type:e,id:o.pid,name:o.name,lnglat:i.lnglat,originEvent:i.originEvent});this._map.emit(e,a)}},ma.prototype.o$=function(t,i,e,n){var s=this;if(!this._map||!i)return!1;var o=this.gs.ZI();this.ar(i),this._map.getZoom();for(var r=[],a=[],h=t.shops,l=t.floor,f=t.cons,u={building_id:i,floor:l},c=h.length,d=0;d<c;d++){var p=h[d],v=p.properties,m=p.geometry,y=_t.assign({shop:{id:v.cpid,name:v.name}},u),x="#FFFFFF",g="#FE9A2E";if(v&&v.regiontype){var b=v.regiontype.join("_"),_=this.l$[b]&&this.l$[b][0];_&&_.styleOpts&&(x=_.styleOpts.fillColor,g=_.styleOpts.strokeColor)}var w=new AMap.Polygon({path:m.coordinates,innerOverlay:!0,cursor:o.cursor,zooms:this.YI,fillColor:x,strokeColor:g,fillOpacity:o.opacity,strokeOpacity:o.opacity,strokeWeight:1,zIndex:o.zIndex+2,extData:{indoorPolygon:!0,indoorData:y,id:i}});if(w.on("click",function(t){var i=t.target.getExtData();i.indoorData.ext={type:"polygon",data:t},s.gs._emit("click",i.indoorData)}),w.on("mouseover",function(t){var i=t.target.getOptions(),e=t.target.getExtData(),n=t.lnglat;if(e.originFillOpacity=i.fillOpacity,e.originFillColor=i.fillColor,t.target.setExtData(e),i.fillOpacity=.4,i.fillColor="#B45F04",t.target.setOptions(i),e.indoorData&&e.indoorData.shop&&e.indoorData.shop.name){var o='<div style="padding: 5px; border: 1px solid rgba(41,38,36,0.87);; white-space:nowrap; border-radius: 2px;color: #000000; background: #FBF5EF; font-size:12px;">'+e.indoorData.shop.name+"</div>";s.JT=new AMap.Marker({position:n,content:o,anchor:"bottom-left",map:s._map,noSelect:!0})}var r=e.id;if(r){var a={centerId:r,changeFloor:!0};s.gs.setRenderData(a)}s.setBarOpt(),s.gs.uD()}),w.on("mouseout",function(t){var i=t.target.getExtData(),e=t.target.getOptions();i.originFillOpacity&&i.originFillColor&&(e.fillOpacity=i.originFillOpacity,e.fillColor=i.originFillColor),t.target.setOptions(e),s.JT&&s._map.remove(s.JT)}),r.push(w),v.zoom_min&&v.zoom_max&&v.font_anthor_point){var k=v.font_anthor_point,M={position:new AMap.LngLat(k[0],k[1]),text:v.name,properties:v,zooms:[v.zoom_min,v.zoom_max]};(D=this.h$(M))&&a.push(D)}}var S=null,z=[];if(l.geometry&&l.geometry.coordinates){x=pa_fillColor,g=pa_strokeColor,o.centerId===i&&(g=da_strokeColor);var R=l.geometry.coordinates;if(l.geometry.type&&"MultiPolygon"===l.geometry.type&&R[0]&&1<R[0].length){for(var C=[],A=0;A<R[0].length;A++)C.push(R[0][A]);R=C}for(var I=0;I<R.length;I++){var L=new AMap.Polygon({strokeWeight:3,innerOverlay:!0,zooms:this.YI,path:R[I],fillColor:x,strokeColor:g,zIndex:o.zIndex+1,fillOpacity:o.opacity,strokeOpacity:o.opacity,extData:{indoorPolygon:!0,id:i}});S=!0,L.on("mouseover",function(t){var i=t.target.getExtData().id;if(i){var e={centerId:i,changeFloor:!0};s.gs.setRenderData(e)}s.setBarOpt(),s.gs.uD()}),z.push(L),r.push(L)}}o.showId&&this.gs.setRenderData({centerId:o.showId}),this.gs.uD(),this.gs.$F.add(r),o.indoor[i]||(o.indoor[i]={}),o.indoor[i].curFloor=n,o.indoor[i].polygons=r,o.indoor[i].outline=z,e&&e.properties&&e.properties.centerPoint&&(o.indoor[i].buildingCenter=e.properties.centerPoint),o&&o.showId===i&&S&&"undefined"!==o.animateState&&this._map.setStatus({animateEnable:o.animateState});for(var $=f.length,T=0;T<$;T++){var D,F=f[T],P=(m=F.geometry,(v=F.properties).zoom_min),O=v.zoom_max;M={properties:v,position:new AMap.LngLat(m.coordinates[0],m.coordinates[1]),zooms:[P,O]},(D=this.h$(M))&&a.push(D)}this.f$||(this._map.add(this.a$),this.gs.setRenderData({labelsLayer:this.a$}),this.f$=!0),o.indoor[i].markers=a,void 0!==o.zIndex&&this.a$.setzIndex(o.zIndex+9),this.a$.add(a);var B=this._map&&this._map.showLabel;o.showLabels&&B&&this.a$.show(),this.gs.KI(o);var H={status:0,id:i,building:{id:i}};if(e.properties){var j=e.properties;H.building.name=j.name_cn,H.building.lnglat=j.centerPoint,H.building.floor=n||1,H.building.floor_details={floor_indexs:j.floor_indexs,floor_nonas:j.floor_nonas,floor_names:j.floor_names},this.gs.setRenderData(H)}o.complete||(o.complete={}),o.complete[i]||(o.complete[i]={}),o.complete[i][n]?this.pD&&(this.gs._emit("floor_complete",H),this.pD=!1):(this.gs._emit("floor_complete",H),o.complete[i][n]=!0),this.gs.setRenderData(o.complete)},ma);function ma(){var t=la.call(this)||this;return t._config=AMap.getConfig(),t.YI=[17,22],t.l$=ca.init(),t.a$=new Rr({opacity:1,collision:!0,allowCollision:!0,zIndex:9,zooms:[17,22],visible:!1}),t.GL=!1,t.i$=!1,t.WL="",t._map=null,t.f$=!1,t.UL=null,t.pD=!1,t.t$(),t}var ya,xa=(ya=_t.lw,_t.Ei(ga,ya),ga.prototype.ro=function(){return{visible:this._visible,opacity:this.tl,zIndex:this.Qh,To:this,path:this.$x,depthTest:this.AF,ce:this.IF}},ga.prototype.setMask=function(t){var i;t&&(this.$x=t,this.Vh().CS(),null!==(i=this.map)&&void 0!==i&&i.setNeedUpdate(!1))},ga.prototype.Lo=function(){return{id:this.No,type:"mask",zooms:[2,22]}},ga.prototype.co=function(){return this.No},ga);function ga(t){var i=ya.call(this,t)||this;return i.CLASS_NAME="AMap.MaskLayer",i.$x=t.path,i.Qh=t.zIndex||-100,i.tl=void 0===t.opacity?1:t.opacity,i._visible=void 0===t.visible||t.visible,i.xt=t.zooms||[2,22],i}var ba=(_a.prototype.destroy=function(){this.wo&&this.wo.parentNode&&this.wo.parentNode.removeChild(this.wo)},_a);function _a(){}var wa,ka=(wa=ba,_t.Ei(Ma,wa),Ma.prototype.Kn=function(t,i,e,n,o,r){o.map;var a=e.$n,s=r.eo(),h=s.zooms||[2,22],l=a.boundsCoord,f=[0,0];if(this.wo.style.zIndex=s.zIndex+"",this.wo.style.opacity=s.opacity+"",this.wo.style.visibility=s.visible?"visible":"hidden",this.bo!==a.zoom&&this.xo(),!(i.tiles.length<=0||a.optimalZoom<h[0]||a.optimalZoom>h[1])){this.mo=[l[0],l[3]];var u=i.tiles||[];this.ko(u);for(var c=0,d=u.length;c<d;c+=1)for(var p=u[c],v=0,m=p.length;v<m;v+=1){var y=p[v];if("loaded"===y.status){var x=y.Ro;f[0]=x[0]-this.mo[0],f[1]=x[3]-this.mo[1];var g={center:a.centerCoord,rotation:a.rotation,size:e.size,$n:a},b=_t.V[a.projectionId].yo(f[0],f[1],y.zo.z,g);if(y.data){var _,w=Math.pow(2,a.zoom-y.zo.z),k=Math.ceil(256*w)+"px",M=y.data;this.So.contains?this.So.contains(y.data)&&((_=new Image).src=y.data.src,M=_):y.data.parentNode===this.So&&((_=new Image).src=y.data.src,M=_),"CANVAS"===y.data.tagName&&((M=new Image).src=y.data.toDataURL()),this.Co[y.zo.key]=y,M.className="xyz-"+y.zo.x+"-"+y.zo.y+"-"+y.zo.z,M.style.width=M.style.height=k,M.width=M.height=Math.ceil(256*w),M.style.left=Math.ceil(b[0]*w)+"px",M.style.top=Math.ceil(b[1]*w)+"px",this.Co[y.zo.key]&&this.bo===a.zoom&&(this.Co[y.zo.key].data=y.data,(_=this.wo.querySelector(".xyz-"+y.zo.x+"-"+y.zo.y+"-"+y.zo.z))&&this.wo.removeChild(_)),this.So.appendChild(M)}}}this.wo.appendChild(this.So),this.bo=a.zoom}},Ma.prototype.getContainer=function(){return this.wo},Ma.prototype.destroy=function(){this.wo&&this.wo.parentNode&&this.wo.parentNode.removeChild(this.wo)},Ma.prototype.GT=function(t,i){this.wo=document.createElement("div"),this.wo.className="amap-layer amap-layer-tile amap-"+i.co(),this.wo.style.zIndex=i.eo().zIndex+"",this.wo.style.opacity=i.eo().opacity+"",this.wo.style.visibility=i.eo().visible?"visible":"hidden",this.So=document.createDocumentFragment(),t.do.appendChild(this.wo)},Ma.prototype.xo=function(){this.wo.innerHTML="",this.Co={}},Ma.prototype.ko=function(t){for(var i=Object.keys(this.Co),e=0,n=i.length;e<n;e++){for(var o=i[e],r=!1,a=0,s=t.length;a<s;a++)for(var h=t[a],l=0,f=h.length;l<f;l++)if(h[l].zo.key===o){r=!0;break}if(!r){var u=this.Co[o].zo,c=this.wo.querySelector(".xyz-"+u.x+"-"+u.y+"-"+u.z);delete this.Co[o],c&&this.wo.removeChild(c)}}},Ma);function Ma(t,i){var e=wa.call(this)||this;return e.Co={},e.bo=0,e.GT(t,i),e}var Sa,za=(Sa=ba,_t.Ei(Ra,Sa),Ra.prototype.Kn=function(t,i,e,n,o,r){var a=o.map,s=i.Ro,h=r.eo();this.wo.style.zIndex=h.zIndex+"",this.wo.style.opacity=h.opacity+"",this.wo.style.visibility=h.visible?"visible":"hidden";var l=a.coordToContainer([s[0],s[3]]),f=a.coordToContainer([s[2],s[1]]);i.image.style.top=l[1]+"px",i.image.style.left=l[0]+"px",i.image.style.width=f[0]-l[0]+"px",i.image.style.height=f[1]-l[1]+"px",this.wo.appendChild(i.image)},Ra.prototype.getContainer=function(){return this.wo},Ra.prototype.GT=function(t,i){this.wo=document.createElement("div"),this.wo.className="amap-layer amap-layer-image amap-"+i.co(),this.wo.style.zIndex=i.eo().zIndex+"",this.wo.style.opacity=i.eo().opacity+"",this.wo.style.visibility=i.eo().visible?"visible":"hidden",t.do.appendChild(this.wo)},Ra.prototype.xo=function(){this.wo.innerHTML=""},Ra);function Ra(t,i){var e=Sa.call(this)||this;return e.GT(t,i),e}var Ca=(Aa.add=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},Aa);function Aa(){}var Ia=(La.prototype.open=function(t,i,e){var n=this;if(!this.Hy){var o=this.Jy,r=AMap.getConfig().server+"/verify/";if(_t._.$e)this.Ky.style.marginLeft=-Math.min(330,screen.width)/2+"px",document.body.appendChild(this.Ky);else{var a=this.Qy("amap-container",document.body)[0];if(a&&322<a.clientWidth&&346<a.clientHeight)this.Ky.style.position="absolute",a.appendChild(this.Ky);else{var s=0,h=0;if(a){var l=P.getViewportOffset(a);s=l[0],h=l[1]}this.Ky.style.top="0%",this.Ky.style.left="0%";var f=(.5-s)/5,u=(.5-h)/5,c=setInterval(function(){h+=u,.5-(s+=f)<.05&&.5-h<.05?(n.Ky.style.top="50%",n.Ky.style.left="50%",clearInterval(c)):(n.Ky.style.top=100*h+"%",n.Ky.style.left=100*s+"%")},25);document.body.appendChild(this.Ky)}}var d=!0;o.onload=function(){d?d=!1:n.Hy&&(n.Ky.parentNode&&n.Ky.parentNode.removeChild(n.Ky),n.Hy=!1,n.tx())},o.src=r+"jsapi.html?channel=JSAPI-"+t+"&from="+encodeURIComponent(r+"success.html")+"&th="+i+"&restUrl="+encodeURIComponent(e),this.Hy=!0}},La.prototype.ix=function(t){this.ex=t},La.prototype.tx=function(){this.ex&&this.ex()},La.prototype.Qy=function(t,i){if(window.getElementsByClassName)return window.getElementsByClassName(t,i);for(var e=(i||document).getElementsByTagName("*"),n=[],o=0;o<e.length;o+=1)for(var r=e[o],a=r.className.split(" "),s=0;s<a.length;s+=1)if(a[s]===t){n.push(r);break}return n},La.prototype.nx=function(){var t=document.createElement("div");t.className="amap-popup",t.style.zIndex="2147483647";var i=document.createElement("iframe");return i.className="amap-popup-content",t.appendChild(i),i.style.width=Math.min(330,screen.width)+"px",this.Jy=i,t},La);function La(){this.Hy=!1,this.ex=null,this.Ky=this.nx()}var $a={"restapi.amap.com/v3/place/text":"KEYWORD","restapi.amap.com/v3/place/polygon":"POLYGON","restapi.amap.com/v3/place/around":"NEARBY","restapi.amap.com/v3/place/detail":"ID","restapi.amap.com/v3/geocode/regeo":"REGEO"},Ta=new Ia;Ta.ix(function(){Da.ox=!1;for(var t=Da.ax,i=0,e=t.length;i<e;i+=1){var n=t[i];10<e-i?t[2]({status:"error",info:"TIME_OUT_A"}):Da.get(n[0],n[1],n[2])}Da.ax=[]});var Da=(Fa.get=function(e,n,o,t){if(void 0===t&&(t={}),Fa.ox)Fa.ax.push([e,n,o]);else{var i=e.split("://")[1],r=$a[i],a=void 0!==r,s=AMap.getConfig(),h=s.key,l=s.version,f=s.appname,u=e+"?platform=JS&s=rsv3&logversion=2.0&key="+h+"&sdkversion="+l+"&appname="+f+"&csid="+_t.Util.sx();for(var c in n)n.hasOwnProperty(c)&&(u+="&"+c+"="+n[c]);dn.JSONP(u,function(t,i){"complete"===t?(i=i.data,a&&3e4===i.errcode&&i.data?(Fa.ox=!0,Fa.ax.push([e,n,o]),Ta.open(r,i.data.host,u)):o(t,i)):o(t,i)},t)}},Fa.post=function(t,i,e){var n=AMap.getConfig(),o=t+"?platform=JS&s=rsv3&logversion=2.0&key="+n.key+"&sdkversion="+n.version+"&appname="+n.appname+"&csid="+_t.Util.sx();dn.Ajax(o,{type:"POST",content:JSON.stringify(i),requestContentType:"text/plain"},function(t,i){"complete"===t?(i=i.data,e(t,JSON.parse(i))):e(t,i)})},Fa.ox=!1,Fa.ax=[],Fa);function Fa(){}function Pa(t,i,r){var e=AMap.getConfig(),n=e.server+"/v3/assistant/coordinate/convert",o=AMap.Util.parseLngLatData(t),a=[];if(o instanceof Array){for(var s=0,h=o.length;s<h;s+=1)a.push(o[s]+"");a=a.join(";")}else a=o+"";var l={key:e.key,s:"rsv3",locations:a,coordsys:i||"gps"};AMap.WebService.get(n,l,function(t,i){if("complete"===t&&i.status&&"1"===i.status){for(var e=i.locations.split(";"),n=0;n<e.length;n+=1){var o=e[n].split(",");e[n]=new AMap.LngLat(o[0],o[1])}r&&"function"==typeof r&&r("complete",{info:"ok",locations:e})}else r&&"function"==typeof r&&r("error",i.info);"error"===t&&r("error",i.info)})}var Oa,Ea,Ba={pointerCursor:!0},Ha=(Oa=_t.Event,_t.Ei(ja,Oa),ja.prototype.oF=function(t){var i,e=t.D$();"zh_cn"===e?i=this.rF:(i=ja.aF.protocol+"://mapclick.amap.com/poi",_t._.mobile&&(i+="_mo"),"zh_cn"!==e&&(i+="_"+e),i+="/poi"),this.$o!==i&&(this.$o=i,ja.sF={},ja.data={},this.hF())},ja.prototype.setMap=function(t){Ca.add(this,"setMap");var i=this._map;i&&(i.off("click",this.lF,this),i.off("mousemove",this.jL,this),i.off("moveend",this.hF,this),i.off("zoomend",this.hF,this),i.off("viewreset",this.hF,this)),(this._map=t)?"3D"!==t.getViewMode_()&&(this.oF(t),t.on("click",this.lF,this),t.on("mousemove",this.jL,this),t.on("moveend",this.hF,this),t.on("zoomend",this.hF,this),t.on("viewreset",this.hF,this),this.hF()):ja.sF={}},ja.prototype.fF=function(t,i){var e=parseInt(t.ic,10);if(i<=18&&14<=i){if(335<=e&&e<=374)return!1;if(436<=e&&e<=444)return!1;if(431===e||432===e||434===e||447===e||448===e)return!1}return!(!(18!==i&&17!==i||375!==e&&3751!==e&&445!==e&&376!==e)||18===i&&323===e||13===i&&334===e||i<=18&&10<=i&&8e3===e||i<=18&&13<=i&&381===e)},ja.prototype.lF=function(t){var i=this.uF(t.lnglat);i&&this._map&&this._map.emit("hotspotclick",i)},ja.prototype.jL=function(t){var i=this.uF(t.lnglat);i&&this.cF!==i&&(this.dF&&this._map.setCursor("pointer"),this.cF&&this._map.emit("hotspotout",this.cF),this._map.emit("hotspotover",i)),!i&&this.cF&&(this.dF&&this._map.setCursor(this._map.getDefaultCursor()),this._map.emit("hotspotout",this.cF)),this.cF=i},ja.prototype.hF=function(){var e=this;if(this._map){ja.data||(ja.data={}),ja.sF||(ja.sF={});var n=this.pF();if(Math.ceil(n)===this.pF()){var t=this.vF();t&&Da.get(this.$o,{tiles:t,level:n},function(t,i){e._map&&e.mF(i,n)},{callback:"cbk"})}}},ja.prototype.vF=function(){var t=this._map,i=this.pF(),e=t.getBounds(),n=this.du,o=e.getNorthWest().pos,r=e.getSouthEast().pos,a=this.yF,s=o[0]+a,h=a-r[1],l=r[0]+a,f=a-o[1],u=Math.pow(2,20-i),c=s/u/n,d=f/u/n,p=l/u/n,v=h/u/n,m=Math.floor(c/256),y=Math.floor(d/256),x=Math.floor(p/256),g=Math.floor(v/256),b=Math.pow(2,i);x<m&&(x+=b);for(var _=[],w=m;w<=x;w+=1)for(var k=y;k<=g;k+=1){var M=[i,w,k].join("_");ja.sF[M]||(_.push(w+","+k),ja.sF[M]=1)}return _.length?_.join(";"):null},ja.prototype.mF=function(t,i){if(t.list){var e=t.list;for(var n in e)if(e.hasOwnProperty(n))for(var o=e[n],r=0;r<o.length;r+=1){var a=o[r];if(this.fF(a,i)){for(var s={id:a.id,name:a.n.replace(/\^/g,""),lnglat:new _t.LngLat(a.p[0],a.p[1])},h=[],l=["b","ib"],f=0,u=l.length;f<u;f++){var c=a[l[f]];c&&h.push.apply(h,this.xF(new _t.LngLat(c[0],c[3]),new _t.LngLat(c[2],c[1]),i))}for(var d=0;d<h.length;d+=1){var p=h[d][0],v=h[d][1];ja.data[p]||(ja.data[p]={}),ja.data[p][v]=s}}}}},ja.prototype.bF=function(t){var i=this.pF(),e=Math.pow(2,20-i),n=this.yF,o=this.du,r=this._map.getProjection().project(t.lng,t.lat),a=this.Xa,s=Math.round(n+r[0])/o/e,h=Math.round(n-r[1])/o/e;return{gF:Math.floor(s/a),wF:Math.floor(h/a),offsetX:s%a,offsetY:h%a}},ja.prototype.xF=function(t,i,e){var n=this.bF(t),o=this.bF(i),r=[];o.offsetX+=256*(o.gF-n.gF),o.offsetY+=256*(o.wF-n.wF);for(var a=n.gF;a<=o.gF;a+=1)for(var s=n.wF;s<=o.wF;s+=1){var h=[e,a,s].join("_"),l=[Math.max(256*(a-n.gF),n.offsetX)%256,Math.max(256*(s-n.wF),n.offsetY)%256,Math.min(256*(a-n.gF+1)-1,o.offsetX)%256,Math.min(256*(s-n.wF+1)-1,o.offsetY)%256].join("_");r.push([h,l])}return r},ja.prototype.uF=function(t){var i=this.bF(t);if(this._map){var e=[this.pF(),i.gF,i.wF].join("_");if(ja.data[e]){var n=ja.data[e];for(var o in n)if(n.hasOwnProperty(o)){var r=o.split("_"),a=parseInt(r[0],10),s=parseInt(r[1],10),h=parseInt(r[2],10),l=parseInt(r[3],10);if(i.offsetX>=a&&i.offsetX<=h&&i.offsetY>=s&&i.offsetY<=l)return n[o]}}return null}},ja.prototype.pF=function(){var t=this._map,i=18;return t&&(i=18<(i=Math.floor(t.getZoom()))?18:i),i},ja.sF={},ja.data={},ja.aF={protocol:"https"},ja);function ja(t,i,e){var n=Oa.call(this)||this;return n.CLASS_NAME="AMap.HotSpot",n.rF=ja.aF.protocol+"://vdata.amap.com/mapclick",n.yF=20037508.342789244,n.Xa=256,n.du=156543.03392804097/Math.pow(2,20),e=_t.assign({},Ba,e),Ca.add(n,e),n.$o=i||n.rF,n.dF=e.pointerCursor||!0,t&&n.setMap(t),n}function Na(t){var i=Ea.call(this,t)||this;return i.context=void 0,i.Ao=[],i.map=t,i.GT(t.getLayers()),i._F=new Ha(t),i}Ea=fe,_t.Ei(Na,Ea),Na.prototype.to=function(){this.map&&this.map.setNeedUpdate(!0)},Na.prototype.Kn=function(t){var i=t.layers.sort(function(t,i){return t.eo().zIndex-i.eo().zIndex});this.lS(null,t),t.$n.zoom;for(var e=!0,n=0,o=i.length;n<o;n+=1){var r=i[n],a=r.ro(),s=i[n].ho();if(s){r.lo()||(e=!1);var h=t.uo.getData(i[n].co(),t.$n,void 0);h&&s.Kn(void 0,h,t,a,this,r)}}!this.map.complete&&e&&(this.map.emit("complete"),this.map.complete=!0),this.map.getView().h_()||(this.map.getView().aD(),this.map.emit("viewchange",{view:this.map.getView(),type:this.map.getView().type||"3D"}))},Na.prototype.HT=function(t){switch(t.CLASS_NAME){case"AMap.NebulaLayer":case"AMap.ImageLayer":return new za(this.map,t);case"AMap.VectorLayer":case"AMap.VectorSvgLayer":return t.ho();case"AMap.RasterLayer":case"AMap.TileLayer":case"AMap.TileLayer.Flexible":case"AMap.TileLayer.RoadNet":case"AMap.TileLayer.Satellite":case"AMap.TileLayer.Traffic":case"AMap.TileLayer.WMS":case"AMap.TileLayer.WMTS":return new ka(this.map,t);case"AMap.SkyLayer":return new Ua;case"AMap.IndoorMap":return new va;case"AMap.LabelsLayer":return new Ir;case"AMap.CustomLayer":return new vo;default:return new ka(this.map,t)}},Na.prototype.destroy=function(){for(var t=0,i=this.Ao;t<i.length;t++)i[t].To.destroy();this.Ao=[]},Na.prototype.GT=function(t){for(var i=0;i<t.length;i++){var e=t[i],n=this.HT(e);if(n){var o="labelsLayer"===n.type||"customLayer"===n.type;e.Do(n),this.Ao.push({To:e,render:n,jo:n&&o?null:n.getContainer()})}}};var Wa,Ua=(Wa=ba,_t.Ei(Ga,Wa),Ga.prototype.getContainer=function(){return this.wo},Ga.prototype.Kn=function(){},Ga);function Ga(){var t=Wa.call(this)||this;return t.wo=document.createElement("div"),t}var Va,Ya=(Va=_t.Event,_t.Ei(Za,Va),Za.prototype.TL=function(){return this.gm||this.Lv||this.lt||this.Cv},Za.prototype.getContext=function(){return this.mm.context},Za.prototype.getView=function(){return this._view},Za.prototype.getContainer=function(){return this.kv},Za.prototype.getSize=function(){return new _t.Size(this.kv.clientWidth,this.kv.clientHeight)},Za.prototype.addLayer=function(t){if("d"===_t._.baseRender&&/^AMap\.DistrictLayer$/g.test(t.CLASS_NAME))console.warn("浏览器版本过低，请升级最新版本的浏览器，或使用高版本火狐、谷歌等浏览器。");else{var i=(t.map=this).Mv.qh(t.Lo(),this._view.au(),t);t.Hh(this.Mv),t.Kh(i);var e=this.Rv(t,{});if(t.Do(e),this.zv.push(t),this.zv.sort(function(t,i){return t.getOptions().zIndex-i.getOptions().zIndex}),("AMap.NebulaLayer"===t.CLASS_NAME||"AMap.TileLayer.RoadNet"===t.CLASS_NAME)&&!1!==this.showLabel&&"w"===this.baseRender){var n=_t.filter(this.zv,function(t){return"AMap.Nebula.LabelsLayer"===t.CLASS_NAME});n.length?n[0].oP()&&n[0].show():this.addLayer(new In(_t.Ln(_t.Ln({},this.options),{rejectMapMask:!0})))}"AMap.NebulaLayer"===t.CLASS_NAME&&this.yS()&&(_t.some(this.zv,function(t){return"AMap.Buildings"===t.CLASS_NAME})||this.addLayer(new AMap.Buildings({zooms:[16.8,22],rejectMapMask:!0,zIndex:10,visible:!0,u$:!0}))),this.c$&&(_t.some(this.zv,function(t){return"AMap.MaskLayer"===t.CLASS_NAME})||this.d$||(this.d$=new xa({zIndex:-10,visible:!0,path:this.c$}),this.addLayer(this.d$))),"3D"===this.getView().type&&(_t.some(this.zv,function(t){return"AMap.SkyLayer"===t.CLASS_NAME})||this.addLayer(new Ur({zIndex:-1,visible:!0,skyColor:this.$C}))),t.p$&&t.p$(),this.d_(),this.setNeedUpdate(!0)}},Za.prototype.removeLayer=function(t){for(var i,e=0;e<this.zv.length;e++)this.zv[e]===t&&(this.zv.splice(e,1),t.v$&&(t.v$(),"d"===_t._.baseRender&&null!==(i=t.ho())&&void 0!==i&&i.destroy()),t.map=null,--e);this.d_(),this.setNeedUpdate(!0)},Za.prototype.setLayers=function(t){for(var i=0;i<this.zv.length;i++)"AMap.VectorLayer"!==(e=this.zv[i]).CLASS_NAME&&this.removeLayer(e);for(i=0;i<t.length;i++){var e;(e=t[i]).setMap(this)}},Za.prototype.getLayers=function(){return this.zv.filter(function(t){return!t._opts||!t._opts.TF})},Za.prototype.DF=function(){return this.zv},Za.prototype.getDefaultLayer=function(){for(var t=this.getLayers(),i=0;i<t.length;i++){var e=t[i];if(e instanceof Mn||"_defaultLayer"===e.eo().id)return e}},Za.prototype.getLayerByClass=function(t){for(var i=this.getLayers(),e=0;e<i.length;e++){var n=i[e];if(n.CLASS_NAME===t)return n}},Za.prototype.isDOMMode=function(){return!_t._.isWebGL||"d"===this.baseRender},Za.prototype.getMapState=function(){return{zooming:this.lt,panning:this.Cv,rotating:this.Lv}},Za.prototype.getControlContainer=function(){return this.Tv},Za.prototype.getMapsContainer=function(){return this.Iv},Za.prototype.getStatus=function(){return{dragEnable:this.Dv,zoomEnable:this.Pv,doubleClickZoom:this.fi,keyboardEnable:this.jv,jogEnable:this.Ov,scrollWheel:this.Fv,animateEnable:this.Ev,touchZoomCenter:this.Nv,touchZoom:this.$v,pitchEnable:this.Uv,rotateEnable:this.Bv,showBuildingBlock:this.m$,isHotspot:this.Wv,mapstyleUrl:this.c_,features:this.Cw,allBubble:this.HL}},Za.prototype.setStatus=function(t){this.Dv=void 0!==t.dragEnable?t.dragEnable:this.Dv,this.Pv=void 0!==t.zoomEnable?t.zoomEnable:this.Pv,this.fi=void 0!==t.doubleClickZoom?t.doubleClickZoom:this.fi,this.jv=void 0!==t.keyboardEnable?t.keyboardEnable:this.jv,this.Ov=void 0!==t.jogEnable?t.jogEnable:this.Ov,this.Fv=void 0!==t.scrollWheel?t.scrollWheel:this.Fv,this.Ev=void 0===t.animateEnable?this.Ev:t.animateEnable,this.Uv=void 0===t.pitchEnable?this.Uv:t.pitchEnable,this.$v=void 0===t.touchZoom?this.$v:t.touchZoom,this.Wv=void 0===t.isHotspot?this.Wv:t.isHotspot,this.Bv=void 0===t.rotateEnable?this.Bv:t.rotateEnable,this.HL=void 0===t.allBubble?this.HL:t.allBubble},Za.prototype.getBuildingColor=function(){return{buildingColor:this.az,roofColor:this.rz,wallColor:this.sz}},Za.prototype.getMask=function(){return this.c$},Za.prototype._setStyle=function(t){this.mapStyle.setStyle(t,this)},Za.prototype.f_=function(t){var i=this;if(!t)return!1;this.c_=t,this.mapStyle.pn(function(){i._getUserStyle(t),i.d_()})},Za.prototype.getProjection=function(){return _t.at.getProjection(this._view.au())},Za.prototype.getDefaultCursor=function(){return this.Zv},Za.prototype.setDefaultCursor=function(t){this.Zv=t},Za.prototype.setCursor=function(t){this.kv&&(t=t||this.getDefaultCursor())!==this.qv&&(_t._.$e||(this.kv.style.cursor=t),this.qv=t)},Za.prototype.destroy=function(){this.G("beforeDestroy"),this.y$=!0,this.x$&&this.x$.destroy(),this.gn&&this.gn.destroy(),this.Vv(),this.Xv(),this.Hv(),this.G("afterDestroy")},Za.prototype.getLimitBounds=function(){return this.it},Za.prototype.setLimitBounds=function(t){this.it=t instanceof ze?t:new ze(t)},Za.prototype.clearLimitBounds=function(){this.it=void 0},Za.prototype.getZooms=function(){return[Math.max(this.xt[0],2),Math.min(20,this.xt[1])]},Za.prototype.setZooms=function(t){this.xt=t},Za.prototype.setNeedUpdate=function(t){this.Jv=5,t&&!this.Kv&&(this.Kv=t,_t.Util.cancelAnimFrame(this.Qv),this.Qv=0,this.Eo()),this.Kv=t},Za.prototype.render=function(){this.setNeedUpdate(!0)},Za.prototype.np=function(){this.x$.np()},Za.prototype.commonWordTextureLoaded=function(){this.x$.commonWordTextureLoaded()},Za.prototype.qz=function(){return!1!==this.showLabel&&(!this.Cw||-1<this.Cw.indexOf("point"))},Za.prototype.Qz=function(){return!1!==this.showLabel&&(!this.Cw||-1<this.Cw.indexOf("road"))},Za.prototype.yS=function(){return!!this.m$||void 0===this.m$&&(!this.Cw||-1<this.Cw.indexOf("building"))},Za.prototype.getViewMode_=function(){return this._view.type},Za.prototype.fS=function(){return this.b$},Za.prototype.XT=function(t){this.QT=t},Za.prototype.JF=function(){var t=this.mapStyle.vn.MF("sky",this._view.getStatus().optimalZoom);return t=t&&_t.Sp.Up(t,255),this.$C||t||[.329,.549,.839,1]},Za.prototype.qF=function(){return this.tB},Za.prototype.im=function(){return this.Mv},Za.prototype.em=function(t,i,e){if(void 0===i&&(i=[0,0,0,0]),void 0===e&&(e=Za.t_[1]),!t)return[116.39708007097433,39.874529056682476,12];var n=_t.at.getProjection(this._view.au()),o=_t.V[this._view.au()],r=n.project(t[0],t[1]),a=n.project(t[2],t[3]),s=[a[0]-r[0],a[1]-r[1]],h=this.getSize().toArray(),l=this._view.getStatus().pitch,f=this._view.getStatus().rotation;f*=Math.PI/180;var u=(i[2]-i[3])/2,c=(i[0]-i[1])/2,d=u*Math.cos(f)+Math.sin(f)*c,p=-Math.sin(f)*u+Math.cos(f)*c,v=s[0];0!=f&&(s[0]=Math.abs(s[0]*Math.cos(f))+Math.abs(s[1]*Math.sin(f)),s[1]=Math.abs(s[1]*Math.cos(f))+Math.abs(v*Math.sin(f)));var m=Math.max(10,h[0]-i[2]-i[3]),y=Math.max(10,h[1]-i[0]-i[1]),x=Math.log(156543.03392804097/s[0]*m)/Math.log(2),g=Math.log(156543.03392804097/s[1]*y)/Math.log(2),b=Math.min(x,g);0<l&&(b-=l/60),b=Math.min(b,e);var _=[(t[0]+t[2])/2,(t[1]+t[3])/2],w=o.project(_[0],_[1],b);w[0]-=d,w[1]-=p;var k=o.unproject(w[0],w[1],b);return _t.Pt(k,[b])},Za.prototype.nm=function(t){if(0<t.length){for(var i=void 0,e=0;e<t.length;e++)if(i){var n=t[e].getBounds();n&&i.union(n)}else i=(i=t[e].getBounds())&&i.clone();return i}},Za.prototype.om=function(t){this._view.setOptions(t)},Za.prototype.Eo=function(){this.Qv||(this.Qv=_t.Util.requestAnimFrame(this.Yf.bind(this)))},Za.prototype.rm=function(){return this.hm||(this.hm=new Rr,this.addLayer(this.hm)),this.hm},Za.prototype.sm=function(){return this.$F.source},Za.prototype._getUserStyle=function(t){t&&this._changeStyle(t)},Za.prototype._changeStyle=function(t){var s,n=this,i=t.split("amap://styles/")[1],e=AMap.getConfig(),o=e.protocol,r=e.key,a=-1!==t.indexOf("?isPublic=true");s=i.length<32?o+"://webapi.amap.com/style?name="+i+"&key="+r:o+"://webapi.amap.com/v4/map/styles?styleid="+i+"&s=rsv3&key="+r+(a?"&ispublic=1":""),dn.JSONP(s,function(t,i){if("complete"===t)if((i=i.data)&&i.data&&i.data.content){var e=JSON.parse(i.data.content);n.QR=e,n._setStyle(e)}else n.emit("styleChanged");else n.emit("styleChanged")})},Za.prototype.um=function(t){for(var i=0,e=t.length;i<e;i+=1)this.addLayer(t[i])},Za.prototype.cm=function(){var e=this;P.addClass(this.kv,"amap-container"),P.watchSize(this.kv,function(t,i){e.om({size:[t,i]})},this),this.Iv=P.create("div",this.kv,"amap-maps"),this.do=P.create("div",this.Iv,"amap-layers"),this.fm=P.create("div",this.Iv,"amap-overlays"),this.Tv=P.create("div",this.kv,"amap-controls"),this.Iv.tabIndex=0;var t=this.kv,i={};i.logo=P.create("a",t,"amap-logo"),P.create("img",i.logo).src=_t._.Ue?AMap.getConfig().client+"/theme/v1.3/logo@2x.png":AMap.getConfig().client+"/theme/v1.3/logo@1x.png",i.v_=P.create("div",t,"amap-copyright"),i.v_.style.display="none",350<P.getViewport(this.kv)[0]&&(i.v_.innerHTML=AMap.getConfig().v_,i.v_.mapNumber=P.create("span",i.v_,"amap-mcode")),this.m_=i},Za.prototype.d_=function(){var t=this.getLayers();if(t){for(var i=-1,e="",n=0;n<t.length;n+=1){var o=t[n].get("mapNumber"),r=t[n].get("zIndex");o&&i<r&&t[n].get("visible")&&(e=o,i=r)}var a=this.c_;return(!this.g$||"GS(2019)6379"===e&&a&&"normal"!==a&&"amap://styles/normal"!==a)&&(e=""),e&&this.m_&&this.m_.v_&&this.m_.v_.mapNumber&&(this.m_.v_.mapNumber.innerHTML="- "+e+"号"),e}},Za.prototype.pm=function(t){var i={size:P.getViewport(this.kv),zoom:t.zoom,center:t.center,rotation:t.rotation,projectionId:t.projection,pitch:t.pitch};return new(t.viewMode&&"3D"===t.viewMode?Un:Bn)(i,this)},Za.prototype.dm=function(){},Za.prototype.Hv=function(){for(P.remove(this.Iv);this.kv.firstChild;)this.kv.removeChild(this.kv.firstChild)},Za.prototype.Vv=function(){this.pi&&(this.pi.destroy(),delete this.pi),this.di&&(this.di.destroy(),delete this.di),this.vm&&(this.vm.destroy(),delete this.vm)},Za.prototype.Xv=function(){var t;null!==(t=this.mm)&&void 0!==t&&t.destroy();for(var i=0,e=this.getLayers();i<e.length;i++)e[i].destroy();this.ao&&(this.ao.destroy(),delete this.ao),this.so&&(this.so.destroy(),delete this.ao),this.R_&&(this.R_.destroy(),delete this.R_),this.zv=[],this.Mv.destroy()},Za.prototype.ym=function(){var t=this._view.getStatus();return{debug:this.debug,layers:this.zv,uo:this.Mv,size:t.size,do:this.do,$n:t,map:this}},Za.prototype.Yf=function(){if(this.w$(),!this.y$){if(!this.xm)return _t.Util.cancelAnimFrame(this.Qv),void(this.Qv=0);this.pi&&this.pi.iy({}),this.di&&this.di.iy({});var t=this.ym();if(this.bm(t),this.mm&&(this.tB=(new Date).getTime(),this.Mv.oa(t.$n,this,this.mm.context),this.mm.Kn(t)),this.Jv&&this.Kv)this.Qv=_t.Util.requestAnimFrame(this.Yf.bind(this));else if((this.Jv<=0||!this.Kv)&&(this.Kv=!1,_t.Util.cancelAnimFrame(this.Qv),this.Qv=0,this.gm||this.Lv||this.lt||this.Cv)){if(this.lt&&-1!==this.k$){if("d"===_t._.baseRender&&0<=this.k$){if(this.KT(),!this.tD)return void(this.tD=!0);this.tD=!1}this.G("zoomend")}this.Cv&&-1!==this._$&&this.G("moveend"),this.Lv&&-1!==this.M$&&this.G("rotateend"),this.gm&&-1!==this.S$&&this.G("pitchend"),this.Lv=!1,this.gm=!1,this.lt=!1,this.Cv=!1,this.Qv||this.mm&&(this.Mv.oa(t.$n,this,this.mm.context),this.mm.Kn(t))}this.Jv--}},Za.prototype.bm=function(t){var i=t.$n,e=this.wm,n=e.center,o=e.rotation,r=e.zoom,a=e.pitch,s=i.center,h=i.zoom,l=i.rotation,f=i.pitch;if(n[0]!==s[0]||n[1]!==s[1]?(this._$=1,this.Cv||this.G("movestart"),this.Cv=!0,this.G("mapmove")):1<=this._$&&this._$++,r!==h?(this.lt||this.G("zoomstart"),this.G("zoomchange"),this.lt=!0,this.k$=1):1<=this.k$&&this.k$++,o!==l?(this.Lv||this.G("rotatestart"),this.G("rotatechange"),this.Lv=!0,this.M$=1):1<=this.M$&&this.M$++,a!==f?(this.gm||this.G("pitchstart"),this.G("pitchchange"),this.gm=!0,this.S$=1):1<=this.S$&&this.S$++,5<=this._$&&(this.Cv=!1,this._$=-1,this.G("moveend")),5<=this.k$&&(this.lt=!1,this.k$=-1,this.G("zoomend")),5<=this.M$&&(this.Lv=!1,this.M$=-1,this.G("rotateend")),5<=this.S$&&(this.gm=!1,this.S$=-1,this.G("pitchend")),"d"===_t._.baseRender&&4<=this.k$){if(this.KT(),!this.tD)return void(this.tD=!0);this.tD=!1}this.Qv||this.mm&&(this.Mv.oa(t.$n,this,this.mm.context),this.mm.Kn(t)),this.wm=i},Za.prototype.G=function(t){this.emit(t,{})},Za.prototype.Rm=function(){var r=this;this.on("styleChanged",function(){if(r.kv){var t=void 0;if(r.options.backgroundColor)t=r.options.backgroundColor;else if(r.mapStyle){var i=r.mapStyle.dn(30001,1,r.getZoom());t=i&&i.faceColor?((t=i.faceColor.rgba.slice(0))[3]=t[3]/255,"rgba( "+t.join(",")+")"):"#f7f7f7"}else t="#f7f7f7";r.kv.style.backgroundColor=t;for(var e=0,n=r.zv;e<n.length;e++){var o=n[e];_t.zm(o)&&o.sl()}}r.xm=!0,r.Eo()}),this.on("repaint",function(){r.Eo()})},Za.prototype.w$=function(){var t=this;this.R$||("d"===this.baseRender?(this.R$=!0,_t.Module.module("DomRender",function(){t.mm=new _t.Module.z$(t),t.Eo()})):(this.R$=!0,this.mm=new pe(this),this.C$=new $r(this)))},Za.prototype.Rv=function(t,i){if(this.isDOMMode())switch(t.CLASS_NAME){case"AMap.NebulaLayer":case"AMap.ImageLayer":case"AMap.CanvasLayer":return new za(this,t);case"AMap.VectorLayer":case"AMap.VectorSvgLayer":return t.ho();case"AMap.RasterLayer":case"AMap.TileLayer":case"AMap.TileLayer.Flexible":case"AMap.TileLayer.RoadNet":case"AMap.TileLayer.Satellite":case"AMap.TileLayer.Traffic":case"AMap.TileLayer.WMS":case"AMap.TileLayer.WMTS":return new ka(this,t);case"AMap.SkyLayer":return new Ua;case"AMap.IndoorMap":return new va;case"AMap.LabelsLayer":return new Ir;case"AMap.CustomLayer":return new vo;default:return new ka(this,t)}else switch(t.CLASS_NAME){case"AMap.NebulaLayer":return new eo;case"AMap.Buildings":return new ro;case"AMap.Nebula.LabelsLayer":return new Zo;case"AMap.LabelsLayer":return new Ir;case"AMap.ImageLayer":case"AMap.CanvasLayer":return new ho;case"AMap.RasterLayer":case"AMap.TileLayer.Flexible":case"AMap.TileLayer.RoadNet":case"AMap.TileLayer":case"AMap.TileLayer.Satellite":return new uo;case"AMap.TileLayer.Traffic":return new Yr;case"AMap.WMTSLayer":case"AMap.TileLayer.WMS":case"AMap.TileLayer.WMTS":return new uo;case"AMap.CustomLayer":return new vo;case"AMap.GLCustomLayer":return new Fr;case"AMap.VTLayer":return new fr;case"AMap.DistrictLayer":case"AMap.District.World":case"AMap.District.Country":case"AMap.District.Province":return new dr;case"AMap.SkyLayer":return new Br;case"AMap.MaskLayer":return new Er;case"AMap.IndoorMap":return new va;case"AMap.VectorLayer":case"AMap.VectorSvgLayer":return t.ho()}},Za.prototype.KT=function(){var s,u,h=this,t=this._view.getStatus(),l=t.zoom,f=t.centerCoord;if(u=this.bo>l?Math.floor(l):Math.ceil(l),0!=(s=u-l)){this.bo=u;var c=_t.V[this._view.au()],d=200*Math.abs(s)+100,p=new L(0,.6,.15,1),v=0,m=0,y=function(){v+=16;var t=h._view.getStatus().zoom,i=l+s*p.h(v/d);d<v&&(i=u);var e=c.nt(h.QT[0],h.QT[1],t),n=c.nt(h.QT[0],h.QT[1],i),o=n[0]-e[0]+f[0],r=n[1]-e[1]+f[1],a=h.getProjection().unproject(o,r);if(h.setZoomAndCenter(i,a,!0),u<=i&&0<s||s<0&&i<=u)return h.setZoom(u,!0),void _t.Util.cancelAnimFrame(m);v<d&&(m=_t.Util.requestAnimFrame(y))};m=_t.Util.requestAnimFrame(y)}},Za.prototype.iB=function(){window.eB=this.destroy,window.onunload=this.destroy,window.onbeforeunload=this.destroy},Za.t_=[2,20],Za);function Za(t,i){var e=Va.call(this)||this;if(e.className="AMap.Map",e.so=new xr,e.lcs=_t.lcs,e.debug=!1,e.complete=!1,e.Kv=!1,e.controls=[],e.az=[.92,.92,.9,.9],e.sz=[.94,.94,.94,.9],e.rz=[.94,.94,.94,.9],e.$C=[.329,.549,.839,1],e.Ov=!0,e.Dv=!0,e.Pv=!0,e.Fv=!0,e.fi=!0,e.jv=!0,e.Ev=!0,e.Uv=!0,e.Bv=!0,e.$v=!0,e.Nv=0,e.Sm=!1,e.c_="",e.Zv="default",e.qv="",e.xt=[2,20],e.zv=[],e.A$=!1,e.R$=!1,e.Qv=0,e.xm=!1,e.lt=!1,e.Cv=!1,e.Lv=!1,e.gm=!1,e.km=0,e.Jv=5,e.y$=!1,e.Wv=!_t._.$e,e.g$=!0,e.tB=(new Date).getTime(),e._$=-1,e.M$=-1,e.S$=-1,e.k$=-1,e.HL=!1,e.bo=10,e.tD=!1,e.QT=[0,0],e.Rm(),e.Cm=We,e.options=i,e.g$=void 0===i.I$?e.g$:i.I$,e.az=_t.Util.color2RgbaArray(i.buildingColor=i.buildingColor),e.sz=_t.Util.color2RgbaArray(i.wallColor),e.rz=_t.Util.color2RgbaArray(i.roofColor),e.$C=_t.Util.color2RgbaArray(i.skyColor),e.Dv=void 0===i.dragEnable?e.Dv:i.dragEnable,e.Pv=void 0===i.zoomEnable?e.Pv:i.zoomEnable,e.Fv=void 0===i.scrollWheel?e.Fv:i.scrollWheel,e.Ov=void 0===i.jogEnable?e.Ov:i.jogEnable,e.fi=void 0===i.doubleClickZoom?e.fi:i.doubleClickZoom,e.jv=void 0===i.keyboardEnable?e.jv:i.keyboardEnable,e.Ev=void 0===i.animateEnable?e.Ev:i.animateEnable,e.Uv=void 0===i.pitchEnable?e.Uv:i.pitchEnable,e.$v=void 0!==i.touchZoom?i.touchZoom:e.$v,e.Nv=void 0!==i.touchZoomCenter?i.touchZoomCenter:e.Nv,e.Zv=i.defaultCursor||e.Zv,i.limitBounds&&e.setLimitBounds(i.limitBounds),e.Sm=i.Lm||!1,e.xt=i.zooms||e.xt,e.bo=i.zoom,e.baseRender=_t._.baseRender,i.viewMode="d"===_t._.baseRender?"2D":i.viewMode,e.Bv=!("3D"!==i.viewMode),e.Bv=void 0===i.rotateEnable?e.Bv:i.rotateEnable,e.debug=i.debug||!1,e.m$=i.showBuildingBlock,e.Wv=void 0===i.isHotspot?e.Wv:i.isHotspot,e.showLabel=void 0===i.showLabel||Boolean(i.showLabel),e.Cw=i.features,e.c$=i.mask,"d"!==e.baseRender){e.mapStyle=new Xn,e.mapStyle.pn(function(){var t=i.mapStyle;t?e._getUserStyle(t):e.emit("styleChanged")});var n=e.z_=new Kn;e.R_=new qn(n,e),e.ao=new _t.Am(e.z_),e.gn=new mr(e),e.x$=new Xa(e),localStorage&&localStorage.getItem("__AMapCommonWordLoaded__")&&e.np()}else e.z_=new Kn,e.emit("styleChanged");t&&(t.amap&&t.amap.destroy(),t.amap=e),e.kv=t,e._view=e.pm(i),e.b$=new Xr(e),e.Mv=new _n(e),e.c_=i.mapStyle||"normal",e.QR=null;var o=_t._.isWebGL,r=AMap.getConfig().y_,a=i.layers||[];e.cm(),0===a.length?e.isDOMMode()?(e.addLayer(new _t.TileLayer({id:"_defaultLayer",tileUrl:r})),e.Bv=!1):o&&e.addLayer(new Mn):e.um(a),e.d_(),e.$F=new sr({map:e}),e.addLayer(e.$F);var s=e._view.getStatus();return e.wm=s,e.setCursor(e.Zv),e}var Xa=(Ja.prototype.dynamicTextTextureInfoLoaded=function(t){var i=this;t.Im&&console.log("你需要更新新的纹理了");var e=t.optimalZoom,n=t.tag;if(0===t.Dm.length)t.zo&&this.map.emit("tileSdfInfoFinished",{zo:t.zo,optimalZoom:e,tag:n}),this.Eo();else for(var o=0,r=t.Dm.length,a=0,s=t.Dm.length;a<s;a++){var h=t.Dm[a];this.map.z_.loadImage(h.lc,{type:"text",cb:function(){(o+=1)===r&&i.map.ao&&(i.map.ao.Pm(t),t.zo&&i.map.emit("tileSdfInfoFinished",{zo:t.zo,optimalZoom:e,tag:n}),i.Eo())}})}},Ja.prototype.dynamicTextSDFInfoLoaded=function(t){this.map.R_.Ju(t.data),this.Eo()},Ja.prototype.commonWordLoaded=function(t){var i=this;localStorage&&localStorage.setItem("__AMapCommonWordLoaded__","true"),this.map.R_.rc(t,function(){i.Eo()})},Ja.prototype.commonWordTextureLoaded=function(){this.Ya||(this.map.gn.Qd(),this.map.R_.Qd(),this.Ya=!0)},Ja.prototype.iconImageLoaded=function(t){for(var i=this,e=t.data,n=[],o={},r=function(e){o[e.url]=1,n.push(new Promise(function(t){var i=new Image;i.src=e.data.lc,i.onload=function(){t({img:i,name:e.url,hv:e.data.ext.hv})}}))},a=0,s=e;a<s.length;a++)r(s[a]);Promise.all(n).then(function(t){i.map.so.sv(t)}),this.Eo()},Ja.prototype.np=function(){this.Va||(this.map.gn.np(),this.Va=!0)},Ja.prototype.destroy=function(){this.$$()},Ja.prototype.Ia=function(){this.map.gn.on("dynamicTextTextureInfoLoaded",this.dynamicTextTextureInfoLoaded.bind(this)),this.map.gn.on("dynamicTextSDFInfoLoaded",this.dynamicTextSDFInfoLoaded.bind(this)),this.map.gn.on("commonWordLoaded",this.commonWordLoaded.bind(this)),this.map.gn.on("iconImageLoaded",this.iconImageLoaded.bind(this))},Ja.prototype.$$=function(){this.map.gn.clearEvents("dynamicTextTextureInfoLoaded"),this.map.gn.clearEvents("dynamicTextSDFInfoLoaded"),this.map.gn.clearEvents("commonWordLoaded"),this.map.gn.clearEvents("iconImageLoaded")},Ja.prototype.Eo=function(){this.map.setNeedUpdate(!0)},Ja);function Ja(t){this.map=t,this.Ia()}var qa=4.000244140625,Qa=(Ka.prototype.isEnabled=function(){return"disabled"!==this.R},Ka.prototype.isActive=function(){return"active"===this.R},Ka.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},Ka.prototype.disable=function(){this.isEnabled()&&(this.R="disabled",this.C(),this.G("zoomend"))},Ka.prototype.Ut=function(t){if(t.preventDefault(),this.G("zoomstart"),this.isEnabled()){var i=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,e=Date.now(),n=e-(this.Bt||0);this.Bt=e,0!==i&&i%qa==0?this.Wt="wheel":0!==i&&Math.abs(i)<4?this.Wt="trackpad":400<n?(this.Wt=null,this.Gt=i):this.Wt||(this.Wt=Math.abs(n*i)<200?"trackpad":"wheel",this.Zt&&(i+=this.Gt)),t.shiftKey&&i&&(i/=4),this.Wt&&(this.$t-=i,this.isActive()||this.D(t))}},Ka.prototype.D=function(t){if(this.$t){var i=this._map.getView(),e=i.getStatus(),n=e.rotation,o=e.zoom,r=e.center,a=e.projectionId,s="wheel"===this.Wt&&Math.abs(this.$t)>qa?1/450:.01,h=2/(1+Math.exp(-Math.abs(this.$t*s)));this.$t<0&&0!==h&&(h=1/h);var l=this.Yt(o),f=Math.min(Ya.t_[1],Math.max(2,this.Vt(l*h))),u=P.mousePos(this.j,t,this._map),c=[this.j.clientWidth/2,this.j.clientHeight/2],d=this._t(c,u),p=Math.atan((u[1]-c[1])/(u[0]-c[0])),v=-n/180*Math.PI+p,m=[-Math.cos(v)*d,Math.sin(v)*d];u[0]-c[0]<0&&(m[0]=-m[0],m[1]=-m[1]);var y=_t.V[a].nt(m[0],m[1],o),x=_t.V[a].nt(m[0],m[1],f),g=Math.pow(2,f-o);this._map.XT(m),i.setOptions({kt:{pos:u,Mt:f,Rt:x,zt:y,scale:g,center:_t.set(_t.create(),r[0],r[1])}}),this.$t=0}},Ka.prototype.Yt=function(t){return Math.pow(2,t)},Ka.prototype.Vt=function(t){return Math.log(t)/Math.LN2},Ka.prototype._t=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.sqrt(e*e+n*n)},Ka.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},Ka.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},Ka);function Ka(t,i){this._map=i,this.j=t,this.R="disabled",this.Wt="wheel",this.$t=0}var ts=(is.prototype.isEnabled=function(){return"disabled"!==this.R},is.prototype.isActive=function(){return"active"===this.R},is.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},is.prototype.disable=function(){if(this.isEnabled()){switch(this.R){case"active":this.S(),this.C();break;case"pending":this.S()}this.R="disabled"}},is.prototype.L=function(t){this.A&&clearInterval(this.A),(2===t.button||t.ctrlKey&&0===t.button)&&(this.j.addEventListener("mousemove",this.T,{passive:!0}),this.j.addEventListener("mouseup",this.I),this.j.addEventListener("mouseleave",this.I),this.D(t))},is.prototype.D=function(t){this.$=this.U=this.B=P.mousePos(this.j,t,this._map),this.W=[[Date.now(),this.$]],this.R="active"},is.prototype.Z=function(t){if(this.W.length<2&&"active"===this.R&&this.G("dragstart",t),this.G("dragging",t),this.isEnabled()){var i=P.mousePos(this.j,t,this._map);if(this.q=t,this.B=_t.set(_t.create(),i[0],i[1]),this.Y(),this.W.push([Date.now(),this.B]),!(this.W.length<2)&&("active"===this.R&&(this.R="pending"),"disabled"!==this.R)){var e=this._map.getView(),n=e.getStatus(),o=n.rotation,r=n.pitch,a=[this.B[0]-this.W[this.W.length-2][1][0],this.B[1]-this.W[this.W.length-2][1][1]];(!this._map.getStatus().pitchEnable||Math.abs(a[0])>Math.abs(a[1]))&&(a[1]=0),(!this._map.getStatus().rotateEnable||Math.abs(a[0])<Math.abs(a[1]))&&(a[0]=0),15<Math.abs(this.B[0]-this.$[0])&&(this.B[1]>this.j.clientHeight/2?o-=a[0]/10:o+=a[0]/10),r-=a[1]/Ya.t_[1]*2,e.setOptions({rotation:o,pitch:r})}}},is.prototype.tt=function(t){switch(this.R){case"active":this.R="enabled",this.C();break;case"pending":this.R="enabled",this.G("dragend",t);break;default:this.G("dragend",t)}this.S()},is.prototype.S=function(){this.j.removeEventListener("mousemove",this.T),this.j.removeEventListener("mouseup",this.I),this.j.removeEventListener("mouseleave",this.I)},is.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},is.prototype.Y=function(){for(var t=this.W,i=Date.now();0<t.length&&160<i-t[0][0];)t.shift()},is.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},is);function is(t,i){this._map=i,this.W=[],this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.I=this.tt.bind(this)}var es=(ns.prototype.Xt=function(){this._container.addEventListener("mouseenter",this.DL.bind(this)),this._container.addEventListener("mouseover",this.OL.bind(this)),this._container.addEventListener("mouseleave",this.PL.bind(this)),this._container.addEventListener("mouseup",this.tt.bind(this)),this._container.addEventListener("mouseout",this.BL.bind(this)),this._container.addEventListener("mousemove",this.jL.bind(this)),this._container.addEventListener("mousedown",this.Jt.bind(this)),this._container.addEventListener("touchend",this.N.bind(this)),this._container.addEventListener("touchstart",this.Kt.bind(this),!1),this._container.addEventListener("touchmove",this.gt.bind(this),!1),this._container.addEventListener("wheel",this.Qt.bind(this),{passive:!1}),this._container.addEventListener("contextmenu",this.EL.bind(this)),this._container.addEventListener("keydown",this.ii.bind(this))},ns.prototype.fireEvent=function(t,i){if(i){if("dragstart"===t&&(this._map.getStatus().dragEnable?(this.ft.enable(),this.ei.enable(),this.ni.enable()):(this.ft.disable(),this.ei.disable(),this.ni.disable())),"scrollWheel"===t){if(!this._map.getStatus().scrollWheel)return void this.oi.disable();this.oi.enable()}var e,n=P.mousePos(this._container,i,this._map),o=n[0],r=n[1],a=this._map.getView().containerTolnglat(o,r),s=a[0],h=a[1];if("dragstart"===t||"dragging"===t||"dragend"===t)switch(t){case"dragstart":e=this._map.TL()?this.ri:this.si(i),this.ri=e;break;case"dragging":e=this.ri;break;case"dragend":e=this.ri,this.ri=void 0}else e=this._map.TL()?this.ri:this.si(i);var l=this.hi(e,t),f=new _t.LngLat(s,h),u=new _t.Pixel(o,r),c=this._map.getProjection().project(s,h),d={lnglat:f,target:e,pixel:u,originEvent:i,pos:c};-1!==["mouseover","mousemove","mouseout","mouseenter","mouseleave"].indexOf(t)?this.ui(t,d):e&&this.ci(e,t,d);var p=d.target,v={lnglat:f,target:e,pixel:u,originEvent:i,pos:c};if(p&&"poi"!==p.type&&!l||(v.target=this._map),e&&"poi"===e.type)this._map.emit(t,v);else if(e&&l)this._map.emit(t,v);else if("dblclick"===t&&e)this.fi.disable();else if("dragstart"!==t&&"dragging"!==t&&"dragend"!==t||!e||!e.getDraggable()&&"AMap.InfoWindow"!==e.type){if(!e){if(!this._map.getStatus().dragEnable&&("dragging"===t||"dragstart"===t||"dragend"===t))return;this._map.emit(t,v)}}else"dragend"===t?this.ft.enable():this.ft.disable()}},ns.prototype.hi=function(t,i){return!(!t||"poi"===t.type||"dragstart"===i||"dragging"===i||"dragend"===i||!this._map.getStatus().allBubble&&!Boolean(t.getOptions().bubble))},ns.prototype.ti=function(t){this.fi.enable(),this.fireEvent("dblclick",t),this.fi.ut(t)},ns.prototype.Jt=function(t){this._map.cancelMapAnimate(),this.Ht="mousedown",this.fireEvent("mousedown",t),this.ft.enable(),this.ft.L(t),this.ei.L(t)},ns.prototype.OL=function(t){this.fireEvent("mouseover",t)},ns.prototype.DL=function(t){this.fireEvent("mouseenter",t)},ns.prototype.PL=function(t){this.fireEvent("mouseleave",t)},ns.prototype.BL=function(t){this.fireEvent("mouseout",t)},ns.prototype.tt=function(t){var i=this;"mousedown"!==this.Ht||t.ctrlKey||(setTimeout(function(){i.nB=0},300),this.Ht="false",2===t.button?this.fireEvent("rightclick",t):(this.fireEvent("click",t),this.nB++,2<=this.nB&&(this.fireEvent("dblclick",t),this.fi.enable(),this.fi.ut(t),this.nB=0))),this.fireEvent("mouseup",t)},ns.prototype.FL=function(t){"move"!==this.Ht&&this.fireEvent("click",t)},ns.prototype.jL=function(t){"mousedown"===this.Ht&&(this.Ht="move"),this.fireEvent("mousemove",t)},ns.prototype.Kt=function(t){var i=this;t.preventDefault(),this.oB="touchstart",this.$=P.mousePos(null,t,this._map),this._map.cancelMapAnimate(),this.fireEvent("touchstart",t),this.rB=(new Date).getTime(),this.ft.enable(),this.ft.P(t),this.fi.P(t,this.ft),this.ni.P(t),clearTimeout(this.aB),1===t.touches.length&&(this.aB=setTimeout(function(){i.fireEvent("rightclick",t)},800))},ns.prototype.gt=function(t){if(this.$){var i=P.mousePos(null,t,this._map);i[0]===this.$[0]&&i[1]===this.$[1]||"touchstart"!==this.oB||(this.oB="touchmove")}},ns.prototype.N=function(t){var i=this,e=(new Date).getTime();this.fireEvent("touchend",t),clearTimeout(this.aB),"touchstart"===this.oB&&e-this.rB<800&&(this.oB="false",this.fireEvent("click",t),setTimeout(function(){i.nB=0},300),this.nB++,2<=this.nB&&(this.fireEvent("dblclick",t),this.nB=0)),this.fi.vt(t)},ns.prototype.Qt=function(t){this._map.cancelMapAnimate(),this.fireEvent("mousewheel",t),t.preventDefault(),this._map.getStatus().scrollWheel&&(this.ft.disable(),this.oi.Ut(t))},ns.prototype.EL=function(t){t.ctrlKey,t.preventDefault()},ns.prototype.si=function(t){var i,e=this._map,n=e.DF(),o=e.pi,r=e.di,a=n.concat([o,r]),s=P.mousePos(this._container,t,this._map),h=s[0],l=s[1],f=this._map.getView().containerTolnglat(h,l),u=f[0],c=f[1];t.lnglat=new _t.LngLat(u,c),t.pixel=new _t.Pixel(h,l);for(var d=a.length-1;0<=d;d--){var p=a[d],v=p&&p.vi(t);if(v){if(!v.getOptions){i=v;break}if(!0!==v.getOptions().noSelect){i=v;break}}}return i},ns.prototype.ui=function(t,i){var e=this.mi,n=e.yi,o=void 0===n?null:n,r=e.xi,a=void 0===r?null:r,s=i.target;"mousemove"!==t&&"mouseleave"!==t||("mousemove"===t?o?s?o.hS!==s.hS?(this.ci(o,"mouseout",a),this.ci(s,"mouseover",i)):this.ci(s,"mousemove",i):this.ci(o,"mouseout",a):s&&this.ci(s,"mouseover",i):"mouseleave"===t&&o&&this.ci(o,"mouseout",a),this.mi.yi=s,this.mi.xi=i)},ns.prototype.ci=function(t,i,e){"poi"===t.type?this._map.getStatus().isHotspot&&this.bi(t,i,e):t.emit(i,e)},ns.prototype.bi=function(t,i,e){var n,o="hotspot";switch(i){case"click":this._map.setCursor("pointer"),n=o+i;break;case"mouseover":this._map.setCursor("pointer"),n=o+"over";break;case"mouseout":this._map.setCursor(""),n=o+"out"}if(n){var r=this._map.getProjection().unproject(t.lnglat[0],t.lnglat[1]),a=r[0],s=r[1],h={type:n,id:t.id,name:t.name,lnglat:new _t.LngLat(a,s),originEvent:e.originEvent};this._map.emit(n,h)}},ns.prototype.ii=function(t){if(this._map.getStatus().keyboardEnable){var i=this._map.getZoom(),e=this._map.getRotation();"="===t.key?this._map.setZoom(i+1,!0):"-"===t.key&&this._map.setZoom(i-1,!0),t.ctrlKey?"ArrowLeft"===t.key?this._map.setRotation(e-90,!0):"ArrowRight"===t.key&&this._map.setRotation(e+90,!0):"ArrowUp"===t.key?this._map.panBy(0,300):"ArrowDown"===t.key?this._map.panBy(0,-300):"ArrowLeft"===t.key?this._map.panBy(300,0):"ArrowRight"===t.key&&this._map.panBy(-300,0)}},ns);function ns(t){this.Ht="false",this.oB="false",this.nB=0,this.aB=0,this.rB=0,this.mi={yi:null,xi:null},this._map=t,this._container=this._map.getMapsContainer(),this.ft=new v(this._container,t),this.ft.enable(),this.oi=new Qa(this._container,t),this.oi.enable(),this.fi=new y(this._container,t),this.fi.enable(),this.ni=new g(this._container,t),this.ni.enable(),this.ei=new ts(this._container,t),this.ei.enable()}var os=(rs.prototype.setImageSize=function(t){t instanceof _t.Size&&(t=t.toArray()),this._opts.imageSize=t},rs.prototype.getImageSize=function(){var t=this._opts.imageSize,i=this.Om;return t||(i.length?i:[])},rs.prototype.setSize=function(t){t instanceof _t.Size&&(t=t.toArray()),this._opts.size=t},rs.prototype.getSize=function(){return this._opts.size},rs.prototype.setImageOffset=function(t){t instanceof _t.Pixel&&(t=t.toArray()),this._opts.imageOffset=t},rs.prototype.getImageOffset=function(){return this._opts.imageOffset||[0,0]},rs.prototype.getImage=function(){return this._opts.image},rs.prototype.setImage=function(t){this._opts.image=t},rs.prototype.Fm=function(){return this.Om||[]},rs.prototype.Em=function(t){t instanceof _t.Size&&(t=t.toArray()),this.Om=t},rs);function rs(t){this.CLASS_NAME="AMap.Icon",this._opts={size:[0,0],imageOffset:new _t.Pixel(0,0),image:AMap.getConfig().protocol+"://webapi.amap./theme/v1.3/markers/0.png"},this.Om=[];var i=t.size,e=t.imageSize,n=t.image,o=t.imageOffset;i&&this.setSize(i),e&&this.setImageSize(e),o&&this.setImageOffset(o),n&&this.setImage(n)}var as,ss="AMap.DOMOverlay",cs={top:"top",right:"right",bottom:"bottom",left:"left",Nm:"top-left",$m:"top-center",Um:"top-right",Bm:"middle-left",center:"center",Wm:"middle-right",Gm:"bottom-left",Zm:"bottom-center",qm:"bottom-right"},ds_Ym="viewchange",ps=[10,0,0,0],vs={map:null,visible:!0,offset:[0,0],anchor:"top-left",rotate:0,orientation:null,scale:1,zooms:[2,20],noSelect:!1,innerOverlay:!1,isCustom:!1},ms=(as=ea,_t.Ei(ys,as),ys.prototype.getOptions=function(){return this._options},ys.prototype.add=function(t){void 0===t&&(t=[]);for(var i=this._map,e=0,n=t;e<n.length;e++)n[e].add(i)},ys.prototype.remove=function(t){void 0===t&&(t=[]);for(var i=0,e=t;i<e.length;i++)e[i].remove()},ys.prototype.updateOverlay=function(t){if(t)for(var i=0,e=t;i<e.length;i++)e[i].updateOverlay();else{var n=this._overlays;for(var o in n)n.hasOwnProperty(o)&&n[o].updateOverlay({viewChange:!0})}},ys.prototype.iy=function(t){this.updateOverlay()},ys.prototype.addToGroup=function(t){var i=this._container,e=this._overlays,n=t.hS,o=t.dom;i.appendChild(o),e[n]=t},ys.prototype.removeFromGroup=function(t){var i=this._container,e=this._overlays,n=t.hS,o=t.dom;i.removeChild(o),delete e[n]},ys.prototype.vi=function(t){return null},ys.prototype.destroy=function(){this.ey();var t=this._overlays;for(var i in t)t.hasOwnProperty(i)&&t[i].remove();this._overlays={},this._container&&P.remove(this._container)},ys.prototype.getAllOverlays=function(){var t=this._overlays,i=[];for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n&&i.push(n)}return i},ys.prototype.ny=function(){this._map},ys.prototype.ey=function(){var t=this._map,i=ds_Ym;t.off(i,this.iy)},ys);function ys(t,i){void 0===i&&(i={});var e=as.call(this)||this;e.type="AMap.DOMOverlayGroup",e._options={zIndex:120},e._overlays={};var n=(e._map=t).kv;e._parent=n.querySelector(".amap-layers");var o=i.className;return e._className=o,e.iy=e.iy.bind(e),e.ny(),e}var xs,gs=(xs=Kr,_t.Ei(bs,xs),Object.defineProperty(bs.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!0,nb:!0}),bs.prototype.getMap=function(){return this._map||null},bs.prototype.setMap=function(t){t instanceof th?this.add(t):null==t&&this.remove()},bs.prototype.addTo=function(t){this.add(t)},bs.prototype.add=function(t){t&&(this._add(t),this._parent&&(this._parent.addToGroup(this),this.updateOverlay()))},bs.prototype.remove=function(){this._map&&this._parent&&(this._parent.removeFromGroup(this),this._remove())},bs.prototype.show=function(){this._opts.visible=!0,this.updateOverlay()},bs.prototype.hide=function(){this._opts.visible=!1,this.updateOverlay()},bs.prototype.getPosition=function(){var t=this._position;return t?_t.Bs(t)?t:new _t.LngLat(t[0],t[1]):null},bs.prototype.setPosition=function(t){this._position=t,this.updateOverlay()},bs.prototype.getAnchor=function(){return this._opts.anchor||cs.Nm},bs.prototype.setAnchor=function(t){t&&(this._opts.anchor=t,this.updateOverlay())},bs.prototype.getOffset=function(){var t=this._opts.offset||[0,0];return new _t.Pixel(t[0],t[1])},bs.prototype.setOffset=function(t){t&&(t instanceof Array||void 0===t.x||void 0===t.y||(this._opts.offset=[t.x,t.y]),this.updateOverlay())},bs.prototype.getAngle=function(){return this._opts.rotate||0},bs.prototype.setAngle=function(t){this._opts.rotate=t,this.updateOverlay()},bs.prototype.getOrientation=function(){return this._opts.orientation},bs.prototype.setOrientation=function(t){"number"==typeof t?(this._opts.orientation=t,this._opts.rotate=this.dP(t)):(this._opts.orientation=void 0,this._opts.rotate=0),this.updateOverlay()},bs.prototype.getSize=function(){return this._getSize()},bs.prototype.setSize=function(t){this._opts.size=_t.ay(t)?t.toArray():t,this.updateOverlay()},bs.prototype.getzIndex=function(){return this._opts.zIndex},bs.prototype.setzIndex=function(t){this._opts.zIndex=t,this.updateOverlay()},bs.prototype.getOptions=function(){return this._opts},bs.prototype.getContent=function(){return this._opts.content||""},bs.prototype.setContent=function(t){void 0===t&&(t=""),this._opts.content=t,this._size=[0,0],this._removeContent(),this._createDom(this.dom,t),this.updateOverlay()},bs.prototype.getBounds=function(){var t=this._position;return new ze(t,t)},bs.prototype.getVisible=function(){return void 0===this._opts.visible||this._opts.visible},bs.prototype.updateOverlay=function(t){void 0===t&&(t={});var i=t.viewChange,e=void 0!==i&&i;this._map&&(this._setStyle(e),this._applyStyle(e))},bs.prototype.destroy=function(){this.dom&&P.remove(this.dom)},bs.prototype.getCursor=function(){if(this._map)return this._map.getDefaultCursor()},bs.prototype.getContentDom=function(){return this.dom},bs.prototype._add=function(t){},bs.prototype._remove=function(){this._map=null,this._parent=null},bs.prototype._createContainer=function(){var t=document.createElement("div");return P.addClass(t,this._className),t},bs.prototype._createDefaultInnerDom=function(){return document.createElement("div")},bs.prototype._setStyle=function(t){void 0===t&&(t=!1);var i=this._position,e=this._points=this._map&&i&&this._map.lngLatToContainer(i).toArray(),n=(this._map&&this._map.getRotation(),this._style),o=this._map&&this._map.getZoom(),r=this._opts.zooms||[2,20],a=void 0===this._opts.visible||this._opts.visible,s=o&&(o<r[0]||r[1]<o);void 0!==a&&(n.visible=a),a&&(n.visible=!s);var h=this.ZF(e);a&&(n.visible=!h);var l=this._opts,f=l.zIndex,u=l.anchor,c=void 0===u?cs.Nm:u,d=l.offset,p=void 0===d?[0,0]:d,v=l.rotate,m=l.scale,y=l.noSelect,x=l.orientation,g=[0,0];if("number"==typeof x?n.rotate=this.dP(x):void 0!==v&&(n.rotate=v),t)e&&(n.left=e[0]+"px",n.top=e[1]+"px",g=n.translate);else{this._getContentSize();var b=this._getStyleZIndex(f);b&&(n.zIndex=b),void 0!==m&&(n.scale=m),e&&(n.left=e[0]+"px",n.top=e[1]+"px"),(c||p)&&(g=this._getOffset(c,p),n.translate=g,n.transformOrigin=-g[0]+"px "+-g[1]+"px"),n.pointerEvents=!0===y?"none":"auto"}var _="translate("+g[0]+"px, "+g[1]+"px) scale("+n.scale+") rotate("+n.rotate+"deg)";_t._.ie&&(n.msTransform=_),n.transform=_},bs.prototype._getStyleZIndex=function(t){return t},bs.prototype._getSize=function(){var t=this._opts.size||[];t instanceof _t.Size&&(t=t.toArray());var i=t[0],e=void 0===i?0:i,n=t[1],o=void 0===n?0:n,r=this._size,a=r[0],s=void 0===a?0:a,h=r[1];return[e||s,o||(void 0===h?0:h)]},bs.prototype._getContentSize=function(){var t=this._style,i=this._getSize(),e=0,n=0;if(i[0]&&i[1])e=i[0],n=i[1];else if(this.dom){var o=this.dom;e=Math.ceil(o.offsetWidth)||0,n=Math.ceil(o.offsetHeight)||0,this._size=[e,n]}t.width=e+"px",t.height=n+"px",t.size=[e,n]},bs.prototype._applyStyle=function(t){void 0===t&&(t=!1);var i,e=this._style,n=this.dom;for(i in e)if(e.hasOwnProperty(i)){if("visible"===i){var o=e[i]?"block":"none";n.style.display=o;continue}if(t){"top"!==i&&"left"!==i&&"transform"!==i&&"msTransform"!==i||(n.style[i]=e[i]);continue}if("width"===i||"height"===i){if("0px"===e[i])continue;var r=this._opts.size;r&&"AMap.InfoWindow"!==this.type&&("width"===i&&(n.style[i]=r[0]+"px"),"height"===i&&(n.style[i]=r[1]+"px"));continue}"translate"!==i&&"scale"!==i&&"rotate"!==i&&(n.style[i]=e[i])}},bs.prototype._getOffset=function(t,i){var e=this._getAnchorOffset(t),n=e[0],o=e[1];return[n+i[0],o+i[1]]},bs.prototype._getAnchorOffset=function(t){var i=this._style.size,e=i[0],n=i[1],o=cs,r=0,a=0;if(Array.isArray(t))return t;switch(t){case o.Nm:r=0;break;case o.$m:r=-e/2;break;case o.Um:r=-e;break;case o.Bm:r=0,a=-n/2;break;case o.center:r=-e/2,a=-n/2;break;case o.Wm:r=-e,a=-n/2;break;case o.Gm:a=-n;break;case o.Zm:r=-e/2,a=-n;break;case o.qm:r=-e,a=-n}return[r,a]},bs.prototype._createDom=function(t,i){return i&&("object"==typeof i&&i instanceof HTMLElement?t.appendChild(i):t.innerHTML=i),t},bs.prototype._removeContent=function(){this.dom.innerHTML=""},bs.prototype._formatSize=function(t){return[t.getWidth(),t.getHeight()]},bs.prototype.ZF=function(t){var i=this._map,e=!1;if(i&&t){var n=i.getView();if("3D"===n.type){var o=n.Uu(),r=ps;t&&t[1]-o-r[0]<=0&&(e=!0)}}return e},bs.prototype._getRotationByPoints=function(t,i){var e=i.y-t.y,n=i.x-t.x,o=0;return(0!=e||0!=n)&&(i.x-t.x!=0?(o=Math.atan((i.y-t.y)/(i.x-t.x)),0<=e&&n<0||e<0&&n<=0?o=Math.PI+o:e<0&&0<=n&&(o=2*Math.PI+o)):o=i.y>t.y?Math.PI/2:3*Math.PI/2,Math.round(180*o/Math.PI*10)/10)},bs.prototype._getRotationByLngLats=function(t,i){var e,n,o=null===(e=this._map)||void 0===e?void 0:e.getProjection().project(t.KL,t.kT),r=null===(n=this._map)||void 0===n?void 0:n.getProjection().project(i.KL,i.kT),a=r[0]-o[0],s=r[1]-o[1],h=0;return(0!=a||0!=s)&&(0!=s?(h=Math.atan(a/s),0<=a&&0<s||(0<=a&&s<0||a<0&&s<0?h=Math.PI+h:a<0&&0<s&&(h=2*Math.PI+h))):h=0<a?Math.PI/2:3*Math.PI/2,Math.round(180*h/Math.PI*10)/10)},bs.prototype.dP=function(t){var i=0,e=this._position,n=this._map;if(n&&e){var o=this.pP(e,t),r=n.lngLatToContainer(e),a=n.lngLatToContainer(o),s=this._getRotationByPoints(r,a);i=!1===s?0:s+Math.PI}return i+90},bs.prototype.pP=function(t,i){var e,n,o=null===(e=this._map)||void 0===e?void 0:e.getProjection().project(t[0],t[1]);return o[0]+=Math.sin(i*Math.PI/180)*Math.pow(2,18-this._map.getZoom()),o[1]+=Math.cos(i*Math.PI/180)*Math.pow(2,18-this._map.getZoom()),null===(n=this._map)||void 0===n?void 0:n.getProjection().unproject(o[0],o[1])},bs.prototype.vP=function(t){return 10/Math.pow(2,t-2)},bs);function bs(t,i){void 0===t&&(t={}),void 0===i&&(i={});var e=xs.call(this)||this;e.type=ss,e.className=ss,e._style={width:0,height:0,size:[0,0],position:"absolute",top:0,left:0,translate:[0,0],rotate:0,scale:1,transformOrigin:[0,0],zIndex:12,visible:!0,draggable:!1,zooms:[2,20],noSelect:!1},e._size=[0,0],e._dragObjects={sy:[0,0],hy:[0,0],ly:[0,0]},e._className="amap-overlay",e._originOpts=t,e._opts=_t.assign({},vs,t),e._opts.angle&&(e._opts.rotate=e._opts.angle),!t.offset||t.offset instanceof Array||void 0===t.offset.x||void 0===t.offset.y||(e._opts.offset=[t.offset.x,t.offset.y]),e.hS=_t.Util.stamp(e);var n=i.className,o=i.anchor;e._className=n,!t.anchor&&o&&(e._opts.anchor=o);var r=t.content,a=e._createContainer();return e.dom=e._createDom(a,r),e._position=t.position,e.updateOverlay(),e}var _s,ws={uy:"AMap.Marker",py:"amap-markers",vy:"amap-marker",my:"//webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",yy:120,xy:12,by:2,gy:Math.pow(2,31)},ks=_t.assign({},vs,{title:"",clickable:!0,draggable:!1,bubble:!1,topWhenClick:!1,zIndex:ws.xy,cursor:"pointer",extData:{}}),Ms=(_s=ms,_t.Ei(Ss,_s),Ss.prototype.vi=function(t){var i=t.target;if(_t.isEmpty(this._overlays)||!i)return null;var e=P.closest(i,"amap-marker"),n=this._overlays,o=null;return e&&_t.forEach(n,function(t){t.dom===e&&(o=t)}),o},Ss.prototype.setTop=function(t){if(t){var i=this.Kl;i&&i!==t&&i.setTop(!1),this.Kl=t}},Ss.prototype._createContainer=function(t){var i=document.createElement("div");return P.addClass(i,this._className),t.appendChild(i),i},Ss);function Ss(t){var i=_s.call(this,t,{className:ws.py})||this;return i.type=ws.uy,i.className=ws.uy,i._container=i._createContainer(i._parent),i}var zs,Rs=(zs=gs,_t.Ei(Cs,zs),Cs.prototype.getTitle=function(){return this._opts.title},Cs.prototype.setTitle=function(t){this._opts.title=t,this.dom&&this.dom.setAttribute("title",t)},Cs.prototype.getIcon=function(){return this._opts.icon},Cs.prototype.setIcon=function(t){t&&(this._opts.icon=t,this._opts.content||this._removeContent(),"AMap.Icon"===t.CLASS_NAME&&(this._opts.size=t.getSize()),this.wy(),this.updateOverlay())},Cs.prototype.getLabel=function(){return this._opts.label||{}},Cs.prototype.setLabel=function(t){var i=this._opts.label||{};this._opts.label=_t.assign(i,t);var e=i.content,n=i._needUpdate,o=void 0===n||n;if(e){var r;r=this._y?this.ky(e,this._y):this._y=this.ky(e),this.dom&&this.dom.appendChild(r),o&&this.updateOverlay()}else this._y&&(P.remove(this._y),this._y=null)},Cs.prototype.getClickable=function(){var t=this._opts.clickable;return!(void 0!==t&&!t)},Cs.prototype.setClickable=function(t){void 0===t&&(t=!0),this._opts.clickable=!!t},Cs.prototype.getDraggable=function(){var t=this._opts.draggable;return void 0!==t&&t},Cs.prototype.setDraggable=function(t){(this._opts.draggable=t)?this._bindEvents():this.T_()},Cs.prototype.getTop=function(){return this._isTop},Cs.prototype.setTop=function(t){void 0===t&&(t=!1),this._isTop=t;var i=this._parent;i&&t&&i.setTop(this),this.updateOverlay()},Cs.prototype.getCursor=function(){var t=this._opts.cursor;return!t&&this._map&&(t=this._map.getDefaultCursor()),t},Cs.prototype.setCursor=function(t){t&&(this._opts.cursor=t)},Cs.prototype.getExtData=function(){return this._opts.extData},Cs.prototype.setExtData=function(t){this._opts.extData=t},Cs.prototype.remove=function(){this.T_(),zs.prototype.remove.call(this)},Cs.prototype.moveTo=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("Should implement AMap.moveAnimation plugin first.")},Cs.prototype.moveAlong=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("Should implement AMap.moveAnimation plugin first.")},Cs.prototype.startMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Cs.prototype.stopMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Cs.prototype.pauseMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Cs.prototype.resumeMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Cs.prototype.setOptions=function(t){this._opts=_t.assign({},ks,this._opts,t),t.content&&this.setContent(t.content),t.offset&&this.setOffset(t.offset),t.title&&this.setTitle(t.title),t.label&&this.setLabel(t.label),t.draggable&&this.setDraggable(!0),this.updateOverlay()},Cs.prototype.updateOverlay=function(t){void 0===t&&(t={}),zs.prototype.updateOverlay.call(this,t);var i=this._y;this._opts.label&&i&&(!i.parentElement&&this.dom&&this.dom.appendChild(i),this.My(),this.Ry())},Cs.prototype.emit=function(t,i){var e=this.getCursor();if(this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(e)),"click"===t){if(this.getClickable()){zs.prototype.emit.call(this,t,i);var n=this.getOptions().topWhenClick;void 0!==n&&n&&this.setTop(!0)}}else"dragstart"===t||"dragging"===t||"dragend"===t?(_t._.$e||i.originEvent.preventDefault(),this.getDraggable()&&zs.prototype.emit.call(this,t,i)):zs.prototype.emit.call(this,t,i);return this},Cs.prototype.toGeometry=function(){var t=this.getPosition();if(t)return{type:"Point",coordinates:t&&t.toJSON()}},Cs.prototype._add=function(t){this._map=t,this._parent=t.pi,this.updateOverlay()},Cs.prototype._createDom=function(t,i){return this.dom=zs.prototype._createDom.call(this,t,i),this.wy(),t},Cs.prototype._createDefaultInnerDom=function(){var t=document.createElement("img");return t.setAttribute("width","19px"),t.setAttribute("height","32px"),t.setAttribute("src",ws.my),this._size=[19,32],t},Cs.prototype._getMarkerOffset=function(t,i){return i},Cs.prototype._getStyleZIndex=function(t){var i;return this._isTop?i=ws.gy:void 0!==t&&(i=t),i},Cs.prototype._createIcon=function(n,o){var r=this,t=n.getImage(),i=n.getSize(),a=n.getImageSize(),e=n.getImageOffset(),s=document.createElement("div");s.className="amap-icon",s.style.overflow="hidden";var h=document.createElement("img");return h.onload=function(){var t=h.width,i=h.height;n.Em([t,i]),r._size=a&&a.length?a:[t,i];var e=r._getSize();r._setIconSize(s,h,e,a),o&&o()},h.onerror=function(){},s.appendChild(h),this._setIconStyle(s,h,{size:i,imageSize:a,imageOffset:e}),h.src=t,s},Cs.prototype._setIconStyle=function(t,i,e){var n=e.size,o=void 0===n?[0,0]:n,r=e.imageSize,a=void 0===r?[0,0]:r,s=e.imageOffset,h=void 0===s?[0,0]:s;i.style.top=h[1]+"px",i.style.left=h[0]+"px",this._setIconSize(t,i,o,a)},Cs.prototype._setIconSize=function(t,i,e,n){var o=e[0],r=e[1],a=n[0],s=n[1];o&&(t.style.width=o+"px"),r&&(t.style.height=r+"px"),a&&s&&(i.style.width=a+"px",i.style.height=s+"px")},Cs.prototype._removeContent=function(){this.dom.innerHTML="",this._opts.label&&this.setLabel(this._opts.label)},Cs.prototype._getD=function(){return this.dom},Cs.prototype.wy=function(){var t=this,i=this._opts,e=i.content,n=i.icon,o=i.text;if(!e&&n){var r="string"==typeof n?new os({image:n}):n,a=this._createIcon(r,function(){t.updateOverlay()});this.dom.appendChild(a)}else if(!e&&!n&&!o){var s=this._createDefaultInnerDom();this._originOpts.anchor||(this._opts.anchor="bottom-center"),this.dom.appendChild(s)}},Cs.prototype.ky=function(t,i){return i||((i=document.createElement("div")).className="amap-marker-label"),i.innerHTML=t,i},Cs.prototype.My=function(){var t=this._style.size,i=this._opts.label,e=i.offset,n=void 0===e?[0,0]:e;_t.oy(n)&&(n=n.toArray());var o=n[0],r=n[1],a=this._y.offsetWidth,s=this._y.offsetHeight,h=this.zy.size=[a,s],l=this.Sy(i,t,h),f=[l[0]+o,l[1]+r],u=f[0],c=f[1];this.zy.top=c,this.zy.left=u},Cs.prototype.Sy=function(t,i,e){var n=t.direction,o=void 0===n?"right":n,r=i[0],a=i[1],s=e[0],h=e[1],l=0,f=0;switch(o){case cs.Nm:l=0,f=-h;break;case cs.top:case cs.$m:l=r/2-s/2,f=-h;break;case cs.Um:l=r,f=-h;break;case cs.right:case cs.Wm:l=r,f=a/2-h/2;break;case cs.center:l=r/2-s/2,f=a/2-h/2;break;case cs.left:case cs.Bm:l=-s,f=a/2-h/2;break;case cs.Gm:l=0,f=a;break;case cs.bottom:case cs.Zm:l=r/2-s/2,f=a;break;case cs.qm:l=r,f=a;break;default:l=r/2-s/2,f=-h}return[l,f]},Cs.prototype.Ry=function(){var t=this.zy,i=t.top,e=t.left,n=this._y;n.style.top=i+"px",n.style.left=e+"px"},Cs.prototype._bindEvents=function(){this.on("dragstart",this.Cy.bind(this)),this.on("dragging",this._dragging.bind(this)),this.on("dragend",this.Ly.bind(this))},Cs.prototype.T_=function(){this.off("dragstart",this.Cy.bind(this)),this.off("dragging",this._dragging.bind(this)),this.off("dragend",this.Ly.bind(this))},Cs.prototype.Cy=function(t){this.Ay(t)},Cs.prototype._dragging=function(t){var i,e=this._dragObjects.sy,n=e.x,o=e.y,r=t.pixel,a=r.x,s=r.y,h=_t.Sp.Ip([a,s],[n,o]),l=h[0],f=h[1],u=_t.Sp.add([l,f],this._points),c=u[0],d=u[1];this._map&&(i=this._map.containerToLngLat([c,d]),this.setPosition(i.toJSON()),this.Ay(t))},Cs.prototype.Ly=function(t){},Cs.prototype.Ay=function(t){this._dragObjects={sy:t.pixel,hy:t.pos,ly:t.lnglat}},Cs);function Cs(t){void 0===t&&(t={});var i=zs.call(this,t,{className:ws.vy})||this;i.type=ws.uy,i.className=ws.uy,i._isTop=!1,i.zy={width:0,height:0,size:[0,0],top:0,left:0,translate:[0,0],zIndex:ws.by},i._opts=_t.assign({},ks,i._opts);var e=i._opts.size,n=i._opts.icon;!e&&n instanceof os&&(e=n.getSize(),i._opts.size=e),e instanceof _t.Size&&(i._opts.size=i._formatSize(e)),t.title&&i.setTitle(t.title),t.label&&i.setLabel(t.label),t.draggable&&i.setDraggable(!0);var o=t.map;return o&&o instanceof th&&i.add(o),i}var As,Is,Ls={getViewport:function(t){return t?[t.clientWidth,t.clientHeight]:[0,0]},n_:function(t,i){var e=t.style[i];if((!e||"auto"===e)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);e=n?n[i]:null}return e&&"auto"!==e||"height"!==i||(e=t.clientHeight+"px"),e&&"auto"!==e||"width"!==i||(e=t.clientWidth+"px"),"auto"===e?null:e},getViewportOffset:function(t){var i,e=0,n=0,o=t,r=document.body,a=document.documentElement;do{if(e+=o.offsetTop||0,n+=o.offsetLeft||0,e+=parseInt(Ls.n_(o,"borderTopWidth"),10)||0,n+=parseInt(Ls.n_(o,"borderLeftWidth"),10)||0,i=Ls.n_(o,"position"),o.offsetParent===r&&"absolute"===i)break;if("fixed"===i){e+=r.scrollTop||a.scrollTop||0,n+=r.scrollLeft||a.scrollLeft||0;break}o=o.offsetParent}while(o);o=t;do{if(o===r)break;e-=o.scrollTop||0,n-=o.scrollLeft||0,!Ls.m()&&_t._.webkit&&(n+=o.scrollWidth-o.clientWidth),o=o.parentNode}while(o);return[n,e]},m:function(){return As||(Is="ltr"===Ls.n_(document.body,"direction"),As=!0),Is},create:function(t,i,e,n){var o=document.createElement(t);if(e&&(o.className=e),i)if(n&&"before"===n){var r=i.firstChild;i.insertBefore(o,r)}else i.appendChild(o);return o},toggleClass:function(t,i,e){e?this.addClass(t,i):this.removeClass(t,i)},hasClass:function(t,i){if(t&&i)return 0<t.className.length&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){t&&i&&(t.classList&&t.classList.add?t.classList.add(i):this.hasClass(t,i)||(t.className+=(t.className?" ":"")+i))},setClass:function(t,i){t&&(t.className=i||"")},removeClass:function(t,e){t&&e&&(t.classList&&t.classList.remove?t.classList.remove(e):t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===e?"":t}).replace(/(^\s+|\s+$)/,""))},watchSize:function(e,n,o){var t=document.createElement("iframe");t.style.cssText="width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",t.onload=function(){t.contentWindow.onresize=i},e.appendChild(t),t.src="about:blank";var r=0,a=0;function i(){o.k=e.getBoundingClientRect(),o.M=[e.clientLeft,e.clientTop];var t=e.offsetWidth,i=e.offsetHeight;t===r&&i===a||(n(t,i),r=t,a=i)}return i(),window.onscroll=i,function(){t.contentWindow.onresize=null}},watchSize2:function(e,n,o){var r=document.createElement("_");r.className="expand";var a=r.appendChild(document.createElement("_"));a.className="shrink";var s=r.appendChild(document.createElement("_"));s.className="expandChild";var h,l,t=a.appendChild(document.createElement("_"));return t.className="shrinkChild",a.style.cssText=r.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",t.style.cssText=s.style.cssText="display:block;height:100%;transition:0s;width:100%",t.style.width=t.style.height="200%",e.appendChild(r),f(),function(){u(),e.removeChild(r)};function f(){u(),o.k=e.getBoundingClientRect(),o.M=[e.clientLeft,e.clientTop];var t=e.offsetWidth,i=e.offsetHeight;t===h&&i===l||(h=t,l=i,s.style.width=2*t+"px",s.style.height=2*i+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,n(t,i)),a.addEventListener("scroll",f),r.addEventListener("scroll",f)}function u(){a.removeEventListener("scroll",f),r.removeEventListener("scroll",f)}},mousePos:function(t,i,e){var n=e.k,o=i;return o.touches&&o.changedTouches&&(o=0<o.touches.length?o.touches[0]:o.changedTouches[o.changedTouches.length-1]),[o.clientX-n.left-e.M[0],o.clientY-n.top-e.M[1]]},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},closest:function(t,i){if(t){if(this.hasClass(t,i))return t;var e=t.parentElement;return e?Ls.closest(e,i):null}return null},fillText:function(t,i){if(t)return void 0!==t.textContent?t.textContent=i:void 0!==t.innerText?t.innerText=i:t.innerHTML=i,t},_L:function(t){for(var i=document.documentElement.style,e=0;e<t.length;e+=1)if(t[e]in i)return t[e];return!1},rotate:function(t,i,e){var n=Ls.kL;if(e=e||{x:t.clientWidth/2,y:t.clientHeight/2},n){var o="";o+=" rotate("+i+"deg)",t.style[n]=o,t.style[Ls.ML[n]+"-origin"]=e.x+"px "+e.y+"px"}else{var r=Math.cos(i*Math.PI/180),a=Math.sin(i*Math.PI/180);if(t.style.filter="progid:DXImageTransform.Microsoft.Matrix()",0<t.filters.length){var s=t.filters.item(0);s.Dx=-e.x*r+e.y*a+e.x,s.Dy=-e.x*a-e.y*r+e.y,s.M11=s.M22=r,s.M12=-(s.M21=a)}}},setCss:function(t,i){t=t instanceof Array?t:[t];for(var e=0;e<t.length;e+=1)for(var n in i)i.hasOwnProperty(n)&&(t[e].style[n]=i[n]);return this},setOpacity:function(t,i){if(t.style)if("opacity"in t.style)t.style.opacity=""+i;else if("filter"in t.style){var e=Math.round(100*i);t.style.filter="",100!==e&&(t.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+e+")")}},ML:{},kL:Is=As=!1};Ls.kL=Ls._L(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]),Ls.ML={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};var $s,Ts={uy:"AMap.InfoWindow",JP:"",XP:"amap-info",QP:121,KP:8,tF:8,iF:[20,20,20,20]},Ds=_t.assign({},vs,{isCustom:!1,closeWhenClickMap:!1,anchor:"bottom-center",autoMove:!0,avoid:Ts.iF}),Fs=($s=ms,_t.Ei(Ps,$s),Ps.prototype.addToGroup=function(t){this.Iy&&this._overlays[this.Iy]&&this.Iy!==t.hS&&this._overlays[this.Iy].remove(),this.Iy=t.hS,$s.prototype.addToGroup.call(this,t)},Ps.prototype.removeFromGroup=function(t){$s.prototype.removeFromGroup.call(this,t),this.Iy=0},Ps.prototype.close=function(){var t=this.Iy,i=this._overlays[t];i&&(this.Iy=0,i.close())},Ps.prototype.vi=function(t){var i=t.target;return this.Iy&&i&&Ls.closest(i,"amap-info")?this._overlays[this.Iy]:null},Ps.prototype.destroy=function(){this.Dy(),$s.prototype.destroy.call(this)},Ps.prototype.Rm=function(){this._map.on("click",this.Py)},Ps.prototype.Dy=function(){this._map.off("click",this.Py)},Ps);function Ps(t){var n=$s.call(this,t,{className:Ts.JP})||this;return n.type=Ts.uy,n.Py=function(t){var i=n.Iy,e=n._overlays[i];!Ls.closest(t.originEvent.target,"amap-info")&&e&&e.getOptions().closeWhenClickMap&&(n.Iy=0,e.close())},n._container=n._parent,n.Rm(),n}var Os,Bs=(Os=gs,_t.Ei(Hs,Os),Hs.prototype.open=function(t,i,e){t&&t instanceof th&&i?(this._opts.visible=!0,this.add(t),this.setPosition(i),this.jy(),this.emit("open"),this.GF()):t&&this._position?(this._opts.visible=!0,this.add(t),this.jy(),this.emit("open"),this.GF()):this._map&&this._position&&(this._opts.visible=!0,this.updateOverlay(),this.emit("open"),this.GF())},Hs.prototype.close=function(){this._parent&&(this._opts.visible=!1,this.updateOverlay(),this.emit("close"))},Hs.prototype.getIsOpen=function(){return!(!this._map||!this._opts.visible)},Hs.prototype.setSize=function(t){t instanceof _t.Size&&(t=t.toArray()),this._opts.size=t,this.updateOverlay()},Hs.prototype.setContent=function(t){void 0===t&&(t=""),Os.prototype.setContent.call(this,t),this.jy()},Hs.prototype.setAnchor=function(t){var i=this.dom&&this.dom.querySelector(".amap-info-contentContainer");if(t&&i){var e=this.g_([].slice.call(i.className.split(" ")));e&&Ls.removeClass(i,e),this._size=[0,0],Ls.addClass(i,t)}Os.prototype.setAnchor.call(this,t)},Hs.prototype.getDraggable=function(){return!1},Hs.prototype.setOptions=function(t){this._opts=_t.assign({},Ds,this._opts,t)},Hs.prototype.updateOverlay=function(t){if(void 0===t&&(t={}),this._map){var i=t.viewChange,e=void 0!==i&&i;this._setStyle(e),this._applyStyle(e);var n=this._getSize();if(this.Fy&&n[0]&&"border-box"===window.getComputedStyle(this.Fy).boxSizing)return}},Hs.prototype._add=function(t){this._map=t,this._parent=t.di,this.updateOverlay()},Hs.prototype._remove=function(){Os.prototype._remove.call(this),this.Ey()},Hs.prototype._createDefaultInnerDom=function(){return document.createElement("div")},Hs.prototype._createDom=function(t,i){var e=this.Ny(t);return this.$y(e,i),t},Hs.prototype._getContentSize=function(){var t,i,e=this._style,n=this._getSize();if(n[0]&&n[1]&&!this._opts.isCustom)t=n[0],i=n[1];else{var o=this.dom.querySelector(".amap-info-contentContainer");o&&(t=o.clientWidth,i=o.clientHeight,this._size=[t,i])}e.width=t+"px",e.height=i+"px",e.size=[t,i]},Hs.prototype._getAnchorOffset=function(t){var i=Os.prototype._getAnchorOffset.call(this,t);return[i[0],i[1]]},Hs.prototype.Ny=function(t){var i=document.createElement("div");Ls.addClass(i,"amap-info-shadowContainer");var e=document.createElement("div");return Ls.addClass(e,"amap-info-contentContainer"),t.style.position="absolute",i.style.position="absolute",t.appendChild(i),t.appendChild(e),e},Hs.prototype.$y=function(t,i){var e=this._opts,n=e.isCustom,o=void 0!==n&&n,r=e.anchor;if(o)"object"==typeof i&&i instanceof HTMLElement?t.appendChild(i):t.innerHTML=i+"";else{var a=this.Fy=document.createElement("div");Ls.addClass(a,"amap-info-content"),Ls.addClass(a,"amap-info-outer"),"object"==typeof i&&i instanceof HTMLElement?a.appendChild(i):a.innerHTML=i?i+"":"";var s=document.createElement("a");Ls.addClass(s,"amap-info-close"),s.innerText="×",a.appendChild(s);var h=document.createElement("div");Ls.addClass(h,"amap-info-sharp"),Ls.addClass(t,r),t.appendChild(a),t.appendChild(h)}},Hs.prototype.jy=function(){var t=this.dom.querySelector(".amap-info-close");t&&t.addEventListener("click",this.close.bind(this))},Hs.prototype.Ey=function(){var t=this,i=this.dom.querySelector(".amap-info-close");i&&i.removeEventListener("click",function(){t.close()})},Hs.prototype.Oy=function(){if(this._position){var t=this._map;if(t&&this._opts.autoMove&&this.dom){for(var i=this._getSize(),e=new _t.Size(i[0],i[1]),n=t.lngLatToContainer(this._position).toArray(),o=this._getOffset(this.getAnchor(),this.getOffset().toArray()),r=_t.Sp.add(n,o),a=_t.Sp.add(r,i),s=t.getSize(),h=[this._opts.avoid||Ts.iF],l=0,f=0,u=0;u<h.length;u+=1){var c=h[u],d=0,p=0;0!==c[3]&&0<(d=c[3]-(r[0]+l))&&(l+=d),0!==c[1]&&(d=s.getWidth()-c[1]-(a[0]+l))<0&&(l+=d),0!==c[0]&&0<(p=c[0]-(r[1]+f))&&(f+=p),0!==c[2]&&(p=s.getHeight()-c[2]-(a[1]+f))<0&&(f+=p)}r=_t.Sp.add(r,[l,f]),a=_t.Sp.add(a,[l,f]);var v=0,m=0;r[0]<0||e.getWidth()>s.getWidth()?v=20-r[0]:s.getWidth()<a[0]&&(v=s.getWidth()-a[0]-25),r[1]<0||e.getHeight()>s.getHeight()?m=5-r[1]:s.getHeight()<a[1]&&(m=s.getHeight()-a[1]-15),m+=f,((v+=l)||m)&&t.panBy(v,m)}}},Hs.prototype.GF=function(){if(this._position){var t=this._map;if(t&&this._opts.autoMove&&this.dom){var i=this._position;_t.Bs(i)&&(i=i.toArray());var e=t.getSize(),n=e.getWidth()||0,o=e.getHeight()||0,r=this._getSize(),a=t.lngLatToContainer(i).toArray(),s=this._getOffset(this.getAnchor(),this.getOffset().toArray()),h=_t.Sp.add(a,s),l=_t.Sp.add(h,r),f=this._opts.avoid||Ts.iF,u=h[0],c=h[1],d=!1;if(h[1]-f[0]<0&&(c=f[0],d=!0),l[0]+f[1]>n&&(u=n-r[0]-f[1],d=!0),l[1]+f[2]>o&&(c=o-f[2]-r[1],d=!0),h[0]-f[3]<0&&(u=f[3],d=!0),d){var p=_t.Sp.Ip([u,c],s),v=t.containerToLngLat(p).toArray(),m=_t.Sp.Ip(v,i),y=t.getCenter().toArray(),x=_t.Sp.Ip(y,m);t.panTo(x)}}}},Hs.prototype.g_=function(t){var i,e=cs;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];if(-1!==t.indexOf(o)){i=o;break}}return i},Hs);function Hs(t){void 0===t&&(t={});var i=Os.call(this,t,{className:Ts.XP,anchor:Ds.anchor})||this;i.type=Ts.uy,i._opts=_t.assign({},Ds,i._opts),i._originOpts.zIndex||(i._opts.zIndex=Ts.QP);var e=i._opts.size;return e instanceof _t.Size&&(i._opts.size=i._formatSize(e)),i.jy(),i}var js,Es="AMap.ContextMenu",Vs=(js=ms,_t.Ei(Ys,js),Ys.prototype.addToGroup=function(t){this.Iy&&this._overlays[this.Iy]&&this.Iy!==t.hS&&this._overlays[this.Iy].remove(),this.Iy=t.hS,js.prototype.addToGroup.call(this,t)},Ys.prototype.removeFromGroup=function(t){js.prototype.removeFromGroup.call(this,t),this.Iy=0},Ys.prototype.vi=function(t){var i=t.target;return this.Iy&&i&&P.closest(i,"amap-menu")?this._overlays[this.Iy]:null},Ys.prototype.destroy=function(){this.Uy(),js.prototype.destroy.call(this)},Ys.prototype.By=function(){this._map.on("viewchange",this.Wy),this._map.on("click",this.Py)},Ys.prototype.Uy=function(){this._map.off("viewchange",this.Wy),this._map.off("click",this.Py)},Ys);function Ys(t){var n=js.call(this,t,{className:""})||this;return n.type=Es,n.className=Es,n.Wy=function(){n.Iy&&n.removeFromGroup(n._overlays[n.Iy])},n.Py=function(t){var i=n.Iy,e=n._overlays[i];!P.closest(t.originEvent.target,"amap-info")&&e&&(n.Iy=0,e.close())},n._container=n._parent,n.By(),n}var Zs,Xs,Js=(Zs=gs,_t.Ei(qs,Zs),qs.prototype.open=function(t,i){t&&i?(this._opts.visible=!0,this.add(t),this.setPosition(i),this.emit("open")):this._map&&this._position&&(this._opts.visible=!0,this.updateOverlay(),this.emit("open"))},qs.prototype.close=function(){this._parent&&(this._opts.visible=!1,this.updateOverlay(),this.emit("close"))},qs.prototype.addItem=function(t,i,e){var n={content:t,fn:i,order:e};this.Zy.push(n),this.qy(this.dom),this.updateOverlay()},qs.prototype.removeItem=function(t,i){for(var e=this.Zy,n=0;n<e.length;n++){var o=e[n];o.content===t&&o.fn===i&&(e.splice(n,1),n--)}this.qy(this.dom),this.updateOverlay()},qs.prototype._add=function(t){this._map=t,this._parent=t.vm,this.updateOverlay()},qs.prototype._createDefaultInnerDom=function(){return document.createElement("div")},qs.prototype._createDom=function(t,i){var e=this.dom=this.Yy();return this._opts.isCustom&&this._opts.content?Zs.prototype._createDom.call(this,e,this._opts.content):this.qy(e),e},qs.prototype.Yy=function(){var t=document.createElement("div");return P.addClass(t,this._className),t},qs.prototype.qy=function(t){var i,e=this.Vy(this.Zy),n=document.createElement("ul");P.addClass(n,"amap-menu-outer");for(var o=0,r=e;o<r.length;o++){var a=r[o];i=this.Xy(a),n.appendChild(i)}t.innerHTML="",t.appendChild(n)},qs.prototype.Vy=function(t){return void 0===t&&(t=[]),t.sort(function(t,i){return isNaN(t.order)||isNaN(i.order)?0:t.order-i.order}),t},qs.prototype.Xy=function(i){var e=this,t=document.createElement("li");return t.innerHTML=i.content,t.addEventListener("click",function(t){i.fn(t),e.hide()}),t},qs);function qs(t){void 0===t&&(t={});var i=Zs.call(this,t,{className:"amap-menu"})||this;return i.type=Es,i.className=Es,i._opts={},i.Zy=[],i._opts=t,i._style.zIndex=140,i}var Ks,Qs=[116.397128,39.916527],th=(Ks=Ya,_t.Ei(ih,Ks),ih.prototype.setCenter=function(t,i,e){void 0===i&&(i=!1),t instanceof _t.LngLat&&(t=t.toJSON()),!i&&this.Ev?this.viewChange({lng:t[0],lat:t[1]},e):this.om({center:t})},ih.prototype.setZoomAndCenter=function(t,i,e,n){void 0===e&&(e=!1),this.Pv||(t=this.getZoom()),i instanceof _t.LngLat&&(i=i.toJSON()),!e&&this.Ev?this.viewChange({lng:i[0],lat:i[1],zoom:t},n):this.om({center:i,zoom:t})},ih.prototype.getBounds=function(){return new ze(this._view.getStatus().bounds)},ih.prototype.getCenter=function(){var t=this._view.getOptions().center,i=t[0],e=t[1];return new _t.LngLat(+i.toFixed(6),+e.toFixed(6))},ih.prototype.setZoom=function(t,i,e){void 0===i&&(i=!1),this.Pv&&(!i&&this.Ev?this.viewChange({zoom:t},e):this.om({zoom:t}))},ih.prototype.getZoom=function(t){return void 0===t&&(t=2),+this._view.getOptions().zoom.toFixed(t)},ih.prototype.zoomIn=function(){this.setZoom(this.getZoom()+1)},ih.prototype.zoomOut=function(){this.setZoom(this.getZoom()-1)},ih.prototype.getPitch=function(){return this._view.getOptions().pitch},ih.prototype.setPitch=function(t,i,e){void 0===i&&(i=!1),!i&&this.Ev?this.viewChange({pitch:t},e):this.om({pitch:t})},ih.prototype.getRotation=function(){return this._view.getOptions().rotation},ih.prototype.setRotation=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=!1);var n=this.getRotation();360<t?t-=360:t<-360&&(t+=360),180<t-n?t-=360:t-n<-180&&(t+=360),!i&&this.Ev?this.viewChange({rotation:t},e):this.om({rotation:t})},ih.prototype.setBounds=function(t){t instanceof ze&&(t=t.toJSON());var i=this.em(t);this.setZoomAndCenter(i[2],[i[0],i[1]])},ih.prototype.panTo=function(t,i){t instanceof _t.LngLat&&(t=t.toJSON()),this.viewChange({lng:t[0],lat:t[1]},i)},ih.prototype.getBindHandler=function(){return this.hx},ih.prototype.panBy=function(t,i,e){var n=this.getSize(),o=n.width/2-t,r=n.height/2-i,a=this.getCenter();if(this.lx&&this.ux){var s=Math.sqrt(t*t+i*i),h=this.getProjection(),l=void 0===this.ux.lng?a.lng:this.ux.lng,f=void 0===this.ux.lat?a.lat:this.ux.lat,u=void 0===this.ux.zoom?this.getZoom():this.ux.zoom,c=void 0===this.ux.rotation?this.getRotation():this.ux.rotation,d=void 0===this.ux.pitch?this.getPitch():this.ux.pitch,p=h.getResolution(u),v=h.project(l,f),m=c/180*Math.PI,y=Math.atan(t/i)-m;i<0&&(y+=Math.PI);var x=s*Math.sin(y),g=s*Math.cos(y);v[0]-=p*x,v[1]+=p*g,this.setCenter([l,f],!0),this.setZoom(u,!0),this.setRotation(c,!0),this.setPitch(d,!0)}this.panTo(this.containerToLngLat([o,r]),e)},ih.prototype.viewChange=function(t,i){var n,o,r,a,s,h=new L(.4,0,.15,1),l=(new L(.67,0,1,.42),new L(.95,.25,.79,1)),f=new L(.18,.66,.55,.86),u=this.getZoom(),c=this.getPitch(),d=this.getRotation(),p=this.getCenter().toJSON(),e=0,v=0,m=0,y=0;this.lx?(_t.Util.cancelAnimFrame(this.lx),this.ux=_t.assign(this.ux,t)):this.ux=t;var x=this.ux,g=x.zoom,b=x.pitch,_=x.rotation,w=x.lng,k=x.lat;if(void 0!==g&&(n=g-u,e=h.h(Math.abs(n/10)),e=1e3*Math.max(Math.min(1,e),.1)),void 0!==b&&(o=b-c,v=Math.abs(16.7*o)),void 0!==_&&(r=_-d,m=Math.abs(16.7*r)),void 0!==w&&void 0!==k){var M=[],S=this._view.getStatus().centerCoord;a=w-p[0],s=k-p[1];var z,R,C=this.getProjection().project(w,k);M[0]=Math.abs(C[0]-S[0])/this.getResolution(),M[1]=Math.abs(C[1]-S[1])/this.getResolution(),z=h.h(Math.min(M[0]/this.getSize().width,1)),R=h.h(Math.min(M[1]/this.getSize().height,1)),y=1e3*Math.max(Math.min(1,R,z),.05,z,R)}var A=Math.max(e,v,m,y),I=0;void 0!==i&&(A=i),this.Ev||(A=-1),function t(){var i={};if(A<=I)return void 0!==g&&(i.zoom=g),void 0!==b&&(i.pitch=b),void 0!==_&&(i.rotation=_),void 0!==w&&void 0!==k&&(i.center=[w,k]),this.om(i),_t.Util.cancelAnimFrame(this.lx),this.lx=!1,void(this.ux={});I+=16.7;var e=Math.min(1,h.p(I/A));void 0!==b&&(i.pitch=o*e+c),void 0!==_&&(i.rotation=r*e+d),void 0!==w&&void 0!==k&&(n&&.5<n?e=f.h(I/A):n&&n<-.5&&(e=l.h(I/A)),i.center=[a*e+p[0],s*e+p[1]]),void 0!==g&&(e=n<0?f.h(I/A):l.h(I/A),i.zoom=n*e+u),this.om(i),this.lx=_t.Util.requestAnimFrame(t.bind(this))}.call(this)},ih.prototype.getContainer=function(){return this.kv},ih.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var i=[],e=[],n=[],o=[],r=0,a=t;r<a.length;r++){var s=a[r];if(_t.px(s))this.addLayer(s);else if(_t.er(s))_t.RF(s)?(this.add(s.getOverlays()),s.setMap(this)):this.am(s);else switch(s.type){case"AMap.Marker":case"AMap.ElasticMarker":case"AMap.Text":i.push(s);break;case"AMap.InfoWindow":e.push(s);break;case"AMap.ContextMenu":n.push(s);break;case"AMap.LabelMarker":o.push(s)}}this.pi.add(i),this.di.add(e),this.vm.add(n),o.length&&this.rm().add(o),this.setNeedUpdate(!0)},ih.prototype.remove=function(t){Array.isArray(t)||(t=[t]);for(var i=[],e=[],n=[],o=[],r=0,a=t;r<a.length;r++){var s=a[r];if(_t.er(s))_t.RF(s)?(this.remove(s.getOverlays()),s.setMap(null)):this.$F.remove(s);else if(_t.px(s))this.removeLayer(s);else switch(s.type){case"AMap.Marker":case"AMap.ElasticMarker":case"AMap.Text":i.push(s);break;case"AMap.InfoWindow":e.push(s);break;case"AMap.ContextMenu":n.push(s);break;case"AMap.LabelMarker":o.push(s)}}o.length&&this.rm().remove(o),this.pi.remove(i),this.di.remove(e),this.vm.remove(n),this.setNeedUpdate(!0)},ih.prototype.lngLatToCoords=function(t){var i;return _t.Bs(t)&&(t=[t.lng,t.lat]),(i=this.getProjection()).project.apply(i,t)},ih.prototype.coordsToLngLat=function(t){var i,e=(i=this.getProjection()).unproject.apply(i,t);return new AMap.LngLat(e[0],e[1])},ih.prototype.lngLatToContainer=function(t){_t.Bs(t)&&(t=[t.lng,t.lat]);var i=t[0],e=t[1],n=this._view,o=n.getOptions().zoom||Ya.t_[1],r=n.lnglatToContainer(+i,+e,o),a=r[0],s=r[1];return new _t.Pixel(a,s)},ih.prototype.lnglatToContainer=function(){console.log&&console.log("请使用 lngLatToContainer 方法替代。")},ih.prototype.containerTolnglat=function(){console.log&&console.log("请使用 containerToLngLat 方法替代。")},ih.prototype.containerToLngLat=function(t){var i,e;e=t instanceof Array?(i=t[0],t[1]):(i=t.x,t.y);var n=this._view.containerTolnglat(i,e),o=n[0],r=n[1];return new _t.LngLat(o,r)},ih.prototype.coordToContainer=function(t){var i;return(i=this._view)._u.apply(i,t)},ih.prototype.containerToCoord=function(t){return t instanceof _t.Pixel&&(t=t.toArray()),this._view.ku(t[0],t[1])},ih.prototype.pixelToLngLat=function(t,i){var e,n;void 0===i&&(i=this.getZoom()),n=t instanceof Array?(e=t[0],t[1]):(e=t.x,t.y);var o=_t.V[this._view.au()].unproject(e,n,i),r=o[0],a=o[1];return new _t.LngLat(r,a)},ih.prototype.pixelTolnglat=function(){console.log&&console.log("请使用 pixelToLngLat 方法替代。")},ih.prototype.unproject=function(){console.log&&console.log("请使用 pixelToLngLat 方法替代。")},ih.prototype.lngLatToPixel=function(t,i){t instanceof _t.LngLat&&(t=t.toJSON());var e=t[0],n=t[1];void 0===i&&(i=this.getZoom());var o=_t.V[this._view.au()].project(e,n,i),r=o[0],a=o[1];return new _t.Pixel(r,a)},ih.prototype.project=function(t,i){return console.log&&console.log("请使用 lngLatToPixel 方法替代。"),this.lngLatToPixel(t,i)},ih.prototype.lnglatToPixel=function(t,i){return console.log&&console.log("请使用 lngLatToPixel 方法替代。"),this.lngLatToPixel(t,i)},ih.prototype.lnglatToPixelArray=function(t,i){t instanceof _t.LngLat&&(t=t.toJSON());var e=t[0],n=t[1];return void 0===i&&(i=this.getZoom()),_t.V[this.getView().au()].project(e,n,i)},ih.prototype.getTileCoordByLngLat=function(t,i,e){t instanceof _t.LngLat&&(t=t.toJSON());var n=t[0],o=t[1],r=_t.V[this.getView().au()].project(n,o,e),a=Math.floor(r[0]/256),s=Math.floor(r[1]/256);return new _t.ca(e,a,s)},ih.prototype.addOverlay=function(t){this.am(t),this.setNeedUpdate(!0)},ih.prototype.removeOverlay=function(t){this.ar(t),this.setNeedUpdate(!0)},ih.prototype.getResolution=function(t){var i=t?t.kT:this.getCenter().kT;return this.getProjection().getResolution(this.getZoom())*Math.cos(i*Math.PI/180)},ih.prototype.getScale=function(t){return this.getResolution()*(t||96)/.0254},ih.prototype.getCity=function(n,t){Da.get(AMap.getConfig().server+"/v3/geocode/regeo",{extensions:"",output:"json",location:t||this.getCenter().toJSON()},function(t,i){if("complete"===t&&i.status+""=="1"){var e=i.regeocode.addressComponent;n({province:e.province,city:e.city instanceof Array?"":e.city,citycode:e.citycode instanceof Array?"":e.citycode,district:e.district instanceof Array?"":e.district})}else n({})})},ih.prototype.setCity=function(h,l){var f=this;Da.get(AMap.getConfig().server+"/v3/config/district",{output:"json",subdistrict:"0",extensions:"all",keywords:h},function(t,i){if("complete"===t&&i.status+""=="1"){var e=i.districts;if(e&&e.length){var n=e[0];if(/[^\w]+/.test(h)){var o=_t.find(e,function(t){return t.name===h});o&&o!==n&&(n=o)}try{var r=n.center.split(","),a=n.level,s=void 0;switch(a){case"city":s=10;break;case"province":s=7;break;case"district":s=12;break;case"country":s=4;break;default:s=12}-1!==n.name.indexOf("市")&&(s=10),f.setZoomAndCenter(s,r),l&&l.call(f,r,s)}catch(t){}}}else l(null,null)})},ih.prototype.setFitView=function(t,i,e,n){if(void 0===i&&(i=!1),void 0===e&&(e=[60,60,60,60]),void 0===n&&(n=Math.min(17.5,Ya.t_[1])),_t.FF(t)&&(t=t.getAllOverlays()),!(t instanceof Array&&0===t.length)){e=Boolean(e)?e:[60,60,60,60],!(t=t||[])||t instanceof Array||(t=[t]),t&&0!==t.length||(t=this.getAllOverlays());var o=this.nm(t);if(o){var r,a=o.toJSON(),s=this.em(a,e,n);return"d"===_t._.baseRender&&(s[2]=Math.floor(s[2])),i&&(r=0),this.viewChange({lng:s[0],lat:s[1],zoom:s[2]},r),o}}},ih.prototype.addControl=function(t){t.addTo(this),this.controls.push(t)},ih.prototype.removeControl=function(t){t.remove?t.remove():t.removeFrom&&t.removeFrom(this,this.controls);for(var i=0;i<this.controls.length;i++)if(this.controls[i]===t)return void this.controls.splice(i-1,1)},ih.prototype.L$=function(){},ih.prototype.D$=function(){return"zh_cn"},ih.prototype.set=function(t,i){switch(t){case"layers":this.setLayers(i);break;case"projection":break;case"pitch":this.setPitch(i);break;case"debug":this.debug=i;break;case"showLabel":this.showLabel=i;break;case"zoom":this.setZoom(i);break;case"center":this.setCenter(i);break;case"rotation":this.setRotation(i);break;case"dragEnable":this.setStatus({dragEnable:i});break;case"zoomEnable":this.setStatus({zoomEnable:i});break;case"scrollWheel":this.setStatus({scrollWheel:i});break;case"jogEnable":this.setStatus({jogEnable:i});break;case"doubleClickZoom":this.setStatus({doubleClickZoom:i});break;case"keyboardEnable":this.setStatus({keyboardEnable:i});break;case"animateEnable":this.setStatus({animateEnable:i});break;case"pitchEnable":this.setStatus({pitchEnable:i});break;case"touchZoom":this.setStatus({touchZoom:i});break;case"isHotspot":this.setStatus({isHotspot:i});break;case"style":this.setStyle(i)}},ih.prototype.setMapStyle=function(t){this.f_(t),this.setStatus({mapStyle:t}),this.indoorMap&&this.indoorMap.hide()},ih.prototype.getMapStyle=function(){var t=this.getStatus();if(t&&t.mapstyleUrl){var i=t.mapstyleUrl;return"normal"===t.mapstyleUrl&&(i="amap://styles/normal"),i}return""},ih.prototype.getAllOverlays=function(i){var t=this.$F.getAllOverlays(),e=_t.Pt(t),n=this.pi.getAllOverlays(),o=this.di.getAllOverlays();_t.vx(n,function(t){e.push(t)}),o&&o.length&&_t.Util.Ig(e,o);for(var r=0,a=this.zv;r<a.length;r++){var s=a[r];s instanceof Rr&&_t.Util.Ig(e,s.getAllOverlays())}return e=e.filter(function(t){return!t._opts.innerOverlay&&(!i||-1<t.className.toLocaleLowerCase().indexOf(i))&&!0})},ih.prototype.clearMap=function(){for(var t=this.getAllOverlays(),i=0;i<t.length;i++)t[i].remove()},ih.prototype.clearInfoWindow=function(){this.di&&this.di.close()},ih.prototype.addImage=function(t,i){this.C$&&this.C$.addImage(t,i)},ih.prototype.getImage=function(t){if(this.C$)return this.C$.getImage(t)},ih.prototype.getFeatures=function(){return this.Cw},ih.prototype.setFeatures=function(t){this.Cw=t;for(var i=this.yS(),e=this.getLayers(),n=0;n<e.length;n++){var o=e[n];"AMap.Buildings"===o.CLASS_NAME&&o.ro().u$&&(i?o.show():o.hide())}this.setNeedUpdate(!0)},ih.prototype.hasLayer=function(i){var t=this.getLayers();return-1<_t.findIndex(t,function(t){return t===i})},ih.prototype.setMask=function(t){var i;t&&(this.c$=t,this.d$||(this.d$=new xa({zIndex:-10,visible:!0,path:this.c$}),this.addLayer(this.d$)),null!==(i=this.d$)&&void 0!==i&&i.setMask(this.c$))},ih.prototype.cancelMapAnimate=function(){this.lx&&(_t.Util.cancelAnimFrame(this.lx),this.lx=-1,this.ux={})},ih.prototype.am=function(t){this.$F.add(t)},ih.prototype.ar=function(t){this.sm().remove(t)},ih.prototype.setStyle=function(t){this._setStyle(t)},ih);function ih(t,i){void 0===i&&(i={zoom:9,center:[116.397128,39.916527],rotation:0,pitch:0,viewMode:"2D"});var e=this,n=null;if(t instanceof HTMLDivElement)n=t;else{var o=document.getElementById(t);null!==o&&(n=o)}if(null===n)throw Error("Map container div not exist");i.zooms=i.zooms||Ya.t_;var r=!1;if(void 0===i.zoom&&(r=!0,i.zoom=Math.max(Math.min(i.zooms[1],12),i.zooms[0])),i.center=i.center?_t.Bs(i.center)?i.center.toJSON():i.center:Qs,i.rotation=i.rotation||0,i.layers=i.layers||[],i.baseRender=_t._.isWebGL?"w":"d",i.showIndoorMap=i.showIndoorMap||!1,e=Ks.call(this,n,i)||this,r){var a=e.em(Xs)[2];e.setZoom(a,!0)}e.pi=new Ms(e),e.di=new Fs(e),e.vm=new Vs(e),e.hx=new es(e),e.hx.Xt(),e.plugin=AMap.plugin;for(var s=0;s<i.layers.length;s++){var h=i.layers[s];h&&"AMap.IndoorMap"===h.CLASS_NAME&&h.setMap(e)}return!i.showIndoorMap||"normal"!==e.c_&&"amap://styles/normal"!==e.c_||e.addLayer(e.indoorMap=new AMap.IndoorMap({zIndex:8,opacity:1,visible:!0,map:e})),e}var eh,nh=(eh=_t.lw,_t.Ei(oh,eh),oh.prototype.Lo=function(){return{id:this.No,type:"image",tileUrl:this.Be,bounds:this.ir,canvas:this.canvas,zooms:this.xt}},oh.prototype.co=function(){return this.No},oh.prototype.ro=function(){return{visible:this._visible,opacity:this.tl,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},oh);function oh(t){var i=eh.call(this,t)||this;return i.CLASS_NAME="AMap.ImageLayer",i.No=i.Be=t.url||t.tileUrl,i.ir=t.bounds,i.Qh=t.zIndex||6,i.tl=void 0===t.opacity?1:t.opacity,i._visible=void 0===t.visible||t.visible,i.xt=void 0===t.zooms?[2,20]:t.zooms,i.canvas=t.canvas,i}var rh,ah={tileUrl:"",url:"",bounds:[0,0,0,0],opacity:1,visible:!0,zIndex:4,zooms:[2,22]},sh=(rh=nh,_t.Ei(hh,rh),hh.prototype.getImageUrl=function(){return this.Be},hh.prototype.setImageUrl=function(t){t&&(this.Be=t,this.uo.Vh(this.No).Fo(!1),this.map.setNeedUpdate(!0))},hh.prototype.getBounds=function(){return this.ir},hh.prototype.setBounds=function(t){t&&(this.ir=t,this.map.setNeedUpdate(!0))},hh);function hh(t){void 0===t&&(t=ah);var i=this;if(!t.tileUrl&&!t.url)throw new Error("ImageLayer need an Url");return t.bounds=t.bounds||ah.bounds,t.opacity=void 0===t.opacity?ah.opacity:t.opacity,t.visible=void 0===t.visible?ah.visible:t.visible,t.zIndex=void 0===t.zIndex?ah.zIndex:t.zIndex,t.canvas=void 0,(i=rh.call(this,t)||this).rT(),i}var lh,fh={url:"",tileUrl:"",bounds:[0,0,0,0],opacity:1,visible:!0,zooms:[2,22],zIndex:6},uh=(lh=nh,_t.Ei(ch,lh),ch.prototype.setCanvas=function(t){this.canvas=t,this.reFresh()},ch.prototype.getElement=function(){return this.canvas},ch.prototype.getBounds=function(){return this.ir},ch.prototype.reFresh=function(){this.map.setNeedUpdate(!0)},ch);function ch(t){void 0===t&&(t=fh);var i=this;return t.bounds=t.bounds||fh.bounds,t.opacity=void 0===t.opacity?fh.opacity:t.opacity,t.visible=void 0===t.visible?fh.visible:t.visible,t.tileUrl="",(i=lh.call(this,t)||this).rT(),i.CLASS_NAME="AMap.CanvasLayer",i}var dh,ph=(dh=_t.lw,_t.Ei(vh,dh),vh.prototype.ro=function(){return!this.eP&&this.map&&this.gx(this.canvas),{visible:this._visible,opacity:this.tl,zIndex:this.Qh,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF,kv:this._container,JD:this.UF}},vh.prototype.Lo=function(){return{id:this.No,type:"custom",zooms:this.xt}},vh.prototype.co=function(){return this.No},vh.prototype.setOpacity=function(t){dh.prototype.setOpacity.call(this,t),this.canvas.style.opacity=""+this.tl},vh.prototype.setMap=function(t){dh.prototype.setMap.call(this,t),this.gx(this.canvas)},vh.prototype.setzIndex=function(t){this.Qh=t,this._container.style.zIndex=this.Qh+""},vh.prototype.gx=function(t){this._container=document.createElement("div"),this._container.style.zIndex=this.Qh+"",this._container.className="amap-e",this._container.appendChild(t),this.map.do.appendChild(this._container),this.eP=!0},vh);function vh(t,i){var e=dh.call(this,i)||this;return e.CLASS_NAME="AMap.CustomLayer",e.eP=!1,e.UF=!1,e.render=i.render||function(){},e.canvas=t,e.Qh=i.zIndex||11,e.tl=void 0===i.opacity?1:i.opacity,e._visible=void 0===i.visible||i.visible,e.UF=void 0!==i.JD&&i.JD,e.xt=i.zooms||[2,22],e.canvas.style.opacity=""+e.tl,e.canvas.style.display=e._visible?"block":"none",e.map&&e.gx(e.canvas),e}var mh,yh=(mh=ph,_t.Ei(xh,mh),xh);function xh(t,i){var e=mh.call(this,t,i)||this;return e.rT(),e}var gh,bh={zIndex:120,opacity:1,zooms:[2,20],cursor:"pointer",JD:!0},_h=(gh=_t.Event,_t.Ei(wh,gh),wh.prototype.setMap=function(t){t?(this._map=t).add(this.a$):this._map&&(this.clear(),this._map.remove(this.a$))},wh.prototype.getMap=function(){return this._map?this._map:null},wh.prototype.getData=function(){return this.VL},wh.prototype.setData=function(t){var i=this;t&&(this.VL=t,this.XD(),AMap.Util.requestAnimFrame(function(){i.emit("complete")}))},wh.prototype.n_=function(){return 1===this.Ze.length?this.Ze[0]:this.Ze},wh.prototype.setStyle=function(t){if(t){Array.isArray(t)||(t=[t]);var i=this.Ze,e=[];if(i&&i.length)for(var n=0;n<t.length;n++){var o=t[n],r=i[n]||i[0];e.push(AMap.extend({},r,o))}else e=t;this.Ze=e,this.XD()}},wh.prototype.getOpacity=function(){return this._opts.opacity},wh.prototype.setOpacity=function(t){this._opts.opacity=t,this.a$&&this.a$.setOpacity(t)},wh.prototype.getzIndex=function(){return this._opts.zIndex},wh.prototype.setzIndex=function(t){this._opts.zIndex=t,this.a$&&this.a$.setzIndex(t)},wh.prototype.getZooms=function(){return this._opts.zooms||[2,20]},wh.prototype.setZooms=function(t){this._opts.zooms=t,this.a$&&this.a$.setZooms(t)},wh.prototype.getCursor=function(){return this._opts.cursor||"default"},wh.prototype.show=function(){this.a$.show()},wh.prototype.hide=function(){this.a$.hide()},wh.prototype.clear=function(){this.a$.clear(),this.VL=[]},wh.prototype.XD=function(){var t=this.VL,i=this.Ze,e=[],n=this.getCursor();if(t&&i){for(var o=0,r=t;o<r.length;o++){var a=r[o],s=a.lnglat,h=a.style,l=void 0===h?0:h;if(s){var f=i[l]?i[l]:i[0],u=f.url,c=f.anchor,d=void 0===c?new AMap.Pixel(0,0):c,p=f.size,v=(f.rotation,f.zIndex),m=void 0===v?l:v,y=p.width?p.toArray():p,x=d.x?d.toArray():d,g=new AMap.LabelMarker({position:s,zIndex:m,cursor:n,icon:{image:u,size:y,anchor:x}});g.qD=a,this.Rm(g),e.push(g)}}this.jT=e,this.a$.clear(),this.a$.add(e)}},wh.prototype.Rm=function(t){var r=this;t.on(["click","dblclick","mouseover","mousemove","mouseout","mouseup","mousedown","touchstart","touchend"],function(t){var i=t.type,e=r._map,n=r.getCursor();if("default"!==n&&e){var o=e.getDefaultCursor();"mouseover"===i?e.setCursor(n):"mouseout"===i&&e.setCursor(o)}r.QD(t)})},wh.prototype.QD=function(t){var i=t.type,e=this.KD(t);this.emit(i,e)},wh.prototype.KD=function(t){var i=t.target;return t.target=this,{target:t.target,type:t.type,data:i.qD||{}}},wh);function wh(t,i){var e=gh.call(this)||this;e.CLASS_NAME="AMap.MassMarks",e._opts=AMap.extend({},bh,i);var n=e._opts,o=n.zIndex,r=n.opacity,a=n.zooms,s=n.style;return e.a$=new AMap.LabelsLayer({zIndex:o,opacity:r,zooms:a,collision:!1,allowCollision:!1,VT:!0}),e.setData(t),e.setStyle(s),e.XD(),e}var kh,Mh="AMap.Text",Sh="amap-overlay-text-container",zh=(kh=Rs,_t.Ei(Rh,kh),Rh.prototype.getText=function(){return this._opts.text},Rh.prototype.setText=function(t){var i=this.wx(t);this.setContent(i)},Rh.prototype.setStyle=function(t){t&&(this._x=t,this._size=[0,0],this.updateOverlay())},Rh.prototype.updateOverlay=function(t){void 0===t&&(t={}),this.dom&&!_t.isEmpty(this._x)&&this.kx(this._x),kh.prototype.updateOverlay.call(this,t)},Rh.prototype.wx=function(t){var i=document.createElement("div");return P.addClass(i,Sh),i.innerHTML=t||"",i},Rh.prototype.kx=function(t){void 0===t&&(t={});var i=this.dom.querySelector("."+Sh);if(i)for(var e in t)t.hasOwnProperty(e)&&(i.style[e]=t[e])},Rh);function Rh(t){void 0===t&&(t={});var i=kh.call(this,t)||this;return i.className=Mh,i.type=Mh,i._x={},i._size=[0,0],t.style&&(i._x=t.style),t.text&&i.setText(t.text),i}function Ch(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];var n,o,r,a=Array.prototype.slice.call(arguments,1);for(n=0,o=a.length;n<o;n+=1)for(var s in r=a[n]||{})if(r.hasOwnProperty(s)){var h=r[s];"function"!=typeof h?t[s]=h:t.prototype[s]=h}return t}var Ah,Ih=(Ah=_t.Event,_t.Ei(Lh,Ah),Lh.prototype.addTo=function(t){this.map=t,this.map.controls.push(this),t.getControlContainer().appendChild(this._container),t.on("beforeDestroy",this.remove.bind(this))},Lh.prototype.removeFrom=function(t){t?(t.off("beforeDestroy",this.remove.bind(this)),t.getControlContainer().removeChild(this._container),delete this.map):this.map&&(this.map.off("beforeDestroy",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},Lh.prototype.remove=function(){this.map&&(this.map.off("beforeDestroy",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},Lh.prototype.show=function(){this._container.style.display="block",this.emit("show"),this._visible=!0},Lh.prototype.hide=function(){this._container.style.display="none",this.emit("hide"),this._visible=!1},Lh.prototype.initContainer=function(){this._className?(this._container=P.create("div",null,"amap-control amap-"+this._className),void 0===this._config.visible||this._config.visible||(this._container.style.display="none")):this._container=P.create("div",null,"amap-control"),this.Pb()},Lh.prototype.Pb=function(){var t=0,i=0,e=0,n=0;switch(this._config.offset&&0<this._config.offset.length&&(t=this._config.offset[0]+t,i=this._config.offset[1]+i,e=this._config.offset[0]+e,n=this._config.offset[1]+n),t+="px",i+="px",e+="px",n+="px",this._config.position){case"LT":this._container.style.top=i,this._container.style.left=t,this._container.style.bottom="",this._container.style.right="";break;case"RT":this._container.style.top=i,this._container.style.right=e,this._container.style.bottom="",this._container.style.left="";break;case"LB":this._container.style.bottom=n,this._container.style.left=t,this._container.style.top="",this._container.style.right="";break;case"RB":this._container.style.bottom=n,this._container.style.right=e,this._container.style.top="",this._container.style.left="";break;default:this._container.style.top=this._config.position.top||"",this._container.style.left=this._config.position.left||"",this._container.style.right=this._config.position.right||"",this._container.style.bottom=this._config.position.bottom||""}},Lh);function Lh(t){var i=Ah.call(this)||this;return i._visible=!0,i._config=t,i._visible=void 0===t.visible||t.visible,i}var $h,Th=window.navigator,Dh={ua:Th.userAgent,mobile:_t._.$e,plat:_t._.plat,mac:_t._.mac,windows:_t._.windows,ios:_t._.ios,iPad:_t._.iPad,iPhone:_t._.iPhone,android:_t._.android,android23:_t._.android23,chrome:_t._.chrome,firefox:_t._.firefox,safari:_t._.safari,wechat:_t._.wechat,uc:_t._.SL,qq:_t._.qq,ie:_t._.ie,ie6:_t._.ie6,ie7:_t._.ie7,ie8:_t._.ielt9&&!_t._.ie7&&!_t._.ie6,ie9:_t._.ie9,ie10:_t._.ie10,ie11:_t._.ie11,edge:_t._.edge,ielt9:_t._.ielt9,baidu:_t._.baidu,isLocalStorage:_t._.RL,isGeolocation:!!Th.geolocation,mobileWebkit:_t._.mobileWebkit,mobileWebkit3d:_t._.mobileWebkit3d,mobileOpera:!!_t._.mobileOpera,retina:_t._.Ue,touch:!!_t._.touch,msPointer:!!_t._.msPointer,pointer:!!_t._.pointer,webkit:_t._.webkit,ie3d:_t._.ie3d,webkit3d:_t._.webkit3d,gecko3d:_t._.gecko3d,opera3d:_t._.opera3d,any3d:_t._.any3d,isCanvas:_t._.isCanvas,isSvg:_t._.isSvg,isVML:_t._.ie,isWorker:!!window.Worker,isWebsocket:!!window.WebSocket,isWebGL:_t._.isWebGL,baseRender:_t._.baseRender},Fh={zooms:[16.8,22],opacity:1,heightFactor:1,visible:!0,zIndex:11,wallColor:[.94,.94,.94,.9],roofColor:[.89,.89,.86,.9],u$:!1},Ph=($h=_t.BuildingLayer,_t.Ei(Oh,$h),Oh.prototype.setStyle=function(t){this.fL=t,this.uL()},Oh.prototype.ro=function(){return{zooms:this.xt,heightFactor:this.Q_,visible:this._visible,zIndex:this.Qh,opacity:this.tl,wallColor:this.sz,roofColor:this.rz,vS:this.fL,To:this,u$:this.cL,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Oh.prototype.uL=function(){this.map&&(this.Vh().reload(),this.map.setNeedUpdate(!0))},Oh);function Oh(t){void 0===t&&(t=Fh);var i=$h.call(this)||this;return i.cL=!1,i.xt=void 0===t.zooms?Fh.zooms:t.zooms,i.xt[0]=Math.max(i.xt[0],16.8),i.tl=void 0===t.opacity?Fh.opacity:t.opacity,i.Q_=void 0===t.heightFactor?Fh.heightFactor:t.heightFactor,i._visible=void 0===t.visible?Fh.visible:t.visible,i.Qh=void 0===t.zIndex?Fh.zIndex:t.zIndex,i.sz=void 0!==t.wallColor&&_t.Util.color2RgbaArray(t.wallColor),i.rz=void 0!==t.roofColor&&_t.Util.color2RgbaArray(t.roofColor),i.AF=void 0===t.depthTest||Boolean(t.depthTest),i.cL=t.u$,i.rT(),i}var Bh,Hh=(Bh=sr,_t.Ei(jh,Bh),jh.prototype.has=function(t){return!!this.source&&-1<this.source.getAllOverlays().indexOf(t)},jh.prototype.clear=function(){if(this.source){var t=this.source.getAllOverlays();this.remove(t.slice(0))}},jh.prototype.setOptions=function(t){if(this.source)for(var i=0,e=this.source.getAllOverlays();i<e.length;i++)e[i].setOptions(t)},jh.prototype.query=function(t){if(this.source)return this.source.rr({lnglat:t})},jh.prototype.getBounds=function(){if(this.source){var t=this.getAllOverlays();if(0<t.length){for(var i=void 0,e=0;e<t.length;e++)if(i){var n=t[e].getBounds();n&&i.union(n)}else i=(i=t[e].getBounds())&&i.clone();return i}}},jh);function jh(){return null!==Bh&&Bh.apply(this,arguments)||this}var Eh,Vh={high:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(230,142,0)"},unHigh:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(171,171,171)"}},Yh=(Eh=_t.lw,_t.Ei(Zh,Eh),Zh.prototype.Do=function(t){return(this.Jh=t).HF(this),this.Jh},Zh.prototype.p$=function(){var t;this.$F=new Hh({zIndex:this.Qh,visible:this._visible,TF:!0}),null!==(t=this.map)&&void 0!==t&&t.addLayer(this.$F)},Zh.prototype.v$=function(){var t;null!==(t=this.map)&&void 0!==t&&t.removeLayer(this.$F)},Zh.prototype.destroy=function(){Eh.prototype.destroy.call(this),this.$F.destroy()},Zh.prototype.yD=function(){return{show:this.xD}},Zh.prototype.mD=function(t){this.xD=t},Zh.prototype.cD=function(){var e=this;if(this.dD)return!1;this.dD=!0,this._map.on("moveend",function(){var t=e._map.getZoom(),i=e.VR;e.VR.showId,i&&i.centerId&&i.indoor&&(!e.ZT(i.indoor)||t<e.xt[0]?(e.e$&&(e.e$.hide(),e.xD=!1),e.nD()):e.e$&&e.VR.visible&&(e.mL||e.e$.show(),e.xD=!0))})},Zh.prototype.uD=function(){for(var t=this.VR,i=t.indoor,e=t.centerId,n=Object.keys(i),o=Vh,r=0;r<n.length;r++){var a=n[r];if(i[a]&&i[a].outline)for(var s=i[a].outline,h=0;h<s.length;h++){var l=s[h],f=l.getOptions();f.strokeColor=a===e?o.high.strokeColor:o.unHigh.strokeColor,l.setOptions(f)}}},Zh.prototype.BT=function(){var t=this;setTimeout(function(){t._emit("complete"),t._map&&t._map.emit("indoor_create")},500)},Zh.prototype.bL=function(t){this.VR.opacity=t,this.gL()},Zh.prototype.wL=function(t){this.VR.zIndex=t,this.gL()},Zh.prototype.ZI=function(){return this.VR},Zh.prototype.KI=function(t){this.VR=t},Zh.prototype.ro=function(){return{zooms:[17,23],visible:this._visible,opacity:this.tl,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Zh.prototype.Lo=function(){return{id:this.No,type:"indoor",zooms:[17,22],url:""}},Zh.prototype.co=function(){return this.No},Zh.prototype.getMap=function(){return this._map},Zh.prototype.n$=function(t,i){this.VR.floorInfo||(this.VR.floorInfo={}),this.VR.floorInfo[t]=i},Zh.prototype._emit=function(t,i){return Eh.prototype.emit.call(this,t,i),this},Zh.prototype.showId=function(t){this.VR.showId=t},Zh.prototype.setBar=function(t){this.e$=t},Zh.prototype.setBarOpt=function(t){this.VR.defaultBarFloor=t},Zh.prototype._hideLayer=function(t){this.VR.visible=t,this.DT(t),this._hideBar(!t),t?this.$F.show():this.$F.hide(),this.gL()},Zh.prototype._hideBar=function(t){this.mL=t,this.VR.hideFloorBar=t,this.e$&&t?this.e$.hide():this.e$&&this.e$.show()},Zh.prototype._showLabels=function(t){this.VR.showLabels=t;var i=this._map&&this._map.showLabel;this.VR.labelsLayer&&t&&i?this.VR.labelsLayer.show():this.VR.labelsLayer&&this.VR.labelsLayer.hide()},Zh.prototype.setShowId=function(t){this.VR.hasId=t},Zh.prototype.update=function(){this.gL()},Zh.prototype._getSelectedBuildingId=function(){return this.VR.centerId},Zh.prototype._getSelectedBuilding=function(){return this.VR.building},Zh.prototype.setRenderData=function(t){this.VR=_t.assign(this.VR,t)},Zh.prototype.getIntersectPoly=function(t){var i=!1,e=t.getBounds(),n=this._map&&this._map.getBounds();return e&&n&&(i=n.intersects(e)),i},Zh.prototype.getIntersect=function(t){if(!t)return!1;for(var i=!1,e=this._map&&this._map.getBounds(),n=0;n<t.length;n++){var o=t[n],r=new AMap.LngLat(o[0],o[1]);if(i=e.contains(r))return!0}return i},Zh.prototype.YR=function(t,d){var p=this;try{var v=new XMLHttpRequest;v.onreadystatechange=function(){if(4===v.readyState&&200===v.status){for(var t=v.response,i=fn.getUnifyJson(t),e=0;e<i.length;e++)if(0===i[e].status){var n=i[e],o=n.floor,r=n.building,a=n.status,s=n.id,h=o.floor.properties.index,l={data:{}};l.data[s]||(l.data[s]={}),l.data[s].building=r,l.data[s].data||(l.data[s].data={});var f={floor:o,status:a,id:s,building:r};if(l.data[s].data[h]=f,r&&r.properties&&r.properties.outside_outline){var u=r.properties.outside_outline,c=new AMap.Polygon({path:u});p._map.setFitView(c)}}d&&d()}},v.open("GET",t,!0),v.responseType="arraybuffer",v.send()}catch(t){}},Zh.prototype.DT=function(t){for(var i=this.VR.indoor,e=Object.keys(i),n=0;n<e.length;n++){var o=i[e[n]];if(o.polygons)for(var r=0;r<o.polygons.length;r++){var a=o.polygons[r];t?a.show():a.hide()}if(o.markers)for(var s=0;s<o.markers.length;s++){var h=o.markers[s];t?h.show():h.hide()}}},Zh.prototype.ZT=function(t){for(var i=Object.keys(t),e=0;e<i.length;e++){var n=i[e];if(this._map&&t[n].outline){var o=t[n].outline,r=this.getIntersectPoly(o[0]);if(r)return r}}return!1},Zh.prototype.gL=function(){},Zh.prototype.nD=function(){for(var t=this.VR.indoor,i=Object.keys(t),e=0;e<i.length;e++){var n=i[e],o=t[n];o.polygons&&this.$F.remove(o.polygons),o&&o.markers&&0<o.markers.length&&this.VR.labelsLayer&&this.VR.labelsLayer.remove(o.markers),delete t[n]}},Zh);function Zh(t){var i=Eh.call(this)||this;return i.CLASS_NAME="AMap.IndoorLayer",t=t||{},i.No="indoor",i._visible=!0,i.Qh=t.zIndex||5,i.tl=t.opacity||1,i.mL=t.hideFloorBar||!1,i.xL=t.cursor||"auto",i.xt=[17,22],i.xD=!1,i.dD=!1,0===t.opacity&&(i.tl=0),i.VR={opacity:i.tl,zIndex:i.Qh,visible:i._visible,cursor:i.xL,centerId:null,centerFloor:null,indoor:{},hideFloorBar:i.mL,showLabels:!0,reRender:!1,floorInfo:{},indoorState:{},centerBuilding:{}},t&&t.map&&(i._map=t.map,i.cD()),i._config=AMap.getConfig(),i.BT(),i}function Xh(t){return _t._.isWebGL?new Mn(t):new _t.TileLayer(_t.Ln({id:"_defaultLayer_"+_t.Util.sx(),tileUrl:AMap.getConfig().y_},t))}var Jh,qh="gl_custom",Qh=(Jh=_t.lw,_t.Ei(Kh,Jh),Kh.prototype.ro=function(){return{visible:this._visible,opacity:this.tl,zIndex:this.Qh,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Kh.prototype.Lo=function(){return{id:qh,type:qh,zooms:this.xt}},Kh.prototype.co=function(){return qh},Kh.prototype.setMap=function(t){Jh.prototype.setMap.call(this,t)},Kh.prototype.setzIndex=function(t){this.Qh=t},Kh);function Kh(t){var i=Jh.call(this,t)||this;return i.CLASS_NAME="AMap.GLCustomLayer",i.init=t.init||function(t){},i.render=t.render||function(t,i,e){},i.Qh=t.zIndex||120,i.tl=void 0===t.opacity?1:t.opacity,i._visible=void 0===t.visible||t.visible,i.xt=t.zooms||[2,22],i}var tl,il=(tl=Qh,_t.Ei(el,tl),el);function el(t){var i=tl.call(this,t)||this;return i.rT(),i}var nl,ol=(nl=_t.Event,_t.Ei(rl,nl),rl.prototype.setMap=function(t){var i=this;return t&&t!==this._map&&(this._map=t,_t.forEach(this.zv,function(t){i._map&&!i._map.hasLayer(t)&&t.setMap(i._map)})),this},rl.prototype.hasLayer=function(i){return!!_t.find(this.zv,function(t){return t===i})},rl.prototype.setOptions=function(o){var r=this.zv;return _t.vx(o,function(t,i){for(var e=0;e<r.length;e++){var n=r[e];if("AMap.Layer"===n.el)switch(i){case"visible":t?n.show():n.hide();break;case"opacity":n.setOpacity&&n.setOpacity(t);break;case"zIndex":n.setzIndex&&n.setzIndex(t);break;case"zooms":n.setZooms&&n.setZooms(t)}else n.setOptions&&n.setOptions(o)}}),this},rl.prototype.eachLayer=function(t){if(_t.isFunction(t))for(var i=0;i<this.zv.length;i++)t(this.zv[i],i,this.zv)},rl.prototype.addLayer=function(t){this.hasLayer(t)||(this.zv.push(t),t.setMap(this._map))},rl.prototype.addLayers=function(t){if(0<t.length)for(var i=0;i<t.length;i++){var e=t[i];this.addLayer(e)}},rl.prototype.removeLayer=function(t){for(var i=0;i<this.zv.length;i++)t===this.zv[i]&&this.zv.splice(i,1);return t.setMap(null),t},rl.prototype.removeLayers=function(t){if(t&&0<t.length)for(var i=0;i<t.length;i++){var e=t[i];this.removeLayer(e)}},rl.prototype.getLayers=function(){return this.zv},rl.prototype.clearLayers=function(){for(var t=0;t<this.zv.length;t++){var i=this.zv[t];this.removeLayer(i)}},rl.prototype.hide=function(){for(var t=0;t<this.zv.length;t++)this.zv[t].hide();return this},rl.prototype.show=function(){for(var t=0;t<this.zv.length;t++)this.zv[t].show();return this},rl.prototype.on=function(t,i){for(var e=0;e<this.zv.length;e++){var n=this.zv[e];n.on instanceof Function&&i instanceof Function&&n.on(t,i)}return this},rl.prototype.reload=function(){for(var t=0;t<this.zv.length;t++){var i=this.zv[t];i.reload&&i.reload()}return this},rl);function rl(t){var i=nl.call(this)||this;if(i.zv=[],i._map=null,t&&0<t.length)for(var e=0;e<t.length;e++){var n=t[e];i.addLayer(n)}return i}function al(){console.log("jsapi2.0 AMap.Heatmap is renamed, please use AMap.HeatMap"),console.log("jsapi2.0  AMap.Heatmap 已重命名, 请使用 AMap.HeatMap")}var sl,hl=(sl=Yh,_t.Ei(ll,sl),ll.prototype.showIndoorMap=function(t,i,e){var n=1;if(i&&(n=i),t){this.pL=t,sl.prototype.showId.call(this,t),sl.prototype.n$.call(this,t,n),this.pL=t;var o=[],r=this._config.server+"/v3/indoor/indoormaps?";o.push("poiid="+t),o.push("floor="+n),o.push("version=0"),o.push("s=rsv3"),o.push("from=indoorH5Map"),o.push("servicetype=unify"),o.push("key="+this._config.key);var a=r+o.join("&");sl.prototype.YR.call(this,a)}},ll.prototype.showFloor=function(t,i){this.pL&&this.showIndoorMap(this.pL,t)},ll.prototype.show=function(){this._hideLayer(!0)},ll.prototype.hide=function(){this._hideLayer(!1)},ll.prototype.getMap=function(){return this._map},ll.prototype.setMap=function(t){var i=(this._map=t).getStatus().animateEnable;sl.prototype.setRenderData.call(this,{animateState:i}),t.setStatus({animateEnable:!1}),sl.prototype.setMap.call(this,t),sl.prototype.cD.call(this)},ll.prototype.setzIndex=function(t){sl.prototype.wL.call(this,t)},ll.prototype.showFloorBar=function(){this._hideBar(!1)},ll.prototype.hideFloorBar=function(){this._hideBar(!0)},ll.prototype.setOpacity=function(t){sl.prototype.bL.call(this,t)},ll.prototype.getOpacity=function(){return sl.prototype.getOpacity.call(this)},ll.prototype.showLabels=function(){this._showLabels(!0)},ll.prototype.hideLabels=function(){this._showLabels(!1)},ll.prototype.getSelectedBuildingId=function(){return sl.prototype._getSelectedBuildingId.call(this)},ll.prototype.getSelectedBuilding=function(){return sl.prototype._getSelectedBuilding.call(this)},ll);function ll(t){var i=sl.call(this,t)||this;if(i.CLASS_NAME="AMap.IndoorMap",i._config=AMap.getConfig(),i.pL="",t&&t.map){i._map=t.map;var e=t.map.getStatus().animateEnable;sl.prototype.setRenderData.call(i,{animateState:e})}return i}var fl=(Object.defineProperty(ul.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!0,nb:!0}),ul.prototype.addOverlay=function(t){this._overlays.indexOf(t)<0&&(this._overlays.push(t),this._map&&this._map.add(t))},ul.prototype.addOverlays=function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];this.addOverlay(n)}},ul.prototype.getOverlays=function(){return this._overlays},ul.prototype.hasOverlay=function(t){return-1<this._overlays.indexOf(t)},ul.prototype.removeOverlay=function(t){this.hasOverlay(t)&&(_t.Util.deleteItemFromArray(this._overlays,t),this._map&&this._map.remove(t))},ul.prototype.removeOverlays=function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];this.removeOverlay(n)}},ul.prototype.clearOverlays=function(){this._map&&this._map.remove(this._overlays),this._overlays=[]},ul.prototype.eachOverlay=function(t){_t.forEach(this._overlays,t)},ul.prototype.setMap=function(t){this._map=t},ul.prototype.show=function(){for(var t=0,i=this._overlays;t<i.length;t++)i[t].show()},ul.prototype.hide=function(){for(var t=0,i=this._overlays;t<i.length;t++)i[t].hide()},ul.prototype.setOptions=function(t){for(var i=0,e=this._overlays;i<e.length;i++)e[i].setOptions(t)},ul.prototype.on=function(i,e,n,o){this.eachOverlay(function(t){t.on(i,e,n,o)})},ul.prototype.off=function(i,e,n,t){this.eachOverlay(function(t){t.off(i,e,n)})},ul);function ul(t){void 0===t&&(t=[]),this.className="Overlay.OverlayGroup",this._overlays=[],this.addOverlays(t)}var cl,dl=(cl=Kr,_t.Ei(pl,cl),pl.prototype.Cy=function(t){this.P$=!0,_t._.$e||t.originEvent.preventDefault(),this.Ay(t)},pl.prototype.Ly=function(t){this.P$=!1,_t._.$e||t.originEvent.preventDefault()},pl.prototype.Ay=function(t){this._dragObjects={sy:t.pixel,hy:t.pos,ly:t.lnglat}},pl.prototype.Mx=function(){this.on("dragstart",this.Cy.bind(this)),this.on("dragging",this._dragging.bind(this)),this.on("dragend",this.Ly.bind(this))},pl.prototype.Rx=function(){this.off("dragstart",this.Cy.bind(this)),this.off("dragging",this._dragging.bind(this)),this.off("dragend",this.Ly.bind(this))},pl);function pl(){var t=null!==cl&&cl.apply(this,arguments)||this;return t.P$=!1,t._dragObjects={sy:{x:0,y:0},hy:[0,0],ly:{lng:0,lat:0}},t}var vl,ml=(vl=dl,_t.Ei(yl,vl),Object.defineProperty(yl.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!0,nb:!0}),yl.prototype.Zx=function(t){this._map=t,this._opts&&(this._opts.map=t)},yl.prototype.setMap=function(t){this._map!==t&&(this._map&&this._map.remove(this),t&&t.add(this))},yl.prototype.getMap=function(){return this._map||null},yl.prototype.O$=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},yl.prototype.destroy=function(){this.Rx(),this._beforeRemoveMap&&this._beforeRemoveMap(),this._map=null},yl.prototype.remove=function(){this.setMap(null)},yl.prototype.hide=function(){this.visible&&(this.visible=!1,this._map&&this._map.setNeedUpdate(!0),this.emit("hide",{target:this}))},yl.prototype.show=function(){this.visible||(this.visible=!0,this._map&&this._map.setNeedUpdate(!0),this.emit("show",{target:this}))},yl.prototype.setDraggable=function(t){return this._opts.draggable=t},yl.prototype.to=function(){this._map&&this._map.setNeedUpdate(!0)},yl.prototype.getExtData=function(){var t=this._opts;if(t&&t.extData)return t.extData},yl.prototype.setExtData=function(t){this.setOptions({extData:t})},yl.prototype.getCursor=function(){var t=this._opts.cursor;return!t&&this._map&&(t=this._map.getDefaultCursor()),t},yl.prototype.emit=function(t,i){var e=this.getCursor();return this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(e)),("dragstart"!==t&&"dragging"!==t&&"dragend"!==t||this.getDraggable())&&vl.prototype.emit.call(this,t,i),this},yl.prototype.getDraggable=function(){var t=this._opts.draggable;return void 0!==t&&t},yl.prototype.setMoveDeltaCoord=function(t){this.zx=t},yl.prototype.getDeltaCoord=function(){return this.zx},yl.prototype.b_=function(t){this.zx=t},yl.prototype._getDetalLocal=function(t){var i=this.Sx;return _t.Util.hp(i,t)},yl.prototype._beforeRemoveMap=function(){var t;this.F$&&(null!==(t=this.F$.parentNode)&&void 0!==t&&t.removeChild(this.F$),delete this.F$)},yl.prototype._mergeOptions=function(t){var i=_t.assign({},t);for(var e in this.Cx)this.Cx.hasOwnProperty(e)&&void 0===t[e]&&(this._opts&&void 0!==this._opts[e]?i[e]=this._opts[e]:i[e]=_t.clone(this.Cx[e]));return i},yl.prototype._dragging=function(t){if(this.getDraggable()){var i=this._dragObjects.hy,e=t.pos[0]-i[0],n=t.pos[1]-i[1],o=this._dragObjects.sy;if(this.F$&&"d"===this._map.baseRender){var r=t.pixel.x-o.x,a=t.pixel.y-o.y,s=this.B$;this.B$=[r+s[0],a+s[1]];var h=" translate("+this.B$[0]+"px, "+this.B$[1]+"px)";this.F$.style.transform=h,this.F$.style.webkitTransform=h,this.F$.style.MozTransform=h,this.F$.style.msTransform=h}else this.to();var l=this.getDeltaCoord();this.b_([e+l[0],n+l[1]]),this.Ay(t)}},yl.prototype.Ly=function(t){this.Ay(t),this.F$&&"d"===this._map.baseRender?this.moveWithPixel(this.B$[0],-1*this.B$[1]):this.moveWithPos(this.zx[0],this.zx[1]),this.b_([0,0]),this.B$=[0,0],this.F$&&(this.F$.style.transform="",this.F$.style.webkitTransform="",this.F$.style.MozTransform="",this.F$.style.msTransform="")},yl.prototype.moveWithPixel=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.warn("please implement movePixel")},yl.prototype.moveWithPos=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.warn("please implement moveWithPos")},yl.prototype._checkMap=function(){this._opts&&this._opts.map!==this._map&&this.setMap(this._opts.map)},yl);function yl(){var t=vl.call(this)||this;return t.className="Overlay",t.visible=!0,t.Lx=!1,t.zx=[0,0],t.B$=[0,0],t.Ax=[0,0],t.hS=_t.Util.stamp(t),t.Mx(),t}var xl,gl=(xl=ml,_t.Ei(bl,xl),bl.prototype.Tx=function(t){if(t)if(_t.Bs(t)){var i=_t.at.getProjection("EPSG:3857").project(t.KL,t.kT);this.Sx=_t.lcs.getLocalByCoord(i)}else i=_t.at.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=_t.lcs.getLocalByCoord(i)},bl.prototype.getPath=function(){if(this._opts&&this._opts.path)return _t.parseLngLatData(_t.yn(this._opts.path))},bl.prototype.getBounds=function(){var t=this.ir;if(t){var i=t.getSouthWest(),e=t.getNorthEast();return this._map&&(i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx),e=this._map.getView().ru().moveWithPos([e.KL,e.kT],this.zx)),new ze(i,e)}},bl.prototype.getArea=function(){if(this._opts&&this._opts.path){var t=_t.jsonLngLatData(this._opts.path);return _t.ys(t)?+_t.GeometryUtil.ringArea(t).toFixed(2):_t.Ox(t)?+_t.E$(t).toFixed(2):+_t.N$(t).toFixed(2)}return 0},bl.prototype.setPath=function(t){t&&(this.reset(),this.Ix(t),this.to())},bl.prototype.reset=function(){this.Dx&&this.Dx.reset(),this.Px&&this.Px.reset()},bl.prototype.destroy=function(){this.Dx&&(this.Dx.destroy(),delete this.Dx),this.Px&&(this.Px.destroy(),delete this.Px),xl.prototype.destroy.call(this)},bl.prototype.contains=function(t){if(!this.jx())return!1;if(this.ir&&!this.ir.contains(t))return!1;var i=this._opts.path,e=_t.parseLngLatData(t);return _t.ys(i)?_t.pointInRing([e.lng,e.lat],i):_t.Ox(i)?_t.U$([e.lng,e.lat],i):_t.W$([e.lng,e.lat],i)},bl.prototype.jx=function(){return this._opts&&this._opts.path&&0<this._opts.path.length},bl.prototype.moveWithPixel=function(t,i){var e=this._map,n=_t.at.getProjection(e.getView().au()),o=this._opts.path;if(_t.ys(o)){var r=_t.G$(o,[t,i],e.getZoom(),n);this.setPath(r)}else if(_t.Ox(o)){var a=_t.H$(o,[t,i],e.getZoom(),n);this.setPath(a)}else a=_t.V$(o,[t,i],e.getZoom(),n),this.setPath(a)},bl.prototype.moveWithPos=function(t,i){var e=this._map,n=_t.at.getProjection(e.getView().au()),o=this._opts.path.slice(0);if(_t.ys(o)){var r=_t.Z$(o,[t,i],n);this.setPath(_t.parseLngLatData(r))}else if(_t.Ox(o)){var a=_t.Y$(o,[t,i],n);this.setPath(_t.parseLngLatData(a))}else a=_t.J$(o,[t,i],n),this.setPath(_t.parseLngLatData(a))},bl.prototype.rD=function(t){this._opts.path=_t.jsonLngLatData(t);var i=_t.K$(t);i&&(this.ir=ze.ms(i))},bl.prototype.X$=function(t){for(var i=[],e=0,n=t;e<n.length;e++){for(var o=n[e],r=[],a=[],s=0,h=o[0];s<h.length;s++){var l=h[s],f=_t.at.getProjection("EPSG:3857").project(l[0],l[1]);a.push([f[0],f[1]])}a.length&&(a.push(a[0].slice()),r.push(a));for(var u=1,c=o.length;u<c;u++){var d=o[u],p=[];if(d&&d.length){for(var v=0,m=d;v<m.length;v++)l=m[v],f=_t.at.getProjection("EPSG:3857").project(l[0],l[1]),p.push([f[0],f[1]]);p.push(p[0].slice()),r.push(p)}}i.push(r)}this.q$=i},bl.prototype.Q$=function(t){this.JL();var i=this.Dx,e=this.Px;this.Tx(t[0][0][0]);for(var n=0,o=t;n<o.length;n++){for(var r=o[n],a=this.Sx.center,s=[],h=[],l=[],f=[],u=[],c=0,d=r[0];c<d.length;c++){var p=d[c],v=_t.at.getProjection("EPSG:3857").project(p[0],p[1]);s.push(v[0]-a[0],v[1]-a[1]),h.push(p)}for(var m=1,y=r.length;m<y;m++){for(var x=[],g=[],b=0,_=r[m];b<_.length;b++)p=_[b],_t.Bs(p)?(x.push(p.pos[0]-a[0],p.pos[1]-a[1]),g.push(p.toJSON())):(v=_t.at.getProjection("EPSG:3857").project(p[0],p[1]),x.push(v[0]-a[0],v[1]-a[1]),g.push(p));l.push(x),f.push(g)}var w=[];for(m=0,y=s.length;m<y;m+=2)w.push(_t.Bu(s[m],s[m+1]));_t.equals(w[0],w[w.length-1])||w.push(_t.Ex(w[0]));var k=s.length;for(m=0;m<l.length;m++)u.push(k/2),k+=l[m].length,_t.Util.Ig(s,l[m]);for(i.Nx(s,u),e.Nx(w,{lineJoin:"miter"}),m=0;m<l.length;m++){var M=[],S=0;for(y=(x=l[m]).length;S<y;S+=2)M.push(_t.Bu(x[S],x[S+1]));M.push(_t.Bu(x[0],x[1])),e.Nx(M,{lineJoin:"miter"})}}},bl.prototype.JL=function(){this.Dx||(this.Dx=new _t.K_),this.Px||(this.Px=new _t.J_)},bl);function bl(t){var n=xl.call(this)||this;return n.className="Overlay.CorePolygon",n.Ix=function(t){n._opts.path=_t.jsonLngLatData(t);var i=_t.K$(t);if(i){n.ir=ze.ms(i);var e=n._map;e&&("d"===e.baseRender?n.X$(i):n.Q$(i))}},n.Tx(t),n}var _l,wl={map:void 0,fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:[2,20]},kl=(_l=gl,_t.Ei(Ml,_l),Ml.prototype.getOptions=function(){return Ch({},this._opts)},Ml.prototype.setOptions=function(t){var i=this._mergeOptions(t),e=!_t.isEqual(this._opts.path,i.path);this._opts=i,this._checkMap(),e&&this.setPath(this._opts.path),this.to()},Ml.prototype.init=function(t){this.reset();var i=t||this._opts;this._opts=this._mergeOptions(i),this.setPath(this._opts.path),this._map&&this._map.setNeedUpdate(!0)},Ml.prototype.render=function(t,i){},Ml.prototype.O$=function(t,i){},Ml.prototype.toGeometry=function(){if(this._opts.path){var t=this._opts.path.slice(0);return _t.ys(t)?{type:"Polygon",coordinates:[t]}:_t.Ox(t)?{type:"Polygon",coordinates:t}:{type:"MultiPolygon",coordinates:t}}},Ml.prototype.toString=function(){var t=this._opts.path;return _t.ys(t)?""+t.join(";"):_t.Ox(t)?""+_t.map(t,function(t){return""+t.join(";")}).join("|"):_t.tL(t)?_t.map(t,function(t){return _t.map(t,function(t){return""+t.join(";")}).join("|")}).join("^"):""},Ml);function Ml(t){void 0===t&&(t={});var i=this,e=t.path;if(_t.iL(e)){var n=e[0];i=_l.call(this,n)||this}else i=_t.eL(e)?(n=e[0][0],_l.call(this,n)||this):_t.yL(e)?(n=e[0][0][0],_l.call(this,n)||this):_l.call(this,void 0)||this;return i.className="Overlay.Polygon",i.Cx=_t.assign({path:void 0},wl),i._opts=i._mergeOptions(t),i._opts.path&&i.rD(i._opts.path),i._checkMap(),i}var Sl,zl=(Sl=ml,_t.Ei(Rl,Sl),Rl.prototype.hide=function(){this.visible=!1,this.ib&&this.ib.hide(),this._map&&this._map.setNeedUpdate(!0)},Rl.prototype.show=function(){this.visible=!0,this.ib&&this.ib.show(),this._map&&this._map.setNeedUpdate(!0)},Rl.prototype.toGeometry=function(){if(this.ib)return this.ib.toGeometry()},Rl.prototype.destroy=function(){this.ib&&this.ib.destroy(),Sl.prototype.destroy.call(this)},Rl.prototype.getOptions=function(){return this._opts},Rl.prototype.getArea=function(){return this.ib?this.ib.getArea():0},Rl.prototype.getBounds=function(){if(this.ib)return this.ib.getBounds()},Rl.prototype.render=function(t,i){this.ib&&this.ib.render(t,i)},Rl.prototype.b_=function(t){Sl.prototype.b_.call(this,t),this.ib&&this.ib.b_(t)},Rl.prototype._beforeRemoveMap=function(){Sl.prototype._beforeRemoveMap.call(this),this.ib&&delete this.ib.F$},Rl);function Rl(){var i=null!==Sl&&Sl.apply(this,arguments)||this;return i._afterSetMap=function(t){i.ib&&i.ib.Zx(t)},i}var Cl,Al=(Cl=zl,_t.Ei(Il,Cl),Object.defineProperty(Il.prototype,"F$",{get:function(){if(this.ib&&this.ib.F$)return this.ib.F$},eb:!0,nb:!0}),Il.prototype.init=function(t){var i=t||this._opts;this._opts=this._mergeOptions(i),this.setBounds(i.bounds)},Il.prototype.setBounds=function(t){if(t){if(this._opts.bounds=t,this.ib){this.ib.Zx(this._map);var i=this.ob(t);this.ib.setPath(i)}else this.ib=new kl(this.ab(this._opts)),this.ib&&(this.ib.Zx(this._map),this.ib.init());this._map&&this._map.setNeedUpdate(!0)}},Il.prototype.moveWithPixel=function(t,i){var e=this._map,n=this._opts.bounds,o=n.southWest.toJSON(),r=n.northEast.toJSON(),a=this._map.getView().ru().moveWithPixel(o,[t,i],e.getZoom()),s=this._map.getView().ru().moveWithPixel(r,[t,i],e.getZoom()),h=new ze(a,s);this.setBounds(h)},Il.prototype.moveWithPos=function(t,i){var e=this._opts.bounds,n=e.southWest.toJSON(),o=e.northEast.toJSON(),r=this._map.getView().ru().moveWithPos(n,[t,i]),a=this._map.getView().ru().moveWithPos(o,[t,i]),s=new ze(r,a);this.setBounds(s)},Il.prototype.setOptions=function(t){var i=this._mergeOptions(t),e=!_t.isEqual(this._opts.bounds,i.bounds);this._opts=i,this._checkMap(),this.ib&&e?(this.setBounds(i.bounds),this.ib.setOptions(this.ab(this._opts))):this.ib&&this.ib.setOptions(t),this.to()},Il.prototype.getCenter=function(){if(this._opts.bounds)return this._opts.bounds.getCenter()},Il.prototype.O$=function(t,i){this.ib&&this.ib.O$(t,i)},Il.prototype.ab=function(t){var i=this.ob(t.bounds),e=_t.Ln({path:i},t);return delete e.bounds,delete e.map,e},Il.prototype.ob=function(t){var i=t.getSouthWest(),e=t.getNorthEast();return[new _t.LngLat(i.KL,i.kT,!0),new _t.LngLat(e.KL,i.kT,!0),new _t.LngLat(e.KL,e.kT,!0),new _t.LngLat(i.KL,e.kT,!0)]},Il);function Il(t){void 0===t&&(t={});var i=Cl.call(this)||this;return i.className="Overlay.Rectangle",i.Cx=_t.assign({bounds:void 0},wl),i.contains=function(t){return!!i.ib&&i.ib.contains(t)},i._opts=i._mergeOptions(t),i._checkMap(),i}var Ll,$l=(Ll=zl,_t.Ei(Tl,Ll),Tl.prototype.init=function(t){var i=t||this._opts;this._opts=this._mergeOptions(i),this.setCenterAndRadius(this._opts.center,this._opts.radius)},Tl.prototype.setCenter=function(t){this.setCenterAndRadius(t,this._opts.radius)},Tl.prototype.setRadius=function(t){this.setCenterAndRadius(this._opts.center,t)},Tl.prototype.getCenter=function(){var t=_t.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new _t.LngLat(i[0],i[1])},Tl.prototype.getRadius=function(){return this._opts.radius},Tl.prototype.setCenterAndRadius=function(t,i){if(this._opts.center=t,this._opts.radius=i,this.ib){this.ib.Zx(this._map);var e=this.sb(t,i);this.ib.setPath(e)}else this.ib=new kl(this.ab(this._opts)),this.ib&&(this.ib.Zx(this._map),this.ib.init());this._map&&this._map.setNeedUpdate(!0)},Tl.prototype.moveWithPixel=function(t,i){var e=this._map,n=_t.parseLngLatData(this._opts.center),o=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],e.getZoom());this.setCenter(o)},Tl.prototype.moveWithPos=function(t,i){var e=_t.parseLngLatData(this._opts.center),n=this._map.getView().ru().moveWithPos([e.KL,e.kT],[t,i]);this.setCenter(n)},Tl.prototype.setOptions=function(t){var i=this._mergeOptions(t),e=!_t.isEqual(this._opts.center,i.center)||!_t.isEqual(this._opts.radius,i.radius);this._opts=i,this._checkMap(),this.ib&&e?this.ib.setOptions(this.ab(this._opts)):this.ib&&this.ib.setOptions(t),this.to()},Tl.prototype.O$=function(t,i,e){},Tl.prototype.ab=function(t){var i=this.sb(t.center,t.radius),e=_t.assign({},t);return e.path=i,delete e.center,delete e.radius,delete e.map,e},Tl.prototype.sb=function(t,i){var e=[],n=_t.parseLngLatData(t),o=_t.at.getProjection("EPSG:3857");if(n){_t.Bs(n)?o.project(n.KL,n.kT):o.project(n[0],n[1]);for(var r=_t._.$e,a=r?89:359,s=(r?4:1)*Math.PI/180,h=i[0],l=i[1],f=0,u=a;f<=u;f++){var c=f*s,d=h*Math.cos(c),p=l*Math.sin(c);e.push(n.offset(d,p))}}return e},Tl);function Tl(t){void 0===t&&(t={});var i=Ll.call(this)||this;return i.className="Overlay.Ellipse",i.Cx=_t.assign({center:void 0,radius:void 0},wl),i.contains=function(t){return!!i.ib&&i.ib.contains(t)},i._opts=i._mergeOptions(t),i._checkMap(),i}var Dl,Fl=(Dl=zl,_t.Ei(Pl,Dl),Pl.prototype.init=function(t){var i=t||this._opts;this._opts=this._mergeOptions(i),this.setCenterAndRadius(this._opts.center,this._opts.radius)},Pl.prototype.setCenter=function(t){this.setCenterAndRadius(t,this._opts.radius)},Pl.prototype.setRadius=function(t){this.setCenterAndRadius(this._opts.center,t)},Pl.prototype.getCenter=function(){var t=_t.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new _t.LngLat(i[0],i[1])},Pl.prototype.getRadius=function(){return parseFloat(this._opts.radius)},Pl.prototype.setCenterAndRadius=function(t,i){if(this._opts.center=t,this._opts.radius=i,this.ib){this.ib.Zx(this._map);var e=this.sb(t,i);this.ib.setPath(e)}else this.ib=new kl(this.ab(this._opts)),this.ib&&(this.ib.Zx(this._map),this.ib.init());this._map&&this._map.setNeedUpdate(!0)},Pl.prototype.render=function(t,i){this.ib&&this.getRadius()&&(this.ib.setMoveDeltaCoord(this.zx),this.ib.render(t,i))},Pl.prototype.moveWithPixel=function(t,i){var e=this._map,n=_t.parseLngLatData(this._opts.center),o=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],e.getZoom());this.setCenter(o)},Pl.prototype.moveWithPos=function(t,i){var e=_t.parseLngLatData(this._opts.center),n=this._map.getView().ru().moveWithPos([e.KL,e.kT],[t,i]);this.setCenter(n)},Pl.prototype.setOptions=function(t){var i=this._mergeOptions(t),e=!_t.isEqual(this._opts.center,i.center)||!_t.isEqual(this._opts.radius,i.radius);this._opts=i,this._checkMap(),this.ib&&e?this.ib.setOptions(this.ab(this._opts)):this.ib&&this.ib.setOptions(t),this.to()},Pl.prototype.O$=function(t,i,e){},Pl.prototype.ab=function(t){var i=this.sb(t.center,t.radius),e=_t.assign({},t);return e.path=i,delete e.center,delete e.radius,delete e.map,e},Pl.prototype.sb=function(t,i){var e=[],n=_t.parseLngLatData(t),o=_t.at.getProjection("EPSG:3857");if(n)for(var r=o.project(n.KL,n.kT),a=r[0],s=r[1],h=6*Math.PI/180,l=Math.cos(n.kT*Math.PI/180),f=0;f<=60;f++){var u=f*h,c=i*Math.cos(u)/l,d=i*Math.sin(u)/l,p=o.unproject(a+c,s+d);e.push(p)}return e},Pl);function Pl(t){void 0===t&&(t={});var i=Dl.call(this)||this;return i.className="Overlay.Circle",i.Cx=_t.assign({center:void 0,radius:1e3},wl),i.contains=function(t){return!!i.ib&&i.ib.contains(t)},i._opts=i._mergeOptions(t),i._checkMap(),i}var Ol=(Bl.prototype.wb=function(t){var i=this._b.length;return this._b.kb(t[0],t[1]),this._b.length-i},Bl.prototype.upload=function(t){this.Kx||(this.destroy(),this.Kx=!0,this.zs=t.fe(this._b.Mb,_t.zb.Rb))},Bl.prototype.destroy=function(){this.Kx=!1,this.zs&&(this.zs.context.deleteBuffer(this.zs),delete this.zs)},Bl.prototype.reset=function(){this._b=new _t.zb,this.Kx=!1},Bl);function Bl(){this._b=new _t.zb,this.Kx=!1}var Hl,jl=(Hl=ml,_t.Ei(El,Hl),El.prototype.Tx=function(t){if(t)if(_t.Bs(t)){var i=_t.at.getProjection("EPSG:3857").project(t.KL,t.kT);this.Sx=_t.lcs.getLocalByCoord(i)}else i=_t.at.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=_t.lcs.getLocalByCoord(i)},El.prototype.setCenter=function(t){t&&(this._opts.center=_t.parseLngLatData(t),this.ir=new ze(this._opts.center,this._opts.center),this._map&&"d"!==this._map.baseRender&&this.XL(t),this.to())},El.prototype.destroy=function(){this.Sb&&(this.Sb.destroy(),delete this.Sb),Hl.prototype.destroy.call(this)},El.prototype.reset=function(){this.Sb&&this.Sb.reset()},El.prototype.toGeometry=function(){if(this._opts.center){var t=_t.parseLngLatData(this._opts.center);return{type:"Point",coordinates:t&&t.toJSON()}}},El.prototype.XL=function(t){this.Sb||(this.Sb=new Ol);var i=_t.parseLngLatData(t);this.reset(),this.Tx(t);var e=this.Sx.center,n=this._map.getView().ru().project(i.KL,i.kT);this.Sb.wb([n[0]-e[0],n[1]-e[1]])},El);function El(t){var i=Hl.call(this)||this;return i.className="Overlay.Circle",i.Cx=_t.assign({},wl,{center:void 0,radius:20}),i.Tx(t),i}var Nl,Wl=(Nl=jl,_t.Ei(Ul,Nl),Ul.prototype.render=function(t,i){},Ul.prototype.init=function(t){var i=t||this._opts;this._opts=this._mergeOptions(i),this.setCenter(this._opts.center)},Ul.prototype.setRadius=function(t){this._opts.radius=t,this.to()},Ul.prototype.getCenter=function(){var t=_t.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new _t.LngLat(i[0],i[1])},Ul.prototype.getRadius=function(){return this._opts.radius},Ul.prototype.moveWithPixel=function(t,i){var e=this._map,n=_t.parseLngLatData(this._opts.center),o=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],e.getZoom());this.setCenter(o)},Ul.prototype.moveWithPos=function(t,i){this._map;var e=_t.parseLngLatData(this._opts.center),n=this._map.getView().ru().moveWithPos([e.KL,e.kT],[t,i]);this.setCenter(n)},Ul.prototype.setOptions=function(t){var i=this._mergeOptions(t),e=!_t.isEqual(this._opts.center,i.center);this._opts=i,this._checkMap(),e&&this.setCenter(i.center),this.to()},Ul.prototype.getOptions=function(){return Ch({},this._opts)},Ul.prototype.getBounds=function(){return this.ir},Ul.prototype.Ib=function(){var t=this._opts,i=t.radius+(t.strokeWeight||0);return Math.min(i,64)},Ul);function Ul(t){void 0===t&&(t={});var r=Nl.call(this,t.center?t.center:void 0)||this;return r.contains=function(t){if(!r._map)return!1;var i=r._map.lngLatToContainer(t);return r.containsWithPixel(i)},r.containsWithPixel=function(t){if(!r._map)return!1;if(!r._opts.center)return!1;var i=r.Ib(),e=r._map.lngLatToContainer(r._opts.center);if(Math.abs(e.x-t.x)>i||Math.abs(e.y-t.y)>i)return!1;var n=_t.Db(t.toJSON(),e.toJSON()),o=r._map.getView().Pu||0;return n/Math.cos(o)<i},r.className="Overlay.CircleMarker",r.Cx=_t.assign({},wl,{center:void 0,radius:20}),r._opts=r._mergeOptions(t),r._checkMap(),r}var Gl,Vl=(Gl=ml,_t.Ei(Yl,Gl),Yl.prototype.Tx=function(t){if(t)if(_t.Bs(t)){var i=_t.at.getProjection("EPSG:3857").project(t.KL,t.kT);this.Sx=_t.lcs.getLocalByCoord(i)}else i=_t.at.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=_t.lcs.getLocalByCoord(i)},Yl.prototype.getBounds=function(){return this.ir},Yl.prototype.setPath=function(t){t&&(t&&this.Ix(t),this.to())},Yl.prototype.destroy=function(){this.Px&&(this.Px.destroy(),delete this.Px),Gl.prototype.destroy.call(this)},Yl.prototype.moveWithPixel=function(t,i){for(var e=this._map,n=_t.at.getProjection(e.getView().au()),o=[],r=0,a=this.$x;r<a.length;r++){for(var s=[],h=0,l=a[r];h<l.length;h++){var f=l[h];s.push(n.moveWithPixel(f,[t,i],e.getZoom()))}o.push(s)}this.setPath(o)},Yl.prototype.moveWithPos=function(t,i){for(var e=this._map,n=_t.at.getProjection(e.getView().au()),o=[],r=0,a=this.$x;r<a.length;r++){for(var s=[],h=0,l=a[r];h<l.length;h++){var f=l[h];s.push(n.moveWithPos(f,[t,i]))}o.push(s)}this.setPath(_t.parseLngLatData(o))},Yl.prototype.getLength=function(){var t=this._opts&&this._opts.path;return _t.ys(t)?+_t.nL(t).toFixed(2):_t.Ox(t)?+_t.oL(t).toFixed(2):0},Yl.prototype.rL=function(){return this.sC},Yl.prototype.jx=function(){return this._opts&&this._opts.path&&0<this._opts.path.length},Yl.prototype.Ix=function(t){var i=_t.jsonLngLatData(t);this._opts.path=i,i=_t.aL(t),_t.Ox(i)?(this._opts.geodesic&&(i=_t.map(i,function(t){return _t.sL(t)})),this.Tx(i[0][0]),this.ir=ze.bS(i),this._map&&("d"===this._map.baseRender?this.X$(i):this.Q$(i))):console.error("error Polyline path")},Yl.prototype.rD=function(t){var i=_t.jsonLngLatData(t);this._opts.path=i,i=_t.aL(t),_t.Ox(i)?(this._opts.geodesic&&(i=_t.map(i,function(t){return _t.sL(t)})),this.Tx(i[0][0]),this.ir=ze.bS(i)):console.error("error Polyline path")},Yl.prototype.X$=function(t){for(var i=[],e=[],n=0,o=t;n<o.length;n++){for(var r=[],a=[],s=0,h=o[n];s<h.length;s++){var l=h[s],f=_t.at.getProjection("EPSG:3857").project(l[0],l[1]);r.push([f[0],f[1]]),a.push(l)}i.push(r),e.push(a)}this.$x=e,this.q$=i},Yl.prototype.Q$=function(t){for(var i=[],e=[],n=0,o=t;n<o.length;n++){for(var r=[],a=[],s=0,h=o[n];s<h.length;s++){var l=h[s],f=_t.at.getProjection("EPSG:3857").project(l[0],l[1]);r.push([f[0],f[1],0]),a.push(l)}this.P_(r),i.push(r),e.push(a)}this.$x=e,this.q$=i,this.D_(this.q$.slice(0))},Yl.prototype.D_=function(t){if(0!==t.length){this.Px?this.Px.reset():this.Px=new _t.J_;for(var i=this.Sx.center,e=0,n=_t.at.getProjection("EPSG:3857"),o=this.EI,r=n.getResolution(o),a=0,s=t;a<s.length;a++){for(var h=s[a],l=[],f=0,u=h.length;f<u;f+=1)l.push(_t.Bu(h[f][0]-i[0],h[f][1]-i[1]));var c=this._opts;10<=this.EI&&(this._opts.showDir||"dashed"===this._opts.strokeStyle)?e+=this.Px.eD(l,{X_:1,lineJoin:c.lineJoin,lineCap:c.lineCap},Math.floor(2048*r)).distance:e+=this.Px.hb(l,{X_:1,lineJoin:c.lineJoin,lineCap:c.lineCap}).distance}this.sC=e}},Yl.prototype.P_=function(t){t[0][2]=1/0,t[t.length-1][2]=1/0;var i=_t.at.getProjection("EPSG:3857").getResolution(16);!function t(i,e,n,o){for(var r=o,a=n-e>>1,s=n-e,h=n,l=i[e][0],f=i[e][1],u=i[n][0],c=i[n][1],d=e+1;d<n;d+=1){var p=ef(i[d][0],i[d][1],l,f,u,c);if(r<p)h=d,r=p;else if(p===r){var v=Math.abs(d-a);v<s&&(h=d,s=v)}}o<r&&(1<h-e&&t(i,e,h,o),i[h][2]=r,1<n-h&&t(i,h,n,o))}(t,0,t.length-1,i*i)},Yl);function Yl(t){var i=Gl.call(this)||this;return i.className="Overlay.CorePolyline",i.sC=0,i.Tx(t),i}var Zl,Xl={map:void 0,path:void 0,cursor:"",strokeColor:"#00D3FC",strokeWeight:2,strokeOpacity:.5,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],isOutline:!1,geodesic:!1,showDir:!1,outlineColor:"#00B2D5",borderWeight:1,lineJoin:"miter",lineCap:"butt",extData:{},zIndex:50,dirColor:"white",dirImg:"",lineGradient:void 0,noSelect:!1,innerOverlay:!1,zooms:[2,20]},Jl=(Zl=Vl,_t.Ei(ql,Zl),ql.prototype.getOptions=function(){return Ch({},this._opts)},ql.prototype.getPath=function(){if(this._opts&&this._opts.path)return _t.parseLngLatData(_t.yn(this._opts.path))},ql.prototype.destroy=function(){this.E_&&(this.E_.destroy(),delete this.E_),Zl.prototype.destroy.call(this)},ql.prototype.setOptions=function(t){var i=this._mergeOptions(t),e=function(t,i,e){for(var n=0,o=e.length;n<o;n+=1){var r=e[n];if(t[r]!==i[r])return!0}return!1}(this._opts,i,["path","lineCap","lineJoin","geodesic"]);i.lineGradient!==this._opts.lineGradient&&this.rC&&(this.rC.destroy(),delete this.rC),this._opts=i,this._checkMap(),e&&this.setPath(this._opts.path),this.to()},ql.prototype.init=function(t){var i=this,e=t||this._opts,n=this._mergeOptions(e);if(this._opts=n,this._opts.dirImg)if(this._opts.dirImg instanceof HTMLCanvasElement)this.F_=this._opts.dirImg;else{var o=this._opts.dirImg;this._map.z_.loadImage(this._opts.dirImg,{type:"dirImg",cb:function(t){t?i.F_=t.img:console.error("load dirImg error",o)}})}this.setPath(this._opts.path),this._map&&(this.W_(),this._map.setNeedUpdate(!0))},ql.prototype.render=function(t,i){},ql.prototype.O$=function(t,i){},ql.prototype.contains=function(t){if(!this.jx())return!1;if(this.ir&&!this.ir.contains(t))return!1;for(var i=this._map.getView(),e=i.getStatus().pitch*Math.PI/180,n=_t.parseLngLatData(t),o=i.ru().project(n.lng,n.lat),r=i.ru().getResolution(this._map.getZoom()),a=0,s=this.q$;a<s.length;a++){var h=s[a];if(_t.hL.lr(o,h)*Math.cos(e)<this._opts.strokeWeight*r)return!0}return!1},ql.prototype.toGeometry=function(){var t=this._opts.path;if(t)return _t.ys(t)?{type:"LineString",coordinates:t}:_t.Ox(t)?{type:"MultiLineString",coordinates:t}:void 0},ql.prototype.U_=function(t){this.F_&&(this.E_||(this.E_=t.createTexture(this.F_,{Zi:!0}),this.E_.bind(t.gl.CLAMP_TO_EDGE,t.gl.LINEAR,t.gl.LINEAR)))},ql.prototype.aC=function(t,i){if(!this.rC){var e=function(t){var i=document.createElement("canvas");i.height=1,i.width=4096;for(var e=i.getContext("2d"),n=e.createImageData(4096,1),o=0,r=0;r<4096;r++){for(var a=void 0;o<t.length;o++){if(o===t.length-1){a=t[o][1];break}if(!(4096*t[o+1][0]<r)){a=t[o][1];break}}a=t[o][1];var s=_t.Util.color2RgbaArray(a);n.data[4*r]=255*s[0],n.data[4*r+1]=255*s[1],n.data[4*r+2]=255*s[2],n.data[4*r+3]=255*s[3]}return e.putImageData(n,0,0),i}(i.values);this.rC=t.createTexture(e,{Zi:!0});var n=t.gl;this.rC.bind(n.CLAMP_TO_EDGE,n.NEAREST,n.NEAREST_MIPMAP_NEAREST)}},ql);function ql(t){void 0===t&&(t={});var l=Zl.call(this)||this;return l._afterSetMap=function(){l._map&&"d"!==l._map.baseRender&&l._map.on("zoomend",l.W_)},l._beforeRemoveMap=function(){l._map&&"d"!==l._map.baseRender&&l._map.off("zoomend",l.W_),Zl.prototype._beforeRemoveMap.call(l)},l.W_=function(){if(Dh.isWebGL&&l._map&&l.q$&&!l._opts.geodesic){var t=l._map,i=Math.min(Math.floor(t.getZoom()),20);if(l.EI!==i)if(i<18){l.EI=i;for(var e=_t.at.getProjection("EPSG:3857").getResolution(Math.min(Math.floor(t.getZoom()),18)),n=[],o=0,r=l.q$;o<r.length;o++){for(var a=r[o],s=[],h=0;h<a.length;h+=1)a[h][2]>e*e*1&&s.push([a[h][0],a[h][1]]);n.push(s)}l.D_(n)}else l.EI=i,l.D_(l.q$)}},l.className="Overlay.Polyline",l.Cx=_t.assign({},Xl,{strokeColor:"#00B2D5"}),l.EI=-1,l._opts=l._mergeOptions(t),l._opts.path&&l.rD(l._opts.path),l._checkMap(),l}var Ql,Kl=(Ql=ml,_t.Ei(tf,Ql),tf.prototype.hide=function(){this.vb&&this.vb.hide(),this._map&&this._map.setNeedUpdate(!0)},tf.prototype.show=function(){this.vb&&this.vb.show(),this._map&&this._map.setNeedUpdate(!0)},tf.prototype.destroy=function(){this.vb&&this.vb.destroy(),Ql.prototype.destroy.call(this)},tf.prototype.getOptions=function(){return Ch({},this._opts)},tf.prototype.contains=function(t){return!!this.vb&&this.vb.contains(t)},tf.prototype.render=function(t,i){},tf.prototype.b_=function(t){Ql.prototype.b_.call(this,t),this.vb&&this.vb.b_(t)},tf.prototype.getLength=function(){return this.vb?this.vb.getLength():0},tf.prototype.getBounds=function(){if(this.vb)return this.vb.getBounds()},tf);function tf(){return null!==Ql&&Ql.apply(this,arguments)||this}function ef(t,i,e,n,o,r){var a=o-e,s=r-n;if(0!==a||0!==s){var h=((t-e)*a+(i-n)*s)/(a*a+s*s);1<h?(e=o,n=r):0<h&&(e+=a*h,n+=s*h)}return(a=t-e)*a+(s=i-n)*s}var nf,of=(nf=_t.LngLat,_t.Ei(rf,nf),rf.prototype.lL=function(){for(var t=[],i=0,e=this.controlPoints;i<e.length;i++){var n=e[i];t.push(n.toJSON())}return t.push(this.toJSON()),t},rf.prototype.moveWithPos=function(t,i,e){for(var n=t.moveWithPos(this.toJSON(),[i,e]),o=[],r=0,a=this.controlPoints.length;r<a;r++){var s=this.controlPoints[r];o.push(t.moveWithPos(s.toJSON(),[i,e]))}return o.push(n),new rf(o)},rf.prototype.moveWithPixel=function(t,i,e,n){for(var o=t.moveWithPixel(this.toJSON(),[i,e],n),r=[],a=0,s=this.controlPoints.length;a<s;a++){var h=this.controlPoints[a];r.push(t.moveWithPixel(h.toJSON(),[i,e],n))}return r.push(o),new rf(r)},rf);function rf(t){var i=this;if(_t.ys(t)){var e=t.length;i=nf.call(this,t[e-1][0],t[e-1][1])||this;for(var n=[],o=0,r=e-1;o<r;o+=1){var a=t[o][0],s=t[o][1];n.push(new _t.LngLat(a,s))}i.controlPoints=n}else{for(e=t.length,i=nf.call(this,t[e-2],t[e-1])||this,n=[],o=0,r=e-2;o<r;o+=2)a=t[o],s=t[o+1],n.push(new _t.LngLat(a,s));i.controlPoints=n}return i}var af,sf=(af=Kl,_t.Ei(hf,af),Object.defineProperty(hf.prototype,"F$",{get:function(){if(this.vb&&this.vb.F$)return this.vb.F$},eb:!0,nb:!0}),hf.prototype.init=function(t){var i=t||this._opts;if(this._opts=this._mergeOptions(i),this.vb){var e=this.mb(this._opts);this.vb.setOptions(e)}else this.vb=new Jl(this.mb(this._opts)),this.vb&&(this.vb.Zx(this._map),this.vb.init());this._map&&this._map.setNeedUpdate(!0)},hf.prototype.setOptions=function(t){var i=this._mergeOptions(t),e=!_t.isEqual(this._opts.path,i.path);if(this._opts=i,this._checkMap(),this.vb&&e)this.vb.setOptions(this.mb(this._opts));else if(this.vb){var n=_t.assign({},t);delete n.path,this.vb.setOptions(n)}this.to()},hf.prototype.getPath=function(){if(this._opts)return this._opts.path},hf.prototype.setPath=function(t){t&&this.setOptions({path:t})},hf.prototype.O$=function(t,i){this.vb&&this.vb.O$(t,i)},hf.prototype.moveWithPos=function(t,i){var e=this._map,n=_t.at.getProjection(e.getView().au()),o=this.getPath();if(o){for(var r=[],a=0,s=o;a<s.length;a++){var h=s[a],l=new of(h);l=l.moveWithPos(n,t,i),r.push(l.lL())}this.setPath(r)}},hf.prototype.moveWithPixel=function(t,i){var e=this._map,n=_t.at.getProjection(e.getView().au()),o=this.getPath();if(o){for(var r=[],a=e.getZoom(),s=0,h=o;s<h.length;s++){var l=h[s],f=new of(l);f=f.moveWithPixel(n,t,i,a),r.push(f.lL())}this.setPath(r)}},hf.prototype.mb=function(t){this._map&&(this.bo=Math.floor(this._map.getZoom()));var i=t.path,e=[];if(i)for(var n=0,o=i;n<o.length;n++){var r=o[n];e.push(new of(r))}var a=this.yb(e),s=_t.assign({},t);return s.path=a,delete s.map,s},hf.prototype.yb=function(t){if(!this._map)return[];var i=_t.at.getProjection("EPSG:3857").getResolution(this._map.getZoom());return _t.bb.xb(t,i)},hf);function hf(t){void 0===t&&(t={});var i=af.call(this)||this;return i.className="Overlay.BezierCurve",i.Cx=_t.assign({},Xl),i.bo=3,i._afterSetMap=function(t){i.vb&&i.vb.Zx(t),i._map&&i._map.on("zoomend",i.gb)},i._beforeRemoveMap=function(){i._map&&i._map.off("zoomend",i.gb),i.vb&&delete i.vb.F$,af.prototype._beforeRemoveMap.call(i)},i.gb=function(){i._map&&Math.floor(i._map.getZoom())!==i.bo&&i.vb&&i.vb.setOptions(i.mb(i._opts))},i._opts=i._mergeOptions(t),i._checkMap(),i}var lf=function(t){void 0===t&&(t=[]);var e=t[2]||"",o=t[4],r=t[0];return e+="/maps",_t.Module.module=function(t,i){Array.isArray(t)||(t=[t]);var n=a(t);0===n.length?i&&i():(u.add(n,i),s(e+"/plugin?v="+o+"&cls="+n.join()+"&key="+r,function(){for(var t=0,i=n;t<i.length;t++){var e=i[t];u.finish(e)}}))},function(t,i){Array.isArray(t)||(t=[t]);var n=a(t);0===n.length?i():(u.add(n,i),s(e+"/plugin?v="+o+"&cls="+n.join()+"&key="+r,function(){for(var t=0,i=n;t<i.length;t++){var e=i[t];u.finish(e)}}))}}(config);n('.amap-custom{top:0;left:0;position:absolute}.amap-container img{max-width:none!important;max-height:none!important}.amap-container{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAAAf1JREFUeAHtmtGpAkEQBE9TMAi/zMb8MzCGU/97Ye8QunDrfQ7qNFUMS8Pbtom/fd8fEx/b/FymdIDL85p/wmmLgEJa5Ad7FTIA0xorpEV+sFchAzCtsUJa5Ad7FTIA0xorpEV+sPcyW1oG33f8WwL3qZ+blebnMs4DXGzqGWFv6hvSYx83KyRi6Q0V0mMfNyskYukNFdJjHzcrJGLpDRXSYx8329QjltrQpp7QH2jWv/5fA5t6EtKc+YY06YfdCglQmiOFNOmH3QoJUJojhTTph90KCVCaI4U06YfdNvUApTiyqSf4NvVEZdGZbwhMvEIUAiMAi+OFKARGABbHC1EIjAAsjk2dJcSmnnzY1BOVRWc+6jDxClEIjAAsjheiEBgBWBwvRCEwArA4/9LUbx+uLxjbM3Fs6omaTT1RWXTmow4TrxCFwAjA4nghCoERgMXxQhQCIwCL8y9NHYb1dBybekJnU09UFp35qMPEK0QhMAKwOF6IQmAEYHG8EIXACMDi2NRZQmzqyYdNPVFZdOajDhOvEIXACMDieCEKgRGAxfFCFAIjAItjU2cJsaknHzb1RGXRmY86TLxCFAIjAIvjhSgERgAWxwtRCIwALI5NnSXEpp582NQTlUVnPuow8QpRCIwALI4XohAYAVgcL0QhMAKwON+m/oRlWjrOG2SeYNIaKe7fAAAAAElFTkSuQmCC);background-color:#f1f1f1;touch-action:none;position:relative;overflow:hidden;-ms-touch-action:none}.amap-drags,.amap-layers{width:100%;height:100%;position:absolute;overflow:hidden;transform:translateZ(0)}.amap-layers canvas{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-layers .amap-layer-tile{transform:translateZ(0)}.amap-layers .amap-layer-tile,.amap-layers .amap-layer-tile img{position:absolute;top:0;left:0;user-select:none;-webkit-user-select:none}.amap-layers .amap-layer-image{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-layers .amap-layer-image img{position:absolute;top:0;left:0}.amap-layer img{pointer-events:none;display:block}.amap-layers .amap-layer-overlay{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-e,.amap-maps{width:100%;height:100%}.amap-e,.amap-layers,.amap-maps,.amap-tile-container{position:absolute;left:0;top:0;overflow:hidden}.amap-context,.amap-marker,.amap-markers,.amap-overlays{position:absolute;left:0;top:0}.amap-layers{z-index:0}.amap-overlays{z-index:110;cursor:default}.amap-markers{z-index:120}.amap-controls{z-index:150}.amap-copyright{display:block!important;left:77px;height:16px;bottom:0;padding-bottom:2px;font-size:11px;font-family:Arial,sans-serif}.amap-copyright,.amap-logo{position:absolute;z-index:160;user-select:none;-webkit-user-select:none}.amap-logo{bottom:1px;left:1px;height:20px}.amap-logo img{width:73px!important;height:20px!important;border:none;vertical-align:baseline!important;user-select:none;-webkit-user-select:none}.amap-icon{position:relative;z-index:1}.amap-icon img{position:absolute;z-index:-1}.amap-marker-label{position:absolute;z-index:2;border:1px solid #00f;background-color:#fff;white-space:nowrap;cursor:default;padding:3px;font-size:12px;line-height:14px}.amap-info{left:0;width:fit-content;width:-webkit-fit-content;width:-moz-max-content}.amap-info,.amap-menu{position:absolute;z-index:140}.amap-info-close{position:absolute;right:5px;top:5px;color:#c3c3c3;text-decoration:none;font:700 16px/14px Tahoma,Verdana,sans-serif;width:14px;height:14px;cursor:pointer}.amap-info-outer,.amap-menu-outer{box-shadow:0 1px 2px rgba(0,0,0,.1);background:none repeat scroll 0 0 #fff;border-radius:2px;padding:1px;text-align:left}.amap-info-contentContainer:hover .amap-info-outer,.amap-menu-outer:hover{box-shadow:0 1px 2px rgba(0,0,0,.3)}.amap-info-content{position:relative;background:#fff;padding:10px 18px 10px 10px;line-height:1.4;overflow:auto}.amap-marker-content{position:relative}.amap-info-sharp-old{overflow:hidden;position:absolute;background-image:url(http://webapi.amap.com/images/arrows.png)}.bottom-center .amap-info-sharp-old{height:12px;width:20px;background-position:center 12px;top:100%;left:50%;margin:-9px auto 0 -10px}.bottom-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -46px;top:100%;margin-top:-9px}.bottom-right .amap-info-sharp-old{height:12px;width:13px;top:-1px;background-position:-56px -46px;left:100%;margin-left:-13px;top:100%;margin-top:-9px}.middle-left .amap-info-sharp-old{height:20px;width:12px;background-position:0;top:50%;margin-top:-10px;margin-left:-11px}.center .amap-info-sharp-old{display:none}.middle-right .amap-info-sharp-old{height:20px;margin-right:0;width:12px;background-position:100%;left:100%;margin-left:-9px;top:50%;margin-top:-10px}.top-center .amap-info-sharp-old{height:12px;width:20px;background-position:top;top:0;left:50%;margin:-3px auto 0 -10px}.top-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -3px;top:0;margin-top:-3px}.top-right .amap-info-sharp-old{height:12px;width:13px;background-position:-56px -3px;left:100%;margin-left:-13px;top:0;margin-top:-3px}.amap-info-sharp{position:absolute}.bottom-center .amap-info-sharp{bottom:0;left:50%;border-top:8px solid #fff}.bottom-center .amap-info-sharp,.bottom-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.bottom-center .amap-info-sharp:after{position:absolute;content:"";margin-top:-7px;border-top:8px solid rgba(0,0,0,.3);filter:blur(2px);z-index:-1}.amap-info-contentContainer:hover.bottom-center .amap-info-sharp:after{border-top:8px solid rgba(0,0,0,.5)}.bottom-left .amap-info-sharp{border-color:transparent #fff;border-style:solid;border-width:0 0 10px 10px}.bottom-left .amap-info-sharp:after{position:absolute;content:"";margin-left:-10px;border-color:transparent rgba(0,0,0,.3);border-style:solid;border-width:0 0 10px 10px;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-left .amap-info-sharp:after{border-color:transparent rgba(0,0,0,.5)}.bottom-left .amap-info-content{border-radius:2px 2px 2px 0}.bottom-right .amap-info-sharp{right:0;border-top:10px solid #fff;border-left:10px solid transparent}.bottom-right .amap-info-sharp:after{position:absolute;margin-top:-9px;margin-left:-10px;content:"";border-top:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-right .amap-info-sharp:after{border-top:10px solid rgba(0,0,0,.5)}.bottom-right .amap-info-content{border-radius:2px 2px 0 2px}.top-center .amap-info-sharp{top:0;left:50%;border-bottom:8px solid #fff}.top-center .amap-info-sharp,.top-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.top-center .amap-info-sharp:after{position:absolute;content:"";margin-top:0;border-bottom:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.top-left .amap-info-sharp{left:0;top:0;border-bottom:10px solid #fff;border-right:10px solid transparent}.top-left .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:0;border-bottom:10px solid rgba(0,0,0,.3);border-right:10px solid transparent;filter:blur(1px);z-index:-1}.top-right .amap-info-sharp{right:0;top:0;border-bottom:10px solid #fff;border-left:10px solid transparent}.top-right .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:-10px;border-bottom:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.middle-right .amap-info-sharp{right:0;top:50%;border-left:8px solid #fff}.middle-right .amap-info-sharp,.middle-right .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-right .amap-info-sharp:after{position:absolute;content:"";margin-left:-8px;border-left:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-right .amap-info-sharp:after{border-left:8px solid rgba(0,0,0,.5)}.middle-left .amap-info-sharp{left:0;top:50%;border-right:8px solid #fff}.middle-left .amap-info-sharp,.middle-left .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-left .amap-info-sharp:after{position:absolute;content:"";margin-left:0;border-right:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-left .amap-info-sharp:after{border-right:8px solid rgba(0,0,0,.5)}.amap-info-contentContainer.top-center,.amap-info-contentContainer.top-left,.amap-info-contentContainer.top-right{padding-top:8px}.amap-info-contentContainer.bottom-center,.amap-info-contentContainer.bottom-left,.amap-info-contentContainer.bottom-right{padding-bottom:8px}.amap-info-contentContainer.middle-right{padding-right:8px}.amap-info-contentContainer.middle-left{padding-left:8px}.amap-menu-outer{margin:0;padding:0;list-style-type:none}ul.amap-menu-outer li{height:35px;line-height:35px;word-break:break-all;padding:0 10px;font-size:12px;white-space:nowrap}ul.amap-menu-outer li a{text-decoration:none;font-size:13px;margin:0 5px;color:#000;padding:5px}ul.amap-menu-outer li:hover{background-color:#f3f3ee}.amap-overlay-text-container{display:block;width:auto;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:#fff;padding:2px 3px;border:1px solid #ccc;border-radius:3px}.amap-overlay-text-container.amap-overlay-text-empty{display:none}.amap-info-content-ie8{border:1px solid #9c9c9c}.amap-control{position:absolute;-webkit-tap-highlight-color:transparent}.amap-toolbar{background-color:#fff;border-radius:4px;box-shadow:0 0 3px rgba(0,0,0,.5)}.amap-toolbar span{display:block;width:30px;height:30px;line-height:30px;text-align:center;border-radius:0 0 4px 4px;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:20px}.amap-toolbar span:first-child{border-bottom:1px solid #eee;border-radius:4px 4px 0 0}.amap-toolbar span:hover{font-weight:bolder;background-color:#f0f0f0}.amap-scalecontrol{pointer-events:none;background-color:hsla(0,0%,100%,.5);border-radius:2px}.amap-scalecontrol .amap-scale-text{font-size:10px;text-align:center;transition:width .3s}.amap-scalecontrol .amap-scale-line{position:relative;height:8px;left:2px}.amap-scalecontrol .amap-scale-edgeleft,.amap-scalecontrol .amap-scale-edgeright,.amap-scalecontrol .amap-scale-middle{position:absolute;background-color:#333;overflow:hidden;box-sizing:content-box!important}.amap-scalecontrol .amap-scale-edgeright{width:1px;height:6px;border:1px solid #fff;transition:left .3s}.amap-scalecontrol .amap-scale-middle{height:2px;left:2px;top:2px;border-top:1px solid #fff;border-bottom:1px solid #fff;transition:width .3s}.amap-scalecontrol .amap-scale-edgeleft{width:1px;height:6px;border:1px solid #fff}.amap-controlbar .amap-luopan{width:92px;height:92px;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -22px -30px no-repeat;background-size:348px 270px}.amap-luopan .amap-compass{top:46px;left:50%;position:absolute;margin:-24px;width:48px;height:48px;z-index:0;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -231px -26px no-repeat;background-size:348px 270px}.amap-luopan .amap-compass.amap-compass-black{background:url(http://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -231px -79px;background-size:348px 270px}.amap-luopan .amap-compass .amap-pointers{position:absolute;width:30px;height:48px;top:0;left:9px;border:none;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -281px -26px no-repeat;background-size:348px 270px}.amap-pitchDown,.amap-pitchUp{width:30px;height:25.5px;position:absolute;top:3.5px;margin-left:-15px;left:50%;z-index:1;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -302.5px -49px no-repeat;background-size:348px 270px}.amap-pitchDown:hover,.amap-pitchUp:hover{background:url(http://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -302.5px -23.5px;background-size:348px 270px}.amap-pitchDown{top:66px;transform:rotate(180deg);-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg);-moz-transform:rotate(180deg)}.amap-rotateLeft,.amap-rotateRight{width:21px;height:52px;top:19px;position:absolute;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -301.5px -77px no-repeat;background-size:348px 270px}.amap-rotateLeft:hover,.amap-rotateRight:hover{background:url(http://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -278.5px -76.5px;background-size:348px 270px}.amap-rotateLeft{left:5px}.amap-rotateRight{right:5px;transform:rotateY(180deg);-ms-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-o-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.amap-ctrl-icon-layer{width:30px;height:30px}.amap-ctrl-icon-layer,.amap-ctrl-list-layer{background-color:#fff;border-radius:3px;box-shadow:0 0 4px 1px rgba(0,0,0,.2)}.amap-ctrl-list-layer{position:absolute;top:0;right:0;overflow:hidden;z-index:1}.amap-ctrl-list-layer ul{overflow:hidden;list-style:none;margin:0;padding:5px 8px}.amap-ctrl-list-layer ul li{float:left;width:100%}.amap-ctrl-list-layer ul p{white-space:nowrap;font-size:12px;height:20px;line-height:20px;padding-left:5px;margin:0 10px}.amap-ctrl-list-layer input{float:left;height:20px;width:12px;margin:0 5px}.amap-ctrl-base-layer{border-bottom:1px solid #eee}.amap-ranging-label{_width:10px;font-size:12px;line-height:14px;background:#fff;border:1px solid #ccc;padding:3px 7px 3px 2px;white-space:nowrap}.amap-ranging-label span{height:12px;vertical-align:center;display:inline-block;white-space:nowrap;margin-left:5px}.amap-popup{text-align:center;position:fixed;top:50%;left:50%;margin-left:-165px;margin-top:-170px}.amap-popup-content{vertical-align:middle;line-height:200px;overflow:hidden;background-color:#fff;border:solid;border-width:3px 1px;border-radius:5px;border-color:#ddf;margin:0 auto;text-align:center;height:340px}.amap-labellayers{position:absolute;top:0;left:0;transform-origin:0 0}.amap-indoormap-floorbar-control{position:absolute;width:40px;text-align:center;line-height:1.3em;border-radius:20px;box-shadow:0 0 3px 3px rgba(0,0,0,.1);background-color:#fff;margin-top:-100px}.amap-indoormap-floorbar-control .floor-list-box{max-height:160px;overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;-webkit-user-select:none;-moz-user-select:none}.floor-list-box::-webkit-scrollbar{width:0!important;height:0!important}.amap-indoormap-floorbar-control ul{list-style:none;margin:0;padding:0 4px;width:40px;box-sizing:border-box}.amap-indoormap-floorbar-control ul li{height:32px;width:32px;border-radius:16px}.amap-indoormap-floorbar-control ul li:hover{background-color:#efefef}.amap-indoormap-floorbar-control ul li div{height:32px;text-align:center;line-height:32px;font-size:12px}.amap-indoormap-floorbar-control ul li.selected{color:#fff;background-color:#4196ff}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{height:32px;width:32px;margin:0 auto;border-radius:16px;position:relative}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;bottom:4px;left:0;right:0;width:0;height:0;border:7px solid transparent;border-top-color:#777}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;bottom:11px}.amap-indoormap-floorbar-control .floor-plus:hover:after{border-bottom-color:#222}.amap-indoormap-floorbar-control .floor-minus:hover:after{border-top-color:#222}.amap-indoormap-floorbar-control .floor-plus.disabled:after{border-bottom-color:#ddd}.amap-indoormap-floorbar-control .floor-minus.disabled:after{border-top-color:#ddd}.amap-indoormap-floorbar-control .floor-list-item.selected:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}');var ff=window.location.href;function uf(){return xf}0!==ff.indexOf("http")&&window.parent&&window.parent!==window&&(ff=window.parent.location.href),ff=encodeURIComponent(ff);var cf=config[2].split(":")[0],df=cf+"://restapi.amap.com",pf=config[2].split(",")[0],vf=pf+"/theme/v1.3/markers/"+(_t._.Ue?"b":"n"),mf=cf+"://webrd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x=[x]&y=[y]&z=[z]",yf=cf+"://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x=[x]&y=[y]&z=[z]",xf={key:config[0],host:config[2],server:df,protocol:cf,version:config[4],adcode:config[6],callback:config[5],appname:ff,client:pf,markers:vf,pc:"http://gaode.com",mo:"http://m.amap.com",workerUrl:"",YT:mf,qT:yf,y_:_t._.$e?yf:mf,v_:"\x3c!--v2.0--\x3e &copy "+(new Date).getFullYear()+" AutoNavi "},gf=(new Date).getTime(),bf=["platform=JS&s=rsv3&logversion=2.0&product=JsInit&key="+xf.key,"t="+gf];bf.push("sdkversion=2.0"),bf.push("appname="+ff),bf.push("csid="+_t.Util.sx()),bf.push("resolution="+window.innerWidth+"*"+window.innerHeight),bf.push("mob="+(_t._.$e?1:0)),bf.push("vt="+(_t._.isWebGL?1:0)),bf.push("dpr="+window.devicePixelRatio),bf.push("scale="+(_t._.Ue?2:1)),bf.push("detect="+_t._.Ue);var _f=xf.server+"/v3/log/init?"+bf.join("&");return dn.JSONP(_f),function(t){var i;return(i=t)[1]&&(Qs=i[1].slice(-2),Xs=i[1].slice(0,4)),{Map:th,ImageLayer:sh,createDefaultLayer:Xh,TileLayer:_t.TileLayer,NebulaLayer:Mn,Buildings:Ph,Indoor:Yh,SkyLayer:Ur,DistrictLayer:_t.DistrictLayer,CanvasLayer:uh,CustomLayer:yh,GLCustomLayer:il,LabelsLayer:Rr,MassMarks:_h,Event:_t.Event,version:"2.0",plugin:lf,LngLat:_t.LngLat,Pixel:_t.Pixel,Size:_t.Size,Icon:os,Bounds:ze,extent:Se,Marker:Rs,Text:zh,InfoWindow:Bs,ContextMenu:Js,LabelMarker:sa,Polygon:kl,Rectangle:Al,Ellipse:$l,Circle:Fl,CircleMarker:Wl,Polyline:Jl,BezierCurve:sf,OverlayGroup:fl,VectorLayer:Hh,LayerGroup:ol,Control:Ih,DomUtil:P,Util:_t.Util,GeometryUtil:_t.GeometryUtil,Browser:Dh,UA:{ie:Dh.ie,ie9:Dh.ie9,ie11:Dh.ie11,mobile:Dh.mobile,android:Dh.android,ios:Dh.ios},getConfig:uf,WebService:Da,extend:Ch,Http:dn,addCss:n,BuryPoint:Ca,lcs:_t.lcs,convertFrom:Pa,Heatmap:al,IndoorMap:hl,BuildingLayer:Ph}}});var __AMap_callback=AMap.getConfig().callback;if(__AMap_callback){var tryGetCallback=function(){var c=__AMap_callback.split("."),context=window;do{if(!(context=context[c.shift()]))return null}while(c.length);return context||null},tryCallback=function(isFinalTry){var func=tryGetCallback();if(func){if("function"!=typeof func)throw new Error(__AMap_callback+" is not a function!");setTimeout(func,1)}else if(isFinalTry)throw new Error("Can not find callback: "+__AMap_callback+", try define it before load JsApi!")};document.body&&tryGetCallback()?tryCallback():setTimeout(function(){tryCallback(!0)},1)}return AMap});
(typeof _cssload_=="function")&&_cssload_("logo",".amap-logo{display:block!important;pointer-events:none;}",true)})(["e3a269612ee8231d18c8865f6ed9d68e",[118.344933,29.188757,120.721945,30.566516,120.153576,30.287459],"https://webapi.amap.com",1,"2.0",null,"330100","",true,false,false,true,"1589389082-20200422-1",false])